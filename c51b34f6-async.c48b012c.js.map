{"version":3,"sources":["components/code-highlighter/demo/with-xmarkdown.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/x/x/packages/x/components/code-highlighter/demo/with-xmarkdown.tsx?watch=parent';import { Bubble, CodeHighlighter } from '@ant-design/x';\nimport XMarkdown, { type ComponentProps } from '@ant-design/x-markdown';\nimport { Button, Flex } from 'antd';\nimport React from 'react';\n\nconst text = `\nHere's a Python code block example that demonstrates how to calculate Fibonacci numbers:\n\n\\`\\`\\` python\ndef fibonacci(n):\n    \"\"\"\n    Calculate the nth Fibonacci number\n    :param n: The position in the Fibonacci sequence (must be a positive integer)\n    :return: The value at position n\n    \"\"\"\n    if n <= 0:\n        return 0\n    elif n == 1:\n        return 1\n    else:\n        a, b = 0, 1\n        for _ in range(2, n+1):\n            a, b = b, a + b\n        return b\n\n# Example usage\nif __name__ == \"__main__\":\n    num = 10\n    print(f\"The {num}th Fibonacci number is: {fibonacci(num)}\")\n    \n    # Print the first 15 Fibonacci numbers\n    print(\"First 15 Fibonacci numbers:\")\n    for i in range(1, 16):\n        print(fibonacci(i), end=\" \")\n\\`\\`\\`\n\nThis code includes:\n\n1. A function to compute Fibonacci numbers\n2. Docstring documentation\n3. Example usage in the main block\n4. A loop to print the first 15 numbers\n\nYou can modify the parameters or output format as needed. The Fibonacci sequence here starts with fib(1) = 1, fib(2) = 1.\n`;\n\nconst Code: React.FC<ComponentProps> = (props) => {\n  const { className, children } = props;\n  const lang = className?.match(/language-(\\w+)/)?.[1] || '';\n\n  if (typeof children !== 'string') return null;\n  return <CodeHighlighter lang={lang}>{children}</CodeHighlighter>;\n};\n\nconst App = () => {\n  const [index, setIndex] = React.useState(0);\n  const timer = React.useRef<NodeJS.Timeout | null>(null);\n  const contentRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (index >= text.length) return;\n\n    timer.current = setTimeout(() => {\n      setIndex(Math.min(index + 5, text.length));\n    }, 20);\n\n    return () => {\n      if (timer.current) {\n        clearTimeout(timer.current);\n        timer.current = null;\n      }\n    };\n  }, [index]);\n\n  React.useEffect(() => {\n    if (contentRef.current && index > 0 && index < text.length) {\n      const { scrollHeight, clientHeight } = contentRef.current;\n      if (scrollHeight > clientHeight) {\n        contentRef.current.scrollTo({\n          top: scrollHeight,\n          behavior: 'smooth',\n        });\n      }\n    }\n  }, [index]);\n\n  return (\n    <Flex vertical gap=\"small\" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>\n      <Flex justify=\"flex-end\">\n        <Button onClick={() => setIndex(0)}>Re-Render</Button>\n      </Flex>\n\n      <Bubble\n        content={text.slice(0, index)}\n        contentRender={(content) => (\n          <XMarkdown components={{ code: Code }} paragraphTag=\"div\">\n            {content}\n          </XMarkdown>\n        )}\n        variant=\"outlined\"\n      />\n    </Flex>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"6PAyGA,+CAAA,4CAzGO,oBAA4I,oBACpG,iBAClB,oBACX,aAElB,IAAM,EAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCd,CAAC,CAEK,EAAiC,AAAC,QAEzB,EADb,GAAM,CAAE,UAAA,CAAS,CAAE,SAAA,CAAQ,CAAE,CAAG,EAC1B,EAAO,OAAA,iBAAA,EAAA,EAAW,KAAK,CAAC,6BAAjB,SAAA,CAAoC,CAAC,EAAE,GAAI,SAExD,AAAI,AAAoB,UAApB,OAAO,EAA8B,KAClC,UAAC,iBAAe,EAAC,KAAM,WAAO,IACvC,MAqDA,EAnDY,KACV,GAAM,CAAC,EAAO,EAAS,CAAG,SAAK,CAAC,QAAQ,CAAC,GACnC,EAAQ,SAAK,CAAC,MAAM,CAAwB,MAC5C,EAAa,SAAK,CAAC,MAAM,CAAiB,MA6BhD,OA3BA,SAAK,CAAC,SAAS,CAAC,KACd,IAAI,CAAA,GAAS,EAAK,MAAM,AAAD,EAMvB,OAJA,EAAM,OAAO,CAAG,WAAW,KACzB,EAAS,KAAK,GAAG,CAAC,EAAQ,EAAG,EAAK,MAAM,GAC1C,EAAG,IAEI,KACD,EAAM,OAAO,GACf,aAAa,EAAM,OAAO,EAC1B,EAAM,OAAO,CAAG,MAEpB,EACF,EAAG,CAAC,EAAM,EAEV,SAAK,CAAC,SAAS,CAAC,KACd,GAAI,EAAW,OAAO,EAAI,EAAQ,GAAK,EAAQ,EAAK,MAAM,CAAE,CAC1D,GAAM,CAAE,aAAA,CAAY,CAAE,aAAA,CAAY,CAAE,CAAG,EAAW,OAAO,CACrD,EAAe,GACjB,EAAW,OAAO,CAAC,QAAQ,CAAC,CAC1B,IAAK,EACL,SAAU,QACZ,GAEJ,CACF,EAAG,CAAC,EAAM,EAGR,WAAC,MAAI,EAAC,QAAQ,IAAC,IAAI,QAAQ,MAAO,CAAE,OAAQ,IAAK,SAAU,MAAO,EAAG,IAAK,YACxE,UAAC,MAAI,EAAC,QAAQ,oBACZ,UAAC,QAAM,EAAC,QAAS,IAAM,EAAS,YAAI,gBAGtC,UAAC,QAAM,EACL,QAAS,EAAK,KAAK,CAAC,EAAG,GACvB,cAAe,AAAC,GACd,UAAC,SAAS,EAAC,WAAY,CAAE,KAAM,CAAK,EAAG,aAAa,eACjD,IAGL,QAAQ,gBAIhB"}