---
name: x-request
version: 2.2.2-beta.7
description: ä¸“æ³¨è®²è§£ XRequest çš„å®é™…é…ç½®å’Œä½¿ç”¨ï¼ŒåŸºäºå®˜æ–¹æ–‡æ¡£æä¾›å‡†ç¡®çš„é…ç½®è¯´æ˜
---

# ğŸ¯ æŠ€èƒ½å®šä½

**æœ¬æŠ€èƒ½ä¸“æ³¨è§£å†³**ï¼šå¦‚ä½•æ­£ç¡®é…ç½® XRequest æ¥é€‚é…å„ç§æµå¼æ¥å£éœ€æ±‚ã€‚

# ç›®å½•å¯¼èˆª

- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) - 3åˆ†é’Ÿä¸Šæ‰‹
  - [ä¾èµ–ç®¡ç†](#ä¾èµ–ç®¡ç†)
  - [åŸºç¡€é…ç½®](#åŸºç¡€é…ç½®)
- [ğŸ“¦ æŠ€æœ¯æ ˆæ¦‚è§ˆ](#-æŠ€æœ¯æ ˆæ¦‚è§ˆ)
- [ğŸ”§ æ ¸å¿ƒé…ç½®è¯¦è§£](#-æ ¸å¿ƒé…ç½®è¯¦è§£)
  - [å…¨å±€é…ç½®](#1-å…¨å±€é…ç½®)
  - [å®‰å…¨é…ç½®](#2-å®‰å…¨é…ç½®)
  - [æµå¼é…ç½®](#3-æµå¼é…ç½®)
- [ğŸ›¡ï¸ å®‰å…¨æŒ‡å—](#ï¸-å®‰å…¨æŒ‡å—)
  - [ç¯å¢ƒå®‰å…¨é…ç½®](#ç¯å¢ƒå®‰å…¨é…ç½®)
  - [è®¤è¯æ–¹å¼å¯¹æ¯”](#è®¤è¯æ–¹å¼å¯¹æ¯”)
- [ğŸ” è°ƒè¯•ä¸æµ‹è¯•](#-è°ƒè¯•ä¸æµ‹è¯•)
  - [è°ƒè¯•é…ç½®](#è°ƒè¯•é…ç½®)
  - [é…ç½®éªŒè¯](#é…ç½®éªŒè¯)
- [ğŸ“‹ ä½¿ç”¨åœºæ™¯](#-ä½¿ç”¨åœºæ™¯)
  - [ç‹¬ç«‹ä½¿ç”¨](#ç‹¬ç«‹ä½¿ç”¨)
  - [é…åˆå…¶ä»–æŠ€èƒ½](#é…åˆå…¶ä»–æŠ€èƒ½)
- [ğŸš¨ å¼€å‘è§„åˆ™](#-å¼€å‘è§„åˆ™)
- [ğŸ”— å‚è€ƒèµ„æº](#-å‚è€ƒèµ„æº)
  - [ğŸ“š æ ¸å¿ƒå‚è€ƒæ–‡æ¡£](#-æ ¸å¿ƒå‚è€ƒæ–‡æ¡£)
  - [ğŸŒ SDKå®˜æ–¹æ–‡æ¡£](#-SDKå®˜æ–¹æ–‡æ¡£)
  - [ğŸ’» ç¤ºä¾‹ä»£ç ](#-ç¤ºä¾‹ä»£ç )

# ğŸš€ å¿«é€Ÿå¼€å§‹

## ä¾èµ–ç®¡ç†

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

| ä¾èµ–åŒ…                | ç‰ˆæœ¬è¦æ±‚ | è‡ªåŠ¨å®‰è£… | ä½œç”¨                      |
| --------------------- | -------- | -------- | ------------------------- |
| **@ant-design/x-sdk** | â‰¥2.2.2   | âœ…       | æ ¸å¿ƒSDKï¼ŒåŒ…å«XRequestå·¥å…· |

### ğŸ› ï¸ ä¸€é”®å®‰è£…

```bash
# æ¨èä½¿ç”¨ tnpm
tnpm install @ant-design/x-sdk

# æˆ–ä½¿ç”¨ npm
npm add @ant-design/x-sdk

# æ£€æŸ¥ç‰ˆæœ¬
npm ls @ant-design/x-sdk
```

## åŸºç¡€é…ç½®

### æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼

```typescript
import { XRequest } from '@ant-design/x-sdk';

// æœ€ç®€é…ç½®ï¼šä»…éœ€æä¾›APIåœ°å€
const request = XRequest('https://api.example.com/chat');

// å¦‚éœ€æ‰‹åŠ¨æ§åˆ¶ï¼ˆç”¨äºProvideråœºæ™¯ï¼‰
const providerRequest = XRequest('https://api.example.com/chat', {
  manual: true, // ä»…æ­¤é¡¹é€šå¸¸éœ€è¦æ˜¾å¼é…ç½®
});
```

> ğŸ’¡ **æç¤º**ï¼šXRequest å·²å†…ç½®åˆç†çš„é»˜è®¤é…ç½®ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹åªéœ€æä¾›APIåœ°å€å³å¯ä½¿ç”¨ã€‚

# ğŸ“¦ æŠ€æœ¯æ ˆæ¦‚è§ˆ

## ğŸ—ï¸ æŠ€æœ¯æ ˆæ¶æ„

```mermaid
graph TD
    A[XRequest] --> B[ç½‘ç»œè¯·æ±‚]
    A --> C[è®¤è¯ç®¡ç†]
    A --> D[é”™è¯¯å¤„ç†]
    A --> E[æµå¼å¤„ç†]
    B --> F[fetchå°è£…]
    C --> G[Tokenç®¡ç†]
    D --> H[é‡è¯•æœºåˆ¶]
    E --> I[Server-Sent Events]
```

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ         | è§’è‰²å®šä½    | æ ¸å¿ƒèŒè´£                         | ä½¿ç”¨åœºæ™¯     |
| ------------ | ----------- | -------------------------------- | ------------ |
| **XRequest** | ğŸŒ è¯·æ±‚å·¥å…· | å¤„ç†æ‰€æœ‰ç½‘ç»œé€šä¿¡ã€è®¤è¯ã€é”™è¯¯å¤„ç† | ç»Ÿä¸€è¯·æ±‚ç®¡ç† |
| **å…¨å±€é…ç½®** | âš™ï¸ é…ç½®ä¸­å¿ƒ | ä¸€æ¬¡é…ç½®ï¼Œå¤šå¤„ä½¿ç”¨               | å‡å°‘é‡å¤ä»£ç  |
| **æµå¼é…ç½®** | ğŸ”„ æµå¼å¤„ç† | æ”¯æŒSSEå’ŒJSONå“åº”æ ¼å¼            | AIå¯¹è¯åœºæ™¯   |

# ğŸ”§ æ ¸å¿ƒé…ç½®è¯¦è§£

æ ¸å¿ƒåŠŸèƒ½å‚è€ƒå†…å®¹ [CORE.md](reference/CORE.md)

# ğŸ›¡ï¸ å®‰å…¨æŒ‡å—

## ç¯å¢ƒå®‰å…¨é…ç½®

### ğŸŒ ä¸åŒç¯å¢ƒçš„å®‰å…¨ç­–ç•¥

| è¿è¡Œç¯å¢ƒ        | å®‰å…¨ç­‰çº§ | é…ç½®æ–¹å¼        | é£é™©è¯´æ˜             |
| --------------- | -------- | --------------- | -------------------- |
| **æµè§ˆå™¨å‰ç«¯**  | ğŸ”´ é«˜å±  | âŒ ç¦æ­¢é…ç½®å¯†é’¥ | å¯†é’¥ä¼šç›´æ¥æš´éœ²ç»™ç”¨æˆ· |
| **Node.jsåç«¯** | ğŸŸ¢ å®‰å…¨  | âœ… ç¯å¢ƒå˜é‡é…ç½® | å¯†é’¥å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯   |
| **ä»£ç†æœåŠ¡**    | ğŸŸ¢ å®‰å…¨  | âœ… åŒåŸŸä»£ç†è½¬å‘ | å¯†é’¥ç”±ä»£ç†æœåŠ¡ç®¡ç†   |

### ğŸ” è®¤è¯æ–¹å¼å¯¹æ¯”

| è®¤è¯æ–¹å¼           | é€‚ç”¨ç¯å¢ƒ | é…ç½®ç¤ºä¾‹                        | å®‰å…¨æ€§  |
| ------------------ | -------- | ------------------------------- | ------- |
| **Bearer Token**   | Node.js  | `Bearer ${process.env.API_KEY}` | âœ… å®‰å…¨ |
| **API Key Header** | Node.js  | `X-API-Key: ${process.env.KEY}` | âœ… å®‰å…¨ |
| **ä»£ç†è½¬å‘**       | æµè§ˆå™¨   | `/api/proxy/service`            | âœ… å®‰å…¨ |
| **ç›´æ¥é…ç½®**       | æµè§ˆå™¨   | `Bearer sk-xxx`                 | âŒ å±é™© |

# ğŸ” è°ƒè¯•ä¸æµ‹è¯•

## è°ƒè¯•é…ç½®

### ğŸ› ï¸ è°ƒè¯•æ¨¡æ¿

**Node.jsè°ƒè¯•é…ç½®**:

```typescript
// å®‰å…¨çš„è°ƒè¯•é…ç½®ï¼ˆNode.js ç¯å¢ƒï¼‰
const debugRequest = XRequest('https://your-api.com/chat', {
  headers: {
    Authorization: `Bearer ${process.env.DEBUG_API_KEY}`,
  },
  params: { query: 'æµ‹è¯•æ¶ˆæ¯' },
});
```

**å‰ç«¯è°ƒè¯•é…ç½®**:

```typescript
// å®‰å…¨çš„è°ƒè¯•é…ç½®ï¼ˆå‰ç«¯ç¯å¢ƒï¼‰
const debugRequest = XRequest('/api/debug/chat', {
  params: { query: 'æµ‹è¯•æ¶ˆæ¯' },
});
```

## é…ç½®éªŒè¯

### âœ… å®‰å…¨æ£€æŸ¥å·¥å…·

```typescript
// å®‰å…¨é…ç½®éªŒè¯å‡½æ•°
const validateSecurity = (config: any) => {
  const isBrowser = typeof window !== 'undefined';
  const hasAuth = config.headers?.Authorization || config.headers?.authorization;

  if (isBrowser && hasAuth) {
    throw new Error('âŒ å‰ç«¯ç¯å¢ƒç¦æ­¢é…ç½® Authorizationï¼Œå­˜åœ¨å¯†é’¥æ³„æ¼é£é™©ï¼');
  }

  console.log('âœ… å®‰å…¨é…ç½®æ£€æŸ¥é€šè¿‡');
  return true;
};

// ä½¿ç”¨ç¤ºä¾‹
validateSecurity({
  headers: {
    // ä¸è¦åŒ…å« Authorization
  },
});
```

# ğŸ“‹ ä½¿ç”¨åœºæ™¯

## ç‹¬ç«‹ä½¿ç”¨

### ğŸ¯ ç›´æ¥å‘èµ·è¯·æ±‚

```typescript
import { XRequest } from '@ant-design/x-sdk';

// æµ‹è¯•æ¥å£å¯ç”¨æ€§
const testRequest = XRequest('https://httpbin.org/post', {
  params: { test: 'data' },
});

// ç«‹å³å‘é€è¯·æ±‚
const response = await testRequest();
console.log(response);
```

## é…åˆå…¶ä»–æŠ€èƒ½

### ğŸ”„ æŠ€èƒ½åä½œæµç¨‹

```mermaid
graph TD
    A[x-request] -->|é…ç½®è¯·æ±‚| B[x-chat-provider]
    A -->|é…ç½®è¯·æ±‚| C[use-x-chat]
    B -->|æä¾›Provider| C
    A --> D[ç›´æ¥è¯·æ±‚]
```

| ä½¿ç”¨æ–¹å¼ | é…åˆæŠ€èƒ½ | ä½œç”¨ | ç¤ºä¾‹ |
| --- | --- | --- | --- |
| **ç‹¬ç«‹ä½¿ç”¨** | æ—  | ç›´æ¥å‘èµ·ç½‘ç»œè¯·æ±‚ | æµ‹è¯•æ¥å£å¯ç”¨æ€§ |
| **é…åˆ x-chat-provider** | x-chat-provider | ä¸ºè‡ªå®šä¹‰ Provider é…ç½®è¯·æ±‚ | é…ç½®ç§æœ‰ API |
| **é…åˆ use-x-chat** | use-x-chat | ä¸ºå†…ç½® Provider é…ç½®è¯·æ±‚ | é…ç½® OpenAI API |
| **å®Œæ•´ AI åº”ç”¨** | x-request â†’ x-chat-provider â†’ use-x-chat | ä¸ºæ•´ä¸ªç³»ç»Ÿé…ç½®è¯·æ±‚ | å®Œæ•´ AI å¯¹è¯åº”ç”¨ |

### âš ï¸ useXChat é›†æˆå®‰å…¨è­¦å‘Š

**é‡è¦è­¦å‘Šï¼šuseXChat ä»…ç”¨äºå‰ç«¯ç¯å¢ƒï¼ŒXRequest é…ç½®ä¸­ç¦æ­¢åŒ…å« Authorizationï¼**

**âŒ é”™è¯¯é…ç½®ï¼ˆå±é™©ï¼‰**:

```typescript
// æåº¦å±é™©ï¼šå¯†é’¥ä¼šç›´æ¥æš´éœ²ç»™æµè§ˆå™¨
const unsafeRequest = XRequest('https://api.openai.com/v1/chat/completions', {
  headers: {
    Authorization: 'Bearer sk-xxxxxxxxxxxxxx', // âŒ å±é™©ï¼
  },
  manual: true,
});
```

**âœ… æ­£ç¡®é…ç½®ï¼ˆå®‰å…¨ï¼‰**:

```typescript
// å‰ç«¯å®‰å…¨é…ç½®ï¼šä½¿ç”¨ä»£ç†æœåŠ¡
const safeRequest = XRequest('/api/proxy/openai', {
  params: {
    model: 'gpt-3.5-turbo',
    stream: true,
  },
  manual: true,
});
```

# ğŸš¨ å¼€å‘è§„åˆ™

## æµ‹è¯•ç”¨ä¾‹è§„åˆ™

- **å¦‚æœç”¨æˆ·æ²¡æœ‰æ˜ç¡®éœ€è¦æµ‹è¯•ç”¨ä¾‹ï¼Œåˆ™ä¸è¦æ·»åŠ æµ‹è¯•æ–‡ä»¶**
- **ä»…åœ¨ç”¨æˆ·æ˜ç¡®è¦æ±‚æ—¶æ‰åˆ›å»ºæµ‹è¯•ç”¨ä¾‹**

## ä»£ç è´¨é‡è§„åˆ™

- **å®Œæˆç¼–å†™åå¿…é¡»æ£€æŸ¥ç±»å‹**ï¼šè¿è¡Œ `tsc --noEmit` ç¡®ä¿æ— ç±»å‹é”™è¯¯
- **ä¿æŒä»£ç æ•´æ´**ï¼šç§»é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å˜é‡å’Œå¯¼å…¥

## âœ… é…ç½®æ£€æŸ¥æ¸…å•

ä½¿ç”¨ XRequest å‰è¯·ç¡®è®¤ä»¥ä¸‹é…ç½®å·²æ­£ç¡®è®¾ç½®ï¼š

### ğŸ” é…ç½®æ£€æŸ¥æ¸…å•

| æ£€æŸ¥é¡¹         | çŠ¶æ€            | è¯´æ˜                                                     |
| -------------- | --------------- | -------------------------------------------------------- |
| **API åœ°å€**   | âœ… å¿…é¡»é…ç½®     | `XRequest('https://api.xxx.com')`                        |
| **è®¤è¯ä¿¡æ¯**   | âš ï¸ ç¯å¢ƒç›¸å…³     | å‰ç«¯âŒç¦æ­¢ï¼ŒNode.jsâœ…å¯ç”¨                                |
| **manualé…ç½®** | âœ… Provideråœºæ™¯ | åœ¨Providerä¸­éœ€è¦è®¾ä¸º`true`ï¼Œå…¶ä»–åœºæ™¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè®¾ç½® |
| **å…¶ä»–é…ç½®**   | âŒ æ— éœ€é…ç½®     | å·²å†…ç½®åˆç†é»˜è®¤å€¼                                         |
| **æ¥å£å¯ç”¨æ€§** | âœ… å»ºè®®æµ‹è¯•     | ä½¿ç”¨è°ƒè¯•é…ç½®éªŒè¯                                         |

### ğŸ› ï¸ å¿«é€ŸéªŒè¯è„šæœ¬

```typescript
// è¿è¡Œå‰æ£€æŸ¥é…ç½®
const checkConfig = () => {
  const checks = [
    {
      name: 'å…¨å±€é…ç½®',
      test: () => {
        // æ£€æŸ¥æ˜¯å¦å·²è®¾ç½®å…¨å±€é…ç½®
        return true; // æ ¹æ®å®é™…æƒ…å†µæ£€æŸ¥
      },
    },
    {
      name: 'å®‰å…¨é…ç½®',
      test: () => validateSecurity(globalConfig),
    },
    {
      name: 'ç±»å‹æ£€æŸ¥',
      test: () => {
        // è¿è¡Œ tsc --noEmit
        return true;
      },
    },
  ];

  checks.forEach((check) => {
    console.log(`${check.name}: ${check.test() ? 'âœ…' : 'âŒ'}`);
  });
};
```

## ğŸ¯ æŠ€èƒ½åä½œ

```mermaid
graph LR
    A[x-request] -->|é…ç½®è¯·æ±‚| B[x-chat-provider]
    A -->|é…ç½®è¯·æ±‚| C[use-x-chat]
    B -->|æä¾›Provider| C
```

### ğŸ“Š æŠ€èƒ½ä½¿ç”¨å¯¹ç…§è¡¨

| ä½¿ç”¨åœºæ™¯ | æ‰€éœ€æŠ€èƒ½ | ä½¿ç”¨é¡ºåº | å®Œæˆæ—¶é—´ |
| --- | --- | --- | --- |
| **æµ‹è¯•æ¥å£** | x-request | ç›´æ¥ä½¿ç”¨ | 2åˆ†é’Ÿ |
| **ç§æœ‰APIé€‚é…** | x-request â†’ x-chat-provider | å…ˆé…ç½®è¯·æ±‚ï¼Œå†åˆ›å»ºProvider | 10åˆ†é’Ÿ |
| **æ ‡å‡†AIåº”ç”¨** | x-request â†’ use-x-chat | å…ˆé…ç½®è¯·æ±‚ï¼Œå†æ„å»ºç•Œé¢ | 15åˆ†é’Ÿ |
| **å®Œæ•´è‡ªå®šä¹‰** | x-request â†’ x-chat-provider â†’ use-x-chat | å®Œæ•´å·¥ä½œæµ | 30åˆ†é’Ÿ |

# ğŸ”— å‚è€ƒèµ„æº

## ğŸ“š æ ¸å¿ƒå‚è€ƒæ–‡æ¡£

- [API.md](reference/API.md) - å®Œæ•´çš„ API å‚è€ƒæ–‡æ¡£
- [EXAMPLES_SERVICE_PROVIDER.md](reference/EXAMPLES_SERVICE_PROVIDER.md) - å„æœåŠ¡å•†é…ç½®ç¤ºä¾‹

## ğŸŒ SDKå®˜æ–¹æ–‡æ¡£

- [useXChat å®˜æ–¹æ–‡æ¡£](https://github.com/ant-design/x/blob/main/packages/x/docs/x-sdk/use-x-chat.zh-CN.md)
- [XRequest å®˜æ–¹æ–‡æ¡£](https://github.com/ant-design/x/blob/main/packages/x/docs/x-sdk/x-request.zh-CN.md)
- [Chat Provider å®˜æ–¹æ–‡æ¡£](https://github.com/ant-design/x/blob/main/packages/x/docs/x-sdk/chat-provider.zh-CN.md)

## ğŸ’» ç¤ºä¾‹ä»£ç 

- [custom-provider-width-ui.tsx](https://github.com/ant-design/x/blob/main/packages/x/docs/x-sdk/demos/chat-providers/custom-provider-width-ui.tsx) - è‡ªå®šä¹‰ Provider å®Œæ•´ç¤ºä¾‹
