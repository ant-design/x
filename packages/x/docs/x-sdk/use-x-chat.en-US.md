---
group:
  title: Data Flow
  order: 2
title: useXChat
order: 2
subtitle: Conversation Data
description:
demo:
  cols: 1
cover: https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*22A2Qqn7OrEAAAAAAAAAAAAADgCCAQ/original
coverDark: https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*lQydTrtLz9YAAAAAAAAAAAAADgCCAQ/original
---

## When To Use

Manage conversation data through Agent and generate data for page rendering.

## Code Demo

<!-- prettier-ignore -->
<code src="./demos/x-chat/basic.tsx">Basic</code>
<code src="./demos/x-chat/model.tsx">Model Integration</code>

## API

```tsx | pure
type useXChat<
  AgentMessage,
  ParsedMessage = AgentMessage,
  Input = RequestParams<AgentMessage>,
  Output = SSEOutput,
> = (config: XChatConfig<AgentMessage, ParsedMessage>) => XChatConfigReturnType;
```

### XChatConfig

<!-- prettier-ignore -->
| Property | Description | Type | Default | Version |
| --- | --- | --- | --- | --- |
| agent | The `agent` generated by `useXAgent`. When using the `onRequest` method, the `agent` parameter is required. | XAgent | - | - |
| defaultMessages | Default display messages | { status, message }[] | - | - |
| parser | Converts AgentMessage to consumable ParsedMessage. If not set, AgentMessage will be consumed directly. Supports converting one AgentMessage to multiple ParsedMessages | (message: AgentMessage) => BubbleMessage \| BubbleMessage[] | - | - |
| requestFallback | Fallback message for failed requests. Will not be displayed if not provided | AgentMessage \| () => AgentMessage | - | - |
| requestPlaceholder | Placeholder message during requests. Will not be displayed if not provided | AgentMessage \| () => AgentMessage | - | - |
| transformMessage | Can transform `messages` when updating data, which will also update `messages` | (info: {originMessage?: AgentMessage,chunk: Output,chunks: Output[],status: MessageStatus}) => AgentMessage| - | - |
| transformStream | Optional transformation function for processing stream data | `XStreamOptions<Output>['transformStream']` | - | - |
| resolveAbortController | `AbortController` for controlling stream state | (abortController: AbortController) => void| - | - |

### XChatConfigReturnType

| Property | Description | Type | Default | Version |
| --- | --- | --- | --- | --- |
| messages | Currently managed content | AgentMessages[] | - | - |
| parsedMessages | Content translated by `parser` | ParsedMessages[] | - | - |
| onRequest | Add a Message and trigger a request. If there is no data with `key` as `message`, the entire data will be processed as a message | (requestParams: AgentMessage \| RequestParams) => void | - | - |
| setMessages | Directly modify messages without triggering requests | (messages: { message, status }[]) => void | - | - |

### RequestParams

Extends [XRequestParams](https://x.ant.design/components/x-request#xrequestparams).

| Property | Description                | Type         | Default | Version |
| -------- | -------------------------- | ------------ | ------- | ------- |
| message  | Content of current message | AgentMessage | -       | -       |
