{"version":3,"sources":["docs/x-sdk/chat-provider-custom.en-US.md?type=text"],"sourcesContent":["\n  import '/home/runner/work/x/x/packages/x/docs/x-sdk/chat-provider-custom.en-US.md?watch=parent';\n  export const texts = [{\"value\":\"When the built-in Chat Provider doesn't meet your needs, you can implement the abstract class \",\"paraId\":0},{\"value\":\"AbstractChatProvider\",\"paraId\":0},{\"value\":\" (which only contains three abstract methods) to convert data from different model providers or Agentic services into a unified format that \",\"paraId\":0},{\"value\":\"useXChat\",\"paraId\":0},{\"value\":\" can consume, enabling seamless integration and switching between different models and agents.\",\"paraId\":0},{\"value\":\"AbstractChatProvider\",\"paraId\":1,\"tocIndex\":0},{\"value\":\" is an abstract class used to define the interface for \",\"paraId\":1,\"tocIndex\":0},{\"value\":\"Chat Provider\",\"paraId\":1,\"tocIndex\":0},{\"value\":\". When you need to use a custom data service, you can inherit from \",\"paraId\":1,\"tocIndex\":0},{\"value\":\"AbstractChatProvider\",\"paraId\":1,\"tocIndex\":0},{\"value\":\" and implement its methods. You can refer to the \",\"paraId\":1,\"tocIndex\":0},{\"value\":\"Playground - Toolbox\",\"paraId\":2,\"tocIndex\":0},{\"value\":\" for examples.\",\"paraId\":1,\"tocIndex\":0},{\"value\":\"type MessageStatus = 'local' | 'loading' | 'updating' | 'success' | 'error';\\n\\ninterface ChatProviderConfig<Input, Output> {\\n  request: XRequestClass<Input, Output> | (() => XRequestClass<Input, Output>);\\n}\\n\\ninterface TransformMessage<ChatMessage, Output> {\\n  originMessage?: ChatMessage;\\n  chunk: Output;\\n  chunks: Output[];\\n  status: MessageStatus;\\n}\\n\\nabstract class AbstractChatProvider<ChatMessage, Input, Output> {\\n  constructor(config: ChatProviderConfig<Input, Output>): void;\\n\\n  /**\\n   * Transform parameters passed to onRequest. You can merge or additionally process them with the params in the request configuration when instantiating the Provider\\n   * @param requestParams Request parameters\\n   * @param options Request configuration, from the request configuration when instantiating the Provider\\n   */\\n  abstract transformParams(\\n    requestParams: Partial<Input>,\\n    options: XRequestOptions<Input, Output>,\\n  ): Input;\\n\\n  /**\\n   * Convert parameters passed to onRequest into a local (user-sent) ChatMessage for message rendering\\n   * @param requestParams Parameters passed to onRequest\\n   */\\n  abstract transformLocalMessage(requestParams: Partial<Input>): ChatMessage;\\n\\n  /**\\n   * Can transform messages when updating returned data, and will also update messages\\n   * @param info\\n   */\\n  abstract transformMessage(info: TransformMessage<ChatMessage, Output>): ChatMessage;\\n}\\n\",\"paraId\":3,\"tocIndex\":0},{\"value\":\"Below is a custom Provider example showing how to customize a \",\"paraId\":4,\"tocIndex\":1},{\"value\":\"Chat Provider\",\"paraId\":4,\"tocIndex\":1},{\"value\":\". Detailed explanations follow the code example.\",\"paraId\":4,\"tocIndex\":1},{\"value\":\"// Type definitions\\ntype CustomInput = {\\n  query: string;\\n};\\n\\ntype CustomOutput = {\\n  data: string;\\n};\\n\\ntype CustomMessage = {\\n  content: string;\\n  role: 'user' | 'assistant';\\n};\\n\\nclass CustomProvider<\\n  ChatMessage extends CustomMessage = CustomMessage,\\n  Input extends CustomInput = CustomInput,\\n  Output extends CustomOutput = CustomOutput,\\n> extends AbstractChatProvider<ChatMessage, Input, Output> {\\n  transformParams(\\n    requestParams: Partial<Input>,\\n    options: XRequestOptions<Input, Output, ChatMessage>,\\n  ): Input {\\n    if (typeof requestParams !== 'object') {\\n      throw new Error('requestParams must be an object');\\n    }\\n    return {\\n      ...(options?.params || {}),\\n      ...(requestParams || {}),\\n    } as Input;\\n  }\\n  transformLocalMessage(requestParams: Partial<Input>): ChatMessage {\\n    return {\\n      content: requestParams.query,\\n      role: 'user',\\n    } as unknown as ChatMessage;\\n  }\\n  transformMessage(info: TransformMessage<ChatMessage, Output>): ChatMessage {\\n    const { originMessage, chunk } = info || {};\\n    if (!chunk || !chunk?.data || (chunk?.data && chunk?.data?.includes('[DONE]'))) {\\n      return {\\n        content: originMessage?.content || '',\\n        role: 'assistant',\\n      } as ChatMessage;\\n    }\\n    const chunkJson = JSON.parse(chunk.data);\\n    const content = originMessage?.content || '';\\n    return {\\n      content: `${content || ''}${chunkJson.data || ''}`,\\n      role: 'assistant',\\n    } as ChatMessage;\\n  }\\n}\\n\",\"paraId\":5,\"tocIndex\":2},{\"value\":\"The \",\"paraId\":6,\"tocIndex\":3},{\"value\":\"Agentic\",\"paraId\":6,\"tocIndex\":3},{\"value\":\" service streaming interface \",\"paraId\":6,\"tocIndex\":3},{\"value\":\"https://xxx.agent.com/api/stream\",\"paraId\":6,\"tocIndex\":3},{\"value\":\".\",\"paraId\":6,\"tocIndex\":3},{\"value\":\"Request parameters:\",\"paraId\":7,\"tocIndex\":3},{\"value\":\"{\\n  \\\"query\\\": \\\"Help me summarize today's tech news\\\"\\n}\\n\",\"paraId\":8,\"tocIndex\":3},{\"value\":\"Response data:\",\"paraId\":9,\"tocIndex\":3},{\"value\":\"id:1\\ndata: \\\"Okay,\\\"\\n\\nid:2\\ndata: \\\"I'll help you\\\"\\n\\nid:3\\ndata: \\\"summarize today's\\\"\\n\\nid:4\\ndata: \\\"tech news,\\\"\\n\\n\",\"paraId\":10,\"tocIndex\":3},{\"value\":\"Based on the interface, we can define the \",\"paraId\":11,\"tocIndex\":3},{\"value\":\"CustomInput\",\"paraId\":11,\"tocIndex\":3},{\"value\":\" and \",\"paraId\":11,\"tocIndex\":3},{\"value\":\"CustomOutput\",\"paraId\":11,\"tocIndex\":3},{\"value\":\" types.\",\"paraId\":11,\"tocIndex\":3},{\"value\":\"CustomInput\",\"paraId\":12,\"tocIndex\":3},{\"value\":\" type:\",\"paraId\":12,\"tocIndex\":3},{\"value\":\"{\\n  query: string;\\n}\\n\",\"paraId\":13,\"tocIndex\":3},{\"value\":\"Since we only need to convert the data string to JSON and concatenate the internal data field, the \",\"paraId\":14,\"tocIndex\":3},{\"value\":\"CustomOutput\",\"paraId\":14,\"tocIndex\":3},{\"value\":\" type is:\",\"paraId\":14,\"tocIndex\":3},{\"value\":\"{\\n  data: string;\\n}\\n\",\"paraId\":15,\"tocIndex\":3},{\"value\":\"We expect the messages data generated by \",\"paraId\":16,\"tocIndex\":3},{\"value\":\"useXChat\",\"paraId\":16,\"tocIndex\":3},{\"value\":\" to be directly consumable by Bubble.List, so we can define \",\"paraId\":16,\"tocIndex\":3},{\"value\":\"CustomMessage\",\"paraId\":16,\"tocIndex\":3},{\"value\":\" as:\",\"paraId\":16,\"tocIndex\":3},{\"value\":\"{\\n  content: string;\\n  role: 'user' | 'assistant';\\n}\\n\",\"paraId\":17,\"tocIndex\":3},{\"value\":\"Then inherit from \",\"paraId\":18,\"tocIndex\":3},{\"value\":\"AbstractChatProvider\",\"paraId\":18,\"tocIndex\":3},{\"value\":\" and implement its methods to get \",\"paraId\":18,\"tocIndex\":3},{\"value\":\"CustomProvider\",\"paraId\":18,\"tocIndex\":3},{\"value\":\". \",\"paraId\":18,\"tocIndex\":3},{\"value\":\"AbstractChatProvider\",\"paraId\":18,\"tocIndex\":3},{\"value\":\" only requires implementing three methods.\",\"paraId\":18,\"tocIndex\":3},{\"value\":\"transformParams\",\"paraId\":19,\"tocIndex\":3},{\"value\":\" is used to transform parameters passed to onRequest. You can merge or additionally process them with the params in the request configuration when instantiating the Provider.\",\"paraId\":19,\"tocIndex\":3},{\"value\":\"transformLocalMessage\",\"paraId\":19,\"tocIndex\":3},{\"value\":\" converts parameters passed to onRequest into a local (user-sent) ChatMessage for user message rendering, and will also update messages for message list rendering.\",\"paraId\":19,\"tocIndex\":3},{\"value\":\"transformMessage\",\"paraId\":19,\"tocIndex\":3},{\"value\":\" can transform data into ChatMessage data type when updating returned data, and will also update messages for message list rendering.\",\"paraId\":19,\"tocIndex\":3},{\"value\":\"Finally, we can instantiate \",\"paraId\":20,\"tocIndex\":3},{\"value\":\"CustomProvider\",\"paraId\":20,\"tocIndex\":3},{\"value\":\" and pass it to \",\"paraId\":20,\"tocIndex\":3},{\"value\":\"useXChat\",\"paraId\":20,\"tocIndex\":3},{\"value\":\" to complete the custom Provider usage.\",\"paraId\":20,\"tocIndex\":3},{\"value\":\"const [provider] = React.useState(\\n  new CustomProvider({\\n    request: XRequest<CustomInput, CustomOutput>('https://xxx.agent.com/api/stream', {\\n      manual: true,\\n    }),\\n  }),\\n);\\n\\nconst { onRequest, messages, setMessages, setMessage, isRequesting, abort, onReload } = useXChat({\\n  provider,\\n});\\n\",\"paraId\":21,\"tocIndex\":3},{\"value\":\"Send request:\",\"paraId\":22,\"tocIndex\":3},{\"value\":\"onRequest({\\n  query: \\\"Help me summarize today's tech news\\\",\\n});\\n\",\"paraId\":23,\"tocIndex\":3},{\"value\":\"We welcome community contributions for new Chat Providers! Please follow these specifications for Chat Provider development.\",\"paraId\":24,\"tocIndex\":6},{\"value\":\"This guide will help you contribute to Ant Design. Please take a few minutes to read this \",\"paraId\":25,\"tocIndex\":7},{\"value\":\"contribution guide\",\"paraId\":26,\"tocIndex\":7},{\"value\":\" before submitting an issue or pull request.\",\"paraId\":25,\"tocIndex\":7},{\"value\":\"Chat Providers should follow these specifications:\",\"paraId\":27,\"tocIndex\":8},{\"value\":\"Chat Providers should be included in the \",\"paraId\":28,\"tocIndex\":8},{\"value\":\"packages/x-sdk/src/chat-providers\",\"paraId\":28,\"tocIndex\":8},{\"value\":\" directory.\",\"paraId\":28,\"tocIndex\":8},{\"value\":\"Chat Provider types should be included in the \",\"paraId\":28,\"tocIndex\":8},{\"value\":\"packages/x-sdk/src/chat-providers/type\",\"paraId\":28,\"tocIndex\":8},{\"value\":\" directory.\",\"paraId\":28,\"tocIndex\":8},{\"value\":\"Chat Provider theme files should follow these naming rules:\",\"paraId\":29,\"tocIndex\":9},{\"value\":\"Chat Provider theme files should be named in camelCase format as \",\"paraId\":30,\"tocIndex\":9},{\"value\":\"[Vendor][Type][Version].ts\",\"paraId\":30,\"tocIndex\":9},{\"value\":\".\",\"paraId\":30,\"tocIndex\":9},{\"value\":\"For specific models, they can be directly named in camelCase format as \",\"paraId\":30,\"tocIndex\":9},{\"value\":\"[Vendor][ModelName].ts\",\"paraId\":30,\"tocIndex\":9},{\"value\":\".\",\"paraId\":30,\"tocIndex\":9}];\n  "],"names":[],"mappings":"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"}