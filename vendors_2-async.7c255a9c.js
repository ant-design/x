(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]||[]).push([["vendors_2"],{"0017816c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Continuous",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("526d1d3a"),a=n("89123580");let o=(e,t,n)=>{let r,i;let[o,s]=e,[l,u]=t;return o<s?(r=(0,a.createNormalize)(o,s),i=n(l,u)):(r=(0,a.createNormalize)(s,o),i=n(u,l)),(0,a.compose)(i,r);},s=(e,t,n)=>{let r=Math.min(e.length,t.length)-1,i=Array(r),o=Array(r),s=e[0]>e[r],l=s?[...e].reverse():e,u=s?[...t].reverse():t;for(let e=0;e<r;e+=1)i[e]=(0,a.createNormalize)(l[e],l[e+1]),o[e]=n(u[e],u[e+1]);return t=>{let n=(0,a.bisect)(e,t,1,r)-1,s=i[n],l=o[n];return(0,a.compose)(l,s)(t);};},l=(e,t,n,r)=>(Math.min(e.length,t.length)>2?s:o)(e,t,r?a.createInterpolateRound:n);class u extends i.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:a.createInterpolateNumber,tickCount:5};}map(e){return(0,a.isValid)(e)?this.output(e):this.options.unknown;}invert(e){return(0,a.isValid)(e)?this.input(e):this.options.unknown;}nice(){if(!this.options.nice)return;let[e,t,n,...r]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,n,...r);}getTicks(){let{tickMethod:e}=this.options,[t,n,r,...i]=this.getTickMethodOptions();return e(t,n,r,...i);}getTickMethodOptions(){let{domain:e,tickCount:t}=this.options;return[e[0],e[e.length-1],t];}chooseNice(){return a.d3LinearNice;}rescale(){this.nice();let[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t));}chooseClamp(e){let{clamp:t,range:n}=this.options,i=this.options.domain.map(e),o=Math.min(i.length,n.length);return t?(0,a.createClamp)(i[0],i[o-1]):r.identity;}composeOutput(e,t){let{domain:n,range:r,round:i,interpolate:o}=this.options,s=l(n.map(e),r,o,i);this.output=(0,a.compose)(s,t,e);}composeInput(e,t,n){let{domain:r,range:i}=this.options,o=l(i,r.map(e),a.createInterpolateNumber);this.input=(0,a.compose)(t,n,o);}}},"004f5ceb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ViewportController",{enumerable:!0,get:function(){return f;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("00d6b05d"),s=n("8a0aecd6"),l=n("0299759a"),u=n("bb430c3e"),c=n("28792030"),d=n("71473486"),h=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class f{get padding(){return(0,c.parsePadding)(this.context.options.padding);}get paddingOffset(){let[e,t,n,r]=this.padding,[i,a,o]=[(r-t)/2,(e-n)/2,0];return[i,a,o];}constructor(e){this.landmarkCounter=0,this.context=e;let[t,n]=this.paddingOffset,{zoom:r,rotation:i,x:a=t,y:o=n}=e.options;this.transform({mode:"absolute",scale:r,translate:[a,o],rotate:i},!1);}get camera(){let{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(t,n)=>{let r=Object.entries(e.getLayers()).filter(([e])=>!["main"].includes(e)).map(([,e])=>e.getCamera()),i=t[n];if("function"==typeof i)return(...e)=>{let a=i.apply(t,e);return r.forEach(t=>{t[n].apply(t,e);}),a;};}});}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e);}getAnimation(e){let t=(0,o.getAnimationOptions)(this.context.options,e);return!!t&&(0,i.pick)(Object.assign({},t),["easing","duration"]);}getCanvasSize(){let{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t,n];}getCanvasCenter(){let{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t/2,n/2,0];}getViewportCenter(){let[e,t]=this.camera.getPosition();return[e,t,0];}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter());}getZoom(){return this.camera.getZoom();}getRotation(){return this.camera.getRoll();}getTranslateOptions(e){let{camera:t}=this,{mode:n,translate:r=[]}=e,i=this.getZoom(),a=t.getPosition(),o=t.getFocalPoint(),[s,l]=this.getCanvasCenter(),[u=0,c=0,h=0]=r,f=(0,d.divide)([-u,-c,-h],i);return"relative"===n?{position:(0,d.add)(a,f),focalPoint:(0,d.add)(o,f)}:{position:(0,d.add)([s,l,a[2]],f),focalPoint:(0,d.add)([s,l,o[2]],f)};}getRotateOptions(e){let{mode:t,rotate:n=0}=e;return{roll:"relative"===t?this.camera.getRoll()+n:n};}getZoomOptions(e){let{zoomRange:t}=this.context.options,n=this.camera.getZoom(),{mode:r,scale:a=1}=e;return(0,i.clamp)("relative"===r?n*a:a,...t);}transform(e,t){return h(this,void 0,void 0,function*(){let{graph:n}=this.context,{translate:r,rotate:o,scale:s,origin:u}=e;this.cancelAnimation();let c=this.getAnimation(t);if((0,l.emit)(n,new l.ViewportEvent(a.GraphEvent.BEFORE_TRANSFORM,e)),!o&&s&&!r&&u&&!c){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),u),(0,l.emit)(n,new l.ViewportEvent(a.GraphEvent.AFTER_TRANSFORM,e));return;}let d={};if(r&&Object.assign(d,this.getTranslateOptions(e)),(0,i.isNumber)(o)&&Object.assign(d,this.getRotateOptions(e)),(0,i.isNumber)(s)&&Object.assign(d,{zoom:this.getZoomOptions(e)}),c)return(0,l.emit)(n,new l.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.TRANSFORM,null,e)),new Promise(t=>{this.transformResolver=t,this.camera.gotoLandmark(this.createLandmark(d),Object.assign(Object.assign({},c),{onfinish:()=>{(0,l.emit)(n,new l.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.TRANSFORM,null,e)),(0,l.emit)(n,new l.ViewportEvent(a.GraphEvent.AFTER_TRANSFORM,e)),this.transformResolver=void 0,t();}}));});this.camera.gotoLandmark(this.createLandmark(d),{duration:0}),(0,l.emit)(n,new l.ViewportEvent(a.GraphEvent.AFTER_TRANSFORM,e));});}fitView(e,t){return h(this,void 0,void 0,function*(){let[n,r,i,a]=this.padding,{when:o="always",direction:l="both"}=e||{},[u,c]=this.context.canvas.getSize(),h=u-a-r,f=c-n-i,p=this.context.canvas.getBounds(),v=this.getBBoxInViewport(p),[g,m]=(0,s.getBBoxSize)(v);if("overflow"===o&&!("x"===l&&g>=h||"y"===l&&m>=f||"both"===l&&g>=h&&m>=f))return yield this.fitCenter({animation:t});let y=h/g,b=f/m,E="x"===l?y:"y"===l?b:Math.min(y,b),x=this.getAnimation(t);Number.isFinite(E)&&(yield this.transform({mode:"relative",scale:E,translate:(0,d.add)((0,d.subtract)(this.getCanvasCenter(),this.getBBoxInViewport(p).center),(0,d.divide)(this.paddingOffset,E))},x));});}fitCenter(e){return h(this,void 0,void 0,function*(){let t=this.context.canvas.getBounds();yield this.focus(t,e);});}focusElements(e){return h(this,arguments,void 0,function*(e,t={}){let{element:n}=this.context;if(!n)return;let r=e=>t.shapes?e.getShape(t.shapes).getRenderBounds():e.getRenderBounds(),i=(0,s.getCombinedBBox)(e.map(e=>r(n.getElement(e))));yield this.focus(i,t);});}focus(e,t){return h(this,void 0,void 0,function*(){let n=this.context.graph.getViewportByCanvas(e.center),r=t.position||this.getCanvasCenter(),i=(0,d.subtract)(r,n);yield this.transform({mode:"relative",translate:(0,d.add)(i,this.paddingOffset)},t.animation);});}getBBoxInViewport(e){let{min:t,max:n}=e,{graph:i}=this.context,[a,o]=i.getViewportByCanvas(t),[s,l]=i.getViewportByCanvas(n),u=new r.AABB;return u.setMinMax([a,o,0],[s,l,0]),u;}isInViewport(e,t=!1,n=0){let{graph:i}=this.context,a=this.getCanvasSize(),[o,l]=i.getCanvasByViewport([0,0]),[c,d]=i.getCanvasByViewport(a),h=new r.AABB;return h.setMinMax([o,l,0],[c,d,0]),n&&(h=(0,s.getExpandedBBox)(h,n)),(0,u.isPoint)(e)?(0,s.isPointInBBox)(e,h):t?(0,s.isBBoxInside)(e,h):h.intersects(e);}cancelAnimation(){var e,t;(null===(e=this.camera.landmarks)||void 0===e?void 0:e.length)&&this.camera.cancelLandmarkAnimation(),null===(t=this.transformResolver)||void 0===t||t.call(this);}}},"00d6b05d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{createAnimationsProxy:function(){return l;},getAnimationOptions:function(){return d;},getElementAnimationOptions:function(){return h;},inferDefaultValue:function(){return c;},preprocessKeyframes:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("d1f78d64"),o=n("ec6e52f6"),s=n("215c6f85");function l(e,t){if(Array.isArray(e)&&0===e.length)return null;let n=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e.slice(1):t||[];return new Proxy(n,{get:(e,t)=>"function"!=typeof e[t]||["onframe","onfinish"].includes(t)?"finished"===t?Promise.all([n.finished,...r.map(e=>e.finished)]):Reflect.get(e,t):(...n)=>{e[t](...n),r.forEach(e=>{var r;return null===(r=e[t])||void 0===r?void 0:r.call(e,...n);});},set:(e,t,n)=>(["onframe","onfinish"].includes(t)||r.forEach(e=>{e[t]=n;}),Reflect.set(e,t,n))});}function u(e){let t=e.reduce((e,t)=>(Object.entries(t).forEach(([t,n])=>{void 0===e[t]?e[t]=[n]:e[t].push(n);}),e),{});Object.entries(t).forEach(([n,i])=>{(i.length!==e.length||i.some(e=>(0,r.isNil)(e))||i.every(e=>!["sourceNode","targetNode","childrenNode"].includes(n)&&(0,r.isEqual)(e,i[0])))&&delete t[n];});let n=Object.entries(t).reduce((e,[t,n])=>(n.forEach((n,r)=>{e[r]?e[r][t]=n:e[r]={[t]:n};}),e),[]);return 0!==e.length&&0===n.length&&n.push({_:0},{_:0}),n;}function c(e){switch(e){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return;}}function d(e,t){let{animation:n}=e;if(!1===n||!1===t)return!1;let a=Object.assign({},i.DEFAULT_ANIMATION_OPTIONS);return(0,r.isObject)(n)&&Object.assign(a,n),(0,r.isObject)(t)&&Object.assign(a,t),a;}function h(e,t,n,l){var u,c;let{animation:d}=e;if(!1===d||!1===l)return[];let h=null===(u=null==e?void 0:e[t])||void 0===u?void 0:u.animation;if(!1===h)return[];let f=null==h?void 0:h[n];if(!1===f)return[];let p=null===(c=(0,s.themeOf)(e)[t])||void 0===c?void 0:c.animation,v=(e=[])=>{var t;return("string"==typeof(t=e)?(0,a.getExtension)(i.ExtensionCategory.ANIMATION,t)||(o.print.warn(`The animation of ${t} is not registered.`),[]):t).map(e=>Object.assign(Object.assign(Object.assign(Object.assign({},i.DEFAULT_ELEMENTS_ANIMATION_OPTIONS),(0,r.isObject)(d)&&d),e),(0,r.isObject)(l)&&l));};if(f)return v(f);if(!p)return[];let g=p[n];return!1===g?[]:v(g);}},"00e9feee":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Point",{enumerable:!0,get:function(){return a;}});var r=n("83fd8d4e"),i=n("3e76858e");class a extends r.Band{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:i.defaultUnknown,paddingInner:1,paddingOuter:0};}constructor(e){super(e);}getPaddingInner(){return 1;}clone(){return new a(this.options);}update(e){super.update(e);}getPaddingOuter(){return this.options.padding;}}},"014bbf9e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Slider",{enumerable:!0,get:function(){return f;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("f457f3e3"),s=n("c086f503"),l=n("9225b8d3"),u=n("01a29d03"),c=n("e1d0d761"),d=n("bd3ad08a"),h=n("2e4c3b5a"),f=function(e){function t(t){var n=e.call(this,t,(0,r.__assign)((0,r.__assign)((0,r.__assign)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(e){return e.toString();},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},(0,u.superStyleProps)(d.HANDLE_DEFAULT_CFG,"handle")),(0,u.superStyleProps)(d.HANDLE_ICON_DEFAULT_CFG,"handleIcon")),(0,u.superStyleProps)(d.HANDLE_LABEL_DEFAULT_CFG,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(e){return function(t){t.stopPropagation(),n.target=e,n.prevPos=n.getOrientVal((0,u.getEventViewportPos)(t));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,l=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+l])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd);};},n.onDragging=function(e){var t=n.attributes,r=t.slidable,i=t.brushable,a=t.type;e.stopPropagation();var o=n.getOrientVal((0,u.getEventViewportPos)(e)),s=o-n.prevPos;if(s){var l=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(l);break;case"end":r&&n.setValuesOffset(0,l);break;case"selection":r&&n.setValuesOffset(l,l);break;case"track":if(!i)return;n.selectionWidth+=l,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);}n.prevPos=o;}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1);},n.onValueChange=function(e){var t=n.attributes,r=t.onChange,a=t.type,o="range"===a?e:e[1],s="range"===a?n.getValues():n.getValues()[1],l=new i.CustomEvent("valuechange",{detail:{oldValue:o,value:s}});n.dispatchEvent(l),null==r||r(s);},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values;},set:function(e){this.attributes.values=this.clampValues(e);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var e=(0,u.subStyleProps)(this.attributes,"sparkline");return(0,r.__assign)((0,r.__assign)({zIndex:0},this.availableSpace),e);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var e=this.attributes,t=e.trackLength,n=e.trackSize,i=(0,r.__read)(this.getOrientVal([[t,n],[n,t]]),2);return{width:i[0],height:i[1]};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,t=(e.x,e.y,e.padding),n=(0,r.__read)((0,u.parseSeriesAttr)(t),4),i=n[0],a=n[1],o=n[2],s=n[3],l=this.shape;return{x:s,y:i,width:l.width-(s+a),height:l.height-(i+o)};},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values;},t.prototype.setValues=function(e,t){void 0===e&&(e=[0,0]),void 0===t&&(t=!1),this.attributes.values=e;var n=!1!==t&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n);},t.prototype.updateSelectionArea=function(e){var t=this.calcSelectionArea();this.foregroundGroup.selectAll(d.CLASS_NAMES.selection.class).each(function(n,r){(0,o.transition)(this,t[r],e);});},t.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&(0,o.transition)(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&(0,o.transition)(this.endHandle,this.getHandleStyle("end"),e));},t.prototype.innerSetValues=function(e,t){void 0===e&&(e=[0,0]),void 0===t&&(t=!1);var n=this.values,r=this.clampValues(e);this.attributes.values=r,this.setValues(r),t&&this.onValueChange(n);},t.prototype.renderTrack=function(e){var t=this.attributes,n=t.x,i=t.y,a=(0,u.subStyleProps)(this.attributes,"track");this.trackShape=(0,u.select)(e).maybeAppendByClassName(d.CLASS_NAMES.track,"rect").styles((0,r.__assign)((0,r.__assign)({x:n,y:i},this.shape),a));},t.prototype.renderBrushArea=function(e){var t=this.attributes,n=t.x,i=t.y,a=t.brushable;this.brushArea=(0,u.select)(e).maybeAppendByClassName(d.CLASS_NAMES.brushArea,"rect").styles((0,r.__assign)({x:n,y:i,fill:"transparent",cursor:a?"crosshair":"default"},this.shape));},t.prototype.renderSparkline=function(e){var t=this,n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=(0,u.select)(e).maybeAppendByClassName(d.CLASS_NAMES.sparklineGroup,"g");(0,u.ifShow)("horizontal"===o,s,function(e){var n=(0,r.__assign)((0,r.__assign)({},t.sparklineStyle),{x:i,y:a});e.maybeAppendByClassName(d.CLASS_NAMES.sparkline,function(){return new c.Sparkline({style:n});}).update(n);});},t.prototype.renderHandles=function(){var e,t=this,n=this.attributes,r=n.showHandle,i=n.type,a=this;null===(e=this.foregroundGroup)||void 0===e||e.selectAll(d.CLASS_NAMES.handle.class).data((r?"range"===i?["start","end"]:["end"]:[]).map(function(e){return{type:e};}),function(e){return e.type;}).join(function(e){return e.append(function(e){var n=e.type;return new h.Handle({style:t.getHandleStyle(n)});}).each(function(e){var t=e.type;this.attr("class","".concat(d.CLASS_NAMES.handle.name," ").concat(t,"-handle")),a["".concat(t,"Handle")]=this,this.addEventListener("pointerdown",a.onDragStart(t));});},function(e){return e.each(function(e){var t=e.type;this.update(a.getHandleStyle(t));});},function(e){return e.each(function(e){var t=e.type;a["".concat(t,"Handle")]=void 0;}).remove();});},t.prototype.renderSelection=function(e){var t=this.attributes,n=t.x,i=t.y,a=t.type,o=t.selectionType;this.foregroundGroup=(0,u.select)(e).maybeAppendByClassName(d.CLASS_NAMES.foreground,"g");var s=(0,u.subStyleProps)(this.attributes,"selection"),l=function(e){return e.style("visibility",function(e){return e.show?"visible":"hidden";}).style("cursor",function(e){return"select"===o?"grab":"invert"===o?"crosshair":"default";}).styles((0,r.__assign)((0,r.__assign)({},s),{transform:"translate(".concat(n,", ").concat(i,")")}));},c=this;this.foregroundGroup.selectAll(d.CLASS_NAMES.selection.class).data("value"===a?[]:this.calcSelectionArea().map(function(e,t){return{style:(0,r.__assign)({},e),index:t,show:"select"===o?1===t:1!==t};}),function(e){return e.index;}).join(function(e){return e.append("rect").attr("className",d.CLASS_NAMES.selection.name).call(l).each(function(e,t){var n=this;1===t?(c.selectionShape=(0,u.select)(this),this.on("pointerdown",function(e){n.attr("cursor","grabbing"),c.onDragStart("selection")(e);}),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){n.attr("cursor","grabbing");}),this.addEventListener("pointerup",function(){n.attr("cursor","pointer");}),this.addEventListener("pointerover",function(){n.attr("cursor","pointer");})):this.on("pointerdown",c.onDragStart("track"));});},function(e){return e.call(l);},function(e){return e.remove();}),this.updateSelectionArea(!1),this.renderHandles();},t.prototype.render=function(e,t){this.renderTrack(t),this.renderSparkline(t),this.renderBrushArea(t),this.renderSelection(t);},t.prototype.clampValues=function(e,t){void 0===t&&(t=4);var n,i=(0,r.__read)(this.range,2),o=i[0],s=i[1],l=(0,r.__read)(this.getValues().map(function(e){return(0,u.toPrecision)(e,t);}),2),c=l[0],d=l[1],h=Array.isArray(e)?e:[c,null!=e?e:d],f=(0,r.__read)((h||[c,d]).map(function(e){return(0,u.toPrecision)(e,t);}),2),p=f[0],v=f[1];if("value"===this.attributes.type)return[0,(0,a.clamp)(v,o,s)];p>v&&(p=(n=(0,r.__read)([v,p],2))[0],v=n[1]);var g=v-p;return g>s-o?[o,s]:p<o?c===o&&d===v?[o,v]:[o,g+o]:v>s?d===s&&c===p?[p,s]:[s-g,s]:[p,v];},t.prototype.calcSelectionArea=function(e){var t=(0,r.__read)(this.clampValues(e),2),n=t[0],i=t[1],a=this.availableSpace,o=a.x,s=a.y,l=a.width,u=a.height;return this.getOrientVal([[{y:s,height:u,x:o,width:n*l},{y:s,height:u,x:n*l+o,width:(i-n)*l},{y:s,height:u,x:i*l,width:(1-i)*l}],[{x:o,width:l,y:s,height:n*u},{x:o,width:l,y:n*u+s,height:(i-n)*u},{x:o,width:l,y:i*u,height:(1-i)*u}]]);},t.prototype.calcHandlePosition=function(e){var t=this.attributes.handleIconOffset,n=this.availableSpace,i=n.x,a=n.y,o=n.width,s=n.height,l=(0,r.__read)(this.clampValues(),2),u=l[0],c=l[1],d=("start"===e?u:c)*this.getOrientVal([o,s])+("start"===e?-t:t);return{x:i+this.getOrientVal([d,o/2]),y:a+this.getOrientVal([s/2,d])};},t.prototype.inferTextStyle=function(e){return"horizontal"===this.attributes.orientation?{}:"start"===e?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===e?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{};},t.prototype.calcHandleText=function(e){var t,n=this.attributes,i=n.type,a=n.orientation,o=n.formatter,s=n.autoFitLabel,c=(0,u.subStyleProps)(this.attributes,"handle"),d=(0,u.subStyleProps)(c,"label"),h=c.spacing,f=this.getHandleSize(),p=this.clampValues(),v=o("start"===e?p[0]:p[1]),g=new l.Text({style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},d),this.inferTextStyle(e)),{text:v})}),m=g.getBBox(),y=m.width,b=m.height;if(g.destroy(),!s){if("value"===i)return{text:v,x:0,y:-b-h};var E=h+f+("horizontal"===a?y/2:0);return(t={text:v})["horizontal"===a?"x":"y"]="start"===e?-E:E,t;}var x=0,k=0,S=this.availableSpace,T=S.width,M=S.height,w=this.calcSelectionArea()[1],N=w.x,C=w.y,_=w.width,P=w.height,A=h+f;if("horizontal"===a){var O=A+y/2;x="start"===e?N-A-y>0?-O:O:T-N-_-A>y?O:-O;}else{var L=b+A;k="start"===e?C-f>b?-L:A:M-(C+P)-f>b?L:-A;}return{x:x,y:k,text:v};},t.prototype.getHandleLabelStyle=function(e){var t=(0,u.subStyleProps)(this.attributes,"handleLabel");return(0,r.__assign)((0,r.__assign)((0,r.__assign)({},t),this.calcHandleText(e)),this.inferTextStyle(e));},t.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,t=(0,u.subStyleProps)(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),i=this.getHandleSize();return(0,r.__assign)({cursor:n,shape:e,size:i},t);},t.prototype.getHandleStyle=function(e){var t=this.attributes,n=t.x,i=t.y,a=t.showLabel,o=t.showLabelOnInteraction,s=t.orientation,l=this.calcHandlePosition(e),c=l.x,d=l.y,h=this.calcHandleText(e),f=a;return!a&&o&&(f=!!this.target),(0,r.__assign)((0,r.__assign)((0,r.__assign)({},(0,u.superStyleProps)(this.getHandleIconStyle(),"icon")),(0,u.superStyleProps)((0,r.__assign)((0,r.__assign)({},this.getHandleLabelStyle(e)),h),"label")),{transform:"translate(".concat(c+n,", ").concat(d+i,")"),orientation:s,showLabel:f,type:e,zIndex:3});},t.prototype.getHandleSize=function(){var e=this.attributes,t=e.handleIconSize,n=e.width,r=e.height;return t||Math.floor((this.getOrientVal([+r,+n])+4)/2.4);},t.prototype.getOrientVal=function(e){var t=(0,r.__read)(e,2),n=t[0],i=t[1];return"horizontal"===this.attributes.orientation?n:i;},t.prototype.setValuesOffset=function(e,t){void 0===t&&(t=0);var n=this.attributes.type,i=(0,r.__read)(this.getValues(),2),a=[i[0]+("range"===n?e:0),i[1]+t].sort();this.innerSetValues(a,!0);},t.prototype.getRatio=function(e){var t=this.availableSpace,n=t.width,r=t.height;return e/this.getOrientVal([n,r]);},t.prototype.dispatchCustomEvent=function(e,t,n){var r=this;e.on(t,function(e){e.stopPropagation(),r.dispatchEvent(new i.CustomEvent(n,{detail:e}));});},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"));},t.prototype.onScroll=function(e){if(this.attributes.scrollable){var t=e.deltaX,n=e.deltaY,r=this.getRatio(n||t);this.setValuesOffset(r,r);}},t.tag="slider",t;}(s.Component);},"01a29d03":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("b1961425"),t),r._(n("eb97948a"),t),r._(n("d6769d2c"),t),r._(n("f6ef0e58"),t),r._(n("38242230"),t),r._(n("e3863157"),t),r._(n("4c32f747"),t),r._(n("83eb9ab3"),t),r._(n("dce52038"),t),r._(n("94538737"),t),r._(n("4645396b"),t),r._(n("7a3afe31"),t),r._(n("5735746e"),t),r._(n("52931b1b"),t),r._(n("4359a82a"),t),r._(n("a6c8c51c"),t),r._(n("39f45b08"),t),r._(n("0f719f7b"),t),r._(n("75f3951e"),t),r._(n("cb2810d0"),t),r._(n("24de82fb"),t),r._(n("77581958"),t),r._(n("f80ef388"),t),r._(n("6329a0e2"),t),r._(n("190a0ca4"),t),r._(n("d368189b"),t),r._(n("73c47a5d"),t),r._(n("afcfc7b4"),t),r._(n("c3b278fd"),t),r._(n("90579130"),t),r._(n("6a10edb6"),t),r._(n("2b8d3cb9"),t),r._(n("af246d8c"),t),r._(n("cd783615"),t);},"0299759a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{emit:function(){return o;},eventTargetOf:function(){return s;}});var r=n("d1751d7c"),i=n("a566da36"),a=n("966f7de2");function o(e,t){e.emit(t.type,t);}function s(e){if(!e)return null;if(e instanceof i.Document)return{type:"canvas",element:e};let t=e;for(;t;){if((0,a.isNode)(t))return{type:"node",element:t};if((0,a.isEdge)(t))return{type:"edge",element:t};if((0,a.isCombo)(t))return{type:"combo",element:t};t=t.parentElement;}return null;}r._(n("8e8f4f74"),t);},"02c619b4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{CollapseExpandIcon:function(){return i;},RCNode:function(){return a;}});var r=n("852bbaa9"),i=r._(n("76cbbee7")),a=r._(n("39ebc4f0"));},"038c70b1":function(e,t,n){"use strict";function r(e,t){return t-e?n=>(n-e)/(t-e):e=>.5;}n.d(t,"__esModule",{value:!0}),n.d(t,"createNormalize",{enumerable:!0,get:function(){return r;}});},"03dd02f8":function(e,t,n){"use strict";function r(e,t){let{second:n,minute:r,hour:i,day:a,week:o,month:s,year:l}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":a.floor(e)<e?"hh A":s.floor(e)<e?o.floor(e)<e?"MMM DD":"ddd DD":l.floor(e)<e?"MMMM":"YYYY";}n.d(t,"__esModule",{value:!0}),n.d(t,"chooseNiceTimeMask",{enumerable:!0,get:function(){return r;}});},"045d7620":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"renderLabels",{enumerable:!0,get:function(){return k;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("f457f3e3"),o=n("01a29d03"),s=n("cd5371db"),l=n("508bb885"),u=n("0d9261ef"),c=n("9e868a30"),d=n("bcf4e626"),h=n("d5e231fc"),f=n("82f544b2");function p(e){for(var t=e;t<0;)t+=360;return Math.round(t%360);}function v(e,t){var n=(0,r.__read)(e,2),i=n[0],a=n[1],o=(0,r.__read)(t,2),s=o[0],l=o[1],u=(0,r.__read)([i*s+a*l,i*l-a*s],2),c=u[0];return Math.atan2(u[1],c);}function g(e,t,n){var r=n.type,i=n.labelAlign,a=(0,d.getLabelVector)(e,n),s=p(t),l=p((0,o.radToDeg)(v([1,0],a))),u="center",c="middle";return"linear"===r?[90,270].includes(l)&&0===s?(u="center",c=1===a[1]?"top":"bottom"):!(l%180)&&[90,270].includes(s)?u="center":0===l?(0,o.inRange)(s,0,90,!1,!0)?u="start":((0,o.inRange)(s,0,90)||(0,o.inRange)(s,270,360))&&(u="start"):90===l?(0,o.inRange)(s,0,90,!1,!0)?u="start":((0,o.inRange)(s,90,180)||(0,o.inRange)(s,270,360))&&(u="end"):270===l?(0,o.inRange)(s,0,90,!1,!0)?u="end":((0,o.inRange)(s,90,180)||(0,o.inRange)(s,270,360))&&(u="start"):180===l&&(90===s?u="start":((0,o.inRange)(s,0,90)||(0,o.inRange)(s,270,360))&&(u="end")):"parallel"===i?c=(0,o.inRange)(l,0,180,!0)?"top":"bottom":"horizontal"===i?(0,o.inRange)(l,90,270,!1)?u="end":((0,o.inRange)(l,270,360,!1)||(0,o.inRange)(l,0,90))&&(u="start"):"perpendicular"===i&&(u=(0,o.inRange)(l,90,270)?"end":"start"),{textAlign:u,textBaseline:c};}function m(e,t,n){var i=n.showTick,a=n.tickLength,s=n.tickDirection,l=n.labelDirection,h=n.labelSpacing,f=t.indexOf(e),p=(0,o.getCallbackValue)(h,[e,f,t]),v=(0,r.__read)([(0,d.getLabelVector)(e.value,n),(0,u.getFactor)(l,s)],2),g=v[0],m=1===v[1]?(0,o.getCallbackValue)(i?a:0,[e,f,t]):0,y=(0,r.__read)((0,o.add)((0,o.scale)(g,p+m),(0,c.getValuePos)(e.value,n)),2);return{x:y[0],y:y[1]};}var y={html:["fill"],text:[]};function b(e,t){["text","html"].includes(e.nodeName)&&e.attr((0,o.omit)(t,y[e.nodeName]));}function E(e,t){(0,l.processOverlap)(this.node().childNodes,e,t,{hide:o.hide,show:o.show,rotate:function(t,n){!function(e,t,n){t.setLocalEulerAngles(e);var r=g(t.__data__.value,e,n),i=t.querySelector(s.CLASS_NAMES.labelItem.class);i&&b(i,r);}(+n,t,e);},ellipsis:function(e,t,n){e&&(0,o.ellipsisIt)(e,t||1/0,n);},wrap:function(e,t,n){e&&(0,o.wrapIt)(e,t,n);},getTextShape:function(e){return e.querySelector(s.CLASS_NAMES.labelItem.class);}});}function x(e,t,n,a,l){var u,c,p,m,y,E=n.indexOf(t),x=l.labelRender,k=l.classNamePrefix,S=(0,o.select)(e).append(x?(u=l.labelRender,c=((0,i.get)(l,"endPos.0",400)-(0,i.get)(l,"startPos.0",0))/n.length,p=(0,i.isFunction)(u)?(0,o.getCallbackValue)(u,[t,E,n,(0,d.getLabelVector)(t.value,l)]):t.label||"",m=(0,o.parseHeightFromHTML)(p)||30,function(){return(0,o.renderHtmlExtDo)(p,{width:c,height:m});}):(y=l.labelFormatter,(0,i.isFunction)(y)?function(){return(0,o.renderExtDo)((0,o.getCallbackValue)(y,[t,E,n,(0,d.getLabelVector)(t.value,l)]));}:function(){return(0,o.renderExtDo)(t.label||"");})).attr("className",s.CLASS_NAMES.labelItem.name).node();(0,h.applyClassName)((0,o.select)(S),s.CLASS_NAMES.labelItem,f.CLASSNAME_SUFFIX_MAP.labelItem,k);var T=(0,r.__read)((0,o.splitStyle)((0,d.getCallbackStyle)(a,[t,E,n])),2),M=T[0],w=T[1],N=w.transform,C=(0,r.__rest)(w,["transform"]);(0,o.percentTransform)(S,N);var _=function(e,t,n){var r,i,a=n.labelAlign;if(null===(i=t.style.transform)||void 0===i?void 0:i.includes("rotate"))return t.getLocalEulerAngles();var s=0,l=(0,d.getLabelVector)(e.value,n),u=(0,d.getLineTangentVector)(e.value,n);return"horizontal"===a?0:(s="perpendicular"===a?v([1,0],l):v([u[0]<0?-1:1,0],u),r=((0,o.radToDeg)(s)+360)%180,(0,o.inRange)(r,-90,90)||(r+=180),r);}(t,S,l);if(S.getLocalEulerAngles()||S.setLocalEulerAngles(_),b(S,(0,r.__assign)((0,r.__assign)({},g(t.value,_,l)),M)),"html"===S.nodeName){var P=S.getBBox(),A=S.style.x||0;S.attr("x",A-P.width/2);}return e.attr(C),S;}function k(e,t,n,i,l){var u,c=n.classNamePrefix,p=(0,d.filterExec)(t,n.labelFilter),v=(0,o.subStyleProps)(n,"label"),g=e.selectAll(s.CLASS_NAMES.label.class).data(p,function(e,t){return t;}).join(function(e){var r=e.append("g").attr("className",s.CLASS_NAMES.label.name).transition(function(e){x(this,e,t,v,n);var r=m(e,t,n),i=r.x,a=r.y;return this.style.transform="translate(".concat(i,", ").concat(a,")"),null;});return(0,h.applyClassName)(r,s.CLASS_NAMES.label,f.CLASSNAME_SUFFIX_MAP.label,c),r;},function(e){return e.transition(function(e){var o=this.querySelector(s.CLASS_NAMES.labelItem.class),l=x(this,e,t,v,n),u=(0,a.transitionShape)(o,l,i.update),c=m(e,t,n),d=c.x,h=c.y,f=(0,a.transition)(this,{transform:"translate(".concat(d,", ").concat(h,")")},i.update);return(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(u),!1),[f],!1);});},function(e){return u=e,e.transition(function(){var e=this,t=(0,a.fadeOut)(this.childNodes[0],i.exit);return(0,a.onAnimateFinished)(t,function(){return(0,o.select)(e).remove();}),t;}),u;}).transitions();return(0,a.onAnimatesFinished)(g,function(){E.call(e,n,l);}),g;}},"04a20e6f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseShape",{enumerable:!0,get:function(){return p;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("00d6b05d"),s=n("966f7de2"),l=n("9da99c33"),u=n("ec6e52f6"),c=n("cdd49f4a"),d=n("2be73991"),h=n("6f097fb0"),f=n("d1f78d64");class p extends r.CustomElement{constructor(e){g(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents();}get parsedAttributes(){return this.attributes;}upsert(e,t,n,r,i){var o,l,c,d,h,p,v,g;let m=this.shapeMap[e];if(!1===n){m&&(null===(o=null==i?void 0:i.beforeDestroy)||void 0===o||o.call(i,m),r.removeChild(m),delete this.shapeMap[e],null===(l=null==i?void 0:i.afterDestroy)||void 0===l||l.call(i,m));return;}let y="string"==typeof t?(0,f.getExtension)(a.ExtensionCategory.SHAPE,t):t;if(!y)throw Error((0,u.format)(`Shape ${t} not found`));if(!m||m.destroyed||!(m instanceof y)){m&&(null===(c=null==i?void 0:i.beforeDestroy)||void 0===c||c.call(i,m),null==m||m.destroy(),null===(d=null==i?void 0:i.afterDestroy)||void 0===d||d.call(i,m)),null===(h=null==i?void 0:i.beforeCreate)||void 0===h||h.call(i);let t=new y({className:e,style:n});return r.appendChild(t),this.shapeMap[e]=t,null===(p=null==i?void 0:i.afterCreate)||void 0===p||p.call(i,t),t;}return null===(v=null==i?void 0:i.beforeUpdate)||void 0===v||v.call(i,m),(0,s.updateStyle)(m,n),null===(g=null==i?void 0:i.afterUpdate)||void 0===g||g.call(i,m),m;}update(e={}){let t=Object.assign({},this.attributes,e);g(t),(0,s.setAttributes)(this,t),this.render(t,this),this.setVisibility();}bindEvents(){}getGraphicStyle(e){return(0,c.getSubShapeStyle)(e);}get compositeShapes(){return[["badges","badge-"],["ports","port-"]];}animate(e,t){if(0===e.length)return null;let n=[];if(void 0!==e[0].x||void 0!==e[0].y||void 0!==e[0].z){let{x:t=0,y:n=0,z:r=0}=this.attributes;e.forEach(e=>{let{x:i=t,y:a=n,z:o=r}=e;Object.assign(e,{transform:o?[["translate3d",i,a,o]]:[["translate",i,a]]});});}let r=super.animate(e,t);if(r&&(v(this,r),n.push(r)),Array.isArray(e)&&e.length>0){let r=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(e=>!r.includes(e))){Object.entries(this.shapeMap).forEach(([r,a])=>{let s=this[`get${(0,i.upperFirst)(r)}Style`];if((0,i.isFunction)(s)){let r=e.map(e=>s.call(this,Object.assign(Object.assign({},this.attributes),e))),i=a.animate((0,o.preprocessKeyframes)(r),t);i&&(v(a,i),n.push(i));}});let r=(r,a)=>{if(!(0,i.isEmpty)(r)){let s=this[`get${(0,i.upperFirst)(a)}Style`];if((0,i.isFunction)(s)){let i=e.map(e=>s.call(this,Object.assign(Object.assign({},this.attributes),e)));Object.entries(i[0]).map(([e])=>{let a=i.map(t=>t[e]),s=r[e];if(s){let e=s.animate((0,o.preprocessKeyframes)(a),t);e&&(v(s,e),n.push(e));}});}}};this.compositeShapes.forEach(([e,t])=>{r((0,l.subObject)(this.shapeMap,t),e);});}}return(0,o.createAnimationsProxy)(n);}getShape(e){return this.shapeMap[e];}setVisibility(){let{visibility:e}=this.attributes;(0,h.setVisibility)(this,e);}destroy(){this.shapeMap={},this.animateMap={},super.destroy();}}function v(e,t){null==t||t.finished.then(()=>{let n=e.activeAnimations.findIndex(e=>e===t);n>-1&&e.activeAnimations.splice(n,1);});}function g(e){if(!e)return{};if("x"in e||"y"in e||"z"in e){let{x:t=0,y:n=0,z:r,transform:i}=e,a=(0,d.replaceTranslateInTransform)(t,n,r,i);a&&(e.transform=a);}return e;}},"0640ea58":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"AbstractRendererPlugin",{enumerable:!0,get:function(){return ee;}});var r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y,b,E,x,k,S,T,M,w,N,C,_,P,A,O=n("777fffbe"),L=O._(n("ab297151")),R=O._(n("b1a4abb6")),D=O._(n("72ce8fb5")),I=O._(n("d60881d0")),B=O._(n("0b95a4d2")),F=O._(n("0afdccfb")),G=O._(n("7465ab36")),z=O._(n("32f41e1c")),V=n("597fa39f");n("f90e84e3");var j=n("abe9d8d6"),U=O._(n("3214ccb5")),H=O._(n("51ffafbb")),W=O._(n("3c7f532e")),Y=n("b1a96927"),q=O._(n("2fabd5d4")),X=O._(n("cb203630")),$=O._(n("1982f763")),K=O._(n("01aac514"));let Z=n("1714eebe");var Q=((r={}).GROUP="g",r.FRAGMENT="fragment",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh",r),J=((i={})[i.ZERO=0]="ZERO",i[i.NEGATIVE_ONE=1]="NEGATIVE_ONE",i),ee=(0,D.default)(function e(){(0,R.default)(this,e),this.plugins=[];},[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e);}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1);});}}]),et=V.vec3.add,en=V.vec3.copy,er=V.vec3.max,ei=V.vec3.min,ea=V.vec3.scale,eo=V.vec3.sub,es=function(){function e(){(0,R.default)(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0];}return(0,D.default)(e,[{key:"update",value:function(e,t){en(this.center,e),en(this.halfExtents,t),eo(this.min,this.center,this.halfExtents),et(this.max,this.center,this.halfExtents);}},{key:"setMinMax",value:function(e,t){et(this.center,t,e),ea(this.center,this.center,.5),eo(this.halfExtents,t,e),ea(this.halfExtents,this.halfExtents,.5),en(this.min,e),en(this.max,t);}},{key:"getMin",value:function(){return this.min;}},{key:"getMax",value:function(){return this.max;}},{key:"add",value:function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return;}var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],l=o[1],u=o[2],c=r-s,d=r+s,h=i-l,f=i+l,p=a-u,v=a+u,g=t.center,m=g[0],y=g[1],b=g[2],E=t.halfExtents,x=E[0],k=E[1],S=E[2],T=m-x,M=m+x,w=y-k,N=y+k,C=b-S,_=b+S;T<c&&(c=T),M>d&&(d=M),w<h&&(h=w),N>f&&(f=N),C<p&&(p=C),_>v&&(v=_),n[0]=(c+d)*.5,n[1]=(h+f)*.5,n[2]=(p+v)*.5,o[0]=(d-c)*.5,o[1]=(f-h)*.5,o[2]=(v-p)*.5,this.min[0]=c,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=f,this.max[2]=v;}}},{key:"setFromTransformedAABB",value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],l=t[8],u=t[1],c=t[5],d=t[9],h=t[2],f=t[6],p=t[10],v=Math.abs(o),g=Math.abs(s),m=Math.abs(l),y=Math.abs(u),b=Math.abs(c),E=Math.abs(d),x=Math.abs(h),k=Math.abs(f),S=Math.abs(p);n[0]=t[12]+o*i[0]+s*i[1]+l*i[2],n[1]=t[13]+u*i[0]+c*i[1]+d*i[2],n[2]=t[14]+h*i[0]+f*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+m*a[2],r[1]=y*a[0]+b*a[1]+E*a[2],r[2]=x*a[0]+k*a[1]+S*a[2],eo(this.min,n,r),et(this.max,n,r);}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2];}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new e,r=er([0,0,0],this.getMin(),t.getMin()),i=ei([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n;}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?en([0,0,0],this.min):272===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]];}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?en([0,0,0],this.max):272===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]];}}],[{key:"isEmpty",value:function(e){return!e||0===e.halfExtents[0]&&0===e.halfExtents[1]&&0===e.halfExtents[2];}}]);}(),el=(0,D.default)(function e(t,n){(0,R.default)(this,e),this.distance=t||0,this.normal=n||V.vec3.fromValues(0,1,0),this.updatePNVertexFlag();},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0);}},{key:"distanceToPoint",value:function(e){return V.vec3.dot(e,this.normal)-this.distance;}},{key:"normalize",value:function(){var e=1/V.vec3.len(this.normal);V.vec3.scale(this.normal,this.normal,e),this.distance*=e;}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),a=i>=0&&i<=1;return a&&n&&V.vec3.lerp(n,e,t,i),a;}}]),eu=((a={})[a.OUTSIDE=4294967295]="OUTSIDE",a[a.INSIDE=0]="INSIDE",a[a.INDETERMINATE=2147483647]="INDETERMINATE",a),ec=(0,D.default)(function e(t){if((0,R.default)(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new el);},[{key:"extractFromVPMatrix",value:function(e){var t=(0,G.default)(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];V.vec3.set(this.planes[0].normal,a-n,u-o,f-c),this.planes[0].distance=m-p,V.vec3.set(this.planes[1].normal,a+n,u+o,f+c),this.planes[1].distance=m+p,V.vec3.set(this.planes[2].normal,a+r,u+s,f+d),this.planes[2].distance=m+v,V.vec3.set(this.planes[3].normal,a-r,u-s,f-d),this.planes[3].distance=m-v,V.vec3.set(this.planes[4].normal,a-i,u-l,f-h),this.planes[4].distance=m-g,V.vec3.set(this.planes[5].normal,a+i,u+l,f+h),this.planes[5].distance=m+g,this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag();});}}]),ed=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,R.default)(this,e),this.x=0,this.y=0,this.x=t,this.y=n;}return(0,D.default)(e,[{key:"clone",value:function(){return new e(this.x,this.y);}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y;}}]);}(),eh=function(){function e(t,n,r,i){(0,R.default)(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i;}return(0,D.default)(e,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new e(t.x,t.y,t.width,t.height);}},{key:"applyTransform",value:function(t,n){var r=V.vec4.fromValues(t.x,t.y,0,1),i=V.vec4.fromValues(t.x+t.width,t.y,0,1),a=V.vec4.fromValues(t.x,t.y+t.height,0,1),o=V.vec4.fromValues(t.x+t.width,t.y+t.height,0,1),s=V.vec4.create(),l=V.vec4.create(),u=V.vec4.create(),c=V.vec4.create();V.vec4.transformMat4(s,r,n),V.vec4.transformMat4(l,i,n),V.vec4.transformMat4(u,a,n),V.vec4.transformMat4(c,o,n);var d=Math.min(s[0],l[0],u[0],c[0]),h=Math.min(s[1],l[1],u[1],c[1]),f=Math.max(s[0],l[0],u[0],c[0]),p=Math.max(s[1],l[1],u[1],c[1]);return e.fromRect({x:d,y:h,width:f-d,height:p-h});}}]);}(),ef="Method not implemented.";function ep(e){return void 0===e?0:e>360||e<-360?e%360:e;}var ev=V.vec3.create();function eg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Array.isArray(e)&&3===e.length?r?V.vec3.clone(e):V.vec3.copy(ev,e):(0,j.isNumber)(e)?r?V.vec3.fromValues(e,t,n):V.vec3.set(ev,e,t,n):r?V.vec3.fromValues(e[0],e[1]||t,e[2]||n):V.vec3.set(ev,e[0],e[1]||t,e[2]||n);}var em=Math.PI/180,ey=180/Math.PI,eb=Math.PI/2;function eE(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y;return 16===t.length?(i=V.mat4.getScaling(V.vec3.create(),t),o=(a=(0,G.default)(i,3))[0],s=a[1],l=a[2],(u=Math.asin(-t[2]/o))<eb?u>-eb?(n=Math.atan2(t[6]/s,t[10]/l),r=Math.atan2(t[1]/o,t[0]/o)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=u,e[2]=r):(c=t[0],d=t[1],h=t[2],f=t[3],m=c*c+(p=d*d)+(v=h*h)+(g=f*f),(y=c*f-d*h)>.499995*m?(e[0]=eb,e[1]=2*Math.atan2(d,c),e[2]=0):y<-.499995*m?(e[0]=-eb,e[1]=2*Math.atan2(d,c),e[2]=0):(e[0]=Math.asin(2*(c*h-f*d)),e[1]=Math.atan2(2*(c*f+d*h),1-2*(v+g)),e[2]=Math.atan2(2*(c*d+h*f),1-2*(p+v)))),e;}function ex(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s;}if(o){var l=1/o;r*=l,i*=l;}var u=Math.atan2(n,t)*ey;return[e[6],e[7],a,o,u];}var ek=V.mat4.create(),eS=V.mat4.create(),eT=V.vec4.create(),eM=[V.vec3.create(),V.vec3.create(),V.vec3.create()],ew=V.vec3.create();function eN(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i;}var eC=((o={})[o.ORBITING=0]="ORBITING",o[o.EXPLORING=1]="EXPLORING",o[o.TRACKING=2]="TRACKING",o),e_=((s={})[s.DEFAULT=0]="DEFAULT",s[s.ROTATIONAL=1]="ROTATIONAL",s[s.TRANSLATIONAL=2]="TRANSLATIONAL",s[s.CINEMATIC=3]="CINEMATIC",s),eP=((l={})[l.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",l[l.PERSPECTIVE=1]="PERSPECTIVE",l),eA={UPDATED:"updated"},eO=(0,D.default)(function e(){(0,R.default)(this,e),this.clipSpaceNearZ=J.NEGATIVE_ONE,this.eventEmitter=new z.default,this.matrix=V.mat4.create(),this.right=V.vec3.fromValues(1,0,0),this.up=V.vec3.fromValues(0,1,0),this.forward=V.vec3.fromValues(0,0,1),this.position=V.vec3.fromValues(0,0,1),this.focalPoint=V.vec3.fromValues(0,0,0),this.distanceVector=V.vec3.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=V.mat4.create(),this.projectionMatrixInverse=V.mat4.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=eC.EXPLORING,this.trackingMode=e_.DEFAULT,this.projectionMode=eP.PERSPECTIVE,this.frustum=new ec,this.orthoMatrix=V.mat4.create();},[{key:"isOrtho",value:function(){return this.projectionMode===eP.ORTHOGRAPHIC;}},{key:"getProjectionMode",value:function(){return this.projectionMode;}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix;}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse;}},{key:"getFrustum",value:function(){return this.frustum;}},{key:"getPosition",value:function(){return this.position;}},{key:"getFocalPoint",value:function(){return this.focalPoint;}},{key:"getDollyingStep",value:function(){return this.dollyingStep;}},{key:"getNear",value:function(){return this.near;}},{key:"getFar",value:function(){return this.far;}},{key:"getZoom",value:function(){return this.zoom;}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix;}},{key:"getView",value:function(){return this.view;}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e;}},{key:"setType",value:function(e,t){return this.type=e,this.type===eC.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===eC.TRACKING&&void 0!==t&&this.setTrackingMode(t),this;}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this;}},{key:"setTrackingMode",value:function(e){if(this.type!==eC.TRACKING)throw Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this;}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this;}},{key:"getViewTransform",value:function(){return V.mat4.invert(V.mat4.create(),this.matrix);}},{key:"getWorldTransform",value:function(){return this.matrix;}},{key:"jitterProjectionMatrix",value:function(e,t){var n=V.mat4.fromTranslation(V.mat4.create(),[e,t,0]);this.jitteredProjectionMatrix=V.mat4.multiply(V.mat4.create(),n,this.projectionMatrix);}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0;}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this;}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e;}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this;}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this;}},{key:"setNear",value:function(e){return this.projectionMode===eP.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this;}},{key:"setFar",value:function(e){return this.projectionMode===eP.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this;}},{key:"setViewOffset",value:function(e,t,n,r,i,a){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===eP.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===eP.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===eP.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===eP.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this;}},{key:"setZoomByViewportPoint",value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=o.x,l=o.y,u=V.vec3.fromValues(s-r,l-i,0),c=V.vec3.dot(u,this.right)/V.vec3.length(this.right),d=V.vec3.dot(u,this.up)/V.vec3.length(this.up),h=this.getPosition(),f=(0,G.default)(h,2),p=f[0],v=f[1],g=this.getFocalPoint(),m=(0,G.default)(g,2),y=m[0],b=m[1];return this.setPosition(p-c,v-d),this.setFocalPoint(y-c,b-d),this;}},{key:"setPerspective",value:function(e,t,n,r){this.projectionMode=eP.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var i,a=this.near*Math.tan(.5*this.fov*em)/this.zoom,o=2*a,s=this.aspect*o,l=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var u=this.view.fullWidth,c=this.view.fullHeight;l+=this.view.offsetX*s/u,a-=this.view.offsetY*o/c,s*=this.view.width/u,o*=this.view.height/c;}return!function(e,t,n,r,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=2*a,d=n-t,h=r-i,f=o-a,p=o*a;u?(s=-o/f,l=-p/f):(s=-(o+a)/f,l=-2*p/f),e[0]=c/d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c/h,e[6]=0,e[7]=0,e[8]=(n+t)/d,e[9]=(r+i)/h,e[10]=s,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0;}(this.projectionMatrix,l,l+s,a-o,a,e,this.far,this.clipSpaceNearZ===J.ZERO),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this;}},{key:"setOrthographic",value:function(e,t,n,r,i,a){this.projectionMode=eP.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var o,s=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,d=u-s,h=u+s,f=c+l,p=c-l;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=v*this.view.offsetX,h=d+v*this.view.width,f-=g*this.view.offsetY,p=f-g*this.view.height;}return this.clipSpaceNearZ===J.NEGATIVE_ONE?V.mat4.ortho(this.projectionMatrix,d,h,f,p,i,a):V.mat4.orthoZO(this.projectionMatrix,d,h,f,p,i,a),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this;}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],r=eg(e,t,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this;}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=V.vec3.fromValues(0,1,0);if(this.focalPoint=eg(e,t,n),this.trackingMode===e_.CINEMATIC){var i=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=Math.asin(t/V.vec3.length(i))*ey,o=90+Math.atan2(n,e)*ey,s=V.mat4.create();V.mat4.rotateY(s,s,o*em),V.mat4.rotateX(s,s,a*em),r=V.vec3.transformMat4(V.vec3.create(),[0,1,0],s);}return V.mat4.invert(this.matrix,V.mat4.lookAt(V.mat4.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this;}},{key:"getDistance",value:function(){return this.distance;}},{key:"getDistanceVector",value:function(){return this.distanceVector;}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=V.vec3.create();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this;}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this;}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this;}},{key:"setAzimuth",value:function(e){return this.azimuth=ep(e),this.computeMatrix(),this._getAxes(),this.type===eC.ORBITING||this.type===eC.EXPLORING?this._getPosition():this.type===eC.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getAzimuth",value:function(){return this.azimuth;}},{key:"setElevation",value:function(e){return this.elevation=ep(e),this.computeMatrix(),this._getAxes(),this.type===eC.ORBITING||this.type===eC.EXPLORING?this._getPosition():this.type===eC.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getElevation",value:function(){return this.elevation;}},{key:"setRoll",value:function(e){return this.roll=ep(e),this.computeMatrix(),this._getAxes(),this.type===eC.ORBITING||this.type===eC.EXPLORING?this._getPosition():this.type===eC.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getRoll",value:function(){return this.roll;}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate();}},{key:"computeMatrix",value:function(){var e=V.quat.setAxisAngle(V.quat.create(),[0,0,1],this.roll*em);V.mat4.identity(this.matrix);var t=V.quat.setAxisAngle(V.quat.create(),[1,0,0],(this.rotateWorld&&this.type!==eC.TRACKING||this.type===eC.TRACKING?1:-1)*this.elevation*em),n=V.quat.setAxisAngle(V.quat.create(),[0,1,0],(this.rotateWorld&&this.type!==eC.TRACKING||this.type===eC.TRACKING?1:-1)*this.azimuth*em),r=V.quat.multiply(V.quat.create(),n,t);r=V.quat.multiply(V.quat.create(),r,e);var i=V.mat4.fromQuat(V.mat4.create(),r);this.type===eC.ORBITING||this.type===eC.EXPLORING?(V.mat4.translate(this.matrix,this.matrix,this.focalPoint),V.mat4.multiply(this.matrix,this.matrix,i),V.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===eC.TRACKING&&(V.mat4.translate(this.matrix,this.matrix,this.position),V.mat4.multiply(this.matrix,this.matrix,i));}},{key:"_setPosition",value:function(e,t,n){this.position=eg(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix();}},{key:"_getAxes",value:function(){V.vec3.copy(this.right,eg(V.vec4.transformMat4(V.vec4.create(),[1,0,0,0],this.matrix))),V.vec3.copy(this.up,eg(V.vec4.transformMat4(V.vec4.create(),[0,1,0,0],this.matrix))),V.vec3.copy(this.forward,eg(V.vec4.transformMat4(V.vec4.create(),[0,0,1,0],this.matrix))),V.vec3.normalize(this.right,this.right),V.vec3.normalize(this.up,this.up),V.vec3.normalize(this.forward,this.forward);}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=V.vec3.length(this.distanceVector);if(0===r){this.elevation=0,this.azimuth=0;return;}this.type===eC.TRACKING?(this.elevation=Math.asin(t/r)*ey,this.azimuth=Math.atan2(-e,-n)*ey):this.rotateWorld?(this.elevation=Math.asin(t/r)*ey,this.azimuth=Math.atan2(-e,-n)*ey):(this.elevation=-(Math.asin(t/r)*ey),this.azimuth=-(Math.atan2(-e,-n)*ey));}},{key:"_getPosition",value:function(){V.vec3.copy(this.position,eg(V.vec4.transformMat4(V.vec4.create(),[0,0,0,1],this.matrix))),this._getDistance();}},{key:"_getFocalPoint",value:function(){V.vec3.transformMat3(this.distanceVector,[0,0,-this.distance],V.mat3.fromMat4(V.mat3.create(),this.matrix)),V.vec3.add(this.focalPoint,this.position,this.distanceVector),this._getDistance();}},{key:"_getDistance",value:function(){this.distanceVector=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position),this.distance=V.vec3.length(this.distanceVector),this.dollyingStep=this.distance/100;}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===eP.ORTHOGRAPHIC){var e=this.position,t=V.quat.setAxisAngle(V.quat.create(),[0,0,1],-this.roll*Math.PI/180);V.mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,V.vec3.fromValues((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),V.vec3.fromValues(this.zoom,this.zoom,1),e);}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=V.mat4.multiply(V.mat4.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(eA.UPDATED);}}},{key:"rotate",value:function(e,t,n){throw Error(ef);}},{key:"pan",value:function(e,t){throw Error(ef);}},{key:"dolly",value:function(e){throw Error(ef);}},{key:"createLandmark",value:function(e,t){throw Error(ef);}},{key:"gotoLandmark",value:function(e,t){throw Error(ef);}},{key:"cancelLandmarkAnimation",value:function(){throw Error(ef);}}]),eL=((u={})[u.Standard=0]="Standard",u),eR=((c={})[c.ADDED=0]="ADDED",c[c.REMOVED=1]="REMOVED",c[c.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",c),eD=V.vec3.create(),eI=V.mat4.create(),eB=V.quat.create();function eF(e){if(e.localDirtyFlag){if(0!==e.localSkew[0]||0!==e.localSkew[1]){V.mat4.fromRotationTranslationScaleOrigin(e.localTransform,e.localRotation,e.localPosition,V.vec3.fromValues(1,1,1),e.origin),(0!==e.localSkew[0]||0!==e.localSkew[1])&&(V.mat4.identity(eI),eI[4]=Math.tan(e.localSkew[0]),eI[1]=Math.tan(e.localSkew[1]),V.mat4.multiply(e.localTransform,e.localTransform,eI));var t=V.mat4.fromRotationTranslationScaleOrigin(eI,V.quat.set(eB,0,0,0,1),V.vec3.set(eD,1,1,1),e.localScale,e.origin);V.mat4.multiply(e.localTransform,e.localTransform,t);}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=0!==r[0]||0!==r[1]||0!==r[2],l=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],u=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];l||u||c?V.mat4.fromRotationTranslationScaleOrigin(n,i,r,a,o):s?V.mat4.fromTranslation(n,r):V.mat4.identity(n);}e.localDirtyFlag=!1;}}var eG={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new eh(0,0,0,0)},ez=((d={}).COORDINATE="<coordinate>",d.COLOR="<color>",d.PAINT="<paint>",d.NUMBER="<number>",d.ANGLE="<angle>",d.OPACITY_VALUE="<opacity-value>",d.SHADOW_BLUR="<shadow-blur>",d.LENGTH="<length>",d.PERCENTAGE="<percentage>",d.LENGTH_PERCENTAGE="<length> | <percentage>",d.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",d.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",d.LIST_OF_POINTS="<list-of-points>",d.PATH="<path>",d.FILTER="<filter>",d.Z_INDEX="<z-index>",d.OFFSET_DISTANCE="<offset-distance>",d.DEFINED_PATH="<defined-path>",d.MARKER="<marker>",d.TRANSFORM="<transform>",d.TRANSFORM_ORIGIN="<transform-origin>",d.TEXT="<text>",d.TEXT_TRANSFORM="<text-transform>",d);function eV(e,t,n){e.prototype=t.prototype=n,n.constructor=e;}function ej(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n;}function eU(){}var eH="\\s*([+-]?\\d+)\\s*",eW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eY="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eq=/^#([0-9a-f]{3,8})$/,eX=RegExp(`^rgb\\(${eH},${eH},${eH}\\)$`),e$=RegExp(`^rgb\\(${eY},${eY},${eY}\\)$`),eK=RegExp(`^rgba\\(${eH},${eH},${eH},${eW}\\)$`),eZ=RegExp(`^rgba\\(${eY},${eY},${eY},${eW}\\)$`),eQ=RegExp(`^hsl\\(${eW},${eY},${eY}\\)$`),eJ=RegExp(`^hsla\\(${eW},${eY},${eY},${eW}\\)$`),e0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e1(){return this.rgb().formatHex();}function e2(){return this.rgb().formatRgb();}function e3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eq.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e4(t):3===n?new e5(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e6(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eX.exec(e))?new e5(t[1],t[2],t[3],1):(t=e$.exec(e))?new e5(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eK.exec(e))?e6(t[1],t[2],t[3],t[4]):(t=eZ.exec(e))?e6(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eQ.exec(e))?tn(t[1],t[2]/100,t[3]/100,1):(t=eJ.exec(e))?tn(t[1],t[2]/100,t[3]/100,t[4]):e0.hasOwnProperty(e)?e4(e0[e]):"transparent"===e?new e5(NaN,NaN,NaN,0):null;}function e4(e){return new e5(e>>16&255,e>>8&255,255&e,1);}function e6(e,t,n,r){return r<=0&&(e=t=n=NaN),new e5(e,t,n,r);}function e5(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r;}function e8(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`;}function e9(){let e=e7(this.opacity);return`${1===e?"rgb(":"rgba("}${te(this.r)}, ${te(this.g)}, ${te(this.b)}${1===e?")":`, ${e})`}`;}function e7(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function te(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function tt(e){return((e=te(e))<16?"0":"")+e.toString(16);}function tn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ti(e,t,n,r);}function tr(e){if(e instanceof ti)return new ti(e.h,e.s,e.l,e.opacity);if(e instanceof eU||(e=e3(e)),!e)return new ti;if(e instanceof ti)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ti(o,s,l,e.opacity);}function ti(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r;}function ta(e){return(e=(e||0)%360)<0?e+360:e;}function to(e){return Math.max(0,Math.min(1,e||0));}function ts(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255;}function tl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=e.apply(this,i);return n.cache=s.set(o,l)||s,l;};return n.cache=new(tl.Cache||Map),tl.cacheList.push(n.cache),n;}eV(eU,e3,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:e1,formatHex:e1,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return tr(this).formatHsl();},formatRgb:e2,toString:e2}),eV(e5,function(e,t,n,r){var i;return 1==arguments.length?((i=e)instanceof eU||(i=e3(i)),i)?new e5((i=i.rgb()).r,i.g,i.b,i.opacity):new e5:new e5(e,t,n,null==r?1:r);},ej(eU,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e5(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new e5(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new e5(te(this.r),te(this.g),te(this.b),e7(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:e8,formatHex:e8,formatHex8:function(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:e9,toString:e9})),eV(ti,function(e,t,n,r){return 1==arguments.length?tr(e):new ti(e,t,n,null==r?1:r);},ej(eU,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ti(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new ti(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new e5(ts(e>=240?e-240:e+120,i,r),ts(e,i,r),ts(e<120?e+240:e-120,i,r),this.opacity);},clamp(){return new ti(ta(this.h),to(this.s),to(this.l),e7(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let e=e7(this.opacity);return`${1===e?"hsl(":"hsla("}${ta(this.h)}, ${100*to(this.s)}%, ${100*to(this.l)}%${1===e?")":`, ${e})`}`;}})),tl.Cache=Map,tl.cacheList=[],tl.clearCache=function(){tl.cacheList.forEach(function(e){return e.clear();});};var tu=((h={})[h.kUnknown=0]="kUnknown",h[h.kNumber=1]="kNumber",h[h.kPercentage=2]="kPercentage",h[h.kEms=3]="kEms",h[h.kPixels=4]="kPixels",h[h.kRems=5]="kRems",h[h.kDegrees=6]="kDegrees",h[h.kRadians=7]="kRadians",h[h.kGradians=8]="kGradians",h[h.kTurns=9]="kTurns",h[h.kMilliseconds=10]="kMilliseconds",h[h.kSeconds=11]="kSeconds",h[h.kInteger=12]="kInteger",h),tc=((f={})[f.kUNumber=0]="kUNumber",f[f.kUPercent=1]="kUPercent",f[f.kULength=2]="kULength",f[f.kUAngle=3]="kUAngle",f[f.kUTime=4]="kUTime",f[f.kUOther=5]="kUOther",f),td=((p={})[p.kYes=0]="kYes",p[p.kNo=1]="kNo",p),th=((v={})[v.kYes=0]="kYes",v[v.kNo=1]="kNo",v),tf=[{name:"em",unit_type:tu.kEms},{name:"px",unit_type:tu.kPixels},{name:"deg",unit_type:tu.kDegrees},{name:"rad",unit_type:tu.kRadians},{name:"grad",unit_type:tu.kGradians},{name:"ms",unit_type:tu.kMilliseconds},{name:"s",unit_type:tu.kSeconds},{name:"rem",unit_type:tu.kRems},{name:"turn",unit_type:tu.kTurns}],tp=((g={})[g.kUnknownType=0]="kUnknownType",g[g.kUnparsedType=1]="kUnparsedType",g[g.kKeywordType=2]="kKeywordType",g[g.kUnitType=3]="kUnitType",g[g.kSumType=4]="kSumType",g[g.kProductType=5]="kProductType",g[g.kNegateType=6]="kNegateType",g[g.kInvertType=7]="kInvertType",g[g.kMinType=8]="kMinType",g[g.kMaxType=9]="kMaxType",g[g.kClampType=10]="kClampType",g[g.kTransformType=11]="kTransformType",g[g.kPositionType=12]="kPositionType",g[g.kURLImageType=13]="kURLImageType",g[g.kColorType=14]="kColorType",g[g.kUnsupportedColorType=15]="kUnsupportedColorType",g),tv=function(e){switch(e){case tu.kNumber:case tu.kInteger:return tc.kUNumber;case tu.kPercentage:return tc.kUPercent;case tu.kPixels:return tc.kULength;case tu.kMilliseconds:case tu.kSeconds:return tc.kUTime;case tu.kDegrees:case tu.kRadians:case tu.kGradians:case tu.kTurns:return tc.kUAngle;default:return tc.kUOther;}},tg=function(e){switch(e){case tc.kUNumber:return tu.kNumber;case tc.kULength:return tu.kPixels;case tc.kUPercent:return tu.kPercentage;case tc.kUTime:return tu.kSeconds;case tc.kUAngle:return tu.kDegrees;default:return tu.kUnknown;}},tm=function(e){var t=1;switch(e){case tu.kPixels:case tu.kDegrees:case tu.kSeconds:break;case tu.kMilliseconds:t=.001;break;case tu.kRadians:t=180/Math.PI;break;case tu.kGradians:t=.9;break;case tu.kTurns:t=360;}return t;},ty=function(e){switch(e){case tu.kNumber:case tu.kInteger:break;case tu.kPercentage:return"%";case tu.kEms:return"em";case tu.kRems:return"rem";case tu.kPixels:return"px";case tu.kDegrees:return"deg";case tu.kRadians:return"rad";case tu.kGradians:return"grad";case tu.kMilliseconds:return"ms";case tu.kSeconds:return"s";case tu.kTurns:return"turn";}return"";},tb=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"toString",value:function(){return this.buildCSSText(td.kNo,th.kNo,"");}},{key:"isNumericValue",value:function(){return this.getType()>=tp.kUnitType&&this.getType()<=tp.kClampType;}}],[{key:"isAngle",value:function(e){return e===tu.kDegrees||e===tu.kRadians||e===tu.kGradians||e===tu.kTurns;}},{key:"isLength",value:function(e){return e>=tu.kEms&&e<tu.kDegrees;}},{key:"isRelativeUnit",value:function(e){return e===tu.kPercentage||e===tu.kEms||e===tu.kRems;}},{key:"isTime",value:function(e){return e===tu.kSeconds||e===tu.kMilliseconds;}}]),tE=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).colorSpace=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getType",value:function(){return tp.kColorType;}},{key:"to",value:function(e){return this;}}]);}(tb),tx=((m={})[m.Constant=0]="Constant",m[m.LinearGradient=1]="LinearGradient",m[m.RadialGradient=2]="RadialGradient",m),tk=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t)).type=e,r.value=n,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.type,this.value);}},{key:"buildCSSText",value:function(e,t,n){return n;}},{key:"getType",value:function(){return tp.kColorType;}}]);}(tb),tS=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).value=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value);}},{key:"getType",value:function(){return tp.kKeywordType;}},{key:"buildCSSText",value:function(e,t,n){return n+this.value;}}]);}(tb),tT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(e)?"NaN":e>0?"infinity":"-infinity")+t;},tM=function(e){return tg(tv(e));},tw=function(e){function t(e){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tu.kNumber;return(0,R.default)(this,t),r=(0,B.default)(this,t),i="string"==typeof a?(n=a)?"number"===n?tu.kNumber:"percent"===n||"%"===n?tu.kPercentage:tf.find(function(e){return e.name===n;}).unit_type:tu.kUnknown:a,r.unit=i,r.value=e,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value,this.unit);}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit;}},{key:"getType",value:function(){return tp.kUnitType;}},{key:"convertTo",value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=tM(this.unit);if(n!==tM(e)||n===tu.kUnknown)return null;var r=tm(this.unit)/tm(e);return new t(this.value*r,e);}},{key:"buildCSSText",value:function(e,t,n){var r;switch(this.unit){case tu.kUnknown:break;case tu.kInteger:r=Number(this.value).toFixed(0);break;case tu.kNumber:case tu.kPercentage:case tu.kEms:case tu.kRems:case tu.kPixels:case tu.kDegrees:case tu.kRadians:case tu.kGradians:case tu.kMilliseconds:case tu.kSeconds:case tu.kTurns:var i=this.value,a=ty(this.unit);if(i<-999999||i>999999){var o=ty(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?tT(i,o):i+(o||"");}else r="".concat(i).concat(a);}return n+r;}}]);}(tb),tN=new tw(0,"px");new tw(1,"px");var tC=new tw(0,"deg"),t_=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,R.default)(this,t),(i=(0,B.default)(this,t,["rgb"])).r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.alpha);}},{key:"buildCSSText",value:function(e,t,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")");}}]);}(tE),tP=new tS("unset"),tA={"":tP,unset:tP,initial:new tS("initial"),inherit:new tS("inherit")},tO=new t_(0,0,0,0,!0),tL=new t_(0,0,0,0),tR=tl(function(e,t,n,r){return new t_(e,t,n,r);},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")");}),tD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tu.kNumber;return new tw(e,t);};new tw(50,"%");var tI=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){throw Error("".concat(t,": ").concat(e));}function r(){return i("linear-gradient",e.linearGradient,o)||i("repeating-linear-gradient",e.repeatingLinearGradient,o)||i("radial-gradient",e.radialGradient,s)||i("repeating-radial-gradient",e.repeatingRadialGradient,s)||i("conic-gradient",e.conicGradient,s);}function i(t,r,i){return a(r,function(r){var a=i();return a&&!y(e.comma)&&n("Missing comma before color stops"),{type:t,orientation:a,colorStops:h(f)};});}function a(t,r){var i=y(t);if(i){y(e.startCall)||n("Missing (");var a=r(i);return y(e.endCall)||n("Missing )"),a;}}function o(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1);}function s(){var n,r,i=l();return i&&((n=[]).push(i),r=t,y(e.comma)&&((i=l())?n.push(i):t=r)),n;}function l(){var e,t,n=((e=m("shape",/^(circle)/i,0))&&(e.style=g()||u()),e||((t=m("shape",/^(ellipse)/i,0))&&(t.style=v()||u()),t));if(n)n.at=c();else{var r=u();if(r){n=r;var i=c();i&&(n.at=i);}else{var a=d();a&&(n={type:"default-radial",at:a});}}return n;}function u(){return m("extent-keyword",e.extentKeywords,1);}function c(){if(m("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e;}}function d(){var e={x:v(),y:v()};if(e.x||e.y)return{type:"position",value:e};}function h(t){var r=t(),i=[];if(r)for(i.push(r);y(e.comma);)(r=t())?i.push(r):n("One extra comma");return i;}function f(){var t=m("hex",e.hexColor,1)||a(e.rgbaColor,function(){return{type:"rgba",value:h(p)};})||a(e.rgbColor,function(){return{type:"rgb",value:h(p)};})||m("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=v(),t;}function p(){return y(e.number)[1];}function v(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||g();}function g(){return m("px",e.pixelValue,1)||m("em",e.emValue,1);}function m(e,t,n){var r=y(t);if(r)return{type:e,value:r[n]};}function y(e){var n=/^[\n\r\t\s]+/.exec(t);n&&b(n[0].length);var r=e.exec(t);return r&&b(r[0].length),r;}function b(e){t=t.substring(e);}return function(e){var i;return t=e,i=h(r),t.length>0&&n("Invalid input not EOF"),i;};}(),tB=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tF=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tG=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,tz=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,tV={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},tj=tl(function(e){return tD("angular"===e.type?Number(e.value):tV[e.value]||0,"deg");}),tU=tl(function(e){var t=50,n=50,r="%",i="%";if((null==e?void 0:e.type)==="position"){var a=e.value,o=a.x,s=a.y;(null==o?void 0:o.type)==="position-keyword"&&("left"===o.value?t=0:"center"===o.value?t=50:"right"===o.value?t=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),(null==s?void 0:s.type)==="position-keyword"&&("left"===s.value?t=0:"center"===s.value?n=50:"right"===s.value?t=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),((null==o?void 0:o.type)==="px"||(null==o?void 0:o.type)==="%"||(null==o?void 0:o.type)==="em")&&(r=null==o?void 0:o.type,t=Number(o.value)),((null==s?void 0:s.type)==="px"||(null==s?void 0:s.type)==="%"||(null==s?void 0:s.type)==="em")&&(i=null==s?void 0:s.type,n=Number(s.value));}return{cx:tD(t,r),cy:tD(n,i)};}),tH=tl(function(e){if(e.indexOf("linear")>-1||e.indexOf("radial")>-1)return tI(e).map(function(e){var t=e.type,n=e.orientation,r=e.colorStops;!function(e){var t=e.length;e[t-1].length=null!==(a=e[t-1].length)&&void 0!==a?a:{type:"%",value:"100"},t>1&&(e[0].length=null!==(o=e[0].length)&&void 0!==o?o:{type:"%",value:"0"});for(var n=0,r=Number(e[0].length.value),i=1;i<t;i++){var a,o,s,l=null===(s=e[i].length)||void 0===s?void 0:s.value;if(!(0,j.isNil)(l)&&!(0,j.isNil)(r)){for(var u=1;u<i-n;u++)e[n+u].length={type:"%",value:"".concat(r+(Number(l)-r)*u/(i-n))};n=i,r=Number(l);}}}(r);var i=r.map(function(e){var t,n;return{offset:tD(Number(e.length.value),"%"),color:(t=e.type,n=e.value,"hex"===t?"#".concat(n):"literal"===t?n:"rgb"===t?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")"))};});if("linear-gradient"===t)return new tk(tx.LinearGradient,{angle:n?tj(n):tC,steps:i});if("radial-gradient"===t&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var a,o=tU(n[0].at),s=o.cx,l=o.cy;if(n[0].style){var u=n[0].style,c=u.type,d=u.value;"extent-keyword"===c?(tA[d]||(tA[d]=new tS(d)),a=tA[d]):a=tD(d,c);}return new tk(tx.RadialGradient,{cx:s,cy:l,size:a,steps:i});}});var t=e[0];if("("===e[1]||"("===e[2]){if("l"===t){var n=tB.exec(e);if(n){var r,i=(null===(r=n[2].match(tz))||void 0===r?void 0:r.map(function(e){return e.split(":");}))||[];return[new tk(tx.LinearGradient,{angle:tD(parseFloat(n[1]),"deg"),steps:i.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tD(100*Number(n),"%"),color:r};})})];}}else if("r"===t){var a=function(e){var t=tF.exec(e);if(t){var n,r=(null===(n=t[4].match(tz))||void 0===n?void 0:n.map(function(e){return e.split(":");}))||[];return{cx:tD(50,"%"),cy:tD(50,"%"),steps:r.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tD(100*Number(n),"%"),color:r};})};}return null;}(e);if(a){if(!(0,j.isString)(a))return[new tk(tx.RadialGradient,a)];e=a;}}else if("p"===t)return function(e){var t=tG.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat";}return{image:r,repetition:n};}return null;}(e);}});function tW(e){return e&&!!e.image;}function tY(e){return e&&!(0,j.isNil)(e.r)&&!(0,j.isNil)(e.g)&&!(0,j.isNil)(e.b);}var tq=tl(function(e){if(tW(e))return(0,L.default)({repetition:"repeat"},e);if((0,j.isNil)(e)&&(e=""),"transparent"===e)return tL;if("currentColor"===e)e="black";else if("none"===e)return tO;var t=tH(e);if(t)return t;var n=e3(e),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),tR.apply(void 0,r);});function tX(e,t){if(tY(e)&&tY(t))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round((0,j.clamp)(t[n],0,255));return t[3]=(0,j.clamp)(t[3],0,1),"rgba(".concat(t.join(","),")");}];}function t$(e,t){if((0,j.isNil)(t))return tD(0,"px");if(isFinite(Number(t="".concat(t).trim().toLowerCase()))){if("px".search(e)>=0)return tD(Number(t),"px");if("deg".search(e)>=0)return tD(Number(t),"deg");}var n=[];t=t.replace(e,function(e){return n.push(e),"U".concat(e);});var r="U(".concat(e.source,")");return n.map(function(e){return tD(Number(t.replace(RegExp("U".concat(e),"g"),"").replace(RegExp(r,"g"),"*0")),e);})[0];}var tK=function(e){return t$(/px/g,e);},tZ=tl(tK);tl(function(e){return t$(RegExp("%","g"),e);});var tQ=function(e){return(0,j.isNumber)(e)||isFinite(Number(e))?tD(Number(e)||0,"px"):t$(RegExp("px|%|em|rem","g"),e);},tJ=tl(tQ),t0=function(e){return t$(RegExp("deg|rad|grad|turn","g"),e);},t1=tl(t0);function t2(e){var t=0;return e.unit===tu.kDegrees?t=e.value:e.unit===tu.kRadians?t=Number(e.value)*ey:e.unit===tu.kTurns?t=360*Number(e.value):e.value&&(t=e.value),t;}function t3(e,t){var n;return(Array.isArray(e)?n=e.map(function(e){return Number(e);}):(0,j.isString)(e)?n=e.split(" ").map(function(e){return Number(e);}):(0,j.isNumber)(e)&&(n=[e]),2===t)?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===t?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===t&&n.length%2==1?[].concat((0,I.default)(n),(0,I.default)(n)):n;}function t4(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.unit===tu.kPixels)return Number(e.value);if(e.unit===tu.kPercentage&&n){var i=n.nodeName===Q.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2;}return 0;}var t6=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function t5(e){return e.toString();}var t8=function(e){return"number"==typeof e?tD(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?tD(Number(e)):tD(0);},t9=tl(t8);function t7(e,t){return[e,t,t5];}function ne(e,t){return function(n,r){return[n,r,function(n){return t5((0,j.clamp)(n,e,t));}];};}function nt(e,t){if(e.length===t.length)return[e,t,function(e){return e;}];}function nn(e){return 0===e.parsedStyle.d.totalLength&&(e.parsedStyle.d.totalLength=(0,j.getTotalLength)(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength;}function nr(e,t){return e[0]===t[0]&&e[1]===t[1];}function ni(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.acos((a+o-(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)))/(2*Math.sqrt(a)*Math.sqrt(o)));if(!s||0===Math.sin(s)||(0,j.isNumberEqual)(s,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return{xExtra:t/2*(1/Math.sin(s/2))*Math.cos(s/2-(l=l>Math.PI/2?Math.PI-l:l))-t/2||0,yExtra:t/2*(1/Math.sin(s/2))*Math.cos((u=u>Math.PI/2?Math.PI-u:u)-s/2)-t/2||0};}function na(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])];}tl(function(e){return(0,j.isString)(e)?e.split(" ").map(t9):e.map(t9);});var no=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r);},ns=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n);var l=(r=(0,j.mod)(r,360))*em;if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-o.x)/2,c=(e.y-o.y)/2,d={x:Math.cos(l)*u+Math.sin(l)*c,y:-Math.sin(l)*u+Math.cos(l)*c},h=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var f=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2))/(Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2)),p=(i!==a?1:-1)*Math.sqrt(f=f<0?0:f),v={x:p*(t*d.y/n),y:p*(-(n*d.x)/t)},g={x:Math.cos(l)*v.x-Math.sin(l)*v.y+(e.x+o.x)/2,y:Math.sin(l)*v.x+Math.cos(l)*v.y+(e.y+o.y)/2},m={x:(d.x-v.x)/t,y:(d.y-v.y)/n},y=no({x:1,y:0},m),b=no(m,{x:(-d.x-v.x)/t,y:(-d.y-v.y)/n});!a&&b>0?b-=2*Math.PI:a&&b<0&&(b+=2*Math.PI);var E=y+(b%=2*Math.PI)*s,x=t*Math.cos(E),k=n*Math.sin(E);return{x:Math.cos(l)*x-Math.sin(l)*k+g.x,y:Math.sin(l)*x+Math.cos(l)*k+g.y,ellipticalArcStartAngle:y,ellipticalArcEndAngle:y+b,ellipticalArcAngle:E,ellipticalArcCenter:g,resultantRx:t,resultantRy:n};};function nl(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,d=ns({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},t),h=ns({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),f=h.x-d.x,p=h.y-d.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v};}function nu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]);}function nc(e,t){return nu(e)*nu(t)?(e[0]*t[0]+e[1]*t[1])/(nu(e)*nu(t)):1;}function nd(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(nc(e,t));}var nh=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};try{t=(0,j.normalizePath)(e);}catch(n){t=(0,j.normalizePath)(""),console.error("[g]: Invalid SVG Path definition: ".concat(e));}!function(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:("C"===i||"A"===i||"Q"===i)&&(o=[n[n.length-2],n[n.length-1]]),o&&nr(a,o)&&(e.splice(t,1),t--);}}}(t);var t,n=function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break;}}return t;}(t),r=function(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]]);}return r.length>0&&n.push(r),{polygons:t,polylines:n};}(t),i=r.polygons,a=r.polylines,o=function(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var l=e[s];r=e[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var d=function(e,t){var n=t[1],r=t[2],i=(0,j.mod)(t[3]*em,2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?-(v*r)*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,E=[(d-g)/n,(h-m)/r],x=[(-1*d-g)/n,(-1*h-m)/r],k=nd([1,0],E),S=nd(E,x);return -1>=nc(E,x)&&(S=Math.PI),nc(E,x)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:nr(e,[u,c])?0:n,ry:nr(e,[u,c])?0:r,startAngle:k,endAngle:k+S,xRotation:i,arcFlag:a,sweepFlag:o};}(n,l);c.arcParams=d;}if("Z"===u)n=i,r=e[a+1];else{var h=l.length;n=[l[h-2],l[h-1]];}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),c.currentPoint=n,t[a]&&nr(n,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]];}else if("T"===u){var g=t[s-1],m=na(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]]);}else if("C"===u){var y=[l[1],l[2]],b=[l[3],l[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-y[0],b[1]-y[1]]);}else if("S"===u){var E=t[s-1],x=na(E.currentPoint,p),k=[l[1],l[2]];"C"===E.command?(c.command="C",c.startTangent=[p[0]-x[0],p[1]-x[1]]):(c.command="SQ",c.startTangent=[p[0]-k[0],p[1]-k[1]]),c.endTangent=[n[0]-k[0],n[1]-k[1]];}else if("A"===u){var S=nl(c,0),T=S.x,M=S.y,w=nl(c,1,!1),N=w.x,C=w.y;c.startTangent=[T,M],c.endTangent=[N,C];}t.push(c);}return t;}(t),s=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=(0,Y.quadBox)(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=(0,Y.cubicBox)(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var d=o.arcParams;c=(0,Y.arcBox)(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height));}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;});var h=(0,j.min)(n),f=(0,j.min)(r),p=(0,j.max)(n),v=(0,j.max)(r);if(0===i.length)return{x:h,y:f,width:p-h,height:v-f};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint;y[0]===h?h-=ni(m,0).xExtra:y[0]===p&&(p+=ni(m,0).xExtra),y[1]===f?f-=ni(m,t).yExtra:y[1]===v&&(v+=ni(m,t).yExtra);}return{x:h,y:f,width:p-h,height:v-f};}(o,0),l=s.x,u=s.y,c=s.width,d=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(d)?d:0}};},nf=tl(nh);function np(e){return(0,j.isString)(e)?nf(e):nh(e);}function nv(e,t,n){var r=e.curve,i=t.curve;r&&0!==r.length||(r=(0,j.path2Curve)(e.absolutePath,!1),e.curve=r),i&&0!==i.length||(i=(0,j.path2Curve)(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=(0,j.equalizeSegments)(r,i));var o=(0,j.getDrawDirection)(a[0])!==(0,j.getDrawDirection)(a[1])?(0,j.reverseCurve)(a[0]):(0,j.clonePath)(a[0]);return[o,(0,j.getRotatedCurve)(a[1],o),function(e){return e;}];}function ng(e,t){return[e.points,t.points,function(e){return e;}];}var nm=/\s*(\w+)\(([^)]*)\)/g;function ny(e){return function(t){var n=0;return e.map(function(e){return null===e?t[n++]:e;});};}function nb(e){return e;}var nE={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],nb],matrix3d:["NNNNNNNNNNNNNNNN",nb],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ny([null,null,new tw(1)]),nb],scaleX:["N",ny([null,new tw(1),new tw(1)]),ny([null,new tw(1)])],scaleY:["N",ny([new tw(1),null,new tw(1)]),ny([new tw(1),null])],scaleZ:["N",ny([new tw(1),new tw(1),null])],scale3d:["NNN",nb],skew:["Aa",null,nb],skewX:["A",null,ny([null,tC])],skewY:["A",null,ny([tC,null])],translate:["Tt",ny([null,null,tN]),nb],translateX:["T",ny([null,tN,tN]),ny([null,tN])],translateY:["T",ny([tN,null,tN]),ny([tN,null])],translateZ:["L",ny([tN,tN,null])],translate3d:["TTL",nb]};function nx(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!nE[a])return[];var s=o.map(function(e){return tD(e);});t.push({t:a,d:s});}return t;}function nk(e){if(Array.isArray(e))return nx(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nm.lastIndex=0;(t=nm.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nE[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tC:t1(e);},N:t9,T:tJ,L:tZ})[d.toUpperCase()](c):({a:tC,n:l[0],t:tN})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nm.lastIndex===e.length)return n;}return[];}function nS(e){if(Array.isArray(e))return nx(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nm.lastIndex=0;(t=nm.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nE[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tC:t0(e);},N:t8,T:tQ,L:tK})[d.toUpperCase()](c):({a:tC,n:l[0],t:tN})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nm.lastIndex===e.length)return n;}return[];}function nT(e){switch(e.t){case"rotateX":return[1,0,0,0,0,Math.cos(i=t2(e.d[0])*em),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return[Math.cos(i=t2(e.d[0])*em),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return[Math.cos(i=t2(e.d[0])*em),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=t2(e.d[3])*em;var t,n,r,i,a=t*t+n*n+r*r;if(0===a)t=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);t/=o,n/=o,r/=o;}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(t*n*u+r*l),2*(t*r*u-n*l),0,2*(t*n*u-r*l),1-2*(t*t+r*r)*u,2*(n*r*u+t*l),0,2*(t*r*u+n*l),2*(n*r*u-t*l),1-2*(t*t+n*n)*u,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var c=t2(e.d[0])*em;return[1,Math.tan(t2(e.d[1])*em),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return[1,0,0,0,Math.tan(i=t2(e.d[0])*em),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return[1,Math.tan(i=t2(e.d[0])*em),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t4(e.d[0],0,null)||0,n=t4(e.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t4(e.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=t4(e.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=t4(e.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t4(e.d[0],0,null)||0,n=t4(e.d[1],0,null)||0,r=t4(e.d[2],0,null)||0,1];case"perspective":var d=t4(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(e){return e.value;});}}function nM(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]];}function nw(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return!function(e,t,n,r,i,a){if(!(!function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0;}(ek,e)||(V.mat4.copy(eS,ek),eS[3]=0,eS[7]=0,eS[11]=0,eS[15]=1,1e-8>Math.abs(V.mat4.determinant(eS))))){var o=ek[3],s=ek[7],l=ek[11],u=ek[12],c=ek[13],d=ek[14],h=ek[15];if(0!==o||0!==s||0!==l){if(eT[0]=o,eT[1]=s,eT[2]=l,eT[3]=h,!V.mat4.invert(eS,eS))return;V.mat4.transpose(eS,eS),V.vec4.transformMat4(i,eT,eS);}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=c,t[2]=d,eM[0][0]=ek[0],eM[0][1]=ek[1],eM[0][2]=ek[2],eM[1][0]=ek[4],eM[1][1]=ek[5],eM[1][2]=ek[6],eM[2][0]=ek[8],eM[2][1]=ek[9],eM[2][2]=ek[10],n[0]=V.vec3.length(eM[0]),V.vec3.normalize(eM[0],eM[0]),r[0]=V.vec3.dot(eM[0],eM[1]),eN(eM[1],eM[1],eM[0],1,-r[0]),n[1]=V.vec3.length(eM[1]),V.vec3.normalize(eM[1],eM[1]),r[0]/=n[1],r[1]=V.vec3.dot(eM[0],eM[2]),eN(eM[2],eM[2],eM[0],1,-r[1]),r[2]=V.vec3.dot(eM[1],eM[2]),eN(eM[2],eM[2],eM[1],1,-r[2]),n[2]=V.vec3.length(eM[2]),V.vec3.normalize(eM[2],eM[2]),r[1]/=n[2],r[2]/=n[2],V.vec3.cross(ew,eM[1],eM[2]),0>V.vec3.dot(eM[0],ew))for(var f=0;f<3;f++)n[f]*=-1,eM[f][0]*=-1,eM[f][1]*=-1,eM[f][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+eM[0][0]-eM[1][1]-eM[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-eM[0][0]+eM[1][1]-eM[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-eM[0][0]-eM[1][1]+eM[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+eM[0][0]+eM[1][1]+eM[2][2],0)),eM[2][1]>eM[1][2]&&(a[0]=-a[0]),eM[0][2]>eM[2][0]&&(a[1]=-a[1]),eM[1][0]>eM[0][1]&&(a[2]=-a[2]);}}(0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(nT).reduce(nM),t,n,r,i,a),[[t,n,r,a,i]];}var nN=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n;}return function(t,n,r,i,a){for(var o,s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)s[l][3]=a[l];for(var u=0;u<3;u++)for(var c=0;c<3;c++)s[3][u]+=t[c]*s[c][u];var d=i[0],h=i[1],f=i[2],p=i[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+f*f),v[0][1]=2*(d*h-f*p),v[0][2]=2*(d*f+h*p),v[1][0]=2*(d*h+f*p),v[1][1]=1-2*(d*d+f*f),v[1][2]=2*(h*f-d*p),v[2][0]=2*(d*f-h*p),v[2][1]=2*(h*f+d*p),v[2][2]=1-2*(d*d+h*h),s=e(s,v);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],s=e(s,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],s=e(s,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],s=e(s,g));for(var m=0;m<3;m++)for(var y=0;y<3;y++)s[m][y]*=n[m];return 0===(o=s)[0][2]&&0===o[0][3]&&0===o[1][2]&&0===o[1][3]&&0===o[2][0]&&0===o[2][1]&&1===o[2][2]&&0===o[2][3]&&0===o[3][2]&&1===o[3][3]?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3]);};}();function nC(e){return e.toFixed(6).replace(".000000","");}function n_(e,t){var n,r;return(e.decompositionPair!==t&&(e.decompositionPair=t,n=nw(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=nw(t)),null===n[0]||null===r[0])?[[!1],[!0],function(n){return n?t[0].d:e[0].d;}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=function(e,t,n){var r=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n;}(e,t);r=(0,j.clamp)(r,-1,1);var i=[];if(1===r)i=e;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i;}(n[0][3],r[0][3],e[5]);return nN(e[0],e[1],e[2],t,e[4]).map(nC).join(",");}]);}function nP(e){return e.replace(/[XY]/,"");}function nA(e){return e.replace(/(X|Y|Z|3d)?$/,"3d");}function nO(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=0;i<e.length;i++)!function(){var n=e[i],r=n.t,a=n.d,o="scale"===r.substring(0,5)?1:0;t.push({t:r,d:a.map(function(e){return"number"==typeof e?tD(o):tD(o,e.unit);})});}();}var a=[],o=[],s=[];if(e.length!==t.length){var l=n_(e,t);a=[l[0]],o=[l[1]],s=[["matrix",[l[2]]]];}else for(var u=0;u<e.length;u++){var c=e[u].t,d=t[u].t,h=e[u].d,f=t[u].d,p=nE[c],v=nE[d],g=void 0;if("perspective"===c&&"perspective"===d||("matrix"===c||"matrix3d"===c)&&("matrix"===d||"matrix3d"===d)){var m=n_([e[u]],[t[u]]);a.push(m[0]),o.push(m[1]),s.push(["matrix",[m[2]]]);continue;}if(c===d)g=c;else if(p[2]&&v[2]&&nP(c)===nP(d))g=nP(c),h=p[2](h),f=v[2](f);else if(p[1]&&v[1]&&nA(c)===nA(d))g=nA(c),h=p[1](h),f=v[1](f);else{var y=n_(e,t);a=[y[0]],o=[y[1]],s=[["matrix",[y[2]]]];break;}for(var b=[],E=[],x=[],k=0;k<h.length;k++){var S=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=e.value||0,s=t.value||0,l=tM(e.unit),u=e.convertTo(l),c=t.convertTo(l);return u&&c?(o=u.value,s=c.value,a=ty(e.unit)):(tw.isLength(e.unit)||tw.isLength(t.unit))&&(o=t4(e,i,n),s=t4(t,i,n),a="px"),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a;}];}(h[k],f[k],n,!1,k);b[k]=S[0],E[k]=S[1],x.push(S[2]);}a.push(b),o.push(E),s.push([g,x]);}if(r){var T=a;a=o,o=T;}return[a,o,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return s[t][1][n](e);}).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),"matrix3d"===s[t][0]&&6===n.split(",").length&&(s[t][0]="matrix"),"".concat(s[t][0],"(").concat(n,")");}).join(" ");}];}var nL=tl(function(e){if((0,j.isString)(e)){if("text-anchor"===e)return[tD(0,"px"),tD(0,"px")];var t=e.split(" ");return(1===t.length&&("top"===t[0]||"bottom"===t[0]?(t[1]=t[0],t[0]="center"):t[1]="center"),2!==t.length)?null:[tJ(nR(t[0])),tJ(nR(t[1]))];}return[tD(e[0]||0,"px"),tD(e[1]||0,"px")];});function nR(e){return"center"===e?"50%":"left"===e||"top"===e?"0%":"right"===e||"bottom"===e?"100%":e;}var nD=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ez.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ez.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ez.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ez.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ez.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ez.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ez.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ez.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ez.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ez.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ez.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ez.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ez.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ez.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ez.FILTER},{n:"clipPath",syntax:ez.DEFINED_PATH},{n:"textPath",syntax:ez.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ez.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:ez.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:ez.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ez.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ez.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ez.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ez.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ez.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ez.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ez.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ez.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:ez.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ez.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ez.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ez.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ez.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ez.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ez.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ez.NUMBER,d:function(e){return e===Q.PATH||e===Q.POLYGON||e===Q.POLYLINE?"4":"10";}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ez.MARKER},{n:"markerEnd",syntax:ez.MARKER},{n:"markerMid",syntax:ez.MARKER},{n:"markerStartOffset",syntax:ez.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ez.LENGTH,l:!0,int:!0,d:"0"}],nI=new Set(nD.filter(function(e){return!!e.l;}).map(function(e){return e.n;})),nB={},nF=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.runtime=t,nD.forEach(function(e){n.registerMetadata(e);});},[{key:"registerMetadata",value:function(e){[e.n].concat((0,I.default)(e.a||[])).forEach(function(t){nB[t]=e;});}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e];}},{key:"processProperties",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var i=e.parsedStyle.clipPath,a=e.parsedStyle.offsetPath;!function(e,t){var n=nG(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r]);}(e,t);var o=!!r.forceUpdateGeometry;if(!o){for(var s in t)if(nI.has(s)){o=!0;break;}}var l=nG(e);l.has("fill")&&t.fill&&(e.parsedStyle.fill=tq(t.fill)),l.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=tq(t.stroke)),l.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=tq(t.shadowColor)),l.has("filter")&&t.filter&&(e.parsedStyle.filter=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;(e=n.exec(t))&&e.index===i;)if(i=e.index+e[0].length,t6.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map(function(e){return t$(/deg|rad|grad|turn|px|%/g,e)||tq(e);})}),n.lastIndex===t.length)return r;return[];}(t.filter)),l.has("radius")&&!(0,j.isNil)(t.radius)&&(e.parsedStyle.radius=t3(t.radius,4)),l.has("lineDash")&&!(0,j.isNil)(t.lineDash)&&(e.parsedStyle.lineDash=t3(t.lineDash,"even")),l.has("points")&&t.points&&(e.parsedStyle.points=(n=t.points,{points:(0,j.isString)(n)?n.split(" ").map(function(e){var t=e.split(","),n=(0,G.default)(t,2),r=n[0],i=n[1];return[Number(r),Number(i)];}):n,totalLength:0,segments:[]})),l.has("d")&&""===t.d&&(e.parsedStyle.d=(0,L.default)({},eG)),l.has("d")&&t.d&&(e.parsedStyle.d=np(t.d)),l.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[ez.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),l.has("clipPath")&&!(0,j.isUndefined)(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[ez.DEFINED_PATH].calculator("clipPath",i,t.clipPath,e,this.runtime),l.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[ez.DEFINED_PATH].calculator("offsetPath",a,t.offsetPath,e,this.runtime),l.has("transform")&&t.transform&&(e.parsedStyle.transform=nk(t.transform)),l.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=nL(t.transformOrigin)),l.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[ez.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),l.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[ez.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),l.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[ez.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),l.has("zIndex")&&!(0,j.isNil)(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[ez.Z_INDEX].postProcessor(e),l.has("offsetDistance")&&!(0,j.isNil)(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[ez.OFFSET_DISTANCE].postProcessor(e),l.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[ez.TRANSFORM].postProcessor(e),l.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[ez.TRANSFORM_ORIGIN].postProcessor(e),o&&(e.dirty(!0,!0),r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e));}},{key:"updateGeometry",value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||(r.contentBounds=new es),r.renderBounds||(r.renderBounds=new es);var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=a.cy,l=a.cz,u=a.hwidth,c=void 0===u?0:u,d=a.hheight,h=void 0===d?0:d,f=a.hdepth,p=[Math.abs(c),Math.abs(h),void 0===f?0:f],v=i.stroke,g=i.lineWidth,m=i.increasedLineWidthForHitTesting,y=i.shadowType,b=void 0===y?"outer":y,E=i.shadowColor,x=i.filter,k=i.transformOrigin,S=[void 0===o?0:o,void 0===s?0:s,void 0===l?0:l];r.contentBounds.update(S,p);var T=t===Q.POLYLINE||t===Q.POLYGON||t===Q.PATH?Math.SQRT2:.5;if(v&&!v.isNone){var M=(((void 0===g?1:g)||0)+((void 0===m?0:m)||0))*T;p[0]+=M,p[1]+=M;}if(r.renderBounds.update(S,p),E&&b&&"inner"!==b){var w=r.renderBounds,N=w.min,C=w.max,_=i.shadowBlur,P=i.shadowOffsetX,A=i.shadowOffsetY,O=_||0,L=P||0,R=A||0,D=N[0]-O+L,I=C[0]+O+L,B=N[1]-O+R,F=C[1]+O+R;N[0]=Math.min(N[0],D),C[0]=Math.max(C[0],I),N[1]=Math.min(N[1],B),C[1]=Math.max(C[1],F),r.renderBounds.setMinMax(N,C);}(void 0===x?[]:x).forEach(function(e){var t=e.name,n=e.params;if("blur"===t){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,V.vec3.add(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]));}else if("drop-shadow"===t){var a=n[0].value,o=n[1].value,s=n[2].value,l=r.renderBounds,u=l.min,c=l.max,d=u[0]-s+a,h=c[0]+s+a,f=u[1]-s+o,p=c[1]+s+o;u[0]=Math.min(u[0],d),c[0]=Math.max(c[0],h),u[1]=Math.min(u[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(u,c);}}),e.geometry.dirty=!1;var G=h<0,z=(c<0?-1:1)*(k?t4(k[0],0,e,!0):0),j=(G?-1:1)*(k?t4(k[1],1,e,!0):0);(z||j)&&e.setOrigin(z,j);}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===Q.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===Q.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR));}}]);function nG(e){return e.constructor.PARSED_STYLE_LIST;}var nz=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=t7;},[{key:"calculator",value:function(e,t,n,r){return t2(n);}}]),nV=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r,i){return n instanceof tS&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),"clipPath"===e&&r.forEach(function(e){0===e.childNodes.length&&i.sceneGraphService.dirtyToRoot(e);}),n;}}]),nj=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=tq,this.mixer=tX;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tS?"none"===n.value?tO:tL:n;}}]),nU=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n){return n instanceof tS?[]:n;}}]);function nH(e){var t=e.parsedStyle.fontSize;return(0,j.isNil)(t)?null:t;}var nW=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=t7;},[{key:"calculator",value:function(e,t,n,r,i){if((0,j.isNumber)(n))return n;if(!tw.isRelativeUnit(n.unit))return n.value;if(n.unit===tu.kPercentage)return 0;if(n.unit===tu.kEms){if(r.parentNode){var a,o=nH(r.parentNode);if(o)return o*n.value;}return 0;}if(n.unit===tu.kRems){if(null!=r&&null!==(a=r.ownerDocument)&&void 0!==a&&a.documentElement){var s=nH(r.ownerDocument.documentElement);if(s)return s*n.value;}return 0;}}}]),nY=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nq=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nX=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){n instanceof tS&&(n=null);var i,a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a;}}]),n$=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=t7;},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nK=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ne(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===Q.LINE||i===Q.PATH||i===Q.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y);}}}}]),nZ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ne(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nQ=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=np,this.mixer=nv;},[{key:"calculator",value:function(e,t,n){return n instanceof tS&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new eh(0,0,0,0)}:n;}}]),nJ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ng;}),n0=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).mixer=ne(0,1/0),e;}return(0,F.default)(t,e),(0,D.default)(t);}(nW),n1=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n instanceof tS?"unset"===n.value?"":n.value:"".concat(n);}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||"";}}]),n2=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a;}return n.value;}}]);function n3(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t);}}return n-r;}new WeakMap,"undefined"!=typeof window&&window.document;var n4={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},n6="object"==typeof performance&&performance.now?performance:Date;function n5(e){return e.nodeName===Q.FRAGMENT||e.getRootNode().nodeName===Q.FRAGMENT;}var n8=1,n9="object"==typeof self&&self.self===self?self:"object"==typeof Z&&Z.global===Z?Z:{},n7=Date.now(),re={},rt=Date.now(),rn=function(e){if("function"!=typeof e)throw TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-rt,r=n8++;return re[r]=e,Object.keys(re).length>1||setTimeout(function(){rt=t;var e=re;re={},Object.keys(e).forEach(function(t){return e[t](n9.performance&&"function"==typeof n9.performance.now?n9.performance.now():Date.now()-n7);});},n>16?0:16-n),r;},rr=function(e){return"string"!=typeof e?rn:""===e?n9.requestAnimationFrame:n9["".concat(e,"RequestAnimationFrame")];},ri=function(e,t){for(var n=0;void 0!==e[n];){if(t(e[n]))return e[n];n+=1;}}(["","webkit","moz","ms","o"],function(e){return!!rr(e);}),ra=rr(ri),ro="string"!=typeof ri?function(e){delete re[e];}:""===ri?n9.cancelAnimationFrame:n9["".concat(ri,"CancelAnimationFrame")]||n9["".concat(ri,"CancelRequestAnimationFrame")];n9.requestAnimationFrame=ra,n9.cancelAnimationFrame=ro;var rs=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"getCallbacksNum",value:function(){return this.callbacks.length;}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(e){return e.apply(void 0,t);}));}}]),rl=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:(y=(0,X.default)((0,q.default)().mark(function e(){var t,n,r,i,a=arguments;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=6;break;}return e.next=1,(t=this.callbacks)[0].apply(t,a);case 1:n=e.sent,r=1;case 2:if(!(r<this.callbacks.length)){e.next=5;break;}return i=this.callbacks[r],e.next=3,i(n);case 3:n=e.sent;case 4:r++,e.next=2;break;case 5:return e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop();}},e,this);})),function(){return y.apply(this,arguments);})}]),ru=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=arguments;this.callbacks.forEach(function(e){e.apply(void 0,r);});}}]),rc=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=1;a<this.callbacks.length;a++)i=(0,this.callbacks[a])(i);return i;}return null;}}]),rd=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rh=/([\"\'])[^\'\"]+\1/;function rf(e){var t=e.fontSize,n=e.fontFamily,r=e.fontStyle,i=e.fontVariant,a=e.fontWeight;return{fontSize:void 0===t?16:t,fontFamily:void 0===n?"sans-serif":n,fontStyle:void 0===r?"normal":r,fontVariant:void 0===i?"normal":i,fontWeight:void 0===a?"normal":a};}var rp=tl(function(e){for(var t=rf(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight,s=(0,j.isNumber)(n)&&"".concat(n,"px")||"16px",l=r.split(","),u=l.length-1;u>=0;u--){var c=l[u].trim();!rh.test(c)&&0>rd.indexOf(c)&&(c='"'.concat(c,'"')),l[u]=c;}return"".concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l.join(","));},function(e){var t=rf(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight;return"".concat(i,"_").concat(a,"_").concat(o,"_").concat(n,"_").concat(r);}),rv=function(e){return Math.max(e,1e-6);};function rg(e,t,n){return V.mat4.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e;}var rm=V.mat4.create(),ry=V.mat4.create(),rb={scale:function(e){V.mat4.fromScaling(rm,[e[0].value,e[1].value,1].map(function(e){return rv(e);}));},scaleX:function(e){V.mat4.fromScaling(rm,[e[0].value,1,1].map(function(e){return rv(e);}));},scaleY:function(e){V.mat4.fromScaling(rm,[1,e[0].value,1].map(function(e){return rv(e);}));},scaleZ:function(e){V.mat4.fromScaling(rm,[1,1,e[0].value].map(function(e){return rv(e);}));},scale3d:function(e){V.mat4.fromScaling(rm,[e[0].value,e[1].value,e[2].value].map(function(e){return rv(e);}));},translate:function(e){V.mat4.fromTranslation(rm,[e[0].value,e[1].value,0]);},translateX:function(e){V.mat4.fromTranslation(rm,[e[0].value,0,0]);},translateY:function(e){V.mat4.fromTranslation(rm,[0,e[0].value,0]);},translateZ:function(e){V.mat4.fromTranslation(rm,[0,0,e[0].value]);},translate3d:function(e){V.mat4.fromTranslation(rm,[e[0].value,e[1].value,e[2].value]);},rotate:function(e){V.mat4.fromZRotation(rm,t2(e[0])*em);},rotateX:function(e){V.mat4.fromXRotation(rm,t2(e[0])*em);},rotateY:function(e){V.mat4.fromYRotation(rm,t2(e[0])*em);},rotateZ:function(e){V.mat4.fromZRotation(rm,t2(e[0])*em);},rotate3d:function(e){V.mat4.fromRotation(rm,t2(e[3])*em,[e[0].value,e[1].value,e[2].value]);},skew:function(e){rg(rm,e[0].value*em,e[1].value*em);},skewX:function(e){rg(rm,e[0].value*em,0);},skewY:function(e){rg(rm,0,e[0].value*em);},matrix:function(e){V.mat4.set(rm,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1);},matrix3d:function(e){V.mat4.set.apply(V.mat4,[rm].concat((0,I.default)(e.map(function(e){return e.value;}))));}},rE=V.vec3.fromValues(1,1,1),rx=V.vec3.create(),rk={translate:function(e,t){ic.sceneGraphService.setLocalScale(e,rE,!1),ic.sceneGraphService.setLocalEulerAngles(e,rx,void 0,void 0,!1),ic.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),ic.sceneGraphService.dirtyLocalTransform(e,e.transformable);}};function rS(e,t){if(e.length){if(1===e.length&&rk[e[0].t]){rk[e[0].t](t,e[0].d);return;}for(var n=V.mat4.identity(ry),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=rb[a];s&&(s(o),V.mat4.mul(n,n,rm));}t.setLocalTransform(n);}else t.resetLocalTransform();return t.getLocalTransform();}var rT=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=nS,this.mixer=nO;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tS?[]:n;}},{key:"postProcessor",value:function(e){rS(e.parsedStyle.transform,e);}}]),rM=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===tu.kPixels&&t[1].unit===tu.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds();}}]),rw=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n.value;}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&t.dirty(),r&&(r.dirty=!0,r.dirtyReason=eR.Z_INDEX_CHANGED);}}}]),rN=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.r,a=void 0===i?0:i;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:a,hheight:a};}}]),rC=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.rx,a=e.ry;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:void 0===i?0:i,hheight:void 0===a?0:a};}}]),r_=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.min(n,i),s=(Math.max(t,r)-a)/2,l=(Math.max(n,i)-o)/2;return{cx:a+s,cy:o+l,hwidth:s,hheight:l};}}]),rP=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width,a=t.height,o=i/2,s=a/2;return{cx:n+o,cy:r+s,hwidth:o,hheight:s};}}]),rA=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){if(e.points&&(0,j.isArray)(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),r=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),i=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),a=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s};}return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rO=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.src,a=e.width,o=e.height,s=void 0===a?0:a,l=void 0===o?0:o;return!i||(0,j.isString)(i)||(s||(s=i.width,e.width=s),l||(l=i.height,e.height=l)),{cx:(void 0===n?0:n)+s/2,cy:(void 0===r?0:r)+l/2,hwidth:s/2,hheight:l/2};}}]),rL=(0,D.default)(function e(t){(0,R.default)(this,e),this.globalRuntime=t;},[{key:"isReadyToMeasure",value:function(e,t){return e.text;}},{key:"update",value:function(e,t){var n,r=e.text,i=e.textAlign,a=void 0===i?"start":i,o=e.lineWidth,s=void 0===o?1:o,l=e.textBaseline,u=void 0===l?"alphabetic":l,c=e.dx,d=void 0===c?0:c,h=e.dy,f=void 0===h?0:h,p=e.x,v=e.y;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var g=((null==t||null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,m=this.globalRuntime.textService.measureText(r,e,g);e.metrics=m;var y=m.width,b=m.height,E=y/2,x=b/2,k=(void 0===p?0:p)+E;"center"===a||"middle"===a?k+=s/2-E:("right"===a||"end"===a)&&(k+=s-2*E);var S=(void 0===v?0:v)-x;return"middle"===u?S+=x:"top"===u||"hanging"===u?S+=2*x:"alphabetic"===u||("bottom"===u||"ideographic"===u)&&(S+=0),d&&(k+=d),f&&(S+=f),{cx:k,cy:S,hwidth:E,hheight:x};}}]),rR=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rD=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.width,a=void 0===i?0:i,o=e.height,s=void 0===o?0:o;return{cx:(void 0===n?0:n)+a/2,cy:(void 0===r?0:r)+s/2,hwidth:a/2,hheight:s/2};}}]),rI=(0,D.default)(function e(t){(0,R.default)(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ed,this.page=new ed,this.canvas=new ed,this.viewport=new ed,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t;},[{key:"name",get:function(){return this.type;}},{key:"layerX",get:function(){return this.layer.x;}},{key:"layerY",get:function(){return this.layer.y;}},{key:"pageX",get:function(){return this.page.x;}},{key:"pageY",get:function(){return this.page.y;}},{key:"x",get:function(){return this.canvas.x;}},{key:"y",get:function(){return this.canvas.y;}},{key:"canvasX",get:function(){return this.canvas.x;}},{key:"canvasY",get:function(){return this.canvas.y;}},{key:"viewportX",get:function(){return this.viewport.x;}},{key:"viewportY",get:function(){return this.viewport.y;}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"propagationPath",get:function(){return this.composedPath();}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function(){this.propagationStopped=!0;}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw Error(ef);}}]),rB=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).client=new ed,e.movement=new ed,e.offset=new ed,e.global=new ed,e.screen=new ed,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clientX",get:function(){return this.client.x;}},{key:"clientY",get:function(){return this.client.y;}},{key:"movementX",get:function(){return this.movement.x;}},{key:"movementY",get:function(){return this.movement.y;}},{key:"offsetX",get:function(){return this.offset.x;}},{key:"offsetY",get:function(){return this.offset.y;}},{key:"globalX",get:function(){return this.global.x;}},{key:"globalY",get:function(){return this.global.y;}},{key:"screenX",get:function(){return this.screen.x;}},{key:"screenY",get:function(){return this.screen.y;}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e);}},{key:"initMouseEvent",value:function(){throw Error(ef);}}]);}(rI),rF=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).width=0,e.height=0,e.isPrimary=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function(){throw Error("getPredictedEvents is not supported!");}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this);}}]);}(rB),rG=function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,arguments);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this);}}]);}(rB),rz=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t,[null])).type=e,r.detail=null==n?void 0:n.detail,!n||"detail"in n||(r.detail=n),Object.assign(r,n),r;}return(0,F.default)(t,e),(0,D.default)(t);}(rI),rV=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.mutations=void 0,e.parentNode=null,e.destroyed=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"textContent",get:function(){var e="";this.nodeName===Q.TEXT&&(e+=this.style.text);var t,n=(0,$.default)(this.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.nodeName===Q.TEXT?e+=r.nodeValue:e+=r.textContent;}}catch(e){n.e(e);}finally{n.f();}return e;},set:function(e){var t=this;this.childNodes.slice().forEach(function(e){t.removeChild(e);}),this.nodeName===Q.TEXT&&(this.style.text="".concat(e));}},{key:"getRootNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this;}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0;}},{key:"isDefaultNamespace",value:function(e){throw Error(ef);}},{key:"lookupNamespaceURI",value:function(e){throw Error(ef);}},{key:"lookupPrefix",value:function(e){throw Error(ef);}},{key:"normalize",value:function(){throw Error(ef);}},{key:"isEqualNode",value:function(e){return this===e;}},{key:"isSameNode",value:function(e){return this.isEqualNode(e);}},{key:"parent",get:function(){return this.parentNode;}},{key:"parentElement",get:function(){return null;}},{key:"nextSibling",get:function(){return null;}},{key:"previousSibling",get:function(){return null;}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null;}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null;}},{key:"compareDocumentPosition",value:function(e){if(e===this)return 0;for(var n,r=e,i=this,a=[r],o=[i];null!==(n=r.parentNode)&&void 0!==n?n:i.parentNode;)r=r.parentNode?(a.push(r.parentNode),r.parentNode):r,i=i.parentNode?(o.push(i.parentNode),i.parentNode):i;if(r!==i)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=a.length>o.length?a:o,l=s===a?o:a;if(s[s.length-l.length]===l[0])return s===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var u=s.length-l.length,c=l.length-1;c>=0;c--){var d=l[c],h=s[u+c];if(h!==d){var f=d.parentNode.childNodes;if(f.indexOf(d)<f.indexOf(h)){if(l===a)return t.DOCUMENT_POSITION_PRECEDING;return t.DOCUMENT_POSITION_FOLLOWING;}if(s===a)return t.DOCUMENT_POSITION_PRECEDING;break;}}return t.DOCUMENT_POSITION_FOLLOWING;}},{key:"contain",value:function(e){return this.contains(e);}},{key:"contains",value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t;}},{key:"getAncestor",value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t;}},{key:"forEach",value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(!1===e(n))break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r]);}}}],[{key:"isNode",value:function(e){return!!e.childNodes;}}]);}((0,D.default)(function e(){(0,R.default)(this,e),this.emitter=new z.default;},[{key:"on",value:function(e,t,n){return this.addEventListener(e,t,n),this;}},{key:"addEventListener",value:function(e,t,n){var r=!1,i=!1;if((0,j.isBoolean)(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o;}r&&(e+="capture"),t=(0,j.isFunction)(t)?t:t.handleEvent;var s=(0,j.isFunction)(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this;}},{key:"off",value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this;}},{key:"removeAllEventListeners",value:function(){var e;null===(e=this.emitter)||void 0===e||e.removeAllListeners();}},{key:"removeEventListener",value:function(e,t,n){if(!this.emitter)return this;((0,j.isBoolean)(n)?n:null==n?void 0:n.capture)&&(e+="capture"),t=(0,j.isFunction)(t)?t:null===(r=t)||void 0===r?void 0:r.handleEvent;var r,i=(0,j.isFunction)(t)?void 0:t;return this.emitter.off(e,t,i),this;}},{key:"emit",value:function(e,t){this.dispatchEvent(new rz(e,t));}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e);}},{key:"dispatchEvent",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;if(t=this.document?this:this.defaultView?this.defaultView:null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView){if(e.manager=t.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],r||(e.target=this),e.manager.dispatchEvent(e,e.type,r);}else this.dispatchEventToSelf(e);return!e.defaultPrevented;}}]));rV.DOCUMENT_POSITION_DISCONNECTED=1,rV.DOCUMENT_POSITION_PRECEDING=2,rV.DOCUMENT_POSITION_FOLLOWING=4,rV.DOCUMENT_POSITION_CONTAINS=8,rV.DOCUMENT_POSITION_CONTAINED_BY=16,rV.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,(0,D.default)(function e(t,n){var r=this;(0,R.default)(this,e),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=V.mat4.create(),this.tmpVec3=V.vec3.create(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)r.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;r.dispatchEvent(t,n?"rightdown":"mousedown");}r.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t);},this.onPointerUp=function(e){var t=n6.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup");}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var l=o;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var u=2===n.button;r.notifyTarget(n,u?"rightupoutside":"mouseupoutside");}rV.isNode(l)&&(l=l.parentNode);}delete a.pressTargetsByButton[e.button],s=l;}if(s){var c,d=r.clonePointerEvent(n,"click");d.target=s,d.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});var h=r.context.renderingContext.root.ownerDocument.defaultView,f=a.clicksByButton[e.button];f.target===d.target&&t-f.timeStamp<h.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=d.target,f.timeStamp=t,d.detail=f.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==d.pointerType&&"touch"!==d.pointerType||r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d);}r.freeEvent(n);},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o="mousemove"===e.type?"mouseout":"pointerout",s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!t.composedPath().includes(a)){var l=r.createPointerEvent(e,"pointerleave",a||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!t.composedPath().includes(l.target);)l.currentTarget=l.target,r.notifyTarget(l),n&&r.notifyTarget(l,"mouseleave"),rV.isNode(l.target)&&(l.target=l.target.parentNode);r.freeEvent(l);}r.freeEvent(s);}if(a!==t.target){var u="mousemove"===e.type?"mouseover":"pointerover",c=r.clonePointerEvent(t,u);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var d=a&&rV.isNode(a)&&a.parentNode;d&&d!==(rV.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&d!==t.target;)d=d.parentNode;if(!d||d===(rV.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var h=r.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==a&&h.target!==(rV.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),n&&r.notifyTarget(h,"mouseenter"),rV.isNode(h.target)&&(h.target=h.target.parentNode);r.freeEvent(h);}r.freeEvent(c);}r.dispatchEvent(t,"pointermove"),"touch"===t.pointerType&&r.dispatchEvent(t,"touchmove"),n&&(r.dispatchEvent(t,"mousemove"),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t);},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(e,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(rV.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),rV.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o);}r.cursor=null;},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(rV.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),rV.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a);},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||("mouse"===i.pointerType||"pen"===i.pointerType)&&r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),rV.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button];}r.freeEvent(i);},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t);},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t);}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t);},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick);}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear();}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a);}return{scaleX:t,scaleY:n,bbox:e};}},{key:"client2Viewport",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new ed((e.x-((null==i?void 0:i.left)||0))/n,(e.y-((null==i?void 0:i.top)||0))/r);}},{key:"viewport2Client",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new ed((e.x+((null==i?void 0:i.left)||0))*n,(e.y+((null==i?void 0:i.top)||0))*r);}},{key:"viewport2Canvas",value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),l=r.getWorldTransform(),u=V.mat4.multiply(this.tmpMatrix,l,s),c=V.vec3.set(this.tmpVec3,t/a*2-1,(1-n/o)*2-1,0);return V.vec3.transformMat4(c,c,u),new ed(c[0],c[1]);}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=V.mat4.multiply(this.tmpMatrix,n,r),a=V.vec3.set(this.tmpVec3,e.x,e.y,0);V.vec3.transformMat4(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,l=o.height;return new ed((a[0]+1)/2*s,(1-(a[1]+1)/2)*l);}},{key:"setPickHandler",value:function(e){this.pickHandler=e;}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority;});}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type));}}},{key:"dispatchEvent",value:function(e,t,n){if(n){e.eventPhase=e.AT_TARGET;var r=this.rootTarget.defaultView||null;e.currentTarget=r,this.notifyListeners(e,t);}else e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;}}}},{key:"propagationPath",value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<2048&&e!==this.rootTarget;r++)rV.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t;}},{key:"hitTest",value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null;}},{key:"isNativeEventFromCanvas",value:function(e,t){var n,r=null==t?void 0:t.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r);}return null!=t&&!!t.composedPath&&t.composedPath().indexOf(e)>-1;}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i;}return null;}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY});}},{key:"createPointerEvent",value:function(e,t,n,r){var i=this.allocateEvent(rF);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof t&&(i.type=t),i;}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(rG);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t;}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e];}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(rG);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t;}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(rF);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!=t?t:n.type,n;}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist;}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset);}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=n6.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport);}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t;}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e);}},{key:"notifyTarget",value:function(e,t){t=null!=t?t:e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t);}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r){if("fn"in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e);}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(r===this.rootTarget||rV.isNode(r)&&r.parentNode===t)t=e[n];else break;}return t;}},{key:"getCursor",value:function(e){for(var t=e;t;){var n=!!t.getAttribute&&t.getAttribute("cursor");if(n)return n;t=rV.isNode(t)&&t.parentNode;}}}]);var rj=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||ic.offscreenCanvas)this.canvas=e||ic.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"));}catch(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));}return this.canvas.width=10,this.canvas.height=10,this.canvas;}},{key:"getOrCreateContext",value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context;}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0);}catch(e){}try{return document.createElement("canvas");}catch(e){}return null;}}]),rU=((b={})[b.CAMERA_CHANGED=0]="CAMERA_CHANGED",b[b.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",b[b.NONE=2]="NONE",b);(0,D.default)(function e(t,n){(0,R.default)(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ru,initAsync:new rs,dirtycheck:new rc,cull:new rc,beginFrame:new ru,beforeRender:new ru,render:new ru,afterRender:new ru,endFrame:new ru,destroy:new ru,pick:new rl,pickSync:new rc,pointerDown:new ru,pointerUp:new ru,pointerMove:new ru,pointerOut:new ru,pointerOver:new ru,pointerWheel:new ru,pointerCancel:new ru,click:new ru},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(e){var t=this,n=(0,L.default)((0,L.default)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(e){e.apply(n,t.globalRuntime);}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e();}).catch(function(e){});}},{key:"getStats",value:function(){return this.stats;}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(rU.CAMERA_CHANGED);}},{key:"render",value:function(e,t,n){var r=this,i=e.getConfig(),a=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(a.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(e),a.renderReasons.size&&this.inited){a.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=1===a.renderReasons.size&&a.renderReasons.has(rU.CAMERA_CHANGED),s=!i.disableRenderHooks||!o;s&&this.renderDisplayObject(a.root,i,a),this.hooks.beginFrame.call(t),s&&a.renderListCurrentFrame.forEach(function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e);}),this.hooks.endFrame.call(t),a.renderListCurrentFrame=[],a.renderReasons.clear(),n();}}},{key:"renderDisplayObject",value:function(e,t,n){for(var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling,s=[e];s.length>0;){var l,u=s.pop();!function(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e,l=null;s&&(l=o?r.hooks.cull.call(s,r.context.camera):s)&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(l)),e.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0);}(u);for(var c=(null===(l=u.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?u.sortable.sorted:u.childNodes,d=c.length-1;d>=0;d--)s.push(c[d]);}}},{key:"sort",value:function(e,t){var n,r;(null==t||null===(n=t.sorted)||void 0===n?void 0:n.length)>0&&t.dirtyReason!==eR.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var r=t.sorted.indexOf(n);if(r>-1&&t.sorted.splice(r,1),e.childNodes.indexOf(n)>-1){if(0===t.sorted.length)t.sorted.push(n);else{var i=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;0>n3(e[i],t)?n=i+1:r=i;}return n;}(t.sorted,n);t.sorted.splice(i,0,n);}}}):t.sorted=e.childNodes.slice().sort(n3),(null===(r=t.sorted)||void 0===r?void 0:r.length)>0&&0===e.childNodes.filter(function(e){return e.parsedStyle.zIndex;}).length&&(t.sorted=[]);}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call();}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(rU.DISPLAY_OBJECT_CHANGED);}}]);var rH=/\[\s*(.*)=(.*)\s*\]/,rW=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"selectOne",value:function(e,t){var n=this;if(e.startsWith("."))return t.find(function(t){return((null==t?void 0:t.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.find(function(t){return t.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):null;}return t.find(function(n){return t!==n&&n.nodeName===e;});}},{key:"selectAll",value:function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(r){return t!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.findAll(function(r){return t!==r&&r.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):[];}return t.findAll(function(n){return t!==n&&n.nodeName===e;});}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),r=n.name,i=n.value;return"name"===r?t.name===i:this.attributeToString(t,r)===i;}return t.nodeName===e;}},{key:"getIdOrClassname",value:function(e){return e.substring(1);}},{key:"getAttribute",value:function(e){var t=e.match(rH),n="",r="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),r=t[2].replace(/"/g,"")),{name:n,value:r};}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return(0,j.isNil)(n)?"":n.toString?n.toString():"";}}]),rY=((E={}).ATTR_MODIFIED="DOMAttrModified",E.INSERTED="DOMNodeInserted",E.MOUNTED="DOMNodeInsertedIntoDocument",E.REMOVED="removed",E.UNMOUNTED="DOMNodeRemovedFromDocument",E.REPARENT="reparent",E.DESTROY="destroy",E.BOUNDS_CHANGED="bounds-changed",E.CULLED="culled",E),rq=function(e){function t(e,n,r,i,a,o,s,l){var u;return(0,R.default)(this,t),(u=(0,B.default)(this,t,[null])).relatedNode=n,u.prevValue=r,u.newValue=i,u.attrName=a,u.attrChange=o,u.prevParsedValue=s,u.newParsedValue=l,u.type=e,u;}return(0,F.default)(t,e),(0,D.default)(t);}(rI);rq.ADDITION=2,rq.MODIFICATION=1,rq.REMOVAL=3;var rX=new rq(rY.REPARENT,null,"","","",0,"",""),r$=V.vec2.create(),rK=V.vec3.create(),rZ=V.vec3.fromValues(1,1,1),rQ=V.mat4.create(),rJ=V.vec2.create(),r0=V.vec3.create(),r1=V.mat4.create(),r2=V.quat.create(),r3=V.vec3.create(),r4=V.quat.create(),r6=V.vec3.create(),r5=V.vec3.create(),r8=V.vec3.create(),r9=V.mat4.create(),r7=V.quat.create(),ie=V.quat.create(),it=V.quat.create(),ir=(0,D.default)(function e(t){(0,R.default)(this,e),this.displayObjectDependencyMap=new WeakMap,this.runtime=t;},[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t);}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t);}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t);}},{key:"attach",value:function(e,t,n){var r=!1;e.parentNode&&(r=e.parentNode!==t,this.detach(e));var i=e.nodeName===Q.FRAGMENT,a=n5(t);e.parentNode=t;var o=i?e.childNodes:[e];(0,j.isNumber)(n)?o.forEach(function(e){t.childNodes.splice(n,0,e),e.parentNode=t;}):o.forEach(function(e){t.childNodes.push(e),e.parentNode=t;});var s=t.sortable;if((null!=s&&null!==(u=s.sorted)&&void 0!==u&&u.length||s.dirty||e.parsedStyle.zIndex)&&(-1===s.dirtyChildren.indexOf(e)&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=eR.ADDED),!a){if(i)this.dirtyFragment(e);else{var l=e.transformable;l&&this.dirtyWorldTransform(e,l);}if(r){var u,c,d=(null===(c=t.ownerDocument)||void 0===c||null===(c=c.defaultView)||void 0===c||null===(c=c.getConfig())||void 0===c||null===(c=c.future)||void 0===c?void 0:c.experimentalCancelEventPropagation)===!0;e.dispatchEvent(rX,d,d);}}}},{key:"detach",value:function(e){if(e.parentNode){var t,n,r=e.transformable,i=e.parentNode.sortable;(null!=i&&null!==(t=i.sorted)&&void 0!==t&&t.length||null!==(n=e.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(e)&&i.dirtyChildren.push(e),i.dirty=!0,i.dirtyReason=eR.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),r&&this.dirtyWorldTransform(e,r),e.parentNode=null;}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition;}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation;}},{key:"getLocalScale",value:function(e){return e.transformable.localScale;}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew;}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return eF(t),t.localTransform;}},{key:"setLocalPosition",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;r5[0]=t[0],r5[1]=t[1],r5[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(i.localPosition,r5)&&(V.vec3.copy(i.localPosition,r5),r&&this.dirtyLocalTransform(e,i));}},{key:"translateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.vec3.equals(t,rK)||(V.vec3.transformQuat(t,t,i.localRotation),V.vec3.add(i.localPosition,i.localPosition,t),this.dirtyLocalTransform(e,i));}},{key:"setLocalRotation",value:function(e,t,n,r,i){var a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];"number"==typeof t&&(t=V.quat.set(r2,t,n,r,i));var o=e.transformable;V.quat.copy(o.localRotation,t),a&&this.dirtyLocalTransform(e,o);}},{key:"rotateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.quat.fromEuler(ie,t[0],t[1],t[2]),V.quat.mul(i.localRotation,i.localRotation,ie),this.dirtyLocalTransform(e,i);}},{key:"setLocalScale",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;V.vec3.set(r0,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:i.localScale[2]),!V.vec3.equals(r0,i.localScale)&&(V.vec3.copy(i.localScale,r0),r&&this.dirtyLocalTransform(e,i));}},{key:"scaleLocal",value:function(e,t){var n,r=e.transformable;V.vec3.multiply(r.localScale,r.localScale,V.vec3.set(r0,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:1)),this.dirtyLocalTransform(e,r);}},{key:"setLocalSkew",value:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];"number"==typeof t&&(t=V.vec2.set(rJ,t,n));var i=e.transformable;V.vec2.copy(i.localSkew,t),r&&this.dirtyLocalTransform(e,i);}},{key:"setLocalEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var a=e.transformable;V.quat.fromEuler(a.localRotation,t[0],t[1],t[2]),i&&this.dirtyLocalTransform(e,a);}},{key:"setLocalTransform",value:function(e,t){var n=V.mat4.getTranslation(r3,t),r=V.mat4.getRotation(r4,t),i=V.mat4.getScaling(r6,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,rZ,!1),this.setLocalPosition(e,rK,!1),this.setLocalEulerAngles(e,rK,void 0,void 0,!1),this.setLocalSkew(e,r$,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"getPosition",value:function(e){var t=e.transformable;return V.mat4.getTranslation(t.position,this.getWorldTransform(e,t));}},{key:"getRotation",value:function(e){var t=e.transformable;return V.mat4.getRotation(t.rotation,this.getWorldTransform(e,t));}},{key:"getScale",value:function(e){var t=e.transformable;return V.mat4.getScaling(t.scaling,this.getWorldTransform(e,t));}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin;}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transformable;return(t.localDirtyFlag||t.dirtyFlag)&&(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),t.worldTransform;}},{key:"setPosition",value:function(e,t){var n,r=e.transformable;if(r8[0]=t[0],r8[1]=t[1],r8[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(this.getPosition(e),r8)){if(V.vec3.copy(r.position,r8),null!==e.parentNode&&e.parentNode.transformable){var i=e.parentNode.transformable;V.mat4.copy(r9,i.worldTransform),V.mat4.invert(r9,r9),V.vec3.transformMat4(r.localPosition,r8,r9);}else V.vec3.copy(r.localPosition,r8);this.dirtyLocalTransform(e,r);}}},{key:"translate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.set(r0,t,n,r)),V.vec3.equals(t,rK)||(V.vec3.add(r0,this.getPosition(e),t),this.setPosition(e,r0));}},{key:"setRotation",value:function(e,t,n,r,i){var a=e.transformable;if("number"==typeof t&&(t=V.quat.fromValues(t,n,r,i)),null!==e.parentNode&&e.parentNode.transformable){var o=this.getRotation(e.parentNode);V.quat.copy(r2,o),V.quat.invert(r2,r2),V.quat.multiply(a.localRotation,r2,t),V.quat.normalize(a.localRotation,a.localRotation),this.dirtyLocalTransform(e,a);}else this.setLocalRotation(e,t);}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(r2,t[0],t[1],t[2]);var a=this.getRotation(e),o=this.getRotation(e.parentNode);V.quat.copy(it,o),V.quat.invert(it,it),V.quat.multiply(r2,it,r2),V.quat.multiply(i.localRotation,r2,a),V.quat.normalize(i.localRotation,i.localRotation),this.dirtyLocalTransform(e,i);}else this.rotateLocal(e,t);}},{key:"setOrigin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=[t,n,r]);var i=e.transformable;if(t[0]!==i.origin[0]||t[1]!==i.origin[1]||t[2]!==i.origin[2]){var a=i.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtyLocalTransform(e,i);}}},{key:"setEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(i.localRotation,t[0],t[1],t[2]);var a=this.getRotation(e.parentNode);V.quat.copy(r7,V.quat.invert(r2,a)),V.quat.mul(i.localRotation,i.localRotation,r7),this.dirtyLocalTransform(e,i);}else this.setLocalEulerAngles(e,t);}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.geometry;return n.dirty&&ic.styleValueRegistry.updateGeometry(e),(t?n.renderBounds:n.contentBounds||null)||new es;}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!es.isEmpty(r)){var i=n||new es;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i;}return null;}},{key:"getBounds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(e,n,i);if(e.childNodes.forEach(function(e){var r=t.getBounds(e,n);r&&(a?a.add(r):(a=i||new es).update(r.center,r.halfExtents));}),a||(a=new es),n){var o=function(e){var t,n=e;do{if(null===(t=n.parsedStyle)||void 0===t?void 0:t.clipPath)return n;n=n.parentElement;}while(null!==n)return null;}(e);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents);}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a;}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=rQ;e.parentNode.transformable&&(t=V.mat4.invert(r1,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!es.isEmpty(n)){var r=new es;return r.setFromTransformedAABB(n,t),r;}}return this.getBounds(e);}},{key:"getBoundingClientRect",value:function(e){var t,n,r=this.getGeometryBounds(e);es.isEmpty(r)||(n=new es).setFromTransformedAABB(r,this.getWorldTransform(e));var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=(0,G.default)(a,2),s=o[0],l=o[1],u=n.getMax(),c=(0,G.default)(u,2),d=c[0],h=c[1];return new eh(s+((null==i?void 0:i.left)||0),l+((null==i?void 0:i.top)||0),d-s,h-l);}return new eh((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0);}},{key:"internalUpdateTransform",value:function(e){var t,n,r=null===(n=e.parentNode)||void 0===n?void 0:n.transformable;eF(e.transformable),(t=e.transformable).dirtyFlag&&(r?V.mat4.multiply(t.worldTransform,r.worldTransform,t.localTransform):V.mat4.copy(t.worldTransform,t.localTransform),t.dirtyFlag=!1);}},{key:"internalUpdateElement",value:function(e,t){var n=(null===(s=e.ownerDocument)||void 0===s||null===(s=s.defaultView)||void 0===s||null===(s=s.getConfig())||void 0===s||null===(s=s.future)||void 0===s?void 0:s.experimentalAttributeUpdateOptimization)===!0,r=t[t.length-1],i=(null==r?void 0:r.transformDirty)||(null===(l=e.transformable)||void 0===l?void 0:l.localDirtyFlag);e.transformable&&((d=e.transformable).dirtyFlag||(d.dirtyFlag=i)),this.internalUpdateTransform(e),i&&(null===(h=e.dirty)||void 0===h||h.call(e,!0,!0));var a=(null===(u=e.renderable)||void 0===u?void 0:u.boundsDirty)||(null===(c=e.renderable)||void 0===c?void 0:c.renderBoundsDirty);if((i||a)&&(null==r?void 0:r.shapeUpdated)===!1&&n)for(var o=t.length-1;o>=0;){var s,l,u,c,d,h,f,p,v=t[o];if(v.shapeUpdated)break;null===(f=(p=v.node).dirty)||void 0===f||f.call(p,!0,!0),v.shapeUpdated=!0,o-=1;}return i;}},{key:"syncHierarchy",value:function(e){for(var t,n,r=[e],i=e.parentNode?[{node:e.parentNode,transformDirty:(null===(t=e.parentNode.transformable)||void 0===t?void 0:t.localDirtyFlag)||(null===(n=e.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];r.length>0;){for(var a=r.pop(),o=i[i.length-1];i.length>0&&a.parentNode!==o.node;)o=i.pop();var s=this.internalUpdateElement(a,i);if(a.childNodes.length>0){for(var l=a.childNodes.length-1;l>=0;l--)r.push(a.childNodes[l]);i.push({node:a,transformDirty:s,shapeUpdated:!1});}}}},{key:"dirtyLocalTransform",value:function(e,t){n5(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtyWorldTransform(e,t));}},{key:"dirtyWorldTransform",value:function(e,t){this.dirtyWorldInternal(e,t),this.dirtyToRoot(e,!0);}},{key:"dirtyWorldInternal",value:function(e,t){var n,r=this,i=(null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization)===!0;t.dirtyFlag||(t.dirtyFlag=!0,e.dirty(!0,!0),i||e.childNodes.forEach(function(e){var t=e.transformable;r.dirtyWorldInternal(e,t);}));}},{key:"dirtyToRoot",value:function(e){for(var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,o=(null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalAttributeUpdateOptimization)===!0;a&&(null===(n=(r=a).dirty)||void 0===n||n.call(r,!0,!0),!o);)a=a.parentNode;i&&e.forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),this.informDependentDisplayObjects(e);var s=e.mutations||[],l=s.find(function(e){return"attributes"===e.type&&e._boundsChangeData;});l?l._boundsChangeData={affectChildren:l._boundsChangeData.affectChildren||i}:(l={type:"attributes",target:e,_boundsChangeData:{affectChildren:i}},s.push(l)),e.mutations=s;}},{key:"dirtyFragment",value:function(e){var t,n=e.transformable;n&&(n.dirtyFlag=!0,n.localDirtyFlag=!0),null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);for(var r=e.childNodes.length,i=0;i<r;i++)this.dirtyFragment(e.childNodes[i]);}},{key:"notifyMutationObservers",value:function(e){var t=new Set;if(e.getRoot().forEach(function(e){(e.mutations||[]).forEach(function(n){"attributes"===n.type&&n._boundsChangeData&&(n._boundsChangeData.affectChildren?e.forEach(function(e){var r=(0,L.default)({},n);r.target=e,t.add(r);}):t.add(n));}),e.mutations=void 0;}),t.size>0){var n=new rz(rY.BOUNDS_CHANGED,{detail:Array.from(t)});e.dispatchEvent(n,!0,!0);}}},{key:"updateDisplayObjectDependency",value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1);}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r);}}},{key:"informDependentDisplayObjects",value:function(e){var t,n=this,r=this.displayObjectDependencyMap.get(e);if(r){var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalCancelEventPropagation;Object.keys(r).forEach(function(e){r[e].forEach(function(t){n.dirtyToRoot(t,!0),t.dispatchEvent(new rq(rY.ATTR_MODIFIED,t,n,n,e,rq.MODIFICATION,n,n),i,i),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback(e,n,n);});});}}}]),ii=(0,D.default)(function e(t){if((0,R.default)(this,e),t<=0)throw Error("LRU capacity must be a positive number.");this.capacity=t,this.cache=new Map;},[{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t;}}},{key:"put",value:function(e,t){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache.delete(n);}}},{key:"len",value:function(){return this.cache.size;}},{key:"clear",value:function(){this.cache.clear();}}]),ia={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},io=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,is=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),il=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),iu=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return!n.isBreakingSpace(t)&&!!(e&&(il.exec(t)||is.exec(e)));},this.trimByKinsokuShorui=function(e){var t=(0,I.default)(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t;},this.runtime=t,this.charWidthCache=new ii(100);},[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=ia.MetricsString+ia.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(ia.BaselineSymbol).width),l=ia.HeightMultiplier*s;s=s*ia.BaselineMultiplier|0,r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var u=i.getImageData(0,0,o||1,l||1).data,c=u.length,d=4*o,h=0,f=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<d;v+=4)if(255!==u[f+v]){p=!0;break;}if(p)break;f+=d;}for(n.ascent=s-h,f=c-d,p=!1,h=l;h>s;--h){for(var g=0;g<d;g+=4)if(255!==u[f+g]){p=!0;break;}if(p)break;f-=d;}return n.descent=h-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n;}},{key:"measureText",value:function(e,t,n){var r=t.fontSize,i=void 0===r?16:r,a=t.wordWrap,o=t.lineHeight,s=t.lineWidth,l=void 0===s?1:s,u=t.textBaseline,c=void 0===u?"alphabetic":u,d=t.textAlign,h=void 0===d?"start":d,f=t.letterSpacing,p=void 0===f?0:f,v=t.textPath;t.textPathSide,t.textPathStartOffset;var g=t.leading,m=void 0===g?0:g,y=rp(t),b=this.measureFont(y,n);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);E.font=y,t.isOverflowing=!1;var x=(void 0!==a&&a?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),k=Array(x.length),S=0;if(v){v.getTotalLength();for(var T=0;T<x.length;T++)E.measureText(x[T]).width,x[T].length;}else{for(var M=0;M<x.length;M++){var w=E.measureText(x[M]).width+(x[M].length-1)*p;k[M]=w,S=Math.max(S,w);}var N=S+l,C=o||b.fontSize+l,_=Math.max(C,b.fontSize+l)+(x.length-1)*(C+m);C+=m;var P=0;return"middle"===c?P=-_/2:"bottom"===c||"alphabetic"===c||"ideographic"===c?P=-_:("top"===c||"hanging"===c)&&(P=0),{font:y,width:N,height:_,lines:x,lineWidths:k,lineHeight:C,maxLineWidth:S,fontProperties:b,lineMetrics:k.map(function(e,t){var n=0;return"center"===h||"middle"===h?n-=e/2:("right"===h||"end"===h)&&(n-=e),new eh(n-l/2,P+t*C,e+l,C);})};}}},{key:"wordWrap",value:function(e,t,n){var r=this,i=Array.from(e);if(0===i.length)return"";var a=this,o=t.wordWrapWidth,s=t.letterSpacing,l=void 0===s?0:s,u=t.maxLines,c=void 0===u?1/0:u,d=t.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),f=(void 0===o?0:o)+l,p="";"ellipsis"===d?p="...":d&&"clip"!==d&&(p=d);var v=[""],g=0,m=0,y=-1,b=rp(t),E=this.charWidthCache.get(b);E||(E=new ii(500),this.charWidthCache.put(b,E));var x=function(e){return r.getFromCache(e,l,E,h);},k=x(p);function S(e,t,n,r){for(;x(e)<r&&t<i.length-1&&!a.isNewline(i[t+1]);)t+=1,e+=i[t];for(;x(e)>r&&t>=n;)t-=1,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t};}function T(e,t){if(!(k<=0)&&!(k>f)){if(!v[e]){v[e]=p;return;}var n=S(v[e],t,y+1,f-k);v[e]=n.lineTxt+p;}}for(var M=0;M<i.length;M++){var w=i[M],N=i[M-1],C=i[M+1],_=x(w);if(this.isNewline(w)){if(g+1>=c){M<i.length-1&&T(g,M-1),t.isOverflowing=!0;break;}y=M-1,m=0,v[g+=1]="";continue;}if(_>f){T(g,M-1),t.isOverflowing=!0;break;}if(m>0&&m+_>f){var P=S(v[g],M-1,y+1,f);if(P.txtLastCharIndex!==M-1){if(v[g]=P.lineTxt,P.txtLastCharIndex===i.length-1)break;w=i[M=P.txtLastCharIndex+1],N=i[M-1],C=i[M+1],_=x(w);}if(g+1>=c){T(g,M-1),t.isOverflowing=!0;break;}if(y=M-1,m=0,v[g+=1]="",this.isBreakingSpace(w))continue;this.canBreakInLastChar(w)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[g]||"",x)),this.shouldBreakByKinsokuShorui(w,C)&&(v=this.trimByKinsokuShorui(v),m+=x(N||""));}m+=_,v[g]+=w;}return v.join("\n");}},{key:"isBreakingSpace",value:function(e){return"string"==typeof e&&ia.BreakingSpaces.indexOf(e.charCodeAt(0))>=0;}},{key:"isNewline",value:function(e){return"string"==typeof e&&ia.Newlines.indexOf(e.charCodeAt(0))>=0;}},{key:"trimToBreakable",value:function(e){var t=(0,I.default)(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return t;var i=n.slice(r,r+1),a=this.isBreakingSpace(i);return t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,r+(a?0:1)),t;}},{key:"canBreakInLastChar",value:function(e){return!(e&&io.test(e));}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce(function(e,n){return e+t(n);},0);}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!io.test(e[t]))return t;return -1;}},{key:"getFromCache",value:function(e,t,n,r){var i=n.get(e);if("number"!=typeof i){var a=e.length*t;i=r.measureText(e).width+a,n.put(e,i);}return i;}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear();}}]),ic={},id=(k=new rO,S=new rA,x={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(x,Q.FRAGMENT,null),Q.CIRCLE,new rN),Q.ELLIPSE,new rC),Q.RECT,k),Q.IMAGE,k),Q.GROUP,new rR),Q.LINE,new r_),Q.TEXT,new rL(ic)),Q.POLYLINE,S),Q.POLYGON,S),(0,U.default)((0,U.default)((0,U.default)(x,Q.PATH,new rP),Q.HTML,new rD),Q.MESH,null)),ih=(M=new nj,w=new nW,T={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,ez.PERCENTAGE,null),ez.NUMBER,new n$),ez.ANGLE,new nz),ez.DEFINED_PATH,new nV),ez.PAINT,M),ez.COLOR,M),ez.FILTER,new nU),ez.LENGTH,w),ez.LENGTH_PERCENTAGE,w),ez.LENGTH_PERCENTAGE_12,new nY),(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,ez.LENGTH_PERCENTAGE_14,new nq),ez.COORDINATE,new nW),ez.OFFSET_DISTANCE,new nK),ez.OPACITY_VALUE,new nZ),ez.PATH,new nQ),ez.LIST_OF_POINTS,new nJ),ez.SHADOW_BLUR,new n0),ez.TEXT,new n1),ez.TEXT_TRANSFORM,new n2),ez.TRANSFORM,new rT),(0,U.default)((0,U.default)((0,U.default)(T,ez.TRANSFORM_ORIGIN,new rM),ez.Z_INDEX,new rw),ez.MARKER,new nX));ic.CameraContribution=eO,ic.AnimationTimeline=null,ic.EasingFunction=null,ic.offscreenCanvasCreator=new rj,ic.sceneGraphSelector=new rW,ic.sceneGraphService=new ir(ic),ic.textService=new iu(ic),ic.geometryUpdaterFactory=id,ic.CSSPropertySyntaxFactory=ih,ic.styleValueRegistry=new nF(ic),ic.layoutRegistry=null,ic.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Z?Z:{},ic.enableStyleSyntax=!0,ic.enableSizeAttenuation=!1;var ip=0,iv=new rq(rY.INSERTED,null,"","","",0,"",""),ig=new rq(rY.REMOVED,null,"","","",0,"",""),im=new rz(rY.DESTROY),iy=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).entity=ip++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:eL.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"dirty",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=e,void 0!==t&&(this.renderable.boundsDirty=t,this.renderable.renderBoundsDirty=t,this.geometry.dirty=t);}},{key:"className",get:function(){return this.getAttribute("class")||"";},set:function(e){this.setAttribute("class",e);}},{key:"classList",get:function(){return this.className.split(" ").filter(function(e){return""!==e;});}},{key:"tagName",get:function(){return this.nodeName;}},{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"parentElement",get:function(){return this.parentNode;}},{key:"nextSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null;}return null;}},{key:"previousSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null;}return null;}},{key:"cloneNode",value:function(e){throw Error(ef);}},{key:"appendChild",value:function(e,t){var n;if(e.destroyed)throw Error("Cannot append a destroyed element.");return ic.sceneGraphService.attach(e,this,t),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(n5(this)||e.nodeName!==Q.FRAGMENT?this.ownerDocument.defaultView.mountChildren(e):this.ownerDocument.defaultView.mountFragment(e)),this.isMutationObserved&&(iv.relatedNode=this,e.dispatchEvent(iv)),e;}},{key:"insertBefore",value:function(e,t){if(t){e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);-1===n?this.appendChild(e):this.appendChild(e,n);}else this.appendChild(e);return e;}},{key:"replaceChild",value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t;}},{key:"removeChild",value:function(e){var t,n,r=(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return ig.relatedNode=this,e.dispatchEvent(ig,r,r),null!==(n=e.ownerDocument)&&void 0!==n&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),ic.sceneGraphService.detach(e),e;}},{key:"removeChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t);}}},{key:"destroyChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy();}}},{key:"matches",value:function(e){return ic.sceneGraphService.matches(e,this);}},{key:"getElementById",value:function(e){return ic.sceneGraphService.querySelector("#".concat(e),this);}},{key:"getElementsByName",value:function(e){return ic.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this);}},{key:"getElementsByClassName",value:function(e){return ic.sceneGraphService.querySelectorAll(".".concat(e),this);}},{key:"getElementsByTagName",value:function(e){return ic.sceneGraphService.querySelectorAll(e,this);}},{key:"querySelector",value:function(e){return ic.sceneGraphService.querySelector(e,this);}},{key:"querySelectorAll",value:function(e){return ic.sceneGraphService.querySelectorAll(e,this);}},{key:"closest",value:function(e){var t=this;do{if(ic.sceneGraphService.matches(e,t))return t;t=t.parentElement;}while(null!==t)return null;}},{key:"find",value:function(e){var t=this,n=null;return this.forEach(function(r){return!(r!==t&&e(r))||(n=r,!1);}),n;}},{key:"findAll",value:function(e){var t=this,n=[];return this.forEach(function(r){r!==t&&e(r)&&n.push(r);}),n;}},{key:"after",value:function(){var e=this;if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){var i;return null===(i=e.parentNode)||void 0===i?void 0:i.appendChild(n,t+r+1);});}}},{key:"before",value:function(){if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=(0,W.default)(n).slice(1);this.parentNode.appendChild(i,e),i.after.apply(i,(0,I.default)(a));}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove();}},{key:"append",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t);});}},{key:"prepend",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t,n){return e.appendChild(t,n);});}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments);}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this;}},{key:"destroy",value:function(){var e,t=(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(im,t,t),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0;}},{key:"getGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ic.sceneGraphService.getGeometryBounds(this,e);}},{key:"getTransformedGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ic.sceneGraphService.getTransformedGeometryBounds(this,e);}},{key:"getBounds",value:function(){return ic.sceneGraphService.getBounds(this);}},{key:"getRenderBounds",value:function(){return ic.sceneGraphService.getBounds(this,!0);}},{key:"getLocalBounds",value:function(){return ic.sceneGraphService.getLocalBounds(this);}},{key:"getBoundingClientRect",value:function(){return ic.sceneGraphService.getBoundingClientRect(this);}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle));}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes);}},{key:"getAttribute",value:function(e){if("symbol"!=typeof e)return this.attributes[e];}},{key:"hasAttribute",value:function(e){return this.getAttributeNames().includes(e);}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length;}},{key:"removeAttribute",value:function(e){this.setAttribute(e,null),delete this.attributes[e];}},{key:"setAttribute",value:function(e,t){this.attributes[e]=t;}},{key:"getAttributeNS",value:function(e,t){throw Error(ef);}},{key:"getAttributeNode",value:function(e){throw Error(ef);}},{key:"getAttributeNodeNS",value:function(e,t){throw Error(ef);}},{key:"hasAttributeNS",value:function(e,t){throw Error(ef);}},{key:"removeAttributeNS",value:function(e,t){throw Error(ef);}},{key:"removeAttributeNode",value:function(e){throw Error(ef);}},{key:"setAttributeNS",value:function(e,t,n){throw Error(ef);}},{key:"setAttributeNode",value:function(e){throw Error(ef);}},{key:"setAttributeNodeNS",value:function(e){throw Error(ef);}},{key:"toggleAttribute",value:function(e,t){throw Error(ef);}}]);}(rV);function ib(e){return!!(null!=e&&e.nodeName);}var iE=ic.globalThis.Proxy?ic.globalThis.Proxy:function(){},ix=new rq(rY.ATTR_MODIFIED,null,null,null,null,rq.MODIFICATION,null,null),ik=V.vec3.create(),iS=V.quat.create(),iT=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||Q.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),ic.enableStyleSyntax&&(n.style=new iE({setProperty:function(e,t){n.setAttribute(e,t);},getPropertyValue:function(e){return n.getAttribute(e);},removeProperty:function(e){n.removeAttribute(e);},item:function(){return"";}},{get:function(e,t){return void 0!==e[t]?e[t]:n.getAttribute(t);},set:function(e,t,r){return n.setAttribute(t,r),!0;}})),n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"destroy",value:function(){(0,H.default)(t,"destroy",this,3)([]),this.getAnimations().forEach(function(e){e.cancel();});}},{key:"cloneNode",value:function(e,t){var n=(0,L.default)({},this.attributes);for(var r in n){var i=n[r];ib(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i));}var a=new this.constructor((0,L.default)((0,L.default)({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n);}}),a;}},{key:"initAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ic.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.dirty();}},{key:"setAttribute",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];!(0,j.isUndefined)(n)&&(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),(0,H.default)(t,"setAttribute",this,3)([e,n]));}},{key:"setAttributes",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.skipDispatchAttrModifiedEvent,a=void 0!==i&&i;if(a||(t=(0,L.default)({},this.attributes),n=(0,L.default)({},this.parsedStyle)),ic.styleValueRegistry.processProperties(this,e,r),this.dirty(),!a)for(var o in e)this.dispatchAttrModifiedEvent(o,t[o],e[o],n[o]);}},{key:"internalSetAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.attributes[e],i=this.parsedStyle[e];ic.styleValueRegistry.processProperties(this,(0,U.default)({},e,t),n),this.dirty(),this.dispatchAttrModifiedEvent(e,r,t,i);}},{key:"dispatchAttrModifiedEvent",value:function(e,t,n,r){var i,a=this.parsedStyle[e];if(this.isConnected){if(ix.relatedNode=this,ix.prevValue=t,ix.newValue=n,ix.attrName=e,ix.prevParsedValue=r,ix.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(ix);else{var o,s=(null===(o=this.ownerDocument.defaultView.getConfig().future)||void 0===o?void 0:o.experimentalCancelEventPropagation)===!0;ix.target=this,this.ownerDocument.defaultView.dispatchEvent(ix,!0,s);}}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(i=this.attributeChangedCallback)||void 0===i||i.call(this,e,t,n,r,a));}},{key:"getBBox",value:function(){var e=this.getBounds(),t=e.getMin(),n=(0,G.default)(t,2),r=n[0],i=n[1],a=e.getMax(),o=(0,G.default)(a,2);return new eh(r,i,o[0]-r,o[1]-i);}},{key:"setOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ic.sceneGraphService.setOrigin(this,eg(e,t,n,!1)),this;}},{key:"getOrigin",value:function(){return ic.sceneGraphService.getOrigin(this);}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ic.sceneGraphService.setPosition(this,eg(e,t,n,!1)),this;}},{key:"setLocalPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ic.sceneGraphService.setLocalPosition(this,eg(e,t,n,!1)),this;}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ic.sceneGraphService.translate(this,eg(e,t,n,!1)),this;}},{key:"translateLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ic.sceneGraphService.translateLocal(this,eg(e,t,n,!1)),this;}},{key:"getPosition",value:function(){return ic.sceneGraphService.getPosition(this);}},{key:"getLocalPosition",value:function(){return ic.sceneGraphService.getLocalPosition(this);}},{key:"scale",value:function(e,t,n){return this.scaleLocal(e,t,n);}},{key:"scaleLocal",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=eg(e,t,n,!1)),ic.sceneGraphService.scaleLocal(this,e),this;}},{key:"setLocalScale",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=eg(e,t,n,!1)),ic.sceneGraphService.setLocalScale(this,e),this;}},{key:"getLocalScale",value:function(){return ic.sceneGraphService.getLocalScale(this);}},{key:"getScale",value:function(){return ic.sceneGraphService.getScale(this);}},{key:"getEulerAngles",value:function(){var e=eE(ik,ic.sceneGraphService.getWorldTransform(this));return(0,G.default)(e,3)[2]*ey;}},{key:"getLocalEulerAngles",value:function(){var e=eE(ik,ic.sceneGraphService.getLocalRotation(this));return(0,G.default)(e,3)[2]*ey;}},{key:"setEulerAngles",value:function(e){return ic.sceneGraphService.setEulerAngles(this,0,0,e),this;}},{key:"setLocalEulerAngles",value:function(e){return ic.sceneGraphService.setLocalEulerAngles(this,0,0,e),this;}},{key:"rotateLocal",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ic.sceneGraphService.rotateLocal(this,0,0,e):ic.sceneGraphService.rotateLocal(this,e,t,n),this;}},{key:"rotate",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ic.sceneGraphService.rotate(this,0,0,e):ic.sceneGraphService.rotate(this,e,t,n),this;}},{key:"setRotation",value:function(e,t,n,r){return ic.sceneGraphService.setRotation(this,e,t,n,r),this;}},{key:"setLocalRotation",value:function(e,t,n,r){return ic.sceneGraphService.setLocalRotation(this,e,t,n,r),this;}},{key:"setLocalSkew",value:function(e,t){return ic.sceneGraphService.setLocalSkew(this,e,t),this;}},{key:"getRotation",value:function(){return ic.sceneGraphService.getRotation(this);}},{key:"getLocalRotation",value:function(){return ic.sceneGraphService.getLocalRotation(this);}},{key:"getLocalSkew",value:function(){return ic.sceneGraphService.getLocalSkew(this);}},{key:"getLocalTransform",value:function(){return ic.sceneGraphService.getLocalTransform(this);}},{key:"getWorldTransform",value:function(){return ic.sceneGraphService.getWorldTransform(this);}},{key:"setLocalTransform",value:function(e){return ic.sceneGraphService.setLocalTransform(this,e),this;}},{key:"resetLocalTransform",value:function(){ic.sceneGraphService.resetLocalTransform(this);}},{key:"getAnimations",value:function(){return this.activeAnimations;}},{key:"animate",value:function(e,t){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,e,t):null;}},{key:"isVisible",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.visibility)!=="hidden";}},{key:"interactive",get:function(){return this.isInteractive();},set:function(e){this.style.pointerEvents=e?"auto":"none";}},{key:"isInteractive",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.pointerEvents)!=="none";}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible);}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))+1),this;}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))-1),this;}},{key:"getConfig",value:function(){return this.config;}},{key:"attr",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?(0,j.isObject)(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t]);}),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes;}},{key:"getMatrix",value:function(e){var t,n,r,i=e||this.getWorldTransform(),a=V.mat4.getTranslation(ik,i),o=(0,G.default)(a,2),s=o[0],l=o[1],u=V.mat4.getScaling(ik,i),c=(0,G.default)(u,2),d=c[0],h=c[1],f=eE(ik,V.mat4.getRotation(iS,i)),p=(0,G.default)(f,3),v=p[0],g=p[2];return n=Math.cos(t=v||g),r=Math.sin(t),V.mat3.fromValues(d*n,h*r,0,-d*r,h*n,0,s,l,1);}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform());}},{key:"setMatrix",value:function(e){var t=ex(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o);}},{key:"setLocalMatrix",value:function(e){var t=ex(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o);}},{key:"show",value:function(){this.forEach(function(e){e.style.visibility="visible";});}},{key:"hide",value:function(){this.forEach(function(e){e.style.visibility="hidden";});}},{key:"getCount",value:function(){return this.childElementCount;}},{key:"getParent",value:function(){return this.parentElement;}},{key:"getChildren",value:function(){return this.children;}},{key:"getFirst",value:function(){return this.firstElementChild;}},{key:"getLast",value:function(){return this.lastElementChild;}},{key:"getChildByIndex",value:function(e){return this.children[e]||null;}},{key:"add",value:function(e,t){return this.appendChild(e,t);}},{key:"set",value:function(e,t){this.config[e]=t;}},{key:"get",value:function(e){return this.config[e];}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"setZIndex",value:function(e){return this.style.zIndex=e,this;}}]);}(iy);iT.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var iM=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.CIRCLE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT);iM.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var iw=["style"];(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iw);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({style:r},i)])).isCustomElement=!0,e;}return(0,F.default)(t,e),(0,D.default)(t);})(iT).PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iN=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.ELLIPSE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT);iN.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,[{type:Q.FRAGMENT}]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT).PARSED_STYLE_LIST=new Set(["class","className"]);var iC=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.GROUP},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT);iC.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var i_=["style"],iP=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,i_);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.HTML,style:r},i)])).cullable.enable=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getDomElement",value:function(){return this.parsedStyle.$el;}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"getLocalBounds",value:function(){if(this.parentNode){var e=V.mat4.invert(V.mat4.create(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!es.isEmpty(t)){var n=new es;return n.setFromTransformedAABB(t,e),n;}}return this.getBounds();}}]);}(iT);iP.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var iA=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.IMAGE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT);iA.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var iO=["style"],iL=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iO);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.LINE,style:(0,L.default)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&ib(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&ib(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"x1"===e||"y1"===e||"x2"===e||"y2"===e||"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&ib(r)&&(this.markerStartAngle=0,r.remove()),i&&ib(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e&&(r&&ib(r)&&(this.markerEndAngle=0,r.remove()),i&&ib(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)));}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=s.x1,f=s.x2,p=s.y1,v=s.y2,g=e?l:u;if(g&&ib(g)){var m=0;e?(r=h,i=p,t=f-h,n=v-p,a=c||0,o=this.markerStartAngle):(r=f,i=v,t=h-f,n=p-v,a=d||0,o=this.markerEndAngle),m=Math.atan2(n,t),g.setLocalEulerAngles(180*m/Math.PI+o),g.setLocalPosition(r+Math.cos(m)*a,i+Math.sin(m)*a);}}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=(0,Y.linePointAt)(r,i,a,o,e),l=s.x,u=s.y,c=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(l,u,0),t?this.getWorldTransform():this.getLocalTransform());return new ed(c[0],c[1]);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getTotalLength",value:function(){var e=this.parsedStyle,t=e.x1,n=e.y1,r=e.x2,i=e.y2;return(0,Y.lineLength)(t,n,r,i);}}]);}(iT);iL.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var iR=["style"],iD=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iR);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.PATH,style:r,initialParsedStyle:{miterLimit:4,d:(0,L.default)({},eG)}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&ib(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&ib(l)&&e.placeMarkerMid(l),s&&ib(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"d"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&ib(r)&&(this.markerStartAngle=0,r.remove()),i&&ib(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&ib(r)&&(this.markerEndAngle=0,r.remove()),i&&ib(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=e?l:u;if(h&&ib(h)){var f=0;if(e){var p=this.getStartTangent(),v=(0,G.default)(p,2),g=v[0],m=v[1];r=m[0],i=m[1],t=g[0]-m[0],n=g[1]-m[1],a=c||0,o=this.markerStartAngle;}else{var y=this.getEndTangent(),b=(0,G.default)(y,2),E=b[0],x=b[1];r=x[0],i=x[1],t=E[0]-x[0],n=E[1]-x[1],a=d||0,o=this.markerEndAngle;}f=Math.atan2(n,t),h.setLocalEulerAngles(180*f/Math.PI+o),h.setLocalPosition(r+Math.cos(f)*a,i+Math.sin(f)*a);}}},{key:"placeMarkerMid",value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(e){e.remove();}),e&&ib(e))for(var n=1;n<t.length-1;n++){var r=(0,G.default)(t[n].currentPoint,2),i=r[0],a=r[1],o=1===n?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a);}}},{key:"getTotalLength",value:function(){return nn(this);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.d.absolutePath,r=(0,j.getPointAtLength)(n,e),i=r.x,a=r.y,o=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new ed(o[0],o[1]);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(e*nn(this),t);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?t.push([n[0]-i[0],n[1]-i[1]]):t.push([r[0],r[1]]),t.push([n[0],n[1]]);}return t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?n.push([i[0]-a[0],i[1]-a[1]]):n.push([r[0],r[1]]),n.push([i[0],i[1]]);}return n;}}]);}(iT);iD.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var iI=["style"],iB=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iI);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&ib(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&ib(l)&&e.placeMarkerMid(l),s&&ib(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"points"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&ib(r)&&(this.markerStartAngle=0,r.remove()),i&&ib(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&ib(r)&&(this.markerEndAngle=0,r.remove()),i&&ib(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=(s.points||{}).points,f=e?l:u;if(f&&ib(f)&&h){var p=0;if(r=h[0][0],i=h[0][1],e)t=h[1][0]-h[0][0],n=h[1][1]-h[0][1],a=c||0,o=this.markerStartAngle;else{var v=h.length;this.parsedStyle.isClosed?(t=h[v-1][0]-h[0][0],n=h[v-1][1]-h[0][1]):(r=h[v-1][0],i=h[v-1][1],t=h[v-2][0]-h[v-1][0],n=h[v-2][1]-h[v-1][1]),a=d||0,o=this.markerEndAngle;}p=Math.atan2(n,t),f.setLocalEulerAngles(180*p/Math.PI+o),f.setLocalPosition(r+Math.cos(p)*a,i+Math.sin(p)*a);}}},{key:"placeMarkerMid",value:function(e){var t=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(e){e.remove();}),this.markerMidList=[],e&&ib(e)&&t)for(var n=1;n<(this.parsedStyle.isClosed?t.length:t.length-1);n++){var r=t[n][0],i=t[n][1],a=1===n?e:e.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i);}}}]);}(iT);iB.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var iF=["style"],iG=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iF);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getTotalLength",value:function(){return 0===this.parsedStyle.points.totalLength&&(this.parsedStyle.points.totalLength=(0,Y.polylineLength)(this.parsedStyle.points.points)),this.parsedStyle.points.totalLength;}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach(function(e,t){n[t+1]&&((r=[0,0])[0]=o/s,i=(0,Y.lineLength)(e[0],e[1],n[t+1][0],n[t+1][1]),o+=i,r[1]=o/s,a.push(r));}),this.parsedStyle.points.segments=a;}var l=0,u=0;this.parsedStyle.points.segments.forEach(function(t,n){e>=t[0]&&e<=t[1]&&(l=(e-t[0])/(t[1]-t[0]),u=n);});var c=(0,Y.linePointAt)(n[u][0],n[u][1],n[u+1][0],n[u+1][1],l),d=c.x,h=c.y,f=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(d,h,0),t?this.getWorldTransform():this.getLocalTransform());return new ed(f[0],f[1]);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n;}}]);}(iB);iG.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iB.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var iz=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.RECT},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iT);iz.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var iV=["style"],ij=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iV);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.TEXT,style:(0,L.default)({fill:"black"},n)},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getComputedTextLength",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.maxLineWidth)||0;}},{key:"getLineBoundingRects",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.lineMetrics)||[];}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing;}}]);}(iT);ij.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iT.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"])),(0,D.default)(function e(){(0,R.default)(this,e),this.registry={},this.define(Q.CIRCLE,iM),this.define(Q.ELLIPSE,iN),this.define(Q.RECT,iz),this.define(Q.IMAGE,iA),this.define(Q.LINE,iL),this.define(Q.GROUP,iC),this.define(Q.PATH,iD),this.define(Q.POLYGON,iB),this.define(Q.POLYLINE,iG),this.define(Q.TEXT,ij),this.define(Q.HTML,iP);},[{key:"define",value:function(e,t){this.registry[e]=t;}},{key:"get",value:function(e){return this.registry[e];}}]),function(){function e(t){(0,R.default)(this,e),this.strategies=t;}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.config,r=t.camera,i=t.renderingService,a=t.renderingContext,o=this.strategies;i.hooks.cull.tap(e.tag,function(e){if(e){var t,i=e.cullable;if(0===o.length?i.visible=a.unculledEntities.indexOf(e.entity)>-1:i.visible=o.every(function(t){return t.isVisible(r,e);}),!e.isCulled()&&e.isVisible())return e;var s=(null===(t=n.future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return e.dispatchEvent(new rz(rY.CULLED),s,s),null;}return e;}),i.hooks.afterRender.tap(e.tag,function(e){e.cullable.visibilityPlaneMask=-1;});}}]);}().tag="Culling",function(){function e(){var t=this;(0,R.default)(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new rF(null),this.rootWheelEvent=new rG(null),this.onPointerMove=function(e){var n=null===(r=t.context.renderingContext.root)||void 0===r||null===(r=r.ownerDocument)||void 0===r?void 0:r.defaultView;if(!n.supportsTouchEvents||"touch"!==e.pointerType){var r,i,a=t.normalizeToPointerEvent(e,n),o=(0,$.default)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=t.bootstrapEvent(t.rootPointerEvent,s,n,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);}},this.onClick=function(e){var n,r,i=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=t.normalizeToPointerEvent(e,i),o=(0,$.default)(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=t.bootstrapEvent(t.rootPointerEvent,s,i,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);};}return(0,D.default)(e,[{key:"apply",value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null;}),r.hooks.pointerWheel.tap(e.tag,function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t);}),r.hooks.pointerDown.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t=n.normalizeToPointerEvent(e,i);n.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();var r,a=(0,$.default)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerUp.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,e)?"":"outside",o=n.normalizeToPointerEvent(e,i),s=(0,$.default)(o);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,e);u.type+=a,n.context.eventService.mapEvent(u);}}catch(e){s.e(e);}finally{s.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(e){var t,r=n.normalizeToPointerEvent(e,i),a=(0,$.default)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);});}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),l=s.x,u=s.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n4[e.type]||e.type),e;}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t;}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=n6.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null;}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default");}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];(0,j.isUndefined)(i.button)&&(i.button=0),(0,j.isUndefined)(i.buttons)&&(i.buttons=1),(0,j.isUndefined)(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,j.isUndefined)(i.width)&&(i.width=i.radiusX||1),(0,j.isUndefined)(i.height)&&(i.height=i.radiusY||1),(0,j.isUndefined)(i.tiltX)&&(i.tiltX=0),(0,j.isUndefined)(i.tiltY)&&(i.tiltY=0),(0,j.isUndefined)(i.pointerType)&&(i.pointerType="touch"),(0,j.isUndefined)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,j.isUndefined)(i.pressure)&&(i.pressure=i.force||.5),(0,j.isUndefined)(i.twist)&&(i.twist=0),(0,j.isUndefined)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i);}else t.isMouseEvent(e)&&((0,j.isUndefined)(e.isPrimary)&&(e.isPrimary=!0),(0,j.isUndefined)(e.width)&&(e.width=1),(0,j.isUndefined)(e.height)&&(e.height=1),(0,j.isUndefined)(e.tiltX)&&(e.tiltX=0),(0,j.isUndefined)(e.tiltY)&&(e.tiltY=0),(0,j.isUndefined)(e.pointerType)&&(e.pointerType="mouse"),(0,j.isUndefined)(e.pointerId)&&(e.pointerId=1),(0,j.isUndefined)(e.pressure)&&(e.pressure=.5),(0,j.isUndefined)(e.twist)&&(e.twist=0),(0,j.isUndefined)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),n.push(e);return n;}}]);}().tag="Event";var iU=[Q.CIRCLE,Q.ELLIPSE,Q.IMAGE,Q.RECT,Q.LINE,Q.POLYLINE,Q.POLYGON,Q.TEXT,Q.PATH,Q.HTML];(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"isVisible",value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(es.isEmpty(i))return!1;var a=e.getFrustum(),o=null===(n=t.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||eu.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==eu.OUTSIDE,r.visible;}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n,r){if(n===eu.OUTSIDE||n===eu.INSIDE)return n;for(var i=eu.INSIDE,a=iU.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var l=1<<o;if((n&l)!=0&&(!a||4!==o&&5!==o)){var u=r[o],c=u.normal,d=u.distance;if(V.vec3.dot(c,t.getPositiveFarPoint(r[o]))+d<0)return eu.OUTSIDE;V.vec3.dot(c,t.getNegativeFarPoint(r[o]))+d<0&&(i|=l);}}return i;}}]),function(){function e(){(0,R.default)(this,e),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1;}return(0,D.default)(e,[{key:"apply",value:function(t){var n,r=this,i=t.renderingService,a=t.renderingContext.root.ownerDocument.defaultView,o=function(e){i.dirty();},s=function(e){var t,n=e.detail;(t=r.mutationRecords).push.apply(t,(0,I.default)(n)),i.dirty();},l=function(e){var t=e.target;ic.enableSizeAttenuation&&ic.styleValueRegistry.updateSizeAttenuation(t,a.getCamera().getZoom());},u=function(e){var t=e.target;ic.sceneGraphService.dirtyToRoot(t),i.dirty();};i.hooks.init.tap(e.tag,function(){a.addEventListener(rY.MOUNTED,l),a.addEventListener(rY.UNMOUNTED,u),a.addEventListener(rY.ATTR_MODIFIED,o),a.addEventListener(rY.BOUNDS_CHANGED,s);}),i.hooks.destroy.tap(e.tag,function(){a.removeEventListener(rY.MOUNTED,l),a.removeEventListener(rY.UNMOUNTED,u),a.removeEventListener(rY.ATTR_MODIFIED,o),a.removeEventListener(rY.BOUNDS_CHANGED,s),r.mutationRecords=[];});var c=null!==(n=ic.globalThis.requestIdleCallback)&&void 0!==n?n:ra.bind(ic.globalThis);i.hooks.endFrame.tap(e.tag,function(){r.isFirstTimeRendering&&(r.isFirstTimeRendering=!1,c(function(){r.isFirstTimeRenderingFinished=!0;})),r.mutationRecords=[];});}}]);}().tag="Prepare";var iH=((N={}).READY="ready",N.BEFORE_RENDER="beforerender",N.RERENDER="rerender",N.AFTER_RENDER="afterrender",N.BEFORE_DESTROY="beforedestroy",N.AFTER_DESTROY="afterdestroy",N.RESIZE="resize",N.DIRTY_RECTANGLE="dirtyrectangle",N.RENDERER_CHANGED="rendererchanged",N);new rz(rY.MOUNTED),new rz(rY.UNMOUNTED),new rz(iH.BEFORE_RENDER),new rz(iH.RERENDER),new rz(iH.AFTER_RENDER);var iW=new WeakMap,iY=function(){function e(t,n){(0,R.default)(this,e),this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[],this.type=t,this.target=n;}return(0,D.default)(e,null,[{key:"copy",value:function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n;}}]);}();function iq(e,t){for(var n=e;n;n=n.parentNode){var r=iW.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.options;if(n===e||o.subtree){var s=t(o);s&&a.enqueue(s);}}}}(0,D.default)(function e(t,n,r){(0,R.default)(this,e),this.transientObservedNodes=[],this.observer=t,this.target=n,this.options=r;},[{key:"enqueue",value:function(e){var t,n=this.observer.records,r=n.length;if(n.length>0){var i,a=(i=n[r-1],i===e?i:A&&(i===A||i===P)?A:null);if(a){n[r-1]=a;return;}}else t=this.observer,i$.push(t),iX||(iX=!0,void 0!==ic.globalThis?ic.globalThis.setTimeout(iK):iK());n[r]=e;}},{key:"addListeners",value:function(){this.addListeners_(this.target);}},{key:"addListeners_",value:function(e){var t=this.options;t.attributes&&e.addEventListener(rY.ATTR_MODIFIED,this,!0),t.childList&&e.addEventListener(rY.INSERTED,this,!0),(t.childList||t.subtree)&&e.addEventListener(rY.REMOVED,this,!0);}},{key:"removeListeners",value:function(){this.removeListeners_(this.target);}},{key:"removeListeners_",value:function(e){var t=this.options;t.attributes&&e.removeEventListener(rY.ATTR_MODIFIED,this,!0),t.childList&&e.removeEventListener(rY.INSERTED,this,!0),(t.childList||t.subtree)&&e.removeEventListener(rY.REMOVED,this,!0);}},{key:"removeTransientObservers",value:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=iW.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break;}},this);}},{key:"handleEvent",value:function(e){switch(e.stopImmediatePropagation(),e.type){case rY.ATTR_MODIFIED:var t=e.attrName,n=e.relatedNode.namespaceURI;(i=P=new iY("attributes",a=e.target)).attributeName=t,i.attributeNamespace=n;var r=e.attrChange===rq.ADDITION?null:e.prevValue;iq(a,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?(A||((A=iY.copy(P)).oldValue=r),A):i;});break;case rY.REMOVED:case rY.INSERTED:a=e.relatedNode;var i,a,o,s,l=e.target;e.type===rY.INSERTED?(o=[l],s=[]):(o=[],s=[l]);var u=l.previousSibling,c=l.nextSibling;(i=P=new iY("childList",a)).addedNodes=o,i.removedNodes=s,i.previousSibling=u,i.nextSibling=c,iq(a,function(e){if(e.childList)return i;});}P=A=void 0;}}]);var iX=!1,i$=[];function iK(){iX=!1;var e=i$;i$=[],e.sort(function(e,t){return e.uid-t.uid;});var t=!1;e.forEach(function(e){var n=e.takeRecords();(function(e){e.nodes.forEach(function(t){var n=iW.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers();});});})(e),n.length&&(e.callback(n,e),t=!0);}),t&&iK();}var iZ=(0,D.default)(function e(){(0,R.default)(this,e),this.cacheStore=new Map;},[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e);}},{key:"put",value:function(e,t,n){return!this.cacheStore.has(e)&&(this.cacheStore.set(e,{value:t,counter:new Set([n.entity])}),this.onRefAdded(n),!0);}},{key:"get",value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.has(t.entity)||(n.counter.add(t.entity),this.onRefAdded(t)),n.value):null;}},{key:"update",value:function(e,t,n){var r=this.cacheStore.get(e);return!!r&&(r.value=(0,L.default)((0,L.default)({},r.value),t),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0);}},{key:"release",value:function(e,t){var n=this.cacheStore.get(e);return!!n&&(n.counter.delete(t.entity),n.counter.size<=0&&this.cacheStore.delete(e),!0);}},{key:"releaseRef",value:function(e){var t=this;Array.from(this.cacheStore.keys()).forEach(function(n){t.release(n,e);});}},{key:"getSize",value:function(){return this.cacheStore.size;}},{key:"clear",value:function(){this.cacheStore.clear();}}]),iQ=[],iJ=[],i0=function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,null,[{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;e.rafId&&(t.cancelAnimationFrame(e.rafId),e.rafId=null);}},{key:"executeTask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;iQ.length<=0&&iJ.length<=0||(iJ.forEach(function(e){return e();}),iJ=iQ.splice(0,e.TASK_NUM_PER_FRAME),e.rafId=t.requestAnimationFrame(function(){e.executeTask(t);}));}},{key:"sliceImage",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.api,s=t.naturalWidth||t.width,l=t.naturalHeight||t.height,u=n-a,c=r-a,d=Math.ceil(s/u),h=Math.ceil(l/c),f={tileSize:[n,r],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null);})},p=function(e){for(var a=function(a){iQ.push(function(){var d=a*u,h=e*c,p=[Math.min(n,s-d),Math.min(r,l-h)],v=p[0],g=p[1],m=o.createCanvas();m.width=n,m.height=r,m.getContext("2d").drawImage(t,d,h,v,g,0,0,v,g),f.tiles[e][a]={x:d,y:h,tileX:a,tileY:e,data:m},i();});},h=0;h<d;h++)a(h);},v=0;v<h;v++)p(v);return e.stop(),e.executeTask(),f;}}]);}();i0.TASK_NUM_PER_FRAME=10;var i1=new iZ;function i2(e){if(!e.complete)return[0,0];var t=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r=256;return[256,512].forEach(function(e){Math.ceil(n/e)*Math.ceil(t/e)<1e3&&(r=e);}),[r,r];}i1.onRefAdded=function(e){var t=this;e.addEventListener(rY.DESTROY,function(){t.releaseRef(e);},{once:!0});},(0,D.default)(function e(t,n){(0,R.default)(this,e),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=n;},[{key:"getImageSync",value:function(e,t,n){var r=(0,j.isString)(e)?e:e.src;if(i1.has(r)){var i=i1.get(r,t);if(i.img.complete)return null==n||n(i),i;}return this.getOrCreateImage(e,t).then(function(e){null==n||n(e);}).catch(function(e){console.error(e);}),null;}},{key:"getOrCreateImage",value:function(e,t){var n=this,r=(0,j.isString)(e)?e:e.src;if(!(0,j.isString)(e)&&!i1.has(r)){var i={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:i2(e)};i1.put(r,i,t);}if(i1.has(r)){var a=i1.get(r,t);return a.img.complete?Promise.resolve(a):new Promise(function(e,t){a.img.addEventListener("load",function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=i2(a.img),e(a);}),a.img.addEventListener("error",function(e){t(e);});});}return new Promise(function(e,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:i2(a)};i1.put(r,o,t),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=i2(o.img),e(o);},a.onerror=function(e){i(e);},a.crossOrigin="Anonymous",a.src=r;}});}},{key:"createDownSampledImage",value:(C=(0,X.default)((0,q.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h,f,p,v,g;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,n);case 1:if(!(void 0!==(r=e.sent).downSamplingRate)){e.next=2;break;}return e.abrupt("return",r);case 2:if(s=void 0===(o=(a="boolean"==typeof(i=this.context.config.enableLargeImageOptimization)?{}:i).maxDownSampledImageSize)?2048:o,u=void 0===(l=a.downSamplingRateThreshold)?.5:l,c=this.runtime.globalThis.createImageBitmap,h=(d=(0,G.default)(r.size,2))[0],f=d[1],p=r.img,v=Math.min((s+s)/(h+f),Math.max(.01,Math.min(u,.5))),g=(0,L.default)((0,L.default)({},r),{},{downSamplingRate:v}),i1.update(r.img.src,g,n),!c){e.next=7;break;}return e.prev=3,e.next=4,c(r.img,{resizeWidth:h*v,resizeHeight:f*v});case 4:p=e.sent,e.next=6;break;case 5:e.prev=5,e.catch(3),v=1;case 6:e.next=8;break;case 7:v=1;case 8:return g=(0,L.default)((0,L.default)({},this.getImageSync(t,n)),{},{downSampled:p,downSamplingRate:v}),i1.update(r.img.src,g,n),e.abrupt("return",g);case 9:case"end":return e.stop();}},e,this,[[3,5]]);})),function(e,t){return C.apply(this,arguments);})},{key:"createImageTiles",value:(_=(0,X.default)((0,q.default)().mark(function e(t,n,r,i){var a,o,s,l,u;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,i);case 1:return a=e.sent,s=(o=i.ownerDocument.defaultView).requestAnimationFrame,l=o.cancelAnimationFrame,i0.api={requestAnimationFrame:s,cancelAnimationFrame:l,createCanvas:function(){return rj.createCanvas();}},u=(0,L.default)((0,L.default)({},a),i0.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),i1.update(a.img.src,u,i),e.abrupt("return",u);case 2:case"end":return e.stop();}},e,this);})),function(e,t,n,r){return _.apply(this,arguments);})},{key:"releaseImage",value:function(e,t){i1.release((0,j.isString)(e)?e:e.src,t);}},{key:"releaseImageRef",value:function(e){i1.releaseRef(e);}},{key:"getOrCreatePatternSync",value:function(e,t,n,r,i,a,o){var s,l,u=this.generatePatternKey(t);if(u&&this.patternCache[u])return this.patternCache[u];var c=t.image,d=t.repetition,h=t.transform,f=!1;if((0,j.isString)(c)){var p=this.getImageSync(c,e,o);s=null==p?void 0:p.img;}else r?(s=r,f=!0):s=c;var v=s&&n.createPattern(s,d);return v&&(l=h?rS(nk(h),new iT({})):V.mat4.identity(V.mat4.create()),f&&V.mat4.scale(l,l,[1/i,1/i,1]),v.setTransform({a:l[0],b:l[1],c:l[4],d:l[5],e:l[12]+a[0],f:l[13]+a[1]})),u&&v&&(this.patternCache[u]=v),v;}},{key:"getOrCreateGradient",value:function(e,t){var n=this.generateGradientKey(e),r=e.type,i=e.steps,a=e.min,o=e.width,s=e.height,l=e.angle,u=e.cx,c=e.cy,d=e.size;if(this.gradientCache[n])return this.gradientCache[n];var h=null;if(r===tx.LinearGradient){var f,p,v,g,m=(f=l.value*em,p=0+o/2,v=0+s/2,g=Math.abs(o*Math.cos(f))+Math.abs(s*Math.sin(f)),{x1:a[0]+p-Math.cos(f)*g/2,y1:a[1]+v-Math.sin(f)*g/2,x2:a[0]+p+Math.cos(f)*g/2,y2:a[1]+v+Math.sin(f)*g/2}),y=m.x1,b=m.y1,E=m.x2,x=m.y2;h=t.createLinearGradient(y,b,E,x);}else if(r===tx.RadialGradient){var k,S,T,M=(k=u.value,S=c.value,u.unit===tu.kPercentage&&(k=u.value/100*o),c.unit===tu.kPercentage&&(S=c.value/100*s),T=Math.max((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S])),d&&(d instanceof tw?T=d.value:d instanceof tS&&("closest-side"===d.value?T=Math.min(k,o-k,S,s-S):"farthest-side"===d.value?T=Math.max(k,o-k,S,s-S):"closest-corner"===d.value&&(T=Math.min((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S]))))),{x:k+a[0],y:S+a[1],r:T}),w=M.x,N=M.y,C=M.r;h=t.createRadialGradient(w,N,0,w,N,C);}return h&&(i.forEach(function(e){var t,n=e.offset,r=e.color;n.unit===tu.kPercentage&&(null===(t=h)||void 0===t||t.addColorStop(n.value/100,r.toString()));}),this.gradientCache[n]=h),this.gradientCache[n];}},{key:"generateGradientKey",value:function(e){var t=e.type,n=e.min,r=e.width,i=e.height,a=e.steps,o=e.angle,s=e.cx,l=e.cy,u=e.size;return"gradient-".concat(t,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==l?void 0:l.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map(function(e){var t=e.offset,n=e.color;return"".concat(t).concat(n);}).join("-"));}},{key:"generatePatternKey",value:function(e){var t=e.image,n=e.repetition;return(0,j.isString)(t)?"pattern-".concat(t,"-").concat(n):"rect"===t.nodeName?"pattern-".concat(t.entity,"-").concat(n):void 0;}}]).isSupportTile=!!rj.createCanvas(),function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,o=function(e,t,n){var r=e.parsedStyle,i=r.width,a=r.height;i&&!a?e.setAttribute("height",n/t*i):!i&&a&&e.setAttribute("width",t/n*a);},s=function(e){var t=e.target,r=t.nodeName,a=t.attributes;if(r===Q.IMAGE){var s=a.src,l=a.keepAspectRatio;i.getImageSync(s,t,function(e){var r=e.img,i=r.width,a=r.height;l&&o(t,i,a),t.dirty(),n.dirty();});}},l=function(e){var t=e.target,r=e.attrName,a=e.prevValue,s=e.newValue;t.nodeName===Q.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,t),(0,j.isString)(s)&&i.getOrCreateImage(s,t).then(function(e){var r=e.img,i=r.width,a=r.height;t.attributes.keepAspectRatio&&o(t,i,a),t.dirty(),n.dirty();}).catch(function(){}));};n.hooks.init.tap(e.tag,function(){a.addEventListener(rY.MOUNTED,s),a.addEventListener(rY.ATTR_MODIFIED,l);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener(rY.MOUNTED,s),a.removeEventListener(rY.ATTR_MODIFIED,l);});}}]);}().tag="LoadImage",function(){function e(){(0,R.default)(this,e),this.displayObjectHTMLElementMap=new WeakMap;}return(0,D.default)(e,[{key:"joinTransformMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+t[0],e[13]+t[1]].join(","),")");}},{key:"apply",value:function(t,n){var r=this,i=t.camera,a=t.renderingContext,o=t.renderingService;this.context=t;var s=a.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,u=function(e,t){t.style.transform=r.joinTransformMatrix(e.getWorldTransform(),e.getOrigin());},c=function(e){var t=e.target;if(t.nodeName===Q.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(t);r.$camera.appendChild(n),Object.keys(t.attributes).forEach(function(e){r.updateAttribute(e,t);}),u(t,n),l.set(n,t);}},d=function(e){var t=e.target;if(t.nodeName===Q.HTML&&r.$camera){var n=r.getOrCreateEl(t);n&&(n.remove(),l.delete(n));}},h=function(e){var t=e.target;if(t.nodeName===Q.HTML){var n=e.attrName;r.updateAttribute(n,t);}},f=function(e){for(var t=e.detail,n=0;n<t.length;n++){var i=t[n].target;(i.nodeName===Q.FRAGMENT?i.childNodes:[i]).forEach(function(e){if(e.nodeName===Q.HTML){var t=r.getOrCreateEl(e);u(e,t);}});}},p=function(){if(r.$camera){var e=r.context.config,t=e.width,n=e.height;r.$camera.parentElement.style.width="".concat(t||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px");}};o.hooks.init.tap(e.tag,function(){s.addEventListener(iH.RESIZE,p),s.addEventListener(rY.MOUNTED,c),s.addEventListener(rY.UNMOUNTED,d),s.addEventListener(rY.ATTR_MODIFIED,h),s.addEventListener(rY.BOUNDS_CHANGED,f);}),o.hooks.endFrame.tap(e.tag,function(){r.$camera&&a.renderReasons.has(rU.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()));}),o.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(iH.RESIZE,p),s.removeEventListener(rY.MOUNTED,c),s.removeEventListener(rY.UNMOUNTED,d),s.removeEventListener(rY.ATTR_MODIFIED,h),s.removeEventListener(rY.BOUNDS_CHANGED,f);});}},{key:"createCamera",value:function(e){var t=this.context.config,n=t.document,r=t.width,i=t.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",l=o.querySelector("#".concat(s));if(!l){var u=(n||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(r||0,"px"),u.style.height="".concat(i||0,"px");var c=(n||document).createElement("div");l=c,c.id=s,c.style.position="absolute",c.style.left="".concat(a.offsetLeft||0,"px"),c.style.top="".concat(a.offsetTop||0,"px"),c.style.transformOrigin="left top",c.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),c.style.pointerEvents="none",c.style.width="100%",c.style.height="100%",u.appendChild(c),o.appendChild(u);}return l;}return null;}},{key:"getOrCreateEl",value:function(e){var t=this.context.config.document,n=this.displayObjectHTMLElementMap.get(e);return n||(n=(t||document).createElement("div"),e.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(e,n),e.id&&(n.id=e.id),e.name&&n.setAttribute("name",e.name),e.className&&(n.className=e.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),n;}},{key:"updateAttribute",value:function(e,t){var n=this.getOrCreateEl(t);switch(e){case"innerHTML":var r=t.parsedStyle.innerHTML;(0,j.isString)(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(t.parsedStyle.x,"px");break;case"y":n.style.top="".concat(t.parsedStyle.y,"px");break;case"transformOrigin":var i=t.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=t.parsedStyle.width;n.style.width=(0,j.isNumber)(a)?"".concat(a,"px"):a.toString();break;case"height":var o=t.parsedStyle.height;n.style.height=(0,j.isNumber)(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=t.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var l=t.parsedStyle.visibility;n.style.visibility=l;break;case"pointerEvents":var u=t.parsedStyle.pointerEvents;n.style.pointerEvents=void 0===u?"auto":u;break;case"opacity":var c=t.parsedStyle.opacity;n.style.opacity="".concat(c);break;case"fill":var d=t.parsedStyle.fill,h="";tY(d)?h=d.isNone?"transparent":t.getAttribute("fill"):Array.isArray(d)?h=t.getAttribute("fill"):tW(d),n.style.background=h;break;case"stroke":var f=t.parsedStyle.stroke,p="";tY(f)?p=f.isNone?"transparent":t.getAttribute("stroke"):Array.isArray(f)?p=t.getAttribute("stroke"):tW(f),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":var v=t.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var g=t.style.filter;n.style.filter=g;break;default:(0,j.isNil)(t.style[e])||""===t.style[e]||(n.style[e]=t.style[e]);}}}]);}().tag="HTMLRendering",function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,o=t.config;this.context=t;var s=a.root.ownerDocument.defaultView,l=function(e){i.hooks.pointerMove.call(e);},u=function(e){i.hooks.pointerUp.call(e);},c=function(e){i.hooks.pointerDown.call(e);},d=function(e){i.hooks.pointerOver.call(e);},h=function(e){i.hooks.pointerOut.call(e);},f=function(e){i.hooks.pointerCancel.call(e);},p=function(e){i.hooks.pointerWheel.call(e);},v=function(e){i.hooks.click.call(e);},g=function(e){n.globalThis.document.addEventListener("pointermove",l,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("pointerleave",h,!0),e.addEventListener("pointerover",d,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",f,!0);},m=function(e){e.addEventListener("touchstart",c,!0),e.addEventListener("touchend",u,!0),e.addEventListener("touchmove",l,!0),e.addEventListener("touchcancel",f,!0);},y=function(e){n.globalThis.document.addEventListener("mousemove",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("mouseout",h,!0),e.addEventListener("mouseover",d,!0),n.globalThis.addEventListener("mouseup",u,!0);},b=function(e){n.globalThis.document.removeEventListener("pointermove",l,!0),e.removeEventListener("pointerdown",c,!0),e.removeEventListener("pointerleave",h,!0),e.removeEventListener("pointerover",d,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",f,!0);},E=function(e){e.removeEventListener("touchstart",c,!0),e.removeEventListener("touchend",u,!0),e.removeEventListener("touchmove",l,!0),e.removeEventListener("touchcancel",f,!0);},x=function(e){n.globalThis.document.removeEventListener("mousemove",l,!0),e.removeEventListener("mousedown",c,!0),e.removeEventListener("mouseout",h,!0),e.removeEventListener("mouseover",d,!0),n.globalThis.removeEventListener("mouseup",u,!0);};i.hooks.init.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="none",e.style.msTouchAction="none"):s.supportsPointerEvents&&(e.style.touchAction="none"),s.supportsPointerEvents?g(e):y(e),s.supportsTouchEvents&&m(e),o.useNativeClickEvent&&e.addEventListener("click",v,!0),e.addEventListener("wheel",p,{passive:!0,capture:!0});}),i.hooks.destroy.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="",e.style.msTouchAction=""):s.supportsPointerEvents&&(e.style.touchAction=""),s.supportsPointerEvents?b(e):x(e),s.supportsTouchEvents&&E(e),o.useNativeClickEvent&&e.removeEventListener("click",v,!0),e.removeEventListener("wheel",p,!0);});}}]);}().tag="DOMInteraction",function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.contextService,i=t.config,a=r.getDomElement(),o=function(e){n.hooks.pointerDown.call(e);},s=function(e){n.hooks.pointerUp.call(e);},l=function(e){n.hooks.pointerMove.call(e);},u=function(e){n.hooks.pointerOver.call(e);},c=function(e){n.hooks.pointerOut.call(e);},d=function(e){n.hooks.click.call(e);},h=function(e){n.hooks.pointerCancel.call(e);};n.hooks.init.tap(e.tag,function(){a.addEventListener("touchstart",o,!0),a.addEventListener("touchend",s,!0),a.addEventListener("touchmove",l,!0),a.addEventListener("touchcancel",h,!0),a.addEventListener("mouseout",c,!0),a.addEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.addEventListener("click",d,!0);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener("touchstart",o,!0),a.removeEventListener("touchend",s,!0),a.removeEventListener("touchmove",l,!0),a.removeEventListener("touchcancel",h,!0),a.removeEventListener("mouseout",c,!0),a.removeEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.removeEventListener("click",d,!0);});}}]);}().tag="MobileInteraction";},"064434f0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"formatUtil",{enumerable:!0,get:function(){return r;}});let r={toXy(e,t){if(!t)return[...e];let n=t[0].slice(1),r=t[1].slice(1);return e.map(e=>[e[n],e[r]]);},fromXy(e,t){if(!t)return[...e];let n=t[0].slice(1),r=t[1].slice(1);return e.map(([e,t])=>({[n]:e,[r]:t}));}};},"06c9e148":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ArrangeDrawOrder",{enumerable:!0,get:function(){return a;}});var r=n("81401a10"),i=n("eb4593bd");class a extends i.BaseTransform{beforeDraw(e){let{model:t}=this.context,n=e.add.combos,i=e=>{let n=[];return e.forEach((e,i)=>{let a=t.getAncestorsData(i,"combo").map(e=>(0,r.idOf)(e)).reverse();n.push([i,e,a.length]);}),new Map(n.sort(([,,e],[,,t])=>t-e).map(([e,t])=>[e,t]));};return e.add.combos=i(n),e.update.combos=i(e.update.combos),e;}}},"075e742d":function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"ChangeType",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).NodeAdded="NodeAdded",i.NodeUpdated="NodeUpdated",i.NodeRemoved="NodeRemoved",i.EdgeAdded="EdgeAdded",i.EdgeUpdated="EdgeUpdated",i.EdgeRemoved="EdgeRemoved",i.ComboAdded="ComboAdded",i.ComboUpdated="ComboUpdated",i.ComboRemoved="ComboRemoved";},"07d25c97":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Badge",{enumerable:!0,get:function(){return o;}});var r=n("cdd49f4a"),i=n("04a20e6f"),a=n("9644f472");class o extends i.BaseShape{constructor(e){super((0,r.mergeOptions)({style:o.defaultStyleProps},e));}getBadgeStyle(e){return this.getGraphicStyle(e);}render(e=this.parsedAttributes,t=this){this.upsert("label",a.Label,this.getBadgeStyle(e),t);}getGeometryBounds(){let e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds();}}o.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};},"087d2bf0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CubicVertical",{enumerable:!0,get:function(){return a;}});var r=n("cdd49f4a"),i=n("1d8e11d8");class a extends i.Cubic{constructor(e){super((0,r.mergeOptions)({style:a.defaultStyleProps},e));}getControlPoints(e,t,n,r){let i=t[1]-e[1];return[[e[0],e[1]+i*n[0]+r[0]],[t[0],t[1]-i*n[1]+r[1]]];}}a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},"092d36bb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DEFAULT_OPTIONS",{enumerable:!0,get:function(){return r;}});let r={node:{type:"circle"},layout:{type:"d3-force",link:{distance:128},collide:{radius:32},manyBody:{strength:-704},x:{},y:{}}};},"098733a7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ArrowCountIcon",{enumerable:!0,get:function(){return s;}});var r=n("777fffbe"),i=r._(n("3e6b097d")),a=r._(n("247081c8"));let o=a.default.div`
  ${({$placement:e})=>{switch(e){case"top":return"transform: translate(-50%, -100%); flex-direction: column-reverse;";case"right":return"transform: translate(0, -50%);";case"left":return"transform: translate(-100%, -50%); flex-direction: row-reverse;";default:return"transform: translate(-50%, 0); flex-direction: column;";}}}

  .arrow-count-icon-bar {
    ${({$placement:e})=>"top"===e||"bottom"===e?"width: 3px; height: 8px; margin: 0 7px;":"width: 8px; height: 3px; margin: 7px 0;"}
    background-color: ${({$color:e})=>e};
  }

  .arrow-count-icon-circle {
    width: 16px;
    height: 16px;
    color: #fff;
    font-weight: 600;
    font-size: 10px;
    line-height: ${({$isCollapsed:e})=>e?"16px":"14px"};
    text-align: center;
    background-color: ${({$color:e})=>e};
    border-radius: 50%;
  }

  .arrow-count-icon-circle-arrow {
    width: 16px;
    height: 16px;
    transform: ${({$isCollapsed:e,$placement:t})=>{if(e)return"none";switch(t){case"top":return"translateY(1px) rotate(-90deg)";case"right":return"translateX(-1px) rotate(0deg)";case"left":return"translateX(1px) rotate(180deg)";default:return"translateY(-1px) rotate(90deg)";}}};
  }

  display: ${({$isCollapsed:e})=>e?"flex":"none"};

  .collapsible-node-wrapper:hover & {
    display: flex;
  }
`,s=e=>{var t;let{className:n,style:r,graph:a,data:s,isCollapsed:l,countType:u="descendant",placement:c="bottom"}=e,d=(null===(t=a.getNodeData(s.id).style)||void 0===t?void 0:t.color)||"#99ADD1",h=("descendant"===u?a.getDescendantsData(s.id):a.getChildrenData(s.id)).length;return i.default.createElement(o,{$color:d,$isCollapsed:l,$placement:c,className:`arrow-count-icon ${l?"arrow-count-icon-collapsed":""} ${n||""}`,style:r},i.default.createElement("div",{className:"arrow-count-icon-bar"}),i.default.createElement("div",{className:"arrow-count-icon-circle"},l?h:i.default.createElement("div",{className:"arrow-count-icon-circle-arrow"},i.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},i.default.createElement("path",{d:"M11,4 L5.5,8 L11,12",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))));};},"0989fbc2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AnimationType:function(){return r.AnimationType;},CanvasEvent:function(){return i.CanvasEvent;},ComboEvent:function(){return a.ComboEvent;},CommonEvent:function(){return o.CommonEvent;},ContainerEvent:function(){return s.ContainerEvent;},EdgeEvent:function(){return l.EdgeEvent;},GraphEvent:function(){return u.GraphEvent;},HistoryEvent:function(){return c.HistoryEvent;},NodeEvent:function(){return d.NodeEvent;}});var r=n("ee63ceb4"),i=n("67f73c59"),a=n("aa6d8f0b"),o=n("8eccb805"),s=n("e96a45f9"),l=n("69e6ac99"),u=n("da56b468"),c=n("da9864f1"),d=n("dd65e88e");},"0a5b044f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BehaviorController",{enumerable:!0,get:function(){return s;}});var r=n("6b0531cc"),i=n("c23b41b5"),a=n("966f7de2"),o=n("0299759a");class s extends i.ExtensionController{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=e=>{let{target:t}=e,n=(0,o.eventTargetOf)(t);if(!n)return;let{graph:i,canvas:s}=this.context,{type:l,element:u}=n;if("destroyed"in u&&((0,a.isToBeDestroyed)(u)||u.destroyed))return;let{type:c,detail:d,button:h}=e,f=Object.assign(Object.assign({},e),{target:u,targetType:l,originalTarget:t});c===r.CommonEvent.POINTER_MOVE&&(this.currentTarget!==u&&(this.currentTarget&&i.emit(`${this.currentTargetType}:${r.CommonEvent.POINTER_LEAVE}`,Object.assign(Object.assign({},f),{type:r.CommonEvent.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),u&&(Object.assign(f,{type:r.CommonEvent.POINTER_ENTER}),i.emit(`${l}:${r.CommonEvent.POINTER_ENTER}`,f))),this.currentTarget=u,this.currentTargetType=l),c===r.CommonEvent.CLICK&&2===h||(i.emit(`${l}:${c}`,f),i.emit(c,f)),c===r.CommonEvent.CLICK&&2===d&&(Object.assign(f,{type:r.CommonEvent.DBLCLICK}),i.emit(`${l}:${r.CommonEvent.DBLCLICK}`,f),i.emit(r.CommonEvent.DBLCLICK,f)),c===r.CommonEvent.POINTER_DOWN&&2===h&&(Object.assign(f,{type:r.CommonEvent.CONTEXT_MENU,preventDefault:()=>{var e;null===(e=s.getContainer())||void 0===e||e.addEventListener(r.CommonEvent.CONTEXT_MENU,e=>e.preventDefault(),{once:!0});}}),i.emit(`${l}:${r.CommonEvent.CONTEXT_MENU}`,f),i.emit(r.CommonEvent.CONTEXT_MENU,f));},this.forwardContainerEvents=e=>{this.context.graph.emit(e.type,e);},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[]);}setBehaviors(e){this.setExtensions(e);}forwardEvents(){let e=this.context.canvas.getContainer();e&&[r.ContainerEvent.KEY_DOWN,r.ContainerEvent.KEY_UP].forEach(t=>{e.addEventListener(t,this.forwardContainerEvents);});let t=this.context.canvas.document;t&&[r.CommonEvent.CLICK,r.CommonEvent.DBLCLICK,r.CommonEvent.POINTER_OVER,r.CommonEvent.POINTER_LEAVE,r.CommonEvent.POINTER_ENTER,r.CommonEvent.POINTER_MOVE,r.CommonEvent.POINTER_OUT,r.CommonEvent.POINTER_DOWN,r.CommonEvent.POINTER_UP,r.CommonEvent.CONTEXT_MENU,r.CommonEvent.DRAG_START,r.CommonEvent.DRAG,r.CommonEvent.DRAG_END,r.CommonEvent.DRAG_ENTER,r.CommonEvent.DRAG_OVER,r.CommonEvent.DRAG_LEAVE,r.CommonEvent.DROP,r.CommonEvent.WHEEL].forEach(e=>{t.addEventListener(e,this.forwardCanvasEvents);});}destroy(){let e=this.context.canvas.getContainer();e&&[r.ContainerEvent.KEY_DOWN,r.ContainerEvent.KEY_UP].forEach(t=>{e.removeEventListener(t,this.forwardContainerEvents);}),this.context.canvas.document.removeAllEventListeners(),super.destroy();}}},"0b1a7e58":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"FishboneLayout",{enumerable:!0,get:function(){return l;}});var r=n("abe9d8d6"),i=n("81401a10"),a=n("db863a29"),o=n("7ed4a1e7"),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class l extends o.BaseLayout{constructor(){super(...arguments),this.id="fishbone";}getRoot(){let e=this.context.model.getRootsData();if(!(0,r.isEmpty)(e)&&!(e.length>2))return e[0];}formatSize(e){let t="function"==typeof e?e:()=>e;return e=>(0,a.parseSize)(t(e));}doLayout(e,t){let{hGap:n,getRibSep:a,vGap:o,nodeSize:s,height:l}=t,{model:u}=this.context,h=this.formatSize(s),f=h(e)[0]+a(e),p=(e,t=0)=>{var r;return t+=n*((e.children||[]).length+1),null===(r=e.children)||void 0===r||r.forEach(e=>{var n;null===(n=u.getNodeLikeDatum(e).children)||void 0===n||n.forEach(e=>{t=p(u.getNodeLikeDatum(e),t);});}),t;},v=e=>{if(1===e.depth)return f;let t=u.getParentData(e.id,"tree");if(d(e)){let r=u.getParentData(t.id,"tree"),i=y(e)-y(r);return v(t)+i*n/o;}{let n=(t.children||[]).indexOf(e.id),r=u.getNodeData((t.children||[]).slice(n));return g(t)-r.reduce((e,t)=>e+p(t),0)-h(t)[0]/2;}},g=(0,r.memoize)(e=>{if(c(e))return h(e)[0]/2;let t=u.getParentData(e.id,"tree");if(d(e))return v(e)+p(e)+h(e)[0]/2;{let r=y(e)-y(t);return v(e)+n/o*r;}},e=>e.id),m=e=>y(u.getParentData(e,"tree")),y=(0,r.memoize)(e=>{if(c(e))return l/2;if(d(e)){let t=u.getParentData(e.id,"tree"),n=t.children.indexOf(e.id);if(0===n)return m(t.id)+o;let i=u.getNodeLikeDatum(t.children[n-1]);return(0,r.isEmpty)(i.children)?y(i)+o:Math.max(...u.getDescendantsData(i.id).map(e=>d(e)?m(e.id):y(e)))+o;}{if((0,r.isEmpty)(e.children))return m(e.id)+o;let t=u.getNodeLikeDatum(e.children.slice(-1)[0]);if((0,r.isEmpty)(t.children))return y(t)+o;let n=u.getDescendantsData(e.id).slice(-1)[0];return(d(n)?m(n.id):y(n))+o;}},e=>e.id),b=0,E={nodes:[],edges:[]},x=e=>{var t;null===(t=e.children)||void 0===t||t.forEach(e=>x(u.getNodeLikeDatum(e)));let n=y(e),r=g(e);if(E.nodes.push({id:e.id,x:r,y:n}),c(e))return;let o=u.getRelatedEdgesData(e.id,"in")[0],s=[v(e),d(e)?n:m(e.id)];E.edges.push({id:(0,i.idOf)(o),controlPoints:[s],relatedNodeId:e.id}),b=Math.max(b,r+a(e)),1===e.depth&&(f=b);};return x(e),E;}placeAlterative(e,t){let n=(t.children||[]).filter((e,t)=>t%2!=0);if(0===n.length)return e;let{model:i}=this.context,a=e.nodes.find(e=>e.id===t.id).y,o=e=>{let t=i.getAncestorsData(e,"tree");if((0,r.isEmpty)(t))return!1;let a=1===t.length?e:t[t.length-2].id;return n.includes(a);};e.nodes.forEach(e=>{o(e.id)&&(e.y=2*a-e.y);}),e.edges.forEach(e=>{o(e.relatedNodeId)&&(e.controlPoints=e.controlPoints.map(e=>[e[0],2*a-e[1]]));});}rightToLeft(e,t){return e.nodes.forEach(e=>e.x=t.width-e.x),e.edges.forEach(e=>{e.controlPoints=e.controlPoints.map(e=>[t.width-e[0],e[1]]);}),e;}execute(e,t){return s(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},l.defaultOptions),this.options),t),{direction:r,nodeSize:i}=n,a=this.getRoot();if(!a)return e;let o=this.formatSize(i);n.vGap||(n.vGap=Math.max(...(e.nodes||[]).map(e=>o(e)[1]))),n.hGap||(n.hGap=Math.max(...(e.nodes||[]).map(e=>o(e)[0])));let s=this.doLayout(a,n);this.placeAlterative(s,a),"RL"===r&&(s=this.rightToLeft(s,n));let{model:c}=this.context,d=[],h=[];return s.nodes.forEach(e=>{let{id:t,x:n,y:r}=e,i=c.getNodeLikeDatum(t);d.push(u(i,{x:n,y:r}));}),s.edges.forEach(e=>{let{id:t,controlPoints:n}=e,r=c.getEdgeDatum(t);h.push(u(r,{controlPoints:n}));}),{nodes:d,edges:h};});}}l.defaultOptions={direction:"RL",getRibSep:()=>60};let u=(e,t)=>Object.assign(Object.assign({},e),{style:Object.assign(Object.assign({},e.style||{}),t)}),c=e=>0===e.depth,d=e=>(e.depth||(e.depth=0))%2==0;},"0bb7f409":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"OptimizeViewportTransform",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("6f097fb0"),o=n("32576f8a");class s extends o.BaseBehavior{constructor(e,t){super(e,Object.assign({},s.defaultOptions,t)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(e,t,n)=>{e.filter(Boolean).forEach(e=>{"hidden"!==t||e.isVisible()?"visible"===t&&this.hiddenShapes.includes(e)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(e),1):(0,a.setVisibility)(e,t,n):this.hiddenShapes.push(e);});},this.filterShapes=(e,t)=>{if((0,r.isFunction)(t))return n=>!t(e,n);let n=null==t?void 0:t[e];return e=>!e.className||!(null==n?void 0:n.includes(e.className));},this.hideShapes=e=>{if(!this.validate(e)||!this.isVisible)return;let{element:t}=this.context,{shapes:n={}}=this.options;this.setElementsVisibility(t.getNodes(),"hidden",this.filterShapes("node",n)),this.setElementsVisibility(t.getEdges(),"hidden",this.filterShapes("edge",n)),this.setElementsVisibility(t.getCombos(),"hidden",this.filterShapes("combo",n)),this.isVisible=!1;},this.showShapes=(0,r.debounce)(e=>{if(!this.validate(e)||this.isVisible)return;let{element:t}=this.context;this.setElementsVisibility(t.getNodes(),"visible"),this.setElementsVisibility(t.getEdges(),"visible"),this.setElementsVisibility(t.getCombos(),"visible"),this.isVisible=!0;},this.options.debounce),this.bindEvents();}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.BEFORE_TRANSFORM,this.hideShapes),e.on(i.GraphEvent.AFTER_TRANSFORM,this.showShapes);}unbindEvents(){let{graph:e}=this.context;e.off(i.GraphEvent.BEFORE_TRANSFORM,this.hideShapes),e.off(i.GraphEvent.AFTER_TRANSFORM,this.showShapes);}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy();}}s.defaultOptions={enable:!0,debounce:200,shapes:e=>"node"===e};},"0c1957bf":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"MapEdgeLineWidth",{enumerable:!0,get:function(){return a;}});var r=n("38871e26"),i=n("b8e146b3");class a extends r.BaseTransform{static defaultOptions={minValue:(e,t)=>Math.min(...Object.values(t)),maxValue:(e,t)=>Math.max(...Object.values(t)),minLineWidth:1,maxLineWidth:10,scale:"linear"};constructor(e,t){super(e,Object.assign({},a.defaultOptions,t));}beforeDraw(e){let{maxValue:t,minValue:n,maxLineWidth:i,minLineWidth:a,scale:o,value:s}=this.options,l=this.context.model.getEdgeData(),u="function"==typeof s?s:()=>s,c=Object.fromEntries(l.map(e=>[(0,r.idOf)(e),u(e)])),{add:{edges:d},update:{edges:h}}=e;return[...d.values(),...h.values()].forEach(e=>{let s=this.assignLineWidthByValue(c[(0,r.idOf)(e)]||0,"function"==typeof n?n(e,c):n,"function"==typeof t?t(e,c):t,"function"==typeof a?a(e):a,"function"==typeof i?i(e):i,o);e.style||(e.style={}),e.style.lineWidth=s;}),e;}assignLineWidthByValue=(e,t,n,r,a,o)=>{let s=[t,n],l=[r,a];if(e<t||e>n||t===n)return l[0];if("function"==typeof o)return o(e,s,l);switch(o){case"linear":return(0,i.linear)(e,s,l);case"log":return(0,i.log)(e,s,l);case"pow":return(0,i.pow)(e,s,l,2);case"sqrt":return(0,i.sqrt)(e,s,l);default:return l[0];}};}},"0c54d29c":function(e,t,n){"use strict";function r(e,t,n){let r={},i=e=>(e in r||(r[e]=0),`${t}-${e}-${r[e]++}`);return n.map(t=>"string"==typeof t?{type:t,key:i(t)}:"function"==typeof t?t.call(e):t.key?t:Object.assign(Object.assign({},t),{key:i(t.type)}));}n.d(t,"__esModule",{value:!0}),n.d(t,"parseExtensions",{enumerable:!0,get:function(){return r;}});},"0d562788":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BasePlugin",{enumerable:!0,get:function(){return i;}});var r=n("c23b41b5");class i extends r.BaseExtension{}},"0d9261ef":function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return e*("positive"===t?-1:1);},1);}n.d(t,"__esModule",{value:!0}),n.d(t,"getFactor",{enumerable:!0,get:function(){return r;}});},"0db9d1b4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Hull",{enumerable:!0,get:function(){return h;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("988eb09c"),o=n("81401a10"),s=n("2a08964b"),l=n("0d562788"),u=n("6d675f9a"),c=n("da58df99"),d=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class h extends l.BasePlugin{constructor(e,t){super(e,Object.assign({},h.defaultOptions,t)),this.hullMemberIds=[],this.drawHull=()=>{if(this.shape){let e=!(0,r.isEqual)(this.optionsCache,this.options);this.shape.update(this.getHullStyle(e));}else this.shape=new a.Contour({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);this.optionsCache=Object.assign({},this.options);},this.updateHullPath=e=>{this.shape&&this.options.members.includes((0,o.idOf)(e.data))&&this.shape.update({d:this.getHullPath(!0)});},this.getHullPath=(e=!1)=>{let{graph:t}=this.context,n=this.getMember();if(0===n.length)return"";let i=n.map(e=>t.getNodeData(e)),a=(0,u.hull)(i.map(s.positionOf),this.options.concavity).slice(1).reverse(),l=a.flatMap(e=>i.filter(t=>(0,r.isEqual)((0,s.positionOf)(t),e)).map(o.idOf));return(0,r.isEqual)(l,this.hullMemberIds)&&!e||(this.hullMemberIds=l,this.path=(0,c.computeHullPath)(a,this.getPadding(),this.options.corner)),this.path;},this.bindEvents();}bindEvents(){this.context.graph.on(i.GraphEvent.AFTER_RENDER,this.drawHull),this.context.graph.on(i.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateHullPath);}unbindEvents(){this.context.graph.off(i.GraphEvent.AFTER_RENDER,this.drawHull),this.context.graph.off(i.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateHullPath);}getHullStyle(e){let t=this.options,{members:n,padding:r,corner:i}=t;return Object.assign(Object.assign({},d(t,["members","padding","corner"])),{d:this.getHullPath(e)});}getPadding(){let{graph:e}=this.context;return this.hullMemberIds.reduce((t,n)=>{let{halfExtents:r}=e.getElementRenderBounds(n);return Math.max(t,Math.max(r[0],r[1]));},0)+this.options.padding;}addMember(e){let t=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...t])],this.shape.update({d:this.getHullPath()});}removeMember(e){let t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(e=>!t.includes(e)),t.some(e=>this.hullMemberIds.includes(e))&&this.shape.update({d:this.getHullPath()});}updateMember(e){this.options.members=(0,r.isFunction)(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0));}getMember(){return this.options.members;}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy();}}h.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};},"0e41ef48":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_ANIMATION_OPTIONS:function(){return r;},DEFAULT_ELEMENTS_ANIMATION_OPTIONS:function(){return i;}});let r={duration:500},i={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};},"0eaf27f7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Fullscreen",{enumerable:!0,get:function(){return o;}});var r=n("ec6e52f6"),i=n("db1e79e1"),a=n("0d562788");class o extends a.BasePlugin{constructor(e,t){super(e,Object.assign({},o.defaultOptions,t)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var e,t,n,r;let i=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(i),i?null===(t=(e=this.options).onEnter)||void 0===t||t.call(e):null===(r=(n=this.options).onExit)||void 0===r||r.call(n);},this.shortcut=new i.Shortcut(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `;}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();let{request:e=[],exit:t=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(t,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(e=>{document.addEventListener(e,this.onFullscreenChange,!1);});}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(e=>{document.removeEventListener(e,this.onFullscreenChange,!1);});}setGraphSize(e=!0){var t,n;let r,i;e?(r=(null===(t=globalThis.screen)||void 0===t?void 0:t.width)||0,i=(null===(n=globalThis.screen)||void 0===n?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[r,i]=this.graphSize,this.context.graph.setSize(r,i),this.context.graph.render();}request(){!document.fullscreenElement&&(document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled"))&&this.$el.requestFullscreen().catch(e=>{r.print.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`);});}exit(){document.fullscreenElement&&document.exitFullscreen();}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}destroy(){this.exit(),this.style.remove(),super.destroy();}}o.defaultOptions={trigger:{},autoFit:!0};},"0ed6ab13":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{CLASS_NAME:function(){return a;},POPTIP_ID:function(){return i;},POPTIP_STYLE:function(){return o;}});var r,i="component-poptip",a={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},o=((r={})[".".concat(a.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},r[".".concat(a.TEXT)]={"text-align":"center"},r[".".concat(a.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},r[".".concat(a.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},r[".".concat(a.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},r[".".concat(a.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},r[".".concat(a.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},r[".".concat(a.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},r[".".concat(a.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},r[".".concat(a.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},r[".".concat(a.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},r[".".concat(a.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},r[".".concat(a.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},r[".".concat(a.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},r[".".concat(a.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},r[".".concat(a.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},r["[data-position='top'] .".concat(a.ARROW)]={bottom:"-2px"},r[".".concat(a.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},r["[data-position='left'] .".concat(a.ARROW)]={right:"-2px"},r[".".concat(a.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},r["[data-position='right'] .".concat(a.ARROW)]={left:"-2px"},r[".".concat(a.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},r["[data-position='bottom'] .".concat(a.ARROW)]={top:"-2px"},r[".".concat(a.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},r["[data-position='top-left'] .".concat(a.ARROW)]={left:"10px",bottom:"-2px"},r[".".concat(a.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},r["[data-position='top-right'] .".concat(a.ARROW)]={right:"10px",bottom:"-2px"},r[".".concat(a.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},r["[data-position='left-top'] .".concat(a.ARROW)]={right:"-2px",top:"8px"},r[".".concat(a.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},r["[data-position='left-bottom'] .".concat(a.ARROW)]={right:"-2px",bottom:"8px"},r[".".concat(a.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},r["[data-position='right-top'] .".concat(a.ARROW)]={left:"-2px",top:"8px"},r[".".concat(a.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},r["[data-position='right-bottom'] .".concat(a.ARROW)]={left:"-2px",bottom:"8px"},r[".".concat(a.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},r["[data-position='bottom-left'] .".concat(a.ARROW)]={top:"-2px",left:"8px"},r[".".concat(a.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},r["[data-position='bottom-right'] .".concat(a.ARROW)]={top:"-2px",right:"8px"},r);},"0f719f7b":function(e,t,n){"use strict";function r(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n;}n.d(t,"__esModule",{value:!0}),n.d(t,"omit",{enumerable:!0,get:function(){return r;}});},"0fa07cf0":function(e,t,n){"use strict";function r(e,...t){return t.reduce((e,t)=>n=>e(t(n)),e);}n.d(t,"__esModule",{value:!0}),n.d(t,"compose",{enumerable:!0,get:function(){return r;}});},"10ef3afb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getElementNthDegreeIds:function(){return a;},getNodeNthDegreeIds:function(){return o;}});var r=n("81401a10"),i=n("d88e9b7d");function a(e,t,n,r,i="both"){if("combo"===t||"node"===t)return o(e,n,r,i);let s=e.getEdgeData(n);return s?Array.from(new Set([...o(e,s.source,r-1,i),...o(e,s.target,r-1,i),n])):[];}function o(e,t,n,a="both"){let s=new Set,l=new Set,u=new Set;return(0,i.bfs)(t,(t,i)=>{i>n||(u.add(t),e.getRelatedEdgesData(t,a).forEach(e=>{let t=(0,r.idOf)(e);!l.has(t)&&i<n&&(u.add(t),l.add(t));}));},t=>e.getRelatedEdgesData(t,a).map(e=>e.source===t?e.target:e.source).filter(e=>!s.has(e)&&(s.add(e),!0))),Array.from(u);}},"1156cd44":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AABB:function(){return el;},AbstractRenderer:function(){return et;},AbstractRendererPlugin:function(){return ee;},CanvasEvent:function(){return i$;},CustomEvent:function(){return rW;},DomInteraction:function(){return aa;},GradientType:function(){return tk;},HTMLRenderer:function(){return ar;},ImageLoader:function(){return at;},Node:function(){return rY;},Point:function(){return eh;},RenderReason:function(){return rX;},Shape:function(){return Q;},findClosestClipPathTarget:function(){return n5;},getOrCalculatePathTotalLength:function(){return nr;},isDisplayObject:function(){return iT;},isFillOrStrokeAffected:function(){return rt;},isPattern:function(){return tY;},setDOMSize:function(){return n8;}});var r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y,b,E,x,k,S,T,M,w,N,C,_,P,A,O=n("777fffbe"),L=O._(n("ab297151")),R=O._(n("b1a4abb6")),D=O._(n("72ce8fb5")),I=O._(n("d60881d0")),B=O._(n("0b95a4d2")),F=O._(n("0afdccfb")),G=O._(n("7465ab36")),z=O._(n("32f41e1c")),V=n("597fa39f");n("f90e84e3");var j=n("abe9d8d6"),U=O._(n("3214ccb5")),H=O._(n("51ffafbb")),W=O._(n("3c7f532e")),Y=n("b1a96927"),q=O._(n("2fabd5d4")),X=O._(n("cb203630")),$=O._(n("1982f763")),K=O._(n("01aac514"));let Z=n("1714eebe");var Q=((r={}).GROUP="g",r.FRAGMENT="fragment",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh",r),J=((i={})[i.ZERO=0]="ZERO",i[i.NEGATIVE_ONE=1]="NEGATIVE_ONE",i),ee=(0,D.default)(function e(){(0,R.default)(this,e),this.plugins=[];},[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e);}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1);});}}]),et=(0,D.default)(function e(t){(0,R.default)(this,e),this.clipSpaceNearZ=J.NEGATIVE_ONE,this.plugins=[],this.config=(0,L.default)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},t);},[{key:"registerPlugin",value:function(e){-1===this.plugins.findIndex(function(t){return t===e;})&&this.plugins.push(e);}},{key:"unregisterPlugin",value:function(e){var t=this.plugins.findIndex(function(t){return t===e;});t>-1&&this.plugins.splice(t,1);}},{key:"getPlugins",value:function(){return this.plugins;}},{key:"getPlugin",value:function(e){return this.plugins.find(function(t){return t.name===e;});}},{key:"getConfig",value:function(){return this.config;}},{key:"setConfig",value:function(e){Object.assign(this.config,e);}}]),en=V.vec3.add,er=V.vec3.copy,ei=V.vec3.max,ea=V.vec3.min,eo=V.vec3.scale,es=V.vec3.sub,el=function(){function e(){(0,R.default)(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0];}return(0,D.default)(e,[{key:"update",value:function(e,t){er(this.center,e),er(this.halfExtents,t),es(this.min,this.center,this.halfExtents),en(this.max,this.center,this.halfExtents);}},{key:"setMinMax",value:function(e,t){en(this.center,t,e),eo(this.center,this.center,.5),es(this.halfExtents,t,e),eo(this.halfExtents,this.halfExtents,.5),er(this.min,e),er(this.max,t);}},{key:"getMin",value:function(){return this.min;}},{key:"getMax",value:function(){return this.max;}},{key:"add",value:function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return;}var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],l=o[1],u=o[2],c=r-s,d=r+s,h=i-l,f=i+l,p=a-u,v=a+u,g=t.center,m=g[0],y=g[1],b=g[2],E=t.halfExtents,x=E[0],k=E[1],S=E[2],T=m-x,M=m+x,w=y-k,N=y+k,C=b-S,_=b+S;T<c&&(c=T),M>d&&(d=M),w<h&&(h=w),N>f&&(f=N),C<p&&(p=C),_>v&&(v=_),n[0]=(c+d)*.5,n[1]=(h+f)*.5,n[2]=(p+v)*.5,o[0]=(d-c)*.5,o[1]=(f-h)*.5,o[2]=(v-p)*.5,this.min[0]=c,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=f,this.max[2]=v;}}},{key:"setFromTransformedAABB",value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],l=t[8],u=t[1],c=t[5],d=t[9],h=t[2],f=t[6],p=t[10],v=Math.abs(o),g=Math.abs(s),m=Math.abs(l),y=Math.abs(u),b=Math.abs(c),E=Math.abs(d),x=Math.abs(h),k=Math.abs(f),S=Math.abs(p);n[0]=t[12]+o*i[0]+s*i[1]+l*i[2],n[1]=t[13]+u*i[0]+c*i[1]+d*i[2],n[2]=t[14]+h*i[0]+f*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+m*a[2],r[1]=y*a[0]+b*a[1]+E*a[2],r[2]=x*a[0]+k*a[1]+S*a[2],es(this.min,n,r),en(this.max,n,r);}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2];}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new e,r=ei([0,0,0],this.getMin(),t.getMin()),i=ea([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n;}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?er([0,0,0],this.min):272===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]];}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?er([0,0,0],this.max):272===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]];}}],[{key:"isEmpty",value:function(e){return!e||0===e.halfExtents[0]&&0===e.halfExtents[1]&&0===e.halfExtents[2];}}]);}(),eu=(0,D.default)(function e(t,n){(0,R.default)(this,e),this.distance=t||0,this.normal=n||V.vec3.fromValues(0,1,0),this.updatePNVertexFlag();},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0);}},{key:"distanceToPoint",value:function(e){return V.vec3.dot(e,this.normal)-this.distance;}},{key:"normalize",value:function(){var e=1/V.vec3.len(this.normal);V.vec3.scale(this.normal,this.normal,e),this.distance*=e;}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),a=i>=0&&i<=1;return a&&n&&V.vec3.lerp(n,e,t,i),a;}}]),ec=((a={})[a.OUTSIDE=4294967295]="OUTSIDE",a[a.INSIDE=0]="INSIDE",a[a.INDETERMINATE=2147483647]="INDETERMINATE",a),ed=(0,D.default)(function e(t){if((0,R.default)(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new eu);},[{key:"extractFromVPMatrix",value:function(e){var t=(0,G.default)(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];V.vec3.set(this.planes[0].normal,a-n,u-o,f-c),this.planes[0].distance=m-p,V.vec3.set(this.planes[1].normal,a+n,u+o,f+c),this.planes[1].distance=m+p,V.vec3.set(this.planes[2].normal,a+r,u+s,f+d),this.planes[2].distance=m+v,V.vec3.set(this.planes[3].normal,a-r,u-s,f-d),this.planes[3].distance=m-v,V.vec3.set(this.planes[4].normal,a-i,u-l,f-h),this.planes[4].distance=m-g,V.vec3.set(this.planes[5].normal,a+i,u+l,f+h),this.planes[5].distance=m+g,this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag();});}}]),eh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,R.default)(this,e),this.x=0,this.y=0,this.x=t,this.y=n;}return(0,D.default)(e,[{key:"clone",value:function(){return new e(this.x,this.y);}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y;}}]);}(),ef=function(){function e(t,n,r,i){(0,R.default)(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i;}return(0,D.default)(e,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new e(t.x,t.y,t.width,t.height);}},{key:"applyTransform",value:function(t,n){var r=V.vec4.fromValues(t.x,t.y,0,1),i=V.vec4.fromValues(t.x+t.width,t.y,0,1),a=V.vec4.fromValues(t.x,t.y+t.height,0,1),o=V.vec4.fromValues(t.x+t.width,t.y+t.height,0,1),s=V.vec4.create(),l=V.vec4.create(),u=V.vec4.create(),c=V.vec4.create();V.vec4.transformMat4(s,r,n),V.vec4.transformMat4(l,i,n),V.vec4.transformMat4(u,a,n),V.vec4.transformMat4(c,o,n);var d=Math.min(s[0],l[0],u[0],c[0]),h=Math.min(s[1],l[1],u[1],c[1]),f=Math.max(s[0],l[0],u[0],c[0]),p=Math.max(s[1],l[1],u[1],c[1]);return e.fromRect({x:d,y:h,width:f-d,height:p-h});}}]);}(),ep="Method not implemented.";function ev(e){return void 0===e?0:e>360||e<-360?e%360:e;}var eg=V.vec3.create();function em(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Array.isArray(e)&&3===e.length?r?V.vec3.clone(e):V.vec3.copy(eg,e):(0,j.isNumber)(e)?r?V.vec3.fromValues(e,t,n):V.vec3.set(eg,e,t,n):r?V.vec3.fromValues(e[0],e[1]||t,e[2]||n):V.vec3.set(eg,e[0],e[1]||t,e[2]||n);}var ey=Math.PI/180,eb=180/Math.PI,eE=Math.PI/2;function ex(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y;return 16===t.length?(i=V.mat4.getScaling(V.vec3.create(),t),o=(a=(0,G.default)(i,3))[0],s=a[1],l=a[2],(u=Math.asin(-t[2]/o))<eE?u>-eE?(n=Math.atan2(t[6]/s,t[10]/l),r=Math.atan2(t[1]/o,t[0]/o)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=u,e[2]=r):(c=t[0],d=t[1],h=t[2],f=t[3],m=c*c+(p=d*d)+(v=h*h)+(g=f*f),(y=c*f-d*h)>.499995*m?(e[0]=eE,e[1]=2*Math.atan2(d,c),e[2]=0):y<-.499995*m?(e[0]=-eE,e[1]=2*Math.atan2(d,c),e[2]=0):(e[0]=Math.asin(2*(c*h-f*d)),e[1]=Math.atan2(2*(c*f+d*h),1-2*(v+g)),e[2]=Math.atan2(2*(c*d+h*f),1-2*(p+v)))),e;}function ek(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s;}if(o){var l=1/o;r*=l,i*=l;}var u=Math.atan2(n,t)*eb;return[e[6],e[7],a,o,u];}var eS=V.mat4.create(),eT=V.mat4.create(),eM=V.vec4.create(),ew=[V.vec3.create(),V.vec3.create(),V.vec3.create()],eN=V.vec3.create();function eC(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i;}var e_=((o={})[o.ORBITING=0]="ORBITING",o[o.EXPLORING=1]="EXPLORING",o[o.TRACKING=2]="TRACKING",o),eP=((s={})[s.DEFAULT=0]="DEFAULT",s[s.ROTATIONAL=1]="ROTATIONAL",s[s.TRANSLATIONAL=2]="TRANSLATIONAL",s[s.CINEMATIC=3]="CINEMATIC",s),eA=((l={})[l.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",l[l.PERSPECTIVE=1]="PERSPECTIVE",l),eO={UPDATED:"updated"},eL=(0,D.default)(function e(){(0,R.default)(this,e),this.clipSpaceNearZ=J.NEGATIVE_ONE,this.eventEmitter=new z.default,this.matrix=V.mat4.create(),this.right=V.vec3.fromValues(1,0,0),this.up=V.vec3.fromValues(0,1,0),this.forward=V.vec3.fromValues(0,0,1),this.position=V.vec3.fromValues(0,0,1),this.focalPoint=V.vec3.fromValues(0,0,0),this.distanceVector=V.vec3.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=V.mat4.create(),this.projectionMatrixInverse=V.mat4.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=e_.EXPLORING,this.trackingMode=eP.DEFAULT,this.projectionMode=eA.PERSPECTIVE,this.frustum=new ed,this.orthoMatrix=V.mat4.create();},[{key:"isOrtho",value:function(){return this.projectionMode===eA.ORTHOGRAPHIC;}},{key:"getProjectionMode",value:function(){return this.projectionMode;}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix;}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse;}},{key:"getFrustum",value:function(){return this.frustum;}},{key:"getPosition",value:function(){return this.position;}},{key:"getFocalPoint",value:function(){return this.focalPoint;}},{key:"getDollyingStep",value:function(){return this.dollyingStep;}},{key:"getNear",value:function(){return this.near;}},{key:"getFar",value:function(){return this.far;}},{key:"getZoom",value:function(){return this.zoom;}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix;}},{key:"getView",value:function(){return this.view;}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e;}},{key:"setType",value:function(e,t){return this.type=e,this.type===e_.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===e_.TRACKING&&void 0!==t&&this.setTrackingMode(t),this;}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this;}},{key:"setTrackingMode",value:function(e){if(this.type!==e_.TRACKING)throw Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this;}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this;}},{key:"getViewTransform",value:function(){return V.mat4.invert(V.mat4.create(),this.matrix);}},{key:"getWorldTransform",value:function(){return this.matrix;}},{key:"jitterProjectionMatrix",value:function(e,t){var n=V.mat4.fromTranslation(V.mat4.create(),[e,t,0]);this.jitteredProjectionMatrix=V.mat4.multiply(V.mat4.create(),n,this.projectionMatrix);}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0;}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this;}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e;}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this;}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this;}},{key:"setNear",value:function(e){return this.projectionMode===eA.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this;}},{key:"setFar",value:function(e){return this.projectionMode===eA.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this;}},{key:"setViewOffset",value:function(e,t,n,r,i,a){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===eA.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===eA.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===eA.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===eA.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this;}},{key:"setZoomByViewportPoint",value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=o.x,l=o.y,u=V.vec3.fromValues(s-r,l-i,0),c=V.vec3.dot(u,this.right)/V.vec3.length(this.right),d=V.vec3.dot(u,this.up)/V.vec3.length(this.up),h=this.getPosition(),f=(0,G.default)(h,2),p=f[0],v=f[1],g=this.getFocalPoint(),m=(0,G.default)(g,2),y=m[0],b=m[1];return this.setPosition(p-c,v-d),this.setFocalPoint(y-c,b-d),this;}},{key:"setPerspective",value:function(e,t,n,r){this.projectionMode=eA.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var i,a=this.near*Math.tan(.5*this.fov*ey)/this.zoom,o=2*a,s=this.aspect*o,l=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var u=this.view.fullWidth,c=this.view.fullHeight;l+=this.view.offsetX*s/u,a-=this.view.offsetY*o/c,s*=this.view.width/u,o*=this.view.height/c;}return!function(e,t,n,r,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=2*a,d=n-t,h=r-i,f=o-a,p=o*a;u?(s=-o/f,l=-p/f):(s=-(o+a)/f,l=-2*p/f),e[0]=c/d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c/h,e[6]=0,e[7]=0,e[8]=(n+t)/d,e[9]=(r+i)/h,e[10]=s,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0;}(this.projectionMatrix,l,l+s,a-o,a,e,this.far,this.clipSpaceNearZ===J.ZERO),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this;}},{key:"setOrthographic",value:function(e,t,n,r,i,a){this.projectionMode=eA.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var o,s=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,d=u-s,h=u+s,f=c+l,p=c-l;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=v*this.view.offsetX,h=d+v*this.view.width,f-=g*this.view.offsetY,p=f-g*this.view.height;}return this.clipSpaceNearZ===J.NEGATIVE_ONE?V.mat4.ortho(this.projectionMatrix,d,h,f,p,i,a):V.mat4.orthoZO(this.projectionMatrix,d,h,f,p,i,a),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this;}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],r=em(e,t,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this;}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=V.vec3.fromValues(0,1,0);if(this.focalPoint=em(e,t,n),this.trackingMode===eP.CINEMATIC){var i=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=Math.asin(t/V.vec3.length(i))*eb,o=90+Math.atan2(n,e)*eb,s=V.mat4.create();V.mat4.rotateY(s,s,o*ey),V.mat4.rotateX(s,s,a*ey),r=V.vec3.transformMat4(V.vec3.create(),[0,1,0],s);}return V.mat4.invert(this.matrix,V.mat4.lookAt(V.mat4.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this;}},{key:"getDistance",value:function(){return this.distance;}},{key:"getDistanceVector",value:function(){return this.distanceVector;}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=V.vec3.create();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this;}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this;}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this;}},{key:"setAzimuth",value:function(e){return this.azimuth=ev(e),this.computeMatrix(),this._getAxes(),this.type===e_.ORBITING||this.type===e_.EXPLORING?this._getPosition():this.type===e_.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getAzimuth",value:function(){return this.azimuth;}},{key:"setElevation",value:function(e){return this.elevation=ev(e),this.computeMatrix(),this._getAxes(),this.type===e_.ORBITING||this.type===e_.EXPLORING?this._getPosition():this.type===e_.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getElevation",value:function(){return this.elevation;}},{key:"setRoll",value:function(e){return this.roll=ev(e),this.computeMatrix(),this._getAxes(),this.type===e_.ORBITING||this.type===e_.EXPLORING?this._getPosition():this.type===e_.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getRoll",value:function(){return this.roll;}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate();}},{key:"computeMatrix",value:function(){var e=V.quat.setAxisAngle(V.quat.create(),[0,0,1],this.roll*ey);V.mat4.identity(this.matrix);var t=V.quat.setAxisAngle(V.quat.create(),[1,0,0],(this.rotateWorld&&this.type!==e_.TRACKING||this.type===e_.TRACKING?1:-1)*this.elevation*ey),n=V.quat.setAxisAngle(V.quat.create(),[0,1,0],(this.rotateWorld&&this.type!==e_.TRACKING||this.type===e_.TRACKING?1:-1)*this.azimuth*ey),r=V.quat.multiply(V.quat.create(),n,t);r=V.quat.multiply(V.quat.create(),r,e);var i=V.mat4.fromQuat(V.mat4.create(),r);this.type===e_.ORBITING||this.type===e_.EXPLORING?(V.mat4.translate(this.matrix,this.matrix,this.focalPoint),V.mat4.multiply(this.matrix,this.matrix,i),V.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===e_.TRACKING&&(V.mat4.translate(this.matrix,this.matrix,this.position),V.mat4.multiply(this.matrix,this.matrix,i));}},{key:"_setPosition",value:function(e,t,n){this.position=em(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix();}},{key:"_getAxes",value:function(){V.vec3.copy(this.right,em(V.vec4.transformMat4(V.vec4.create(),[1,0,0,0],this.matrix))),V.vec3.copy(this.up,em(V.vec4.transformMat4(V.vec4.create(),[0,1,0,0],this.matrix))),V.vec3.copy(this.forward,em(V.vec4.transformMat4(V.vec4.create(),[0,0,1,0],this.matrix))),V.vec3.normalize(this.right,this.right),V.vec3.normalize(this.up,this.up),V.vec3.normalize(this.forward,this.forward);}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=V.vec3.length(this.distanceVector);if(0===r){this.elevation=0,this.azimuth=0;return;}this.type===e_.TRACKING?(this.elevation=Math.asin(t/r)*eb,this.azimuth=Math.atan2(-e,-n)*eb):this.rotateWorld?(this.elevation=Math.asin(t/r)*eb,this.azimuth=Math.atan2(-e,-n)*eb):(this.elevation=-(Math.asin(t/r)*eb),this.azimuth=-(Math.atan2(-e,-n)*eb));}},{key:"_getPosition",value:function(){V.vec3.copy(this.position,em(V.vec4.transformMat4(V.vec4.create(),[0,0,0,1],this.matrix))),this._getDistance();}},{key:"_getFocalPoint",value:function(){V.vec3.transformMat3(this.distanceVector,[0,0,-this.distance],V.mat3.fromMat4(V.mat3.create(),this.matrix)),V.vec3.add(this.focalPoint,this.position,this.distanceVector),this._getDistance();}},{key:"_getDistance",value:function(){this.distanceVector=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position),this.distance=V.vec3.length(this.distanceVector),this.dollyingStep=this.distance/100;}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===eA.ORTHOGRAPHIC){var e=this.position,t=V.quat.setAxisAngle(V.quat.create(),[0,0,1],-this.roll*Math.PI/180);V.mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,V.vec3.fromValues((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),V.vec3.fromValues(this.zoom,this.zoom,1),e);}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=V.mat4.multiply(V.mat4.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(eO.UPDATED);}}},{key:"rotate",value:function(e,t,n){throw Error(ep);}},{key:"pan",value:function(e,t){throw Error(ep);}},{key:"dolly",value:function(e){throw Error(ep);}},{key:"createLandmark",value:function(e,t){throw Error(ep);}},{key:"gotoLandmark",value:function(e,t){throw Error(ep);}},{key:"cancelLandmarkAnimation",value:function(){throw Error(ep);}}]),eR=((u={})[u.Standard=0]="Standard",u),eD=((c={})[c.ADDED=0]="ADDED",c[c.REMOVED=1]="REMOVED",c[c.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",c),eI=V.vec3.create(),eB=V.mat4.create(),eF=V.quat.create();function eG(e){if(e.localDirtyFlag){if(0!==e.localSkew[0]||0!==e.localSkew[1]){V.mat4.fromRotationTranslationScaleOrigin(e.localTransform,e.localRotation,e.localPosition,V.vec3.fromValues(1,1,1),e.origin),(0!==e.localSkew[0]||0!==e.localSkew[1])&&(V.mat4.identity(eB),eB[4]=Math.tan(e.localSkew[0]),eB[1]=Math.tan(e.localSkew[1]),V.mat4.multiply(e.localTransform,e.localTransform,eB));var t=V.mat4.fromRotationTranslationScaleOrigin(eB,V.quat.set(eF,0,0,0,1),V.vec3.set(eI,1,1,1),e.localScale,e.origin);V.mat4.multiply(e.localTransform,e.localTransform,t);}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=0!==r[0]||0!==r[1]||0!==r[2],l=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],u=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];l||u||c?V.mat4.fromRotationTranslationScaleOrigin(n,i,r,a,o):s?V.mat4.fromTranslation(n,r):V.mat4.identity(n);}e.localDirtyFlag=!1;}}var ez={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ef(0,0,0,0)},eV=((d={}).COORDINATE="<coordinate>",d.COLOR="<color>",d.PAINT="<paint>",d.NUMBER="<number>",d.ANGLE="<angle>",d.OPACITY_VALUE="<opacity-value>",d.SHADOW_BLUR="<shadow-blur>",d.LENGTH="<length>",d.PERCENTAGE="<percentage>",d.LENGTH_PERCENTAGE="<length> | <percentage>",d.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",d.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",d.LIST_OF_POINTS="<list-of-points>",d.PATH="<path>",d.FILTER="<filter>",d.Z_INDEX="<z-index>",d.OFFSET_DISTANCE="<offset-distance>",d.DEFINED_PATH="<defined-path>",d.MARKER="<marker>",d.TRANSFORM="<transform>",d.TRANSFORM_ORIGIN="<transform-origin>",d.TEXT="<text>",d.TEXT_TRANSFORM="<text-transform>",d);function ej(e,t,n){e.prototype=t.prototype=n,n.constructor=e;}function eU(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n;}function eH(){}var eW="\\s*([+-]?\\d+)\\s*",eY="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eX=/^#([0-9a-f]{3,8})$/,e$=RegExp(`^rgb\\(${eW},${eW},${eW}\\)$`),eK=RegExp(`^rgb\\(${eq},${eq},${eq}\\)$`),eZ=RegExp(`^rgba\\(${eW},${eW},${eW},${eY}\\)$`),eQ=RegExp(`^rgba\\(${eq},${eq},${eq},${eY}\\)$`),eJ=RegExp(`^hsl\\(${eY},${eq},${eq}\\)$`),e0=RegExp(`^hsla\\(${eY},${eq},${eq},${eY}\\)$`),e1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e2(){return this.rgb().formatHex();}function e3(){return this.rgb().formatRgb();}function e4(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eX.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e6(t):3===n?new e8(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e5(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e5(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=e$.exec(e))?new e8(t[1],t[2],t[3],1):(t=eK.exec(e))?new e8(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eZ.exec(e))?e5(t[1],t[2],t[3],t[4]):(t=eQ.exec(e))?e5(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eJ.exec(e))?tr(t[1],t[2]/100,t[3]/100,1):(t=e0.exec(e))?tr(t[1],t[2]/100,t[3]/100,t[4]):e1.hasOwnProperty(e)?e6(e1[e]):"transparent"===e?new e8(NaN,NaN,NaN,0):null;}function e6(e){return new e8(e>>16&255,e>>8&255,255&e,1);}function e5(e,t,n,r){return r<=0&&(e=t=n=NaN),new e8(e,t,n,r);}function e8(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r;}function e9(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`;}function e7(){let e=te(this.opacity);return`${1===e?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${1===e?")":`, ${e})`}`;}function te(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function tt(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function tn(e){return((e=tt(e))<16?"0":"")+e.toString(16);}function tr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ta(e,t,n,r);}function ti(e){if(e instanceof ta)return new ta(e.h,e.s,e.l,e.opacity);if(e instanceof eH||(e=e4(e)),!e)return new ta;if(e instanceof ta)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ta(o,s,l,e.opacity);}function ta(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r;}function to(e){return(e=(e||0)%360)<0?e+360:e;}function ts(e){return Math.max(0,Math.min(1,e||0));}function tl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255;}function tu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=e.apply(this,i);return n.cache=s.set(o,l)||s,l;};return n.cache=new(tu.Cache||Map),tu.cacheList.push(n.cache),n;}ej(eH,e4,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:e2,formatHex:e2,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return ti(this).formatHsl();},formatRgb:e3,toString:e3}),ej(e8,function(e,t,n,r){var i;return 1==arguments.length?((i=e)instanceof eH||(i=e4(i)),i)?new e8((i=i.rgb()).r,i.g,i.b,i.opacity):new e8:new e8(e,t,n,null==r?1:r);},eU(eH,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e8(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new e8(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new e8(tt(this.r),tt(this.g),tt(this.b),te(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:e9,formatHex:e9,formatHex8:function(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:e7,toString:e7})),ej(ta,function(e,t,n,r){return 1==arguments.length?ti(e):new ta(e,t,n,null==r?1:r);},eU(eH,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ta(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new ta(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new e8(tl(e>=240?e-240:e+120,i,r),tl(e,i,r),tl(e<120?e+240:e-120,i,r),this.opacity);},clamp(){return new ta(to(this.h),ts(this.s),ts(this.l),te(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let e=te(this.opacity);return`${1===e?"hsl(":"hsla("}${to(this.h)}, ${100*ts(this.s)}%, ${100*ts(this.l)}%${1===e?")":`, ${e})`}`;}})),tu.Cache=Map,tu.cacheList=[],tu.clearCache=function(){tu.cacheList.forEach(function(e){return e.clear();});};var tc=((h={})[h.kUnknown=0]="kUnknown",h[h.kNumber=1]="kNumber",h[h.kPercentage=2]="kPercentage",h[h.kEms=3]="kEms",h[h.kPixels=4]="kPixels",h[h.kRems=5]="kRems",h[h.kDegrees=6]="kDegrees",h[h.kRadians=7]="kRadians",h[h.kGradians=8]="kGradians",h[h.kTurns=9]="kTurns",h[h.kMilliseconds=10]="kMilliseconds",h[h.kSeconds=11]="kSeconds",h[h.kInteger=12]="kInteger",h),td=((f={})[f.kUNumber=0]="kUNumber",f[f.kUPercent=1]="kUPercent",f[f.kULength=2]="kULength",f[f.kUAngle=3]="kUAngle",f[f.kUTime=4]="kUTime",f[f.kUOther=5]="kUOther",f),th=((p={})[p.kYes=0]="kYes",p[p.kNo=1]="kNo",p),tf=((v={})[v.kYes=0]="kYes",v[v.kNo=1]="kNo",v),tp=[{name:"em",unit_type:tc.kEms},{name:"px",unit_type:tc.kPixels},{name:"deg",unit_type:tc.kDegrees},{name:"rad",unit_type:tc.kRadians},{name:"grad",unit_type:tc.kGradians},{name:"ms",unit_type:tc.kMilliseconds},{name:"s",unit_type:tc.kSeconds},{name:"rem",unit_type:tc.kRems},{name:"turn",unit_type:tc.kTurns}],tv=((g={})[g.kUnknownType=0]="kUnknownType",g[g.kUnparsedType=1]="kUnparsedType",g[g.kKeywordType=2]="kKeywordType",g[g.kUnitType=3]="kUnitType",g[g.kSumType=4]="kSumType",g[g.kProductType=5]="kProductType",g[g.kNegateType=6]="kNegateType",g[g.kInvertType=7]="kInvertType",g[g.kMinType=8]="kMinType",g[g.kMaxType=9]="kMaxType",g[g.kClampType=10]="kClampType",g[g.kTransformType=11]="kTransformType",g[g.kPositionType=12]="kPositionType",g[g.kURLImageType=13]="kURLImageType",g[g.kColorType=14]="kColorType",g[g.kUnsupportedColorType=15]="kUnsupportedColorType",g),tg=function(e){switch(e){case tc.kNumber:case tc.kInteger:return td.kUNumber;case tc.kPercentage:return td.kUPercent;case tc.kPixels:return td.kULength;case tc.kMilliseconds:case tc.kSeconds:return td.kUTime;case tc.kDegrees:case tc.kRadians:case tc.kGradians:case tc.kTurns:return td.kUAngle;default:return td.kUOther;}},tm=function(e){switch(e){case td.kUNumber:return tc.kNumber;case td.kULength:return tc.kPixels;case td.kUPercent:return tc.kPercentage;case td.kUTime:return tc.kSeconds;case td.kUAngle:return tc.kDegrees;default:return tc.kUnknown;}},ty=function(e){var t=1;switch(e){case tc.kPixels:case tc.kDegrees:case tc.kSeconds:break;case tc.kMilliseconds:t=.001;break;case tc.kRadians:t=180/Math.PI;break;case tc.kGradians:t=.9;break;case tc.kTurns:t=360;}return t;},tb=function(e){switch(e){case tc.kNumber:case tc.kInteger:break;case tc.kPercentage:return"%";case tc.kEms:return"em";case tc.kRems:return"rem";case tc.kPixels:return"px";case tc.kDegrees:return"deg";case tc.kRadians:return"rad";case tc.kGradians:return"grad";case tc.kMilliseconds:return"ms";case tc.kSeconds:return"s";case tc.kTurns:return"turn";}return"";},tE=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"toString",value:function(){return this.buildCSSText(th.kNo,tf.kNo,"");}},{key:"isNumericValue",value:function(){return this.getType()>=tv.kUnitType&&this.getType()<=tv.kClampType;}}],[{key:"isAngle",value:function(e){return e===tc.kDegrees||e===tc.kRadians||e===tc.kGradians||e===tc.kTurns;}},{key:"isLength",value:function(e){return e>=tc.kEms&&e<tc.kDegrees;}},{key:"isRelativeUnit",value:function(e){return e===tc.kPercentage||e===tc.kEms||e===tc.kRems;}},{key:"isTime",value:function(e){return e===tc.kSeconds||e===tc.kMilliseconds;}}]),tx=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).colorSpace=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getType",value:function(){return tv.kColorType;}},{key:"to",value:function(e){return this;}}]);}(tE),tk=((m={})[m.Constant=0]="Constant",m[m.LinearGradient=1]="LinearGradient",m[m.RadialGradient=2]="RadialGradient",m),tS=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t)).type=e,r.value=n,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.type,this.value);}},{key:"buildCSSText",value:function(e,t,n){return n;}},{key:"getType",value:function(){return tv.kColorType;}}]);}(tE),tT=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).value=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value);}},{key:"getType",value:function(){return tv.kKeywordType;}},{key:"buildCSSText",value:function(e,t,n){return n+this.value;}}]);}(tE),tM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(e)?"NaN":e>0?"infinity":"-infinity")+t;},tw=function(e){return tm(tg(e));},tN=function(e){function t(e){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc.kNumber;return(0,R.default)(this,t),r=(0,B.default)(this,t),i="string"==typeof a?(n=a)?"number"===n?tc.kNumber:"percent"===n||"%"===n?tc.kPercentage:tp.find(function(e){return e.name===n;}).unit_type:tc.kUnknown:a,r.unit=i,r.value=e,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value,this.unit);}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit;}},{key:"getType",value:function(){return tv.kUnitType;}},{key:"convertTo",value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=tw(this.unit);if(n!==tw(e)||n===tc.kUnknown)return null;var r=ty(this.unit)/ty(e);return new t(this.value*r,e);}},{key:"buildCSSText",value:function(e,t,n){var r;switch(this.unit){case tc.kUnknown:break;case tc.kInteger:r=Number(this.value).toFixed(0);break;case tc.kNumber:case tc.kPercentage:case tc.kEms:case tc.kRems:case tc.kPixels:case tc.kDegrees:case tc.kRadians:case tc.kGradians:case tc.kMilliseconds:case tc.kSeconds:case tc.kTurns:var i=this.value,a=tb(this.unit);if(i<-999999||i>999999){var o=tb(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?tM(i,o):i+(o||"");}else r="".concat(i).concat(a);}return n+r;}}]);}(tE),tC=new tN(0,"px");new tN(1,"px");var t_=new tN(0,"deg"),tP=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,R.default)(this,t),(i=(0,B.default)(this,t,["rgb"])).r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.alpha);}},{key:"buildCSSText",value:function(e,t,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")");}}]);}(tx),tA=new tT("unset"),tO={"":tA,unset:tA,initial:new tT("initial"),inherit:new tT("inherit")},tL=new tP(0,0,0,0,!0),tR=new tP(0,0,0,0),tD=tu(function(e,t,n,r){return new tP(e,t,n,r);},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")");}),tI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc.kNumber;return new tN(e,t);};new tN(50,"%");var tB=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){throw Error("".concat(t,": ").concat(e));}function r(){return i("linear-gradient",e.linearGradient,o)||i("repeating-linear-gradient",e.repeatingLinearGradient,o)||i("radial-gradient",e.radialGradient,s)||i("repeating-radial-gradient",e.repeatingRadialGradient,s)||i("conic-gradient",e.conicGradient,s);}function i(t,r,i){return a(r,function(r){var a=i();return a&&!y(e.comma)&&n("Missing comma before color stops"),{type:t,orientation:a,colorStops:h(f)};});}function a(t,r){var i=y(t);if(i){y(e.startCall)||n("Missing (");var a=r(i);return y(e.endCall)||n("Missing )"),a;}}function o(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1);}function s(){var n,r,i=l();return i&&((n=[]).push(i),r=t,y(e.comma)&&((i=l())?n.push(i):t=r)),n;}function l(){var e,t,n=((e=m("shape",/^(circle)/i,0))&&(e.style=g()||u()),e||((t=m("shape",/^(ellipse)/i,0))&&(t.style=v()||u()),t));if(n)n.at=c();else{var r=u();if(r){n=r;var i=c();i&&(n.at=i);}else{var a=d();a&&(n={type:"default-radial",at:a});}}return n;}function u(){return m("extent-keyword",e.extentKeywords,1);}function c(){if(m("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e;}}function d(){var e={x:v(),y:v()};if(e.x||e.y)return{type:"position",value:e};}function h(t){var r=t(),i=[];if(r)for(i.push(r);y(e.comma);)(r=t())?i.push(r):n("One extra comma");return i;}function f(){var t=m("hex",e.hexColor,1)||a(e.rgbaColor,function(){return{type:"rgba",value:h(p)};})||a(e.rgbColor,function(){return{type:"rgb",value:h(p)};})||m("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=v(),t;}function p(){return y(e.number)[1];}function v(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||g();}function g(){return m("px",e.pixelValue,1)||m("em",e.emValue,1);}function m(e,t,n){var r=y(t);if(r)return{type:e,value:r[n]};}function y(e){var n=/^[\n\r\t\s]+/.exec(t);n&&b(n[0].length);var r=e.exec(t);return r&&b(r[0].length),r;}function b(e){t=t.substring(e);}return function(e){var i;return t=e,i=h(r),t.length>0&&n("Invalid input not EOF"),i;};}(),tF=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tz=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,tV=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,tj={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},tU=tu(function(e){return tI("angular"===e.type?Number(e.value):tj[e.value]||0,"deg");}),tH=tu(function(e){var t=50,n=50,r="%",i="%";if((null==e?void 0:e.type)==="position"){var a=e.value,o=a.x,s=a.y;(null==o?void 0:o.type)==="position-keyword"&&("left"===o.value?t=0:"center"===o.value?t=50:"right"===o.value?t=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),(null==s?void 0:s.type)==="position-keyword"&&("left"===s.value?t=0:"center"===s.value?n=50:"right"===s.value?t=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),((null==o?void 0:o.type)==="px"||(null==o?void 0:o.type)==="%"||(null==o?void 0:o.type)==="em")&&(r=null==o?void 0:o.type,t=Number(o.value)),((null==s?void 0:s.type)==="px"||(null==s?void 0:s.type)==="%"||(null==s?void 0:s.type)==="em")&&(i=null==s?void 0:s.type,n=Number(s.value));}return{cx:tI(t,r),cy:tI(n,i)};}),tW=tu(function(e){if(e.indexOf("linear")>-1||e.indexOf("radial")>-1)return tB(e).map(function(e){var t=e.type,n=e.orientation,r=e.colorStops;!function(e){var t=e.length;e[t-1].length=null!==(a=e[t-1].length)&&void 0!==a?a:{type:"%",value:"100"},t>1&&(e[0].length=null!==(o=e[0].length)&&void 0!==o?o:{type:"%",value:"0"});for(var n=0,r=Number(e[0].length.value),i=1;i<t;i++){var a,o,s,l=null===(s=e[i].length)||void 0===s?void 0:s.value;if(!(0,j.isNil)(l)&&!(0,j.isNil)(r)){for(var u=1;u<i-n;u++)e[n+u].length={type:"%",value:"".concat(r+(Number(l)-r)*u/(i-n))};n=i,r=Number(l);}}}(r);var i=r.map(function(e){var t,n;return{offset:tI(Number(e.length.value),"%"),color:(t=e.type,n=e.value,"hex"===t?"#".concat(n):"literal"===t?n:"rgb"===t?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")"))};});if("linear-gradient"===t)return new tS(tk.LinearGradient,{angle:n?tU(n):t_,steps:i});if("radial-gradient"===t&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var a,o=tH(n[0].at),s=o.cx,l=o.cy;if(n[0].style){var u=n[0].style,c=u.type,d=u.value;"extent-keyword"===c?(tO[d]||(tO[d]=new tT(d)),a=tO[d]):a=tI(d,c);}return new tS(tk.RadialGradient,{cx:s,cy:l,size:a,steps:i});}});var t=e[0];if("("===e[1]||"("===e[2]){if("l"===t){var n=tF.exec(e);if(n){var r,i=(null===(r=n[2].match(tV))||void 0===r?void 0:r.map(function(e){return e.split(":");}))||[];return[new tS(tk.LinearGradient,{angle:tI(parseFloat(n[1]),"deg"),steps:i.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tI(100*Number(n),"%"),color:r};})})];}}else if("r"===t){var a=function(e){var t=tG.exec(e);if(t){var n,r=(null===(n=t[4].match(tV))||void 0===n?void 0:n.map(function(e){return e.split(":");}))||[];return{cx:tI(50,"%"),cy:tI(50,"%"),steps:r.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tI(100*Number(n),"%"),color:r};})};}return null;}(e);if(a){if(!(0,j.isString)(a))return[new tS(tk.RadialGradient,a)];e=a;}}else if("p"===t)return function(e){var t=tz.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat";}return{image:r,repetition:n};}return null;}(e);}});function tY(e){return e&&!!e.image;}function tq(e){return e&&!(0,j.isNil)(e.r)&&!(0,j.isNil)(e.g)&&!(0,j.isNil)(e.b);}var tX=tu(function(e){if(tY(e))return(0,L.default)({repetition:"repeat"},e);if((0,j.isNil)(e)&&(e=""),"transparent"===e)return tR;if("currentColor"===e)e="black";else if("none"===e)return tL;var t=tW(e);if(t)return t;var n=e4(e),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),tD.apply(void 0,r);});function t$(e,t){if(tq(e)&&tq(t))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round((0,j.clamp)(t[n],0,255));return t[3]=(0,j.clamp)(t[3],0,1),"rgba(".concat(t.join(","),")");}];}function tK(e,t){if((0,j.isNil)(t))return tI(0,"px");if(isFinite(Number(t="".concat(t).trim().toLowerCase()))){if("px".search(e)>=0)return tI(Number(t),"px");if("deg".search(e)>=0)return tI(Number(t),"deg");}var n=[];t=t.replace(e,function(e){return n.push(e),"U".concat(e);});var r="U(".concat(e.source,")");return n.map(function(e){return tI(Number(t.replace(RegExp("U".concat(e),"g"),"").replace(RegExp(r,"g"),"*0")),e);})[0];}var tZ=function(e){return tK(/px/g,e);},tQ=tu(tZ);tu(function(e){return tK(RegExp("%","g"),e);});var tJ=function(e){return(0,j.isNumber)(e)||isFinite(Number(e))?tI(Number(e)||0,"px"):tK(RegExp("px|%|em|rem","g"),e);},t0=tu(tJ),t1=function(e){return tK(RegExp("deg|rad|grad|turn","g"),e);},t2=tu(t1);function t3(e){var t=0;return e.unit===tc.kDegrees?t=e.value:e.unit===tc.kRadians?t=Number(e.value)*eb:e.unit===tc.kTurns?t=360*Number(e.value):e.value&&(t=e.value),t;}function t4(e,t){var n;return(Array.isArray(e)?n=e.map(function(e){return Number(e);}):(0,j.isString)(e)?n=e.split(" ").map(function(e){return Number(e);}):(0,j.isNumber)(e)&&(n=[e]),2===t)?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===t?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===t&&n.length%2==1?[].concat((0,I.default)(n),(0,I.default)(n)):n;}function t6(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.unit===tc.kPixels)return Number(e.value);if(e.unit===tc.kPercentage&&n){var i=n.nodeName===Q.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2;}return 0;}var t5=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function t8(e){return e.toString();}var t9=function(e){return"number"==typeof e?tI(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?tI(Number(e)):tI(0);},t7=tu(t9);function ne(e,t){return[e,t,t8];}function nt(e,t){return function(n,r){return[n,r,function(n){return t8((0,j.clamp)(n,e,t));}];};}function nn(e,t){if(e.length===t.length)return[e,t,function(e){return e;}];}function nr(e){return 0===e.parsedStyle.d.totalLength&&(e.parsedStyle.d.totalLength=(0,j.getTotalLength)(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength;}function ni(e,t){return e[0]===t[0]&&e[1]===t[1];}function na(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.acos((a+o-(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)))/(2*Math.sqrt(a)*Math.sqrt(o)));if(!s||0===Math.sin(s)||(0,j.isNumberEqual)(s,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return{xExtra:t/2*(1/Math.sin(s/2))*Math.cos(s/2-(l=l>Math.PI/2?Math.PI-l:l))-t/2||0,yExtra:t/2*(1/Math.sin(s/2))*Math.cos((u=u>Math.PI/2?Math.PI-u:u)-s/2)-t/2||0};}function no(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])];}tu(function(e){return(0,j.isString)(e)?e.split(" ").map(t7):e.map(t7);});var ns=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r);},nl=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n);var l=(r=(0,j.mod)(r,360))*ey;if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-o.x)/2,c=(e.y-o.y)/2,d={x:Math.cos(l)*u+Math.sin(l)*c,y:-Math.sin(l)*u+Math.cos(l)*c},h=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var f=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2))/(Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2)),p=(i!==a?1:-1)*Math.sqrt(f=f<0?0:f),v={x:p*(t*d.y/n),y:p*(-(n*d.x)/t)},g={x:Math.cos(l)*v.x-Math.sin(l)*v.y+(e.x+o.x)/2,y:Math.sin(l)*v.x+Math.cos(l)*v.y+(e.y+o.y)/2},m={x:(d.x-v.x)/t,y:(d.y-v.y)/n},y=ns({x:1,y:0},m),b=ns(m,{x:(-d.x-v.x)/t,y:(-d.y-v.y)/n});!a&&b>0?b-=2*Math.PI:a&&b<0&&(b+=2*Math.PI);var E=y+(b%=2*Math.PI)*s,x=t*Math.cos(E),k=n*Math.sin(E);return{x:Math.cos(l)*x-Math.sin(l)*k+g.x,y:Math.sin(l)*x+Math.cos(l)*k+g.y,ellipticalArcStartAngle:y,ellipticalArcEndAngle:y+b,ellipticalArcAngle:E,ellipticalArcCenter:g,resultantRx:t,resultantRy:n};};function nu(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,d=nl({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},t),h=nl({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),f=h.x-d.x,p=h.y-d.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v};}function nc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]);}function nd(e,t){return nc(e)*nc(t)?(e[0]*t[0]+e[1]*t[1])/(nc(e)*nc(t)):1;}function nh(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(nd(e,t));}var nf=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};try{t=(0,j.normalizePath)(e);}catch(n){t=(0,j.normalizePath)(""),console.error("[g]: Invalid SVG Path definition: ".concat(e));}!function(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:("C"===i||"A"===i||"Q"===i)&&(o=[n[n.length-2],n[n.length-1]]),o&&ni(a,o)&&(e.splice(t,1),t--);}}}(t);var t,n=function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break;}}return t;}(t),r=function(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]]);}return r.length>0&&n.push(r),{polygons:t,polylines:n};}(t),i=r.polygons,a=r.polylines,o=function(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var l=e[s];r=e[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var d=function(e,t){var n=t[1],r=t[2],i=(0,j.mod)(t[3]*ey,2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?-(v*r)*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,E=[(d-g)/n,(h-m)/r],x=[(-1*d-g)/n,(-1*h-m)/r],k=nh([1,0],E),S=nh(E,x);return -1>=nd(E,x)&&(S=Math.PI),nd(E,x)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:ni(e,[u,c])?0:n,ry:ni(e,[u,c])?0:r,startAngle:k,endAngle:k+S,xRotation:i,arcFlag:a,sweepFlag:o};}(n,l);c.arcParams=d;}if("Z"===u)n=i,r=e[a+1];else{var h=l.length;n=[l[h-2],l[h-1]];}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),c.currentPoint=n,t[a]&&ni(n,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]];}else if("T"===u){var g=t[s-1],m=no(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]]);}else if("C"===u){var y=[l[1],l[2]],b=[l[3],l[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-y[0],b[1]-y[1]]);}else if("S"===u){var E=t[s-1],x=no(E.currentPoint,p),k=[l[1],l[2]];"C"===E.command?(c.command="C",c.startTangent=[p[0]-x[0],p[1]-x[1]]):(c.command="SQ",c.startTangent=[p[0]-k[0],p[1]-k[1]]),c.endTangent=[n[0]-k[0],n[1]-k[1]];}else if("A"===u){var S=nu(c,0),T=S.x,M=S.y,w=nu(c,1,!1),N=w.x,C=w.y;c.startTangent=[T,M],c.endTangent=[N,C];}t.push(c);}return t;}(t),s=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=(0,Y.quadBox)(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=(0,Y.cubicBox)(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var d=o.arcParams;c=(0,Y.arcBox)(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height));}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;});var h=(0,j.min)(n),f=(0,j.min)(r),p=(0,j.max)(n),v=(0,j.max)(r);if(0===i.length)return{x:h,y:f,width:p-h,height:v-f};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint;y[0]===h?h-=na(m,0).xExtra:y[0]===p&&(p+=na(m,0).xExtra),y[1]===f?f-=na(m,t).yExtra:y[1]===v&&(v+=na(m,t).yExtra);}return{x:h,y:f,width:p-h,height:v-f};}(o,0),l=s.x,u=s.y,c=s.width,d=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(d)?d:0}};},np=tu(nf);function nv(e){return(0,j.isString)(e)?np(e):nf(e);}function ng(e,t,n){var r=e.curve,i=t.curve;r&&0!==r.length||(r=(0,j.path2Curve)(e.absolutePath,!1),e.curve=r),i&&0!==i.length||(i=(0,j.path2Curve)(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=(0,j.equalizeSegments)(r,i));var o=(0,j.getDrawDirection)(a[0])!==(0,j.getDrawDirection)(a[1])?(0,j.reverseCurve)(a[0]):(0,j.clonePath)(a[0]);return[o,(0,j.getRotatedCurve)(a[1],o),function(e){return e;}];}function nm(e,t){return[e.points,t.points,function(e){return e;}];}var ny=/\s*(\w+)\(([^)]*)\)/g;function nb(e){return function(t){var n=0;return e.map(function(e){return null===e?t[n++]:e;});};}function nE(e){return e;}var nx={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],nE],matrix3d:["NNNNNNNNNNNNNNNN",nE],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",nb([null,null,new tN(1)]),nE],scaleX:["N",nb([null,new tN(1),new tN(1)]),nb([null,new tN(1)])],scaleY:["N",nb([new tN(1),null,new tN(1)]),nb([new tN(1),null])],scaleZ:["N",nb([new tN(1),new tN(1),null])],scale3d:["NNN",nE],skew:["Aa",null,nE],skewX:["A",null,nb([null,t_])],skewY:["A",null,nb([t_,null])],translate:["Tt",nb([null,null,tC]),nE],translateX:["T",nb([null,tC,tC]),nb([null,tC])],translateY:["T",nb([tC,null,tC]),nb([tC,null])],translateZ:["L",nb([tC,tC,null])],translate3d:["TTL",nE]};function nk(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!nx[a])return[];var s=o.map(function(e){return tI(e);});t.push({t:a,d:s});}return t;}function nS(e){if(Array.isArray(e))return nk(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(ny.lastIndex=0;(t=ny.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nx[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?t_:t2(e);},N:t7,T:t0,L:tQ})[d.toUpperCase()](c):({a:t_,n:l[0],t:tC})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),ny.lastIndex===e.length)return n;}return[];}function nT(e){if(Array.isArray(e))return nk(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(ny.lastIndex=0;(t=ny.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nx[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?t_:t1(e);},N:t9,T:tJ,L:tZ})[d.toUpperCase()](c):({a:t_,n:l[0],t:tC})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),ny.lastIndex===e.length)return n;}return[];}function nM(e){switch(e.t){case"rotateX":return[1,0,0,0,0,Math.cos(i=t3(e.d[0])*ey),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return[Math.cos(i=t3(e.d[0])*ey),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return[Math.cos(i=t3(e.d[0])*ey),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=t3(e.d[3])*ey;var t,n,r,i,a=t*t+n*n+r*r;if(0===a)t=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);t/=o,n/=o,r/=o;}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(t*n*u+r*l),2*(t*r*u-n*l),0,2*(t*n*u-r*l),1-2*(t*t+r*r)*u,2*(n*r*u+t*l),0,2*(t*r*u+n*l),2*(n*r*u-t*l),1-2*(t*t+n*n)*u,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var c=t3(e.d[0])*ey;return[1,Math.tan(t3(e.d[1])*ey),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return[1,0,0,0,Math.tan(i=t3(e.d[0])*ey),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return[1,Math.tan(i=t3(e.d[0])*ey),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t6(e.d[0],0,null)||0,n=t6(e.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t6(e.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=t6(e.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=t6(e.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t6(e.d[0],0,null)||0,n=t6(e.d[1],0,null)||0,r=t6(e.d[2],0,null)||0,1];case"perspective":var d=t6(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(e){return e.value;});}}function nw(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]];}function nN(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return!function(e,t,n,r,i,a){if(!(!function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0;}(eS,e)||(V.mat4.copy(eT,eS),eT[3]=0,eT[7]=0,eT[11]=0,eT[15]=1,1e-8>Math.abs(V.mat4.determinant(eT))))){var o=eS[3],s=eS[7],l=eS[11],u=eS[12],c=eS[13],d=eS[14],h=eS[15];if(0!==o||0!==s||0!==l){if(eM[0]=o,eM[1]=s,eM[2]=l,eM[3]=h,!V.mat4.invert(eT,eT))return;V.mat4.transpose(eT,eT),V.vec4.transformMat4(i,eM,eT);}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=c,t[2]=d,ew[0][0]=eS[0],ew[0][1]=eS[1],ew[0][2]=eS[2],ew[1][0]=eS[4],ew[1][1]=eS[5],ew[1][2]=eS[6],ew[2][0]=eS[8],ew[2][1]=eS[9],ew[2][2]=eS[10],n[0]=V.vec3.length(ew[0]),V.vec3.normalize(ew[0],ew[0]),r[0]=V.vec3.dot(ew[0],ew[1]),eC(ew[1],ew[1],ew[0],1,-r[0]),n[1]=V.vec3.length(ew[1]),V.vec3.normalize(ew[1],ew[1]),r[0]/=n[1],r[1]=V.vec3.dot(ew[0],ew[2]),eC(ew[2],ew[2],ew[0],1,-r[1]),r[2]=V.vec3.dot(ew[1],ew[2]),eC(ew[2],ew[2],ew[1],1,-r[2]),n[2]=V.vec3.length(ew[2]),V.vec3.normalize(ew[2],ew[2]),r[1]/=n[2],r[2]/=n[2],V.vec3.cross(eN,ew[1],ew[2]),0>V.vec3.dot(ew[0],eN))for(var f=0;f<3;f++)n[f]*=-1,ew[f][0]*=-1,ew[f][1]*=-1,ew[f][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+ew[0][0]-ew[1][1]-ew[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-ew[0][0]+ew[1][1]-ew[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-ew[0][0]-ew[1][1]+ew[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+ew[0][0]+ew[1][1]+ew[2][2],0)),ew[2][1]>ew[1][2]&&(a[0]=-a[0]),ew[0][2]>ew[2][0]&&(a[1]=-a[1]),ew[1][0]>ew[0][1]&&(a[2]=-a[2]);}}(0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(nM).reduce(nw),t,n,r,i,a),[[t,n,r,a,i]];}var nC=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n;}return function(t,n,r,i,a){for(var o,s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)s[l][3]=a[l];for(var u=0;u<3;u++)for(var c=0;c<3;c++)s[3][u]+=t[c]*s[c][u];var d=i[0],h=i[1],f=i[2],p=i[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+f*f),v[0][1]=2*(d*h-f*p),v[0][2]=2*(d*f+h*p),v[1][0]=2*(d*h+f*p),v[1][1]=1-2*(d*d+f*f),v[1][2]=2*(h*f-d*p),v[2][0]=2*(d*f-h*p),v[2][1]=2*(h*f+d*p),v[2][2]=1-2*(d*d+h*h),s=e(s,v);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],s=e(s,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],s=e(s,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],s=e(s,g));for(var m=0;m<3;m++)for(var y=0;y<3;y++)s[m][y]*=n[m];return 0===(o=s)[0][2]&&0===o[0][3]&&0===o[1][2]&&0===o[1][3]&&0===o[2][0]&&0===o[2][1]&&1===o[2][2]&&0===o[2][3]&&0===o[3][2]&&1===o[3][3]?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3]);};}();function n_(e){return e.toFixed(6).replace(".000000","");}function nP(e,t){var n,r;return(e.decompositionPair!==t&&(e.decompositionPair=t,n=nN(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=nN(t)),null===n[0]||null===r[0])?[[!1],[!0],function(n){return n?t[0].d:e[0].d;}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=function(e,t,n){var r=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n;}(e,t);r=(0,j.clamp)(r,-1,1);var i=[];if(1===r)i=e;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i;}(n[0][3],r[0][3],e[5]);return nC(e[0],e[1],e[2],t,e[4]).map(n_).join(",");}]);}function nA(e){return e.replace(/[XY]/,"");}function nO(e){return e.replace(/(X|Y|Z|3d)?$/,"3d");}function nL(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=0;i<e.length;i++)!function(){var n=e[i],r=n.t,a=n.d,o="scale"===r.substring(0,5)?1:0;t.push({t:r,d:a.map(function(e){return"number"==typeof e?tI(o):tI(o,e.unit);})});}();}var a=[],o=[],s=[];if(e.length!==t.length){var l=nP(e,t);a=[l[0]],o=[l[1]],s=[["matrix",[l[2]]]];}else for(var u=0;u<e.length;u++){var c=e[u].t,d=t[u].t,h=e[u].d,f=t[u].d,p=nx[c],v=nx[d],g=void 0;if("perspective"===c&&"perspective"===d||("matrix"===c||"matrix3d"===c)&&("matrix"===d||"matrix3d"===d)){var m=nP([e[u]],[t[u]]);a.push(m[0]),o.push(m[1]),s.push(["matrix",[m[2]]]);continue;}if(c===d)g=c;else if(p[2]&&v[2]&&nA(c)===nA(d))g=nA(c),h=p[2](h),f=v[2](f);else if(p[1]&&v[1]&&nO(c)===nO(d))g=nO(c),h=p[1](h),f=v[1](f);else{var y=nP(e,t);a=[y[0]],o=[y[1]],s=[["matrix",[y[2]]]];break;}for(var b=[],E=[],x=[],k=0;k<h.length;k++){var S=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=e.value||0,s=t.value||0,l=tw(e.unit),u=e.convertTo(l),c=t.convertTo(l);return u&&c?(o=u.value,s=c.value,a=tb(e.unit)):(tN.isLength(e.unit)||tN.isLength(t.unit))&&(o=t6(e,i,n),s=t6(t,i,n),a="px"),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a;}];}(h[k],f[k],n,!1,k);b[k]=S[0],E[k]=S[1],x.push(S[2]);}a.push(b),o.push(E),s.push([g,x]);}if(r){var T=a;a=o,o=T;}return[a,o,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return s[t][1][n](e);}).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),"matrix3d"===s[t][0]&&6===n.split(",").length&&(s[t][0]="matrix"),"".concat(s[t][0],"(").concat(n,")");}).join(" ");}];}var nR=tu(function(e){if((0,j.isString)(e)){if("text-anchor"===e)return[tI(0,"px"),tI(0,"px")];var t=e.split(" ");return(1===t.length&&("top"===t[0]||"bottom"===t[0]?(t[1]=t[0],t[0]="center"):t[1]="center"),2!==t.length)?null:[t0(nD(t[0])),t0(nD(t[1]))];}return[tI(e[0]||0,"px"),tI(e[1]||0,"px")];});function nD(e){return"center"===e?"50%":"left"===e||"top"===e?"0%":"right"===e||"bottom"===e?"100%":e;}var nI=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:eV.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:eV.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:eV.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:eV.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:eV.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:eV.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:eV.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:eV.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:eV.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:eV.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:eV.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:eV.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:eV.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:eV.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:eV.FILTER},{n:"clipPath",syntax:eV.DEFINED_PATH},{n:"textPath",syntax:eV.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:eV.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:eV.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:eV.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:eV.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:eV.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:eV.COORDINATE},{n:"y1",int:!0,l:!0,syntax:eV.COORDINATE},{n:"z1",int:!0,l:!0,syntax:eV.COORDINATE},{n:"x2",int:!0,l:!0,syntax:eV.COORDINATE},{n:"y2",int:!0,l:!0,syntax:eV.COORDINATE},{n:"z2",int:!0,l:!0,syntax:eV.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:eV.PATH,p:50},{n:"points",int:!0,l:!0,syntax:eV.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:eV.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:eV.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:eV.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:eV.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:eV.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:eV.NUMBER,d:function(e){return e===Q.PATH||e===Q.POLYGON||e===Q.POLYLINE?"4":"10";}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:eV.MARKER},{n:"markerEnd",syntax:eV.MARKER},{n:"markerMid",syntax:eV.MARKER},{n:"markerStartOffset",syntax:eV.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:eV.LENGTH,l:!0,int:!0,d:"0"}],nB=new Set(nI.filter(function(e){return!!e.l;}).map(function(e){return e.n;})),nF={},nG=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.runtime=t,nI.forEach(function(e){n.registerMetadata(e);});},[{key:"registerMetadata",value:function(e){[e.n].concat((0,I.default)(e.a||[])).forEach(function(t){nF[t]=e;});}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e];}},{key:"processProperties",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var i=e.parsedStyle.clipPath,a=e.parsedStyle.offsetPath;!function(e,t){var n=nz(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r]);}(e,t);var o=!!r.forceUpdateGeometry;if(!o){for(var s in t)if(nB.has(s)){o=!0;break;}}var l=nz(e);l.has("fill")&&t.fill&&(e.parsedStyle.fill=tX(t.fill)),l.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=tX(t.stroke)),l.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=tX(t.shadowColor)),l.has("filter")&&t.filter&&(e.parsedStyle.filter=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;(e=n.exec(t))&&e.index===i;)if(i=e.index+e[0].length,t5.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map(function(e){return tK(/deg|rad|grad|turn|px|%/g,e)||tX(e);})}),n.lastIndex===t.length)return r;return[];}(t.filter)),l.has("radius")&&!(0,j.isNil)(t.radius)&&(e.parsedStyle.radius=t4(t.radius,4)),l.has("lineDash")&&!(0,j.isNil)(t.lineDash)&&(e.parsedStyle.lineDash=t4(t.lineDash,"even")),l.has("points")&&t.points&&(e.parsedStyle.points=(n=t.points,{points:(0,j.isString)(n)?n.split(" ").map(function(e){var t=e.split(","),n=(0,G.default)(t,2),r=n[0],i=n[1];return[Number(r),Number(i)];}):n,totalLength:0,segments:[]})),l.has("d")&&""===t.d&&(e.parsedStyle.d=(0,L.default)({},ez)),l.has("d")&&t.d&&(e.parsedStyle.d=nv(t.d)),l.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[eV.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),l.has("clipPath")&&!(0,j.isUndefined)(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[eV.DEFINED_PATH].calculator("clipPath",i,t.clipPath,e,this.runtime),l.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[eV.DEFINED_PATH].calculator("offsetPath",a,t.offsetPath,e,this.runtime),l.has("transform")&&t.transform&&(e.parsedStyle.transform=nS(t.transform)),l.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=nR(t.transformOrigin)),l.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[eV.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),l.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[eV.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),l.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[eV.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),l.has("zIndex")&&!(0,j.isNil)(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[eV.Z_INDEX].postProcessor(e),l.has("offsetDistance")&&!(0,j.isNil)(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[eV.OFFSET_DISTANCE].postProcessor(e),l.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[eV.TRANSFORM].postProcessor(e),l.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[eV.TRANSFORM_ORIGIN].postProcessor(e),o&&(e.dirty(!0,!0),r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e));}},{key:"updateGeometry",value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||(r.contentBounds=new el),r.renderBounds||(r.renderBounds=new el);var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=a.cy,l=a.cz,u=a.hwidth,c=void 0===u?0:u,d=a.hheight,h=void 0===d?0:d,f=a.hdepth,p=[Math.abs(c),Math.abs(h),void 0===f?0:f],v=i.stroke,g=i.lineWidth,m=i.increasedLineWidthForHitTesting,y=i.shadowType,b=void 0===y?"outer":y,E=i.shadowColor,x=i.filter,k=i.transformOrigin,S=[void 0===o?0:o,void 0===s?0:s,void 0===l?0:l];r.contentBounds.update(S,p);var T=t===Q.POLYLINE||t===Q.POLYGON||t===Q.PATH?Math.SQRT2:.5;if(v&&!v.isNone){var M=(((void 0===g?1:g)||0)+((void 0===m?0:m)||0))*T;p[0]+=M,p[1]+=M;}if(r.renderBounds.update(S,p),E&&b&&"inner"!==b){var w=r.renderBounds,N=w.min,C=w.max,_=i.shadowBlur,P=i.shadowOffsetX,A=i.shadowOffsetY,O=_||0,L=P||0,R=A||0,D=N[0]-O+L,I=C[0]+O+L,B=N[1]-O+R,F=C[1]+O+R;N[0]=Math.min(N[0],D),C[0]=Math.max(C[0],I),N[1]=Math.min(N[1],B),C[1]=Math.max(C[1],F),r.renderBounds.setMinMax(N,C);}(void 0===x?[]:x).forEach(function(e){var t=e.name,n=e.params;if("blur"===t){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,V.vec3.add(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]));}else if("drop-shadow"===t){var a=n[0].value,o=n[1].value,s=n[2].value,l=r.renderBounds,u=l.min,c=l.max,d=u[0]-s+a,h=c[0]+s+a,f=u[1]-s+o,p=c[1]+s+o;u[0]=Math.min(u[0],d),c[0]=Math.max(c[0],h),u[1]=Math.min(u[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(u,c);}}),e.geometry.dirty=!1;var G=h<0,z=(c<0?-1:1)*(k?t6(k[0],0,e,!0):0),j=(G?-1:1)*(k?t6(k[1],1,e,!0):0);(z||j)&&e.setOrigin(z,j);}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===Q.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===Q.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR));}}]);function nz(e){return e.constructor.PARSED_STYLE_LIST;}var nV=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ne;},[{key:"calculator",value:function(e,t,n,r){return t3(n);}}]),nj=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r,i){return n instanceof tT&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),"clipPath"===e&&r.forEach(function(e){0===e.childNodes.length&&i.sceneGraphService.dirtyToRoot(e);}),n;}}]),nU=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=tX,this.mixer=t$;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tT?"none"===n.value?tL:tR:n;}}]),nH=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n){return n instanceof tT?[]:n;}}]);function nW(e){var t=e.parsedStyle.fontSize;return(0,j.isNil)(t)?null:t;}var nY=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ne;},[{key:"calculator",value:function(e,t,n,r,i){if((0,j.isNumber)(n))return n;if(!tN.isRelativeUnit(n.unit))return n.value;if(n.unit===tc.kPercentage)return 0;if(n.unit===tc.kEms){if(r.parentNode){var a,o=nW(r.parentNode);if(o)return o*n.value;}return 0;}if(n.unit===tc.kRems){if(null!=r&&null!==(a=r.ownerDocument)&&void 0!==a&&a.documentElement){var s=nW(r.ownerDocument.documentElement);if(s)return s*n.value;}return 0;}}}]),nq=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nn;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nX=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nn;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),n$=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){n instanceof tT&&(n=null);var i,a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a;}}]),nK=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ne;},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nZ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===Q.LINE||i===Q.PATH||i===Q.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y);}}}}]),nQ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nJ=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=nv,this.mixer=ng;},[{key:"calculator",value:function(e,t,n){return n instanceof tT&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ef(0,0,0,0)}:n;}}]),n0=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nm;}),n1=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).mixer=nt(0,1/0),e;}return(0,F.default)(t,e),(0,D.default)(t);}(nY),n2=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n instanceof tT?"unset"===n.value?"":n.value:"".concat(n);}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||"";}}]),n3=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a;}return n.value;}}]),n4=(new WeakMap,"undefined"!=typeof window&&void 0!==window.document);function n6(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t);}}return n-r;}function n5(e){var t,n=e;do{if(null===(t=n.parsedStyle)||void 0===t?void 0:t.clipPath)return n;n=n.parentElement;}while(null!==n)return null;}function n8(e,t,n){n4&&e.style&&(e.style.width=t+"px",e.style.height=n+"px");}var n9={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},n7="object"==typeof performance&&performance.now?performance:Date;function re(e){return e.nodeName===Q.FRAGMENT||e.getRootNode().nodeName===Q.FRAGMENT;}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!t&&!t.isNone,o=!!n&&!n.isNone;return"visiblepainted"===e||"painted"===e||"auto"===e?(r=a,i=o):"visiblefill"===e||"fill"===e?r=!0:"visiblestroke"===e||"stroke"===e?i=!0:("visible"===e||"all"===e)&&(r=!0,i=!0),[r,i];}var rn=1,rr="object"==typeof self&&self.self===self?self:"object"==typeof Z&&Z.global===Z?Z:{},ri=Date.now(),ra={},ro=Date.now(),rs=function(e){if("function"!=typeof e)throw TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-ro,r=rn++;return ra[r]=e,Object.keys(ra).length>1||setTimeout(function(){ro=t;var e=ra;ra={},Object.keys(e).forEach(function(t){return e[t](rr.performance&&"function"==typeof rr.performance.now?rr.performance.now():Date.now()-ri);});},n>16?0:16-n),r;},rl=function(e){return"string"!=typeof e?rs:""===e?rr.requestAnimationFrame:rr["".concat(e,"RequestAnimationFrame")];},ru=function(e,t){for(var n=0;void 0!==e[n];){if(t(e[n]))return e[n];n+=1;}}(["","webkit","moz","ms","o"],function(e){return!!rl(e);}),rc=rl(ru),rd="string"!=typeof ru?function(e){delete ra[e];}:""===ru?rr.cancelAnimationFrame:rr["".concat(ru,"CancelAnimationFrame")]||rr["".concat(ru,"CancelRequestAnimationFrame")];rr.requestAnimationFrame=rc,rr.cancelAnimationFrame=rd;var rh=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"getCallbacksNum",value:function(){return this.callbacks.length;}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(e){return e.apply(void 0,t);}));}}]),rf=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:(y=(0,X.default)((0,q.default)().mark(function e(){var t,n,r,i,a=arguments;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=6;break;}return e.next=1,(t=this.callbacks)[0].apply(t,a);case 1:n=e.sent,r=1;case 2:if(!(r<this.callbacks.length)){e.next=5;break;}return i=this.callbacks[r],e.next=3,i(n);case 3:n=e.sent;case 4:r++,e.next=2;break;case 5:return e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop();}},e,this);})),function(){return y.apply(this,arguments);})}]),rp=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=arguments;this.callbacks.forEach(function(e){e.apply(void 0,r);});}}]),rv=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=1;a<this.callbacks.length;a++)i=(0,this.callbacks[a])(i);return i;}return null;}}]),rg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rm=/([\"\'])[^\'\"]+\1/;function ry(e){var t=e.fontSize,n=e.fontFamily,r=e.fontStyle,i=e.fontVariant,a=e.fontWeight;return{fontSize:void 0===t?16:t,fontFamily:void 0===n?"sans-serif":n,fontStyle:void 0===r?"normal":r,fontVariant:void 0===i?"normal":i,fontWeight:void 0===a?"normal":a};}var rb=tu(function(e){for(var t=ry(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight,s=(0,j.isNumber)(n)&&"".concat(n,"px")||"16px",l=r.split(","),u=l.length-1;u>=0;u--){var c=l[u].trim();!rm.test(c)&&0>rg.indexOf(c)&&(c='"'.concat(c,'"')),l[u]=c;}return"".concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l.join(","));},function(e){var t=ry(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight;return"".concat(i,"_").concat(a,"_").concat(o,"_").concat(n,"_").concat(r);}),rE=function(e){return Math.max(e,1e-6);};function rx(e,t,n){return V.mat4.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e;}var rk=V.mat4.create(),rS=V.mat4.create(),rT={scale:function(e){V.mat4.fromScaling(rk,[e[0].value,e[1].value,1].map(function(e){return rE(e);}));},scaleX:function(e){V.mat4.fromScaling(rk,[e[0].value,1,1].map(function(e){return rE(e);}));},scaleY:function(e){V.mat4.fromScaling(rk,[1,e[0].value,1].map(function(e){return rE(e);}));},scaleZ:function(e){V.mat4.fromScaling(rk,[1,1,e[0].value].map(function(e){return rE(e);}));},scale3d:function(e){V.mat4.fromScaling(rk,[e[0].value,e[1].value,e[2].value].map(function(e){return rE(e);}));},translate:function(e){V.mat4.fromTranslation(rk,[e[0].value,e[1].value,0]);},translateX:function(e){V.mat4.fromTranslation(rk,[e[0].value,0,0]);},translateY:function(e){V.mat4.fromTranslation(rk,[0,e[0].value,0]);},translateZ:function(e){V.mat4.fromTranslation(rk,[0,0,e[0].value]);},translate3d:function(e){V.mat4.fromTranslation(rk,[e[0].value,e[1].value,e[2].value]);},rotate:function(e){V.mat4.fromZRotation(rk,t3(e[0])*ey);},rotateX:function(e){V.mat4.fromXRotation(rk,t3(e[0])*ey);},rotateY:function(e){V.mat4.fromYRotation(rk,t3(e[0])*ey);},rotateZ:function(e){V.mat4.fromZRotation(rk,t3(e[0])*ey);},rotate3d:function(e){V.mat4.fromRotation(rk,t3(e[3])*ey,[e[0].value,e[1].value,e[2].value]);},skew:function(e){rx(rk,e[0].value*ey,e[1].value*ey);},skewX:function(e){rx(rk,e[0].value*ey,0);},skewY:function(e){rx(rk,0,e[0].value*ey);},matrix:function(e){V.mat4.set(rk,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1);},matrix3d:function(e){V.mat4.set.apply(V.mat4,[rk].concat((0,I.default)(e.map(function(e){return e.value;}))));}},rM=V.vec3.fromValues(1,1,1),rw=V.vec3.create(),rN={translate:function(e,t){ig.sceneGraphService.setLocalScale(e,rM,!1),ig.sceneGraphService.setLocalEulerAngles(e,rw,void 0,void 0,!1),ig.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),ig.sceneGraphService.dirtyLocalTransform(e,e.transformable);}};function rC(e,t){if(e.length){if(1===e.length&&rN[e[0].t]){rN[e[0].t](t,e[0].d);return;}for(var n=V.mat4.identity(rS),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=rT[a];s&&(s(o),V.mat4.mul(n,n,rk));}t.setLocalTransform(n);}else t.resetLocalTransform();return t.getLocalTransform();}var r_=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=nT,this.mixer=nL;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tT?[]:n;}},{key:"postProcessor",value:function(e){rC(e.parsedStyle.transform,e);}}]),rP=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===tc.kPixels&&t[1].unit===tc.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds();}}]),rA=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n.value;}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&t.dirty(),r&&(r.dirty=!0,r.dirtyReason=eD.Z_INDEX_CHANGED);}}}]),rO=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.r,a=void 0===i?0:i;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:a,hheight:a};}}]),rL=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.rx,a=e.ry;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:void 0===i?0:i,hheight:void 0===a?0:a};}}]),rR=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.min(n,i),s=(Math.max(t,r)-a)/2,l=(Math.max(n,i)-o)/2;return{cx:a+s,cy:o+l,hwidth:s,hheight:l};}}]),rD=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width,a=t.height,o=i/2,s=a/2;return{cx:n+o,cy:r+s,hwidth:o,hheight:s};}}]),rI=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){if(e.points&&(0,j.isArray)(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),r=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),i=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),a=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s};}return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rB=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.src,a=e.width,o=e.height,s=void 0===a?0:a,l=void 0===o?0:o;return!i||(0,j.isString)(i)||(s||(s=i.width,e.width=s),l||(l=i.height,e.height=l)),{cx:(void 0===n?0:n)+s/2,cy:(void 0===r?0:r)+l/2,hwidth:s/2,hheight:l/2};}}]),rF=(0,D.default)(function e(t){(0,R.default)(this,e),this.globalRuntime=t;},[{key:"isReadyToMeasure",value:function(e,t){return e.text;}},{key:"update",value:function(e,t){var n,r=e.text,i=e.textAlign,a=void 0===i?"start":i,o=e.lineWidth,s=void 0===o?1:o,l=e.textBaseline,u=void 0===l?"alphabetic":l,c=e.dx,d=void 0===c?0:c,h=e.dy,f=void 0===h?0:h,p=e.x,v=e.y;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var g=((null==t||null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,m=this.globalRuntime.textService.measureText(r,e,g);e.metrics=m;var y=m.width,b=m.height,E=y/2,x=b/2,k=(void 0===p?0:p)+E;"center"===a||"middle"===a?k+=s/2-E:("right"===a||"end"===a)&&(k+=s-2*E);var S=(void 0===v?0:v)-x;return"middle"===u?S+=x:"top"===u||"hanging"===u?S+=2*x:"alphabetic"===u||("bottom"===u||"ideographic"===u)&&(S+=0),d&&(k+=d),f&&(S+=f),{cx:k,cy:S,hwidth:E,hheight:x};}}]),rG=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rz=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.width,a=void 0===i?0:i,o=e.height,s=void 0===o?0:o;return{cx:(void 0===n?0:n)+a/2,cy:(void 0===r?0:r)+s/2,hwidth:a/2,hheight:s/2};}}]),rV=(0,D.default)(function e(t){(0,R.default)(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new eh,this.page=new eh,this.canvas=new eh,this.viewport=new eh,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t;},[{key:"name",get:function(){return this.type;}},{key:"layerX",get:function(){return this.layer.x;}},{key:"layerY",get:function(){return this.layer.y;}},{key:"pageX",get:function(){return this.page.x;}},{key:"pageY",get:function(){return this.page.y;}},{key:"x",get:function(){return this.canvas.x;}},{key:"y",get:function(){return this.canvas.y;}},{key:"canvasX",get:function(){return this.canvas.x;}},{key:"canvasY",get:function(){return this.canvas.y;}},{key:"viewportX",get:function(){return this.viewport.x;}},{key:"viewportY",get:function(){return this.viewport.y;}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"propagationPath",get:function(){return this.composedPath();}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function(){this.propagationStopped=!0;}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw Error(ep);}}]),rj=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).client=new eh,e.movement=new eh,e.offset=new eh,e.global=new eh,e.screen=new eh,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clientX",get:function(){return this.client.x;}},{key:"clientY",get:function(){return this.client.y;}},{key:"movementX",get:function(){return this.movement.x;}},{key:"movementY",get:function(){return this.movement.y;}},{key:"offsetX",get:function(){return this.offset.x;}},{key:"offsetY",get:function(){return this.offset.y;}},{key:"globalX",get:function(){return this.global.x;}},{key:"globalY",get:function(){return this.global.y;}},{key:"screenX",get:function(){return this.screen.x;}},{key:"screenY",get:function(){return this.screen.y;}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e);}},{key:"initMouseEvent",value:function(){throw Error(ep);}}]);}(rV),rU=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).width=0,e.height=0,e.isPrimary=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function(){throw Error("getPredictedEvents is not supported!");}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this);}}]);}(rj),rH=function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,arguments);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this);}}]);}(rj),rW=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t,[null])).type=e,r.detail=null==n?void 0:n.detail,!n||"detail"in n||(r.detail=n),Object.assign(r,n),r;}return(0,F.default)(t,e),(0,D.default)(t);}(rV),rY=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.mutations=void 0,e.parentNode=null,e.destroyed=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"textContent",get:function(){var e="";this.nodeName===Q.TEXT&&(e+=this.style.text);var t,n=(0,$.default)(this.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.nodeName===Q.TEXT?e+=r.nodeValue:e+=r.textContent;}}catch(e){n.e(e);}finally{n.f();}return e;},set:function(e){var t=this;this.childNodes.slice().forEach(function(e){t.removeChild(e);}),this.nodeName===Q.TEXT&&(this.style.text="".concat(e));}},{key:"getRootNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this;}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0;}},{key:"isDefaultNamespace",value:function(e){throw Error(ep);}},{key:"lookupNamespaceURI",value:function(e){throw Error(ep);}},{key:"lookupPrefix",value:function(e){throw Error(ep);}},{key:"normalize",value:function(){throw Error(ep);}},{key:"isEqualNode",value:function(e){return this===e;}},{key:"isSameNode",value:function(e){return this.isEqualNode(e);}},{key:"parent",get:function(){return this.parentNode;}},{key:"parentElement",get:function(){return null;}},{key:"nextSibling",get:function(){return null;}},{key:"previousSibling",get:function(){return null;}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null;}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null;}},{key:"compareDocumentPosition",value:function(e){if(e===this)return 0;for(var n,r=e,i=this,a=[r],o=[i];null!==(n=r.parentNode)&&void 0!==n?n:i.parentNode;)r=r.parentNode?(a.push(r.parentNode),r.parentNode):r,i=i.parentNode?(o.push(i.parentNode),i.parentNode):i;if(r!==i)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=a.length>o.length?a:o,l=s===a?o:a;if(s[s.length-l.length]===l[0])return s===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var u=s.length-l.length,c=l.length-1;c>=0;c--){var d=l[c],h=s[u+c];if(h!==d){var f=d.parentNode.childNodes;if(f.indexOf(d)<f.indexOf(h)){if(l===a)return t.DOCUMENT_POSITION_PRECEDING;return t.DOCUMENT_POSITION_FOLLOWING;}if(s===a)return t.DOCUMENT_POSITION_PRECEDING;break;}}return t.DOCUMENT_POSITION_FOLLOWING;}},{key:"contain",value:function(e){return this.contains(e);}},{key:"contains",value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t;}},{key:"getAncestor",value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t;}},{key:"forEach",value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(!1===e(n))break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r]);}}}],[{key:"isNode",value:function(e){return!!e.childNodes;}}]);}((0,D.default)(function e(){(0,R.default)(this,e),this.emitter=new z.default;},[{key:"on",value:function(e,t,n){return this.addEventListener(e,t,n),this;}},{key:"addEventListener",value:function(e,t,n){var r=!1,i=!1;if((0,j.isBoolean)(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o;}r&&(e+="capture"),t=(0,j.isFunction)(t)?t:t.handleEvent;var s=(0,j.isFunction)(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this;}},{key:"off",value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this;}},{key:"removeAllEventListeners",value:function(){var e;null===(e=this.emitter)||void 0===e||e.removeAllListeners();}},{key:"removeEventListener",value:function(e,t,n){if(!this.emitter)return this;((0,j.isBoolean)(n)?n:null==n?void 0:n.capture)&&(e+="capture"),t=(0,j.isFunction)(t)?t:null===(r=t)||void 0===r?void 0:r.handleEvent;var r,i=(0,j.isFunction)(t)?void 0:t;return this.emitter.off(e,t,i),this;}},{key:"emit",value:function(e,t){this.dispatchEvent(new rW(e,t));}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e);}},{key:"dispatchEvent",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;if(t=this.document?this:this.defaultView?this.defaultView:null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView){if(e.manager=t.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],r||(e.target=this),e.manager.dispatchEvent(e,e.type,r);}else this.dispatchEventToSelf(e);return!e.defaultPrevented;}}]));rY.DOCUMENT_POSITION_DISCONNECTED=1,rY.DOCUMENT_POSITION_PRECEDING=2,rY.DOCUMENT_POSITION_FOLLOWING=4,rY.DOCUMENT_POSITION_CONTAINS=8,rY.DOCUMENT_POSITION_CONTAINED_BY=16,rY.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,(0,D.default)(function e(t,n){var r=this;(0,R.default)(this,e),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=V.mat4.create(),this.tmpVec3=V.vec3.create(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)r.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;r.dispatchEvent(t,n?"rightdown":"mousedown");}r.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t);},this.onPointerUp=function(e){var t=n7.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup");}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var l=o;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var u=2===n.button;r.notifyTarget(n,u?"rightupoutside":"mouseupoutside");}rY.isNode(l)&&(l=l.parentNode);}delete a.pressTargetsByButton[e.button],s=l;}if(s){var c,d=r.clonePointerEvent(n,"click");d.target=s,d.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});var h=r.context.renderingContext.root.ownerDocument.defaultView,f=a.clicksByButton[e.button];f.target===d.target&&t-f.timeStamp<h.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=d.target,f.timeStamp=t,d.detail=f.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==d.pointerType&&"touch"!==d.pointerType||r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d);}r.freeEvent(n);},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o="mousemove"===e.type?"mouseout":"pointerout",s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!t.composedPath().includes(a)){var l=r.createPointerEvent(e,"pointerleave",a||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!t.composedPath().includes(l.target);)l.currentTarget=l.target,r.notifyTarget(l),n&&r.notifyTarget(l,"mouseleave"),rY.isNode(l.target)&&(l.target=l.target.parentNode);r.freeEvent(l);}r.freeEvent(s);}if(a!==t.target){var u="mousemove"===e.type?"mouseover":"pointerover",c=r.clonePointerEvent(t,u);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var d=a&&rY.isNode(a)&&a.parentNode;d&&d!==(rY.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&d!==t.target;)d=d.parentNode;if(!d||d===(rY.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var h=r.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==a&&h.target!==(rY.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),n&&r.notifyTarget(h,"mouseenter"),rY.isNode(h.target)&&(h.target=h.target.parentNode);r.freeEvent(h);}r.freeEvent(c);}r.dispatchEvent(t,"pointermove"),"touch"===t.pointerType&&r.dispatchEvent(t,"touchmove"),n&&(r.dispatchEvent(t,"mousemove"),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t);},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(e,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(rY.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),rY.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o);}r.cursor=null;},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(rY.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),rY.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a);},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||("mouse"===i.pointerType||"pen"===i.pointerType)&&r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),rY.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button];}r.freeEvent(i);},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t);},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t);}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t);},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick);}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear();}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a);}return{scaleX:t,scaleY:n,bbox:e};}},{key:"client2Viewport",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new eh((e.x-((null==i?void 0:i.left)||0))/n,(e.y-((null==i?void 0:i.top)||0))/r);}},{key:"viewport2Client",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new eh((e.x+((null==i?void 0:i.left)||0))*n,(e.y+((null==i?void 0:i.top)||0))*r);}},{key:"viewport2Canvas",value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),l=r.getWorldTransform(),u=V.mat4.multiply(this.tmpMatrix,l,s),c=V.vec3.set(this.tmpVec3,t/a*2-1,(1-n/o)*2-1,0);return V.vec3.transformMat4(c,c,u),new eh(c[0],c[1]);}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=V.mat4.multiply(this.tmpMatrix,n,r),a=V.vec3.set(this.tmpVec3,e.x,e.y,0);V.vec3.transformMat4(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,l=o.height;return new eh((a[0]+1)/2*s,(1-(a[1]+1)/2)*l);}},{key:"setPickHandler",value:function(e){this.pickHandler=e;}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority;});}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type));}}},{key:"dispatchEvent",value:function(e,t,n){if(n){e.eventPhase=e.AT_TARGET;var r=this.rootTarget.defaultView||null;e.currentTarget=r,this.notifyListeners(e,t);}else e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;}}}},{key:"propagationPath",value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<2048&&e!==this.rootTarget;r++)rY.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t;}},{key:"hitTest",value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null;}},{key:"isNativeEventFromCanvas",value:function(e,t){var n,r=null==t?void 0:t.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r);}return null!=t&&!!t.composedPath&&t.composedPath().indexOf(e)>-1;}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i;}return null;}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY});}},{key:"createPointerEvent",value:function(e,t,n,r){var i=this.allocateEvent(rU);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof t&&(i.type=t),i;}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(rH);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t;}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e];}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(rH);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t;}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(rU);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!=t?t:n.type,n;}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist;}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset);}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=n7.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport);}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t;}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e);}},{key:"notifyTarget",value:function(e,t){t=null!=t?t:e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t);}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r){if("fn"in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e);}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(r===this.rootTarget||rY.isNode(r)&&r.parentNode===t)t=e[n];else break;}return t;}},{key:"getCursor",value:function(e){for(var t=e;t;){var n=!!t.getAttribute&&t.getAttribute("cursor");if(n)return n;t=rY.isNode(t)&&t.parentNode;}}}]);var rq=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||ig.offscreenCanvas)this.canvas=e||ig.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"));}catch(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));}return this.canvas.width=10,this.canvas.height=10,this.canvas;}},{key:"getOrCreateContext",value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context;}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0);}catch(e){}try{return document.createElement("canvas");}catch(e){}return null;}}]),rX=((b={})[b.CAMERA_CHANGED=0]="CAMERA_CHANGED",b[b.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",b[b.NONE=2]="NONE",b);(0,D.default)(function e(t,n){(0,R.default)(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new rp,initAsync:new rh,dirtycheck:new rv,cull:new rv,beginFrame:new rp,beforeRender:new rp,render:new rp,afterRender:new rp,endFrame:new rp,destroy:new rp,pick:new rf,pickSync:new rv,pointerDown:new rp,pointerUp:new rp,pointerMove:new rp,pointerOut:new rp,pointerOver:new rp,pointerWheel:new rp,pointerCancel:new rp,click:new rp},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(e){var t=this,n=(0,L.default)((0,L.default)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(e){e.apply(n,t.globalRuntime);}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e();}).catch(function(e){});}},{key:"getStats",value:function(){return this.stats;}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(rX.CAMERA_CHANGED);}},{key:"render",value:function(e,t,n){var r=this,i=e.getConfig(),a=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(a.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(e),a.renderReasons.size&&this.inited){a.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=1===a.renderReasons.size&&a.renderReasons.has(rX.CAMERA_CHANGED),s=!i.disableRenderHooks||!o;s&&this.renderDisplayObject(a.root,i,a),this.hooks.beginFrame.call(t),s&&a.renderListCurrentFrame.forEach(function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e);}),this.hooks.endFrame.call(t),a.renderListCurrentFrame=[],a.renderReasons.clear(),n();}}},{key:"renderDisplayObject",value:function(e,t,n){for(var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling,s=[e];s.length>0;){var l,u=s.pop();!function(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e,l=null;s&&(l=o?r.hooks.cull.call(s,r.context.camera):s)&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(l)),e.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0);}(u);for(var c=(null===(l=u.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?u.sortable.sorted:u.childNodes,d=c.length-1;d>=0;d--)s.push(c[d]);}}},{key:"sort",value:function(e,t){var n,r;(null==t||null===(n=t.sorted)||void 0===n?void 0:n.length)>0&&t.dirtyReason!==eD.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var r=t.sorted.indexOf(n);if(r>-1&&t.sorted.splice(r,1),e.childNodes.indexOf(n)>-1){if(0===t.sorted.length)t.sorted.push(n);else{var i=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;0>n6(e[i],t)?n=i+1:r=i;}return n;}(t.sorted,n);t.sorted.splice(i,0,n);}}}):t.sorted=e.childNodes.slice().sort(n6),(null===(r=t.sorted)||void 0===r?void 0:r.length)>0&&0===e.childNodes.filter(function(e){return e.parsedStyle.zIndex;}).length&&(t.sorted=[]);}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call();}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(rX.DISPLAY_OBJECT_CHANGED);}}]);var r$=/\[\s*(.*)=(.*)\s*\]/,rK=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"selectOne",value:function(e,t){var n=this;if(e.startsWith("."))return t.find(function(t){return((null==t?void 0:t.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.find(function(t){return t.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):null;}return t.find(function(n){return t!==n&&n.nodeName===e;});}},{key:"selectAll",value:function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(r){return t!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.findAll(function(r){return t!==r&&r.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):[];}return t.findAll(function(n){return t!==n&&n.nodeName===e;});}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),r=n.name,i=n.value;return"name"===r?t.name===i:this.attributeToString(t,r)===i;}return t.nodeName===e;}},{key:"getIdOrClassname",value:function(e){return e.substring(1);}},{key:"getAttribute",value:function(e){var t=e.match(r$),n="",r="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),r=t[2].replace(/"/g,"")),{name:n,value:r};}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return(0,j.isNil)(n)?"":n.toString?n.toString():"";}}]),rZ=((E={}).ATTR_MODIFIED="DOMAttrModified",E.INSERTED="DOMNodeInserted",E.MOUNTED="DOMNodeInsertedIntoDocument",E.REMOVED="removed",E.UNMOUNTED="DOMNodeRemovedFromDocument",E.REPARENT="reparent",E.DESTROY="destroy",E.BOUNDS_CHANGED="bounds-changed",E.CULLED="culled",E),rQ=function(e){function t(e,n,r,i,a,o,s,l){var u;return(0,R.default)(this,t),(u=(0,B.default)(this,t,[null])).relatedNode=n,u.prevValue=r,u.newValue=i,u.attrName=a,u.attrChange=o,u.prevParsedValue=s,u.newParsedValue=l,u.type=e,u;}return(0,F.default)(t,e),(0,D.default)(t);}(rV);rQ.ADDITION=2,rQ.MODIFICATION=1,rQ.REMOVAL=3;var rJ=new rQ(rZ.REPARENT,null,"","","",0,"",""),r0=V.vec2.create(),r1=V.vec3.create(),r2=V.vec3.fromValues(1,1,1),r3=V.mat4.create(),r4=V.vec2.create(),r6=V.vec3.create(),r5=V.mat4.create(),r8=V.quat.create(),r9=V.vec3.create(),r7=V.quat.create(),ie=V.vec3.create(),it=V.vec3.create(),ir=V.vec3.create(),ii=V.mat4.create(),ia=V.quat.create(),io=V.quat.create(),is=V.quat.create(),il=(0,D.default)(function e(t){(0,R.default)(this,e),this.displayObjectDependencyMap=new WeakMap,this.runtime=t;},[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t);}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t);}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t);}},{key:"attach",value:function(e,t,n){var r=!1;e.parentNode&&(r=e.parentNode!==t,this.detach(e));var i=e.nodeName===Q.FRAGMENT,a=re(t);e.parentNode=t;var o=i?e.childNodes:[e];(0,j.isNumber)(n)?o.forEach(function(e){t.childNodes.splice(n,0,e),e.parentNode=t;}):o.forEach(function(e){t.childNodes.push(e),e.parentNode=t;});var s=t.sortable;if((null!=s&&null!==(u=s.sorted)&&void 0!==u&&u.length||s.dirty||e.parsedStyle.zIndex)&&(-1===s.dirtyChildren.indexOf(e)&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=eD.ADDED),!a){if(i)this.dirtyFragment(e);else{var l=e.transformable;l&&this.dirtyWorldTransform(e,l);}if(r){var u,c,d=(null===(c=t.ownerDocument)||void 0===c||null===(c=c.defaultView)||void 0===c||null===(c=c.getConfig())||void 0===c||null===(c=c.future)||void 0===c?void 0:c.experimentalCancelEventPropagation)===!0;e.dispatchEvent(rJ,d,d);}}}},{key:"detach",value:function(e){if(e.parentNode){var t,n,r=e.transformable,i=e.parentNode.sortable;(null!=i&&null!==(t=i.sorted)&&void 0!==t&&t.length||null!==(n=e.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(e)&&i.dirtyChildren.push(e),i.dirty=!0,i.dirtyReason=eD.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),r&&this.dirtyWorldTransform(e,r),e.parentNode=null;}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition;}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation;}},{key:"getLocalScale",value:function(e){return e.transformable.localScale;}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew;}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return eG(t),t.localTransform;}},{key:"setLocalPosition",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;it[0]=t[0],it[1]=t[1],it[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(i.localPosition,it)&&(V.vec3.copy(i.localPosition,it),r&&this.dirtyLocalTransform(e,i));}},{key:"translateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.vec3.equals(t,r1)||(V.vec3.transformQuat(t,t,i.localRotation),V.vec3.add(i.localPosition,i.localPosition,t),this.dirtyLocalTransform(e,i));}},{key:"setLocalRotation",value:function(e,t,n,r,i){var a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];"number"==typeof t&&(t=V.quat.set(r8,t,n,r,i));var o=e.transformable;V.quat.copy(o.localRotation,t),a&&this.dirtyLocalTransform(e,o);}},{key:"rotateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.quat.fromEuler(io,t[0],t[1],t[2]),V.quat.mul(i.localRotation,i.localRotation,io),this.dirtyLocalTransform(e,i);}},{key:"setLocalScale",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;V.vec3.set(r6,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:i.localScale[2]),!V.vec3.equals(r6,i.localScale)&&(V.vec3.copy(i.localScale,r6),r&&this.dirtyLocalTransform(e,i));}},{key:"scaleLocal",value:function(e,t){var n,r=e.transformable;V.vec3.multiply(r.localScale,r.localScale,V.vec3.set(r6,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:1)),this.dirtyLocalTransform(e,r);}},{key:"setLocalSkew",value:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];"number"==typeof t&&(t=V.vec2.set(r4,t,n));var i=e.transformable;V.vec2.copy(i.localSkew,t),r&&this.dirtyLocalTransform(e,i);}},{key:"setLocalEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var a=e.transformable;V.quat.fromEuler(a.localRotation,t[0],t[1],t[2]),i&&this.dirtyLocalTransform(e,a);}},{key:"setLocalTransform",value:function(e,t){var n=V.mat4.getTranslation(r9,t),r=V.mat4.getRotation(r7,t),i=V.mat4.getScaling(ie,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,r2,!1),this.setLocalPosition(e,r1,!1),this.setLocalEulerAngles(e,r1,void 0,void 0,!1),this.setLocalSkew(e,r0,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"getPosition",value:function(e){var t=e.transformable;return V.mat4.getTranslation(t.position,this.getWorldTransform(e,t));}},{key:"getRotation",value:function(e){var t=e.transformable;return V.mat4.getRotation(t.rotation,this.getWorldTransform(e,t));}},{key:"getScale",value:function(e){var t=e.transformable;return V.mat4.getScaling(t.scaling,this.getWorldTransform(e,t));}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin;}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transformable;return(t.localDirtyFlag||t.dirtyFlag)&&(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),t.worldTransform;}},{key:"setPosition",value:function(e,t){var n,r=e.transformable;if(ir[0]=t[0],ir[1]=t[1],ir[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(this.getPosition(e),ir)){if(V.vec3.copy(r.position,ir),null!==e.parentNode&&e.parentNode.transformable){var i=e.parentNode.transformable;V.mat4.copy(ii,i.worldTransform),V.mat4.invert(ii,ii),V.vec3.transformMat4(r.localPosition,ir,ii);}else V.vec3.copy(r.localPosition,ir);this.dirtyLocalTransform(e,r);}}},{key:"translate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.set(r6,t,n,r)),V.vec3.equals(t,r1)||(V.vec3.add(r6,this.getPosition(e),t),this.setPosition(e,r6));}},{key:"setRotation",value:function(e,t,n,r,i){var a=e.transformable;if("number"==typeof t&&(t=V.quat.fromValues(t,n,r,i)),null!==e.parentNode&&e.parentNode.transformable){var o=this.getRotation(e.parentNode);V.quat.copy(r8,o),V.quat.invert(r8,r8),V.quat.multiply(a.localRotation,r8,t),V.quat.normalize(a.localRotation,a.localRotation),this.dirtyLocalTransform(e,a);}else this.setLocalRotation(e,t);}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(r8,t[0],t[1],t[2]);var a=this.getRotation(e),o=this.getRotation(e.parentNode);V.quat.copy(is,o),V.quat.invert(is,is),V.quat.multiply(r8,is,r8),V.quat.multiply(i.localRotation,r8,a),V.quat.normalize(i.localRotation,i.localRotation),this.dirtyLocalTransform(e,i);}else this.rotateLocal(e,t);}},{key:"setOrigin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=[t,n,r]);var i=e.transformable;if(t[0]!==i.origin[0]||t[1]!==i.origin[1]||t[2]!==i.origin[2]){var a=i.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtyLocalTransform(e,i);}}},{key:"setEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(i.localRotation,t[0],t[1],t[2]);var a=this.getRotation(e.parentNode);V.quat.copy(ia,V.quat.invert(r8,a)),V.quat.mul(i.localRotation,i.localRotation,ia),this.dirtyLocalTransform(e,i);}else this.setLocalEulerAngles(e,t);}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.geometry;return n.dirty&&ig.styleValueRegistry.updateGeometry(e),(t?n.renderBounds:n.contentBounds||null)||new el;}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!el.isEmpty(r)){var i=n||new el;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i;}return null;}},{key:"getBounds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(e,n,i);if(e.childNodes.forEach(function(e){var r=t.getBounds(e,n);r&&(a?a.add(r):(a=i||new el).update(r.center,r.halfExtents));}),a||(a=new el),n){var o=n5(e);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents);}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a;}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=r3;e.parentNode.transformable&&(t=V.mat4.invert(r5,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!el.isEmpty(n)){var r=new el;return r.setFromTransformedAABB(n,t),r;}}return this.getBounds(e);}},{key:"getBoundingClientRect",value:function(e){var t,n,r=this.getGeometryBounds(e);el.isEmpty(r)||(n=new el).setFromTransformedAABB(r,this.getWorldTransform(e));var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=(0,G.default)(a,2),s=o[0],l=o[1],u=n.getMax(),c=(0,G.default)(u,2),d=c[0],h=c[1];return new ef(s+((null==i?void 0:i.left)||0),l+((null==i?void 0:i.top)||0),d-s,h-l);}return new ef((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0);}},{key:"internalUpdateTransform",value:function(e){var t,n,r=null===(n=e.parentNode)||void 0===n?void 0:n.transformable;eG(e.transformable),(t=e.transformable).dirtyFlag&&(r?V.mat4.multiply(t.worldTransform,r.worldTransform,t.localTransform):V.mat4.copy(t.worldTransform,t.localTransform),t.dirtyFlag=!1);}},{key:"internalUpdateElement",value:function(e,t){var n=(null===(s=e.ownerDocument)||void 0===s||null===(s=s.defaultView)||void 0===s||null===(s=s.getConfig())||void 0===s||null===(s=s.future)||void 0===s?void 0:s.experimentalAttributeUpdateOptimization)===!0,r=t[t.length-1],i=(null==r?void 0:r.transformDirty)||(null===(l=e.transformable)||void 0===l?void 0:l.localDirtyFlag);e.transformable&&((d=e.transformable).dirtyFlag||(d.dirtyFlag=i)),this.internalUpdateTransform(e),i&&(null===(h=e.dirty)||void 0===h||h.call(e,!0,!0));var a=(null===(u=e.renderable)||void 0===u?void 0:u.boundsDirty)||(null===(c=e.renderable)||void 0===c?void 0:c.renderBoundsDirty);if((i||a)&&(null==r?void 0:r.shapeUpdated)===!1&&n)for(var o=t.length-1;o>=0;){var s,l,u,c,d,h,f,p,v=t[o];if(v.shapeUpdated)break;null===(f=(p=v.node).dirty)||void 0===f||f.call(p,!0,!0),v.shapeUpdated=!0,o-=1;}return i;}},{key:"syncHierarchy",value:function(e){for(var t,n,r=[e],i=e.parentNode?[{node:e.parentNode,transformDirty:(null===(t=e.parentNode.transformable)||void 0===t?void 0:t.localDirtyFlag)||(null===(n=e.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];r.length>0;){for(var a=r.pop(),o=i[i.length-1];i.length>0&&a.parentNode!==o.node;)o=i.pop();var s=this.internalUpdateElement(a,i);if(a.childNodes.length>0){for(var l=a.childNodes.length-1;l>=0;l--)r.push(a.childNodes[l]);i.push({node:a,transformDirty:s,shapeUpdated:!1});}}}},{key:"dirtyLocalTransform",value:function(e,t){re(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtyWorldTransform(e,t));}},{key:"dirtyWorldTransform",value:function(e,t){this.dirtyWorldInternal(e,t),this.dirtyToRoot(e,!0);}},{key:"dirtyWorldInternal",value:function(e,t){var n,r=this,i=(null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization)===!0;t.dirtyFlag||(t.dirtyFlag=!0,e.dirty(!0,!0),i||e.childNodes.forEach(function(e){var t=e.transformable;r.dirtyWorldInternal(e,t);}));}},{key:"dirtyToRoot",value:function(e){for(var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,o=(null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalAttributeUpdateOptimization)===!0;a&&(null===(n=(r=a).dirty)||void 0===n||n.call(r,!0,!0),!o);)a=a.parentNode;i&&e.forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),this.informDependentDisplayObjects(e);var s=e.mutations||[],l=s.find(function(e){return"attributes"===e.type&&e._boundsChangeData;});l?l._boundsChangeData={affectChildren:l._boundsChangeData.affectChildren||i}:(l={type:"attributes",target:e,_boundsChangeData:{affectChildren:i}},s.push(l)),e.mutations=s;}},{key:"dirtyFragment",value:function(e){var t,n=e.transformable;n&&(n.dirtyFlag=!0,n.localDirtyFlag=!0),null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);for(var r=e.childNodes.length,i=0;i<r;i++)this.dirtyFragment(e.childNodes[i]);}},{key:"notifyMutationObservers",value:function(e){var t=new Set;if(e.getRoot().forEach(function(e){(e.mutations||[]).forEach(function(n){"attributes"===n.type&&n._boundsChangeData&&(n._boundsChangeData.affectChildren?e.forEach(function(e){var r=(0,L.default)({},n);r.target=e,t.add(r);}):t.add(n));}),e.mutations=void 0;}),t.size>0){var n=new rW(rZ.BOUNDS_CHANGED,{detail:Array.from(t)});e.dispatchEvent(n,!0,!0);}}},{key:"updateDisplayObjectDependency",value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1);}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r);}}},{key:"informDependentDisplayObjects",value:function(e){var t,n=this,r=this.displayObjectDependencyMap.get(e);if(r){var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalCancelEventPropagation;Object.keys(r).forEach(function(e){r[e].forEach(function(t){n.dirtyToRoot(t,!0),t.dispatchEvent(new rQ(rZ.ATTR_MODIFIED,t,n,n,e,rQ.MODIFICATION,n,n),i,i),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback(e,n,n);});});}}}]),iu=(0,D.default)(function e(t){if((0,R.default)(this,e),t<=0)throw Error("LRU capacity must be a positive number.");this.capacity=t,this.cache=new Map;},[{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t;}}},{key:"put",value:function(e,t){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache.delete(n);}}},{key:"len",value:function(){return this.cache.size;}},{key:"clear",value:function(){this.cache.clear();}}]),ic={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},id=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,ih=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),ip=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),iv=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return!n.isBreakingSpace(t)&&!!(e&&(ip.exec(t)||ih.exec(e)));},this.trimByKinsokuShorui=function(e){var t=(0,I.default)(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t;},this.runtime=t,this.charWidthCache=new iu(100);},[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=ic.MetricsString+ic.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(ic.BaselineSymbol).width),l=ic.HeightMultiplier*s;s=s*ic.BaselineMultiplier|0,r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var u=i.getImageData(0,0,o||1,l||1).data,c=u.length,d=4*o,h=0,f=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<d;v+=4)if(255!==u[f+v]){p=!0;break;}if(p)break;f+=d;}for(n.ascent=s-h,f=c-d,p=!1,h=l;h>s;--h){for(var g=0;g<d;g+=4)if(255!==u[f+g]){p=!0;break;}if(p)break;f-=d;}return n.descent=h-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n;}},{key:"measureText",value:function(e,t,n){var r=t.fontSize,i=void 0===r?16:r,a=t.wordWrap,o=t.lineHeight,s=t.lineWidth,l=void 0===s?1:s,u=t.textBaseline,c=void 0===u?"alphabetic":u,d=t.textAlign,h=void 0===d?"start":d,f=t.letterSpacing,p=void 0===f?0:f,v=t.textPath;t.textPathSide,t.textPathStartOffset;var g=t.leading,m=void 0===g?0:g,y=rb(t),b=this.measureFont(y,n);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);E.font=y,t.isOverflowing=!1;var x=(void 0!==a&&a?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),k=Array(x.length),S=0;if(v){v.getTotalLength();for(var T=0;T<x.length;T++)E.measureText(x[T]).width,x[T].length;}else{for(var M=0;M<x.length;M++){var w=E.measureText(x[M]).width+(x[M].length-1)*p;k[M]=w,S=Math.max(S,w);}var N=S+l,C=o||b.fontSize+l,_=Math.max(C,b.fontSize+l)+(x.length-1)*(C+m);C+=m;var P=0;return"middle"===c?P=-_/2:"bottom"===c||"alphabetic"===c||"ideographic"===c?P=-_:("top"===c||"hanging"===c)&&(P=0),{font:y,width:N,height:_,lines:x,lineWidths:k,lineHeight:C,maxLineWidth:S,fontProperties:b,lineMetrics:k.map(function(e,t){var n=0;return"center"===h||"middle"===h?n-=e/2:("right"===h||"end"===h)&&(n-=e),new ef(n-l/2,P+t*C,e+l,C);})};}}},{key:"wordWrap",value:function(e,t,n){var r=this,i=Array.from(e);if(0===i.length)return"";var a=this,o=t.wordWrapWidth,s=t.letterSpacing,l=void 0===s?0:s,u=t.maxLines,c=void 0===u?1/0:u,d=t.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),f=(void 0===o?0:o)+l,p="";"ellipsis"===d?p="...":d&&"clip"!==d&&(p=d);var v=[""],g=0,m=0,y=-1,b=rb(t),E=this.charWidthCache.get(b);E||(E=new iu(500),this.charWidthCache.put(b,E));var x=function(e){return r.getFromCache(e,l,E,h);},k=x(p);function S(e,t,n,r){for(;x(e)<r&&t<i.length-1&&!a.isNewline(i[t+1]);)t+=1,e+=i[t];for(;x(e)>r&&t>=n;)t-=1,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t};}function T(e,t){if(!(k<=0)&&!(k>f)){if(!v[e]){v[e]=p;return;}var n=S(v[e],t,y+1,f-k);v[e]=n.lineTxt+p;}}for(var M=0;M<i.length;M++){var w=i[M],N=i[M-1],C=i[M+1],_=x(w);if(this.isNewline(w)){if(g+1>=c){M<i.length-1&&T(g,M-1),t.isOverflowing=!0;break;}y=M-1,m=0,v[g+=1]="";continue;}if(_>f){T(g,M-1),t.isOverflowing=!0;break;}if(m>0&&m+_>f){var P=S(v[g],M-1,y+1,f);if(P.txtLastCharIndex!==M-1){if(v[g]=P.lineTxt,P.txtLastCharIndex===i.length-1)break;w=i[M=P.txtLastCharIndex+1],N=i[M-1],C=i[M+1],_=x(w);}if(g+1>=c){T(g,M-1),t.isOverflowing=!0;break;}if(y=M-1,m=0,v[g+=1]="",this.isBreakingSpace(w))continue;this.canBreakInLastChar(w)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[g]||"",x)),this.shouldBreakByKinsokuShorui(w,C)&&(v=this.trimByKinsokuShorui(v),m+=x(N||""));}m+=_,v[g]+=w;}return v.join("\n");}},{key:"isBreakingSpace",value:function(e){return"string"==typeof e&&ic.BreakingSpaces.indexOf(e.charCodeAt(0))>=0;}},{key:"isNewline",value:function(e){return"string"==typeof e&&ic.Newlines.indexOf(e.charCodeAt(0))>=0;}},{key:"trimToBreakable",value:function(e){var t=(0,I.default)(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return t;var i=n.slice(r,r+1),a=this.isBreakingSpace(i);return t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,r+(a?0:1)),t;}},{key:"canBreakInLastChar",value:function(e){return!(e&&id.test(e));}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce(function(e,n){return e+t(n);},0);}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!id.test(e[t]))return t;return -1;}},{key:"getFromCache",value:function(e,t,n,r){var i=n.get(e);if("number"!=typeof i){var a=e.length*t;i=r.measureText(e).width+a,n.put(e,i);}return i;}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear();}}]),ig={},im=(k=new rB,S=new rI,x={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(x,Q.FRAGMENT,null),Q.CIRCLE,new rO),Q.ELLIPSE,new rL),Q.RECT,k),Q.IMAGE,k),Q.GROUP,new rG),Q.LINE,new rR),Q.TEXT,new rF(ig)),Q.POLYLINE,S),Q.POLYGON,S),(0,U.default)((0,U.default)((0,U.default)(x,Q.PATH,new rD),Q.HTML,new rz),Q.MESH,null)),iy=(M=new nU,w=new nY,T={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,eV.PERCENTAGE,null),eV.NUMBER,new nK),eV.ANGLE,new nV),eV.DEFINED_PATH,new nj),eV.PAINT,M),eV.COLOR,M),eV.FILTER,new nH),eV.LENGTH,w),eV.LENGTH_PERCENTAGE,w),eV.LENGTH_PERCENTAGE_12,new nq),(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,eV.LENGTH_PERCENTAGE_14,new nX),eV.COORDINATE,new nY),eV.OFFSET_DISTANCE,new nZ),eV.OPACITY_VALUE,new nQ),eV.PATH,new nJ),eV.LIST_OF_POINTS,new n0),eV.SHADOW_BLUR,new n1),eV.TEXT,new n2),eV.TEXT_TRANSFORM,new n3),eV.TRANSFORM,new r_),(0,U.default)((0,U.default)((0,U.default)(T,eV.TRANSFORM_ORIGIN,new rP),eV.Z_INDEX,new rA),eV.MARKER,new n$));ig.CameraContribution=eL,ig.AnimationTimeline=null,ig.EasingFunction=null,ig.offscreenCanvasCreator=new rq,ig.sceneGraphSelector=new rK,ig.sceneGraphService=new il(ig),ig.textService=new iv(ig),ig.geometryUpdaterFactory=im,ig.CSSPropertySyntaxFactory=iy,ig.styleValueRegistry=new nG(ig),ig.layoutRegistry=null,ig.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Z?Z:{},ig.enableStyleSyntax=!0,ig.enableSizeAttenuation=!1;var ib=0,iE=new rQ(rZ.INSERTED,null,"","","",0,"",""),ix=new rQ(rZ.REMOVED,null,"","","",0,"",""),ik=new rW(rZ.DESTROY),iS=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).entity=ib++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:eR.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"dirty",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=e,void 0!==t&&(this.renderable.boundsDirty=t,this.renderable.renderBoundsDirty=t,this.geometry.dirty=t);}},{key:"className",get:function(){return this.getAttribute("class")||"";},set:function(e){this.setAttribute("class",e);}},{key:"classList",get:function(){return this.className.split(" ").filter(function(e){return""!==e;});}},{key:"tagName",get:function(){return this.nodeName;}},{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"parentElement",get:function(){return this.parentNode;}},{key:"nextSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null;}return null;}},{key:"previousSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null;}return null;}},{key:"cloneNode",value:function(e){throw Error(ep);}},{key:"appendChild",value:function(e,t){var n;if(e.destroyed)throw Error("Cannot append a destroyed element.");return ig.sceneGraphService.attach(e,this,t),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(re(this)||e.nodeName!==Q.FRAGMENT?this.ownerDocument.defaultView.mountChildren(e):this.ownerDocument.defaultView.mountFragment(e)),this.isMutationObserved&&(iE.relatedNode=this,e.dispatchEvent(iE)),e;}},{key:"insertBefore",value:function(e,t){if(t){e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);-1===n?this.appendChild(e):this.appendChild(e,n);}else this.appendChild(e);return e;}},{key:"replaceChild",value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t;}},{key:"removeChild",value:function(e){var t,n,r=(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return ix.relatedNode=this,e.dispatchEvent(ix,r,r),null!==(n=e.ownerDocument)&&void 0!==n&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),ig.sceneGraphService.detach(e),e;}},{key:"removeChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t);}}},{key:"destroyChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy();}}},{key:"matches",value:function(e){return ig.sceneGraphService.matches(e,this);}},{key:"getElementById",value:function(e){return ig.sceneGraphService.querySelector("#".concat(e),this);}},{key:"getElementsByName",value:function(e){return ig.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this);}},{key:"getElementsByClassName",value:function(e){return ig.sceneGraphService.querySelectorAll(".".concat(e),this);}},{key:"getElementsByTagName",value:function(e){return ig.sceneGraphService.querySelectorAll(e,this);}},{key:"querySelector",value:function(e){return ig.sceneGraphService.querySelector(e,this);}},{key:"querySelectorAll",value:function(e){return ig.sceneGraphService.querySelectorAll(e,this);}},{key:"closest",value:function(e){var t=this;do{if(ig.sceneGraphService.matches(e,t))return t;t=t.parentElement;}while(null!==t)return null;}},{key:"find",value:function(e){var t=this,n=null;return this.forEach(function(r){return!(r!==t&&e(r))||(n=r,!1);}),n;}},{key:"findAll",value:function(e){var t=this,n=[];return this.forEach(function(r){r!==t&&e(r)&&n.push(r);}),n;}},{key:"after",value:function(){var e=this;if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){var i;return null===(i=e.parentNode)||void 0===i?void 0:i.appendChild(n,t+r+1);});}}},{key:"before",value:function(){if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=(0,W.default)(n).slice(1);this.parentNode.appendChild(i,e),i.after.apply(i,(0,I.default)(a));}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove();}},{key:"append",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t);});}},{key:"prepend",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t,n){return e.appendChild(t,n);});}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments);}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this;}},{key:"destroy",value:function(){var e,t=(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(ik,t,t),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0;}},{key:"getGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ig.sceneGraphService.getGeometryBounds(this,e);}},{key:"getTransformedGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ig.sceneGraphService.getTransformedGeometryBounds(this,e);}},{key:"getBounds",value:function(){return ig.sceneGraphService.getBounds(this);}},{key:"getRenderBounds",value:function(){return ig.sceneGraphService.getBounds(this,!0);}},{key:"getLocalBounds",value:function(){return ig.sceneGraphService.getLocalBounds(this);}},{key:"getBoundingClientRect",value:function(){return ig.sceneGraphService.getBoundingClientRect(this);}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle));}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes);}},{key:"getAttribute",value:function(e){if("symbol"!=typeof e)return this.attributes[e];}},{key:"hasAttribute",value:function(e){return this.getAttributeNames().includes(e);}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length;}},{key:"removeAttribute",value:function(e){this.setAttribute(e,null),delete this.attributes[e];}},{key:"setAttribute",value:function(e,t){this.attributes[e]=t;}},{key:"getAttributeNS",value:function(e,t){throw Error(ep);}},{key:"getAttributeNode",value:function(e){throw Error(ep);}},{key:"getAttributeNodeNS",value:function(e,t){throw Error(ep);}},{key:"hasAttributeNS",value:function(e,t){throw Error(ep);}},{key:"removeAttributeNS",value:function(e,t){throw Error(ep);}},{key:"removeAttributeNode",value:function(e){throw Error(ep);}},{key:"setAttributeNS",value:function(e,t,n){throw Error(ep);}},{key:"setAttributeNode",value:function(e){throw Error(ep);}},{key:"setAttributeNodeNS",value:function(e){throw Error(ep);}},{key:"toggleAttribute",value:function(e,t){throw Error(ep);}}]);}(rY);function iT(e){return!!(null!=e&&e.nodeName);}var iM=ig.globalThis.Proxy?ig.globalThis.Proxy:function(){},iw=new rQ(rZ.ATTR_MODIFIED,null,null,null,null,rQ.MODIFICATION,null,null),iN=V.vec3.create(),iC=V.quat.create(),i_=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||Q.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),ig.enableStyleSyntax&&(n.style=new iM({setProperty:function(e,t){n.setAttribute(e,t);},getPropertyValue:function(e){return n.getAttribute(e);},removeProperty:function(e){n.removeAttribute(e);},item:function(){return"";}},{get:function(e,t){return void 0!==e[t]?e[t]:n.getAttribute(t);},set:function(e,t,r){return n.setAttribute(t,r),!0;}})),n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"destroy",value:function(){(0,H.default)(t,"destroy",this,3)([]),this.getAnimations().forEach(function(e){e.cancel();});}},{key:"cloneNode",value:function(e,t){var n=(0,L.default)({},this.attributes);for(var r in n){var i=n[r];iT(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i));}var a=new this.constructor((0,L.default)((0,L.default)({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n);}}),a;}},{key:"initAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ig.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.dirty();}},{key:"setAttribute",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];!(0,j.isUndefined)(n)&&(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),(0,H.default)(t,"setAttribute",this,3)([e,n]));}},{key:"setAttributes",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.skipDispatchAttrModifiedEvent,a=void 0!==i&&i;if(a||(t=(0,L.default)({},this.attributes),n=(0,L.default)({},this.parsedStyle)),ig.styleValueRegistry.processProperties(this,e,r),this.dirty(),!a)for(var o in e)this.dispatchAttrModifiedEvent(o,t[o],e[o],n[o]);}},{key:"internalSetAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.attributes[e],i=this.parsedStyle[e];ig.styleValueRegistry.processProperties(this,(0,U.default)({},e,t),n),this.dirty(),this.dispatchAttrModifiedEvent(e,r,t,i);}},{key:"dispatchAttrModifiedEvent",value:function(e,t,n,r){var i,a=this.parsedStyle[e];if(this.isConnected){if(iw.relatedNode=this,iw.prevValue=t,iw.newValue=n,iw.attrName=e,iw.prevParsedValue=r,iw.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(iw);else{var o,s=(null===(o=this.ownerDocument.defaultView.getConfig().future)||void 0===o?void 0:o.experimentalCancelEventPropagation)===!0;iw.target=this,this.ownerDocument.defaultView.dispatchEvent(iw,!0,s);}}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(i=this.attributeChangedCallback)||void 0===i||i.call(this,e,t,n,r,a));}},{key:"getBBox",value:function(){var e=this.getBounds(),t=e.getMin(),n=(0,G.default)(t,2),r=n[0],i=n[1],a=e.getMax(),o=(0,G.default)(a,2);return new ef(r,i,o[0]-r,o[1]-i);}},{key:"setOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ig.sceneGraphService.setOrigin(this,em(e,t,n,!1)),this;}},{key:"getOrigin",value:function(){return ig.sceneGraphService.getOrigin(this);}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ig.sceneGraphService.setPosition(this,em(e,t,n,!1)),this;}},{key:"setLocalPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ig.sceneGraphService.setLocalPosition(this,em(e,t,n,!1)),this;}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ig.sceneGraphService.translate(this,em(e,t,n,!1)),this;}},{key:"translateLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ig.sceneGraphService.translateLocal(this,em(e,t,n,!1)),this;}},{key:"getPosition",value:function(){return ig.sceneGraphService.getPosition(this);}},{key:"getLocalPosition",value:function(){return ig.sceneGraphService.getLocalPosition(this);}},{key:"scale",value:function(e,t,n){return this.scaleLocal(e,t,n);}},{key:"scaleLocal",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=em(e,t,n,!1)),ig.sceneGraphService.scaleLocal(this,e),this;}},{key:"setLocalScale",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=em(e,t,n,!1)),ig.sceneGraphService.setLocalScale(this,e),this;}},{key:"getLocalScale",value:function(){return ig.sceneGraphService.getLocalScale(this);}},{key:"getScale",value:function(){return ig.sceneGraphService.getScale(this);}},{key:"getEulerAngles",value:function(){var e=ex(iN,ig.sceneGraphService.getWorldTransform(this));return(0,G.default)(e,3)[2]*eb;}},{key:"getLocalEulerAngles",value:function(){var e=ex(iN,ig.sceneGraphService.getLocalRotation(this));return(0,G.default)(e,3)[2]*eb;}},{key:"setEulerAngles",value:function(e){return ig.sceneGraphService.setEulerAngles(this,0,0,e),this;}},{key:"setLocalEulerAngles",value:function(e){return ig.sceneGraphService.setLocalEulerAngles(this,0,0,e),this;}},{key:"rotateLocal",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ig.sceneGraphService.rotateLocal(this,0,0,e):ig.sceneGraphService.rotateLocal(this,e,t,n),this;}},{key:"rotate",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ig.sceneGraphService.rotate(this,0,0,e):ig.sceneGraphService.rotate(this,e,t,n),this;}},{key:"setRotation",value:function(e,t,n,r){return ig.sceneGraphService.setRotation(this,e,t,n,r),this;}},{key:"setLocalRotation",value:function(e,t,n,r){return ig.sceneGraphService.setLocalRotation(this,e,t,n,r),this;}},{key:"setLocalSkew",value:function(e,t){return ig.sceneGraphService.setLocalSkew(this,e,t),this;}},{key:"getRotation",value:function(){return ig.sceneGraphService.getRotation(this);}},{key:"getLocalRotation",value:function(){return ig.sceneGraphService.getLocalRotation(this);}},{key:"getLocalSkew",value:function(){return ig.sceneGraphService.getLocalSkew(this);}},{key:"getLocalTransform",value:function(){return ig.sceneGraphService.getLocalTransform(this);}},{key:"getWorldTransform",value:function(){return ig.sceneGraphService.getWorldTransform(this);}},{key:"setLocalTransform",value:function(e){return ig.sceneGraphService.setLocalTransform(this,e),this;}},{key:"resetLocalTransform",value:function(){ig.sceneGraphService.resetLocalTransform(this);}},{key:"getAnimations",value:function(){return this.activeAnimations;}},{key:"animate",value:function(e,t){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,e,t):null;}},{key:"isVisible",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.visibility)!=="hidden";}},{key:"interactive",get:function(){return this.isInteractive();},set:function(e){this.style.pointerEvents=e?"auto":"none";}},{key:"isInteractive",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.pointerEvents)!=="none";}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible);}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))+1),this;}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))-1),this;}},{key:"getConfig",value:function(){return this.config;}},{key:"attr",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?(0,j.isObject)(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t]);}),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes;}},{key:"getMatrix",value:function(e){var t,n,r,i=e||this.getWorldTransform(),a=V.mat4.getTranslation(iN,i),o=(0,G.default)(a,2),s=o[0],l=o[1],u=V.mat4.getScaling(iN,i),c=(0,G.default)(u,2),d=c[0],h=c[1],f=ex(iN,V.mat4.getRotation(iC,i)),p=(0,G.default)(f,3),v=p[0],g=p[2];return n=Math.cos(t=v||g),r=Math.sin(t),V.mat3.fromValues(d*n,h*r,0,-d*r,h*n,0,s,l,1);}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform());}},{key:"setMatrix",value:function(e){var t=ek(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o);}},{key:"setLocalMatrix",value:function(e){var t=ek(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o);}},{key:"show",value:function(){this.forEach(function(e){e.style.visibility="visible";});}},{key:"hide",value:function(){this.forEach(function(e){e.style.visibility="hidden";});}},{key:"getCount",value:function(){return this.childElementCount;}},{key:"getParent",value:function(){return this.parentElement;}},{key:"getChildren",value:function(){return this.children;}},{key:"getFirst",value:function(){return this.firstElementChild;}},{key:"getLast",value:function(){return this.lastElementChild;}},{key:"getChildByIndex",value:function(e){return this.children[e]||null;}},{key:"add",value:function(e,t){return this.appendChild(e,t);}},{key:"set",value:function(e,t){this.config[e]=t;}},{key:"get",value:function(e){return this.config[e];}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"setZIndex",value:function(e){return this.style.zIndex=e,this;}}]);}(iS);i_.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var iP=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.CIRCLE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_);iP.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var iA=["style"];(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iA);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({style:r},i)])).isCustomElement=!0,e;}return(0,F.default)(t,e),(0,D.default)(t);})(i_).PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iO=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.ELLIPSE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_);iO.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,[{type:Q.FRAGMENT}]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_).PARSED_STYLE_LIST=new Set(["class","className"]);var iL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.GROUP},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_);iL.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iR=["style"],iD=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iR);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.HTML,style:r},i)])).cullable.enable=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getDomElement",value:function(){return this.parsedStyle.$el;}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"getLocalBounds",value:function(){if(this.parentNode){var e=V.mat4.invert(V.mat4.create(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!el.isEmpty(t)){var n=new el;return n.setFromTransformedAABB(t,e),n;}}return this.getBounds();}}]);}(i_);iD.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var iI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.IMAGE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_);iI.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var iB=["style"],iF=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iB);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.LINE,style:(0,L.default)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&iT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&iT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"x1"===e||"y1"===e||"x2"===e||"y2"===e||"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iT(r)&&(this.markerStartAngle=0,r.remove()),i&&iT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e&&(r&&iT(r)&&(this.markerEndAngle=0,r.remove()),i&&iT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)));}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=s.x1,f=s.x2,p=s.y1,v=s.y2,g=e?l:u;if(g&&iT(g)){var m=0;e?(r=h,i=p,t=f-h,n=v-p,a=c||0,o=this.markerStartAngle):(r=f,i=v,t=h-f,n=p-v,a=d||0,o=this.markerEndAngle),m=Math.atan2(n,t),g.setLocalEulerAngles(180*m/Math.PI+o),g.setLocalPosition(r+Math.cos(m)*a,i+Math.sin(m)*a);}}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=(0,Y.linePointAt)(r,i,a,o,e),l=s.x,u=s.y,c=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(l,u,0),t?this.getWorldTransform():this.getLocalTransform());return new eh(c[0],c[1]);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getTotalLength",value:function(){var e=this.parsedStyle,t=e.x1,n=e.y1,r=e.x2,i=e.y2;return(0,Y.lineLength)(t,n,r,i);}}]);}(i_);iF.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var iG=["style"],iz=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iG);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.PATH,style:r,initialParsedStyle:{miterLimit:4,d:(0,L.default)({},ez)}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iT(l)&&e.placeMarkerMid(l),s&&iT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"d"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iT(r)&&(this.markerStartAngle=0,r.remove()),i&&iT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iT(r)&&(this.markerEndAngle=0,r.remove()),i&&iT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=e?l:u;if(h&&iT(h)){var f=0;if(e){var p=this.getStartTangent(),v=(0,G.default)(p,2),g=v[0],m=v[1];r=m[0],i=m[1],t=g[0]-m[0],n=g[1]-m[1],a=c||0,o=this.markerStartAngle;}else{var y=this.getEndTangent(),b=(0,G.default)(y,2),E=b[0],x=b[1];r=x[0],i=x[1],t=E[0]-x[0],n=E[1]-x[1],a=d||0,o=this.markerEndAngle;}f=Math.atan2(n,t),h.setLocalEulerAngles(180*f/Math.PI+o),h.setLocalPosition(r+Math.cos(f)*a,i+Math.sin(f)*a);}}},{key:"placeMarkerMid",value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(e){e.remove();}),e&&iT(e))for(var n=1;n<t.length-1;n++){var r=(0,G.default)(t[n].currentPoint,2),i=r[0],a=r[1],o=1===n?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a);}}},{key:"getTotalLength",value:function(){return nr(this);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.d.absolutePath,r=(0,j.getPointAtLength)(n,e),i=r.x,a=r.y,o=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new eh(o[0],o[1]);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(e*nr(this),t);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?t.push([n[0]-i[0],n[1]-i[1]]):t.push([r[0],r[1]]),t.push([n[0],n[1]]);}return t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?n.push([i[0]-a[0],i[1]-a[1]]):n.push([r[0],r[1]]),n.push([i[0],i[1]]);}return n;}}]);}(i_);iz.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var iV=["style"],ij=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iV);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iT(l)&&e.placeMarkerMid(l),s&&iT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"points"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iT(r)&&(this.markerStartAngle=0,r.remove()),i&&iT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iT(r)&&(this.markerEndAngle=0,r.remove()),i&&iT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=(s.points||{}).points,f=e?l:u;if(f&&iT(f)&&h){var p=0;if(r=h[0][0],i=h[0][1],e)t=h[1][0]-h[0][0],n=h[1][1]-h[0][1],a=c||0,o=this.markerStartAngle;else{var v=h.length;this.parsedStyle.isClosed?(t=h[v-1][0]-h[0][0],n=h[v-1][1]-h[0][1]):(r=h[v-1][0],i=h[v-1][1],t=h[v-2][0]-h[v-1][0],n=h[v-2][1]-h[v-1][1]),a=d||0,o=this.markerEndAngle;}p=Math.atan2(n,t),f.setLocalEulerAngles(180*p/Math.PI+o),f.setLocalPosition(r+Math.cos(p)*a,i+Math.sin(p)*a);}}},{key:"placeMarkerMid",value:function(e){var t=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(e){e.remove();}),this.markerMidList=[],e&&iT(e)&&t)for(var n=1;n<(this.parsedStyle.isClosed?t.length:t.length-1);n++){var r=t[n][0],i=t[n][1],a=1===n?e:e.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i);}}}]);}(i_);ij.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var iU=["style"],iH=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iU);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getTotalLength",value:function(){return 0===this.parsedStyle.points.totalLength&&(this.parsedStyle.points.totalLength=(0,Y.polylineLength)(this.parsedStyle.points.points)),this.parsedStyle.points.totalLength;}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach(function(e,t){n[t+1]&&((r=[0,0])[0]=o/s,i=(0,Y.lineLength)(e[0],e[1],n[t+1][0],n[t+1][1]),o+=i,r[1]=o/s,a.push(r));}),this.parsedStyle.points.segments=a;}var l=0,u=0;this.parsedStyle.points.segments.forEach(function(t,n){e>=t[0]&&e<=t[1]&&(l=(e-t[0])/(t[1]-t[0]),u=n);});var c=(0,Y.linePointAt)(n[u][0],n[u][1],n[u+1][0],n[u+1][1],l),d=c.x,h=c.y,f=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(d,h,0),t?this.getWorldTransform():this.getLocalTransform());return new eh(f[0],f[1]);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n;}}]);}(ij);iH.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(ij.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var iW=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.RECT},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(i_);iW.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var iY=["style"],iq=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iY);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.TEXT,style:(0,L.default)({fill:"black"},n)},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getComputedTextLength",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.maxLineWidth)||0;}},{key:"getLineBoundingRects",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.lineMetrics)||[];}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing;}}]);}(i_);iq.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(i_.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"])),(0,D.default)(function e(){(0,R.default)(this,e),this.registry={},this.define(Q.CIRCLE,iP),this.define(Q.ELLIPSE,iO),this.define(Q.RECT,iW),this.define(Q.IMAGE,iI),this.define(Q.LINE,iF),this.define(Q.GROUP,iL),this.define(Q.PATH,iz),this.define(Q.POLYGON,ij),this.define(Q.POLYLINE,iH),this.define(Q.TEXT,iq),this.define(Q.HTML,iD);},[{key:"define",value:function(e,t){this.registry[e]=t;}},{key:"get",value:function(e){return this.registry[e];}}]),function(){function e(t){(0,R.default)(this,e),this.strategies=t;}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.config,r=t.camera,i=t.renderingService,a=t.renderingContext,o=this.strategies;i.hooks.cull.tap(e.tag,function(e){if(e){var t,i=e.cullable;if(0===o.length?i.visible=a.unculledEntities.indexOf(e.entity)>-1:i.visible=o.every(function(t){return t.isVisible(r,e);}),!e.isCulled()&&e.isVisible())return e;var s=(null===(t=n.future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return e.dispatchEvent(new rW(rZ.CULLED),s,s),null;}return e;}),i.hooks.afterRender.tap(e.tag,function(e){e.cullable.visibilityPlaneMask=-1;});}}]);}().tag="Culling",function(){function e(){var t=this;(0,R.default)(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new rU(null),this.rootWheelEvent=new rH(null),this.onPointerMove=function(e){var n=null===(r=t.context.renderingContext.root)||void 0===r||null===(r=r.ownerDocument)||void 0===r?void 0:r.defaultView;if(!n.supportsTouchEvents||"touch"!==e.pointerType){var r,i,a=t.normalizeToPointerEvent(e,n),o=(0,$.default)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=t.bootstrapEvent(t.rootPointerEvent,s,n,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);}},this.onClick=function(e){var n,r,i=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=t.normalizeToPointerEvent(e,i),o=(0,$.default)(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=t.bootstrapEvent(t.rootPointerEvent,s,i,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);};}return(0,D.default)(e,[{key:"apply",value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null;}),r.hooks.pointerWheel.tap(e.tag,function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t);}),r.hooks.pointerDown.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t=n.normalizeToPointerEvent(e,i);n.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();var r,a=(0,$.default)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerUp.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,e)?"":"outside",o=n.normalizeToPointerEvent(e,i),s=(0,$.default)(o);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,e);u.type+=a,n.context.eventService.mapEvent(u);}}catch(e){s.e(e);}finally{s.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(e){var t,r=n.normalizeToPointerEvent(e,i),a=(0,$.default)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);});}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),l=s.x,u=s.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n9[e.type]||e.type),e;}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t;}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=n7.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null;}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default");}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];(0,j.isUndefined)(i.button)&&(i.button=0),(0,j.isUndefined)(i.buttons)&&(i.buttons=1),(0,j.isUndefined)(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,j.isUndefined)(i.width)&&(i.width=i.radiusX||1),(0,j.isUndefined)(i.height)&&(i.height=i.radiusY||1),(0,j.isUndefined)(i.tiltX)&&(i.tiltX=0),(0,j.isUndefined)(i.tiltY)&&(i.tiltY=0),(0,j.isUndefined)(i.pointerType)&&(i.pointerType="touch"),(0,j.isUndefined)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,j.isUndefined)(i.pressure)&&(i.pressure=i.force||.5),(0,j.isUndefined)(i.twist)&&(i.twist=0),(0,j.isUndefined)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i);}else t.isMouseEvent(e)&&((0,j.isUndefined)(e.isPrimary)&&(e.isPrimary=!0),(0,j.isUndefined)(e.width)&&(e.width=1),(0,j.isUndefined)(e.height)&&(e.height=1),(0,j.isUndefined)(e.tiltX)&&(e.tiltX=0),(0,j.isUndefined)(e.tiltY)&&(e.tiltY=0),(0,j.isUndefined)(e.pointerType)&&(e.pointerType="mouse"),(0,j.isUndefined)(e.pointerId)&&(e.pointerId=1),(0,j.isUndefined)(e.pressure)&&(e.pressure=.5),(0,j.isUndefined)(e.twist)&&(e.twist=0),(0,j.isUndefined)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),n.push(e);return n;}}]);}().tag="Event";var iX=[Q.CIRCLE,Q.ELLIPSE,Q.IMAGE,Q.RECT,Q.LINE,Q.POLYLINE,Q.POLYGON,Q.TEXT,Q.PATH,Q.HTML];(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"isVisible",value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(el.isEmpty(i))return!1;var a=e.getFrustum(),o=null===(n=t.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||ec.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==ec.OUTSIDE,r.visible;}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n,r){if(n===ec.OUTSIDE||n===ec.INSIDE)return n;for(var i=ec.INSIDE,a=iX.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var l=1<<o;if((n&l)!=0&&(!a||4!==o&&5!==o)){var u=r[o],c=u.normal,d=u.distance;if(V.vec3.dot(c,t.getPositiveFarPoint(r[o]))+d<0)return ec.OUTSIDE;V.vec3.dot(c,t.getNegativeFarPoint(r[o]))+d<0&&(i|=l);}}return i;}}]),function(){function e(){(0,R.default)(this,e),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1;}return(0,D.default)(e,[{key:"apply",value:function(t){var n,r=this,i=t.renderingService,a=t.renderingContext.root.ownerDocument.defaultView,o=function(e){i.dirty();},s=function(e){var t,n=e.detail;(t=r.mutationRecords).push.apply(t,(0,I.default)(n)),i.dirty();},l=function(e){var t=e.target;ig.enableSizeAttenuation&&ig.styleValueRegistry.updateSizeAttenuation(t,a.getCamera().getZoom());},u=function(e){var t=e.target;ig.sceneGraphService.dirtyToRoot(t),i.dirty();};i.hooks.init.tap(e.tag,function(){a.addEventListener(rZ.MOUNTED,l),a.addEventListener(rZ.UNMOUNTED,u),a.addEventListener(rZ.ATTR_MODIFIED,o),a.addEventListener(rZ.BOUNDS_CHANGED,s);}),i.hooks.destroy.tap(e.tag,function(){a.removeEventListener(rZ.MOUNTED,l),a.removeEventListener(rZ.UNMOUNTED,u),a.removeEventListener(rZ.ATTR_MODIFIED,o),a.removeEventListener(rZ.BOUNDS_CHANGED,s),r.mutationRecords=[];});var c=null!==(n=ig.globalThis.requestIdleCallback)&&void 0!==n?n:rc.bind(ig.globalThis);i.hooks.endFrame.tap(e.tag,function(){r.isFirstTimeRendering&&(r.isFirstTimeRendering=!1,c(function(){r.isFirstTimeRenderingFinished=!0;})),r.mutationRecords=[];});}}]);}().tag="Prepare";var i$=((N={}).READY="ready",N.BEFORE_RENDER="beforerender",N.RERENDER="rerender",N.AFTER_RENDER="afterrender",N.BEFORE_DESTROY="beforedestroy",N.AFTER_DESTROY="afterdestroy",N.RESIZE="resize",N.DIRTY_RECTANGLE="dirtyrectangle",N.RENDERER_CHANGED="rendererchanged",N);new rW(rZ.MOUNTED),new rW(rZ.UNMOUNTED),new rW(i$.BEFORE_RENDER),new rW(i$.RERENDER),new rW(i$.AFTER_RENDER);var iK=new WeakMap,iZ=function(){function e(t,n){(0,R.default)(this,e),this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[],this.type=t,this.target=n;}return(0,D.default)(e,null,[{key:"copy",value:function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n;}}]);}();function iQ(e,t){for(var n=e;n;n=n.parentNode){var r=iK.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.options;if(n===e||o.subtree){var s=t(o);s&&a.enqueue(s);}}}}(0,D.default)(function e(t,n,r){(0,R.default)(this,e),this.transientObservedNodes=[],this.observer=t,this.target=n,this.options=r;},[{key:"enqueue",value:function(e){var t,n=this.observer.records,r=n.length;if(n.length>0){var i,a=(i=n[r-1],i===e?i:A&&(i===A||i===P)?A:null);if(a){n[r-1]=a;return;}}else t=this.observer,i0.push(t),iJ||(iJ=!0,void 0!==ig.globalThis?ig.globalThis.setTimeout(i1):i1());n[r]=e;}},{key:"addListeners",value:function(){this.addListeners_(this.target);}},{key:"addListeners_",value:function(e){var t=this.options;t.attributes&&e.addEventListener(rZ.ATTR_MODIFIED,this,!0),t.childList&&e.addEventListener(rZ.INSERTED,this,!0),(t.childList||t.subtree)&&e.addEventListener(rZ.REMOVED,this,!0);}},{key:"removeListeners",value:function(){this.removeListeners_(this.target);}},{key:"removeListeners_",value:function(e){var t=this.options;t.attributes&&e.removeEventListener(rZ.ATTR_MODIFIED,this,!0),t.childList&&e.removeEventListener(rZ.INSERTED,this,!0),(t.childList||t.subtree)&&e.removeEventListener(rZ.REMOVED,this,!0);}},{key:"removeTransientObservers",value:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=iK.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break;}},this);}},{key:"handleEvent",value:function(e){switch(e.stopImmediatePropagation(),e.type){case rZ.ATTR_MODIFIED:var t=e.attrName,n=e.relatedNode.namespaceURI;(i=P=new iZ("attributes",a=e.target)).attributeName=t,i.attributeNamespace=n;var r=e.attrChange===rQ.ADDITION?null:e.prevValue;iQ(a,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?(A||((A=iZ.copy(P)).oldValue=r),A):i;});break;case rZ.REMOVED:case rZ.INSERTED:a=e.relatedNode;var i,a,o,s,l=e.target;e.type===rZ.INSERTED?(o=[l],s=[]):(o=[],s=[l]);var u=l.previousSibling,c=l.nextSibling;(i=P=new iZ("childList",a)).addedNodes=o,i.removedNodes=s,i.previousSibling=u,i.nextSibling=c,iQ(a,function(e){if(e.childList)return i;});}P=A=void 0;}}]);var iJ=!1,i0=[];function i1(){iJ=!1;var e=i0;i0=[],e.sort(function(e,t){return e.uid-t.uid;});var t=!1;e.forEach(function(e){var n=e.takeRecords();(function(e){e.nodes.forEach(function(t){var n=iK.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers();});});})(e),n.length&&(e.callback(n,e),t=!0);}),t&&i1();}var i2=(0,D.default)(function e(){(0,R.default)(this,e),this.cacheStore=new Map;},[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e);}},{key:"put",value:function(e,t,n){return!this.cacheStore.has(e)&&(this.cacheStore.set(e,{value:t,counter:new Set([n.entity])}),this.onRefAdded(n),!0);}},{key:"get",value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.has(t.entity)||(n.counter.add(t.entity),this.onRefAdded(t)),n.value):null;}},{key:"update",value:function(e,t,n){var r=this.cacheStore.get(e);return!!r&&(r.value=(0,L.default)((0,L.default)({},r.value),t),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0);}},{key:"release",value:function(e,t){var n=this.cacheStore.get(e);return!!n&&(n.counter.delete(t.entity),n.counter.size<=0&&this.cacheStore.delete(e),!0);}},{key:"releaseRef",value:function(e){var t=this;Array.from(this.cacheStore.keys()).forEach(function(n){t.release(n,e);});}},{key:"getSize",value:function(){return this.cacheStore.size;}},{key:"clear",value:function(){this.cacheStore.clear();}}]),i3=[],i4=[],i6=function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,null,[{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;e.rafId&&(t.cancelAnimationFrame(e.rafId),e.rafId=null);}},{key:"executeTask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;i3.length<=0&&i4.length<=0||(i4.forEach(function(e){return e();}),i4=i3.splice(0,e.TASK_NUM_PER_FRAME),e.rafId=t.requestAnimationFrame(function(){e.executeTask(t);}));}},{key:"sliceImage",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.api,s=t.naturalWidth||t.width,l=t.naturalHeight||t.height,u=n-a,c=r-a,d=Math.ceil(s/u),h=Math.ceil(l/c),f={tileSize:[n,r],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null);})},p=function(e){for(var a=function(a){i3.push(function(){var d=a*u,h=e*c,p=[Math.min(n,s-d),Math.min(r,l-h)],v=p[0],g=p[1],m=o.createCanvas();m.width=n,m.height=r,m.getContext("2d").drawImage(t,d,h,v,g,0,0,v,g),f.tiles[e][a]={x:d,y:h,tileX:a,tileY:e,data:m},i();});},h=0;h<d;h++)a(h);},v=0;v<h;v++)p(v);return e.stop(),e.executeTask(),f;}}]);}();i6.TASK_NUM_PER_FRAME=10;var i5=new i2;i5.onRefAdded=function(e){var t=this;e.addEventListener(rZ.DESTROY,function(){t.releaseRef(e);},{once:!0});};var i8=(0,D.default)(function e(t,n){(0,R.default)(this,e),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=n;},[{key:"getImageSync",value:function(e,t,n){var r=(0,j.isString)(e)?e:e.src;if(i5.has(r)){var i=i5.get(r,t);if(i.img.complete)return null==n||n(i),i;}return this.getOrCreateImage(e,t).then(function(e){null==n||n(e);}).catch(function(e){console.error(e);}),null;}},{key:"getOrCreateImage",value:function(e,t){var n=this,r=(0,j.isString)(e)?e:e.src;if(!(0,j.isString)(e)&&!i5.has(r)){var i={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:i9(e)};i5.put(r,i,t);}if(i5.has(r)){var a=i5.get(r,t);return a.img.complete?Promise.resolve(a):new Promise(function(e,t){a.img.addEventListener("load",function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=i9(a.img),e(a);}),a.img.addEventListener("error",function(e){t(e);});});}return new Promise(function(e,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:i9(a)};i5.put(r,o,t),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=i9(o.img),e(o);},a.onerror=function(e){i(e);},a.crossOrigin="Anonymous",a.src=r;}});}},{key:"createDownSampledImage",value:(C=(0,X.default)((0,q.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h,f,p,v,g;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,n);case 1:if(!(void 0!==(r=e.sent).downSamplingRate)){e.next=2;break;}return e.abrupt("return",r);case 2:if(s=void 0===(o=(a="boolean"==typeof(i=this.context.config.enableLargeImageOptimization)?{}:i).maxDownSampledImageSize)?2048:o,u=void 0===(l=a.downSamplingRateThreshold)?.5:l,c=this.runtime.globalThis.createImageBitmap,h=(d=(0,G.default)(r.size,2))[0],f=d[1],p=r.img,v=Math.min((s+s)/(h+f),Math.max(.01,Math.min(u,.5))),g=(0,L.default)((0,L.default)({},r),{},{downSamplingRate:v}),i5.update(r.img.src,g,n),!c){e.next=7;break;}return e.prev=3,e.next=4,c(r.img,{resizeWidth:h*v,resizeHeight:f*v});case 4:p=e.sent,e.next=6;break;case 5:e.prev=5,e.catch(3),v=1;case 6:e.next=8;break;case 7:v=1;case 8:return g=(0,L.default)((0,L.default)({},this.getImageSync(t,n)),{},{downSampled:p,downSamplingRate:v}),i5.update(r.img.src,g,n),e.abrupt("return",g);case 9:case"end":return e.stop();}},e,this,[[3,5]]);})),function(e,t){return C.apply(this,arguments);})},{key:"createImageTiles",value:(_=(0,X.default)((0,q.default)().mark(function e(t,n,r,i){var a,o,s,l,u;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,i);case 1:return a=e.sent,s=(o=i.ownerDocument.defaultView).requestAnimationFrame,l=o.cancelAnimationFrame,i6.api={requestAnimationFrame:s,cancelAnimationFrame:l,createCanvas:function(){return rq.createCanvas();}},u=(0,L.default)((0,L.default)({},a),i6.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),i5.update(a.img.src,u,i),e.abrupt("return",u);case 2:case"end":return e.stop();}},e,this);})),function(e,t,n,r){return _.apply(this,arguments);})},{key:"releaseImage",value:function(e,t){i5.release((0,j.isString)(e)?e:e.src,t);}},{key:"releaseImageRef",value:function(e){i5.releaseRef(e);}},{key:"getOrCreatePatternSync",value:function(e,t,n,r,i,a,o){var s,l,u=this.generatePatternKey(t);if(u&&this.patternCache[u])return this.patternCache[u];var c=t.image,d=t.repetition,h=t.transform,f=!1;if((0,j.isString)(c)){var p=this.getImageSync(c,e,o);s=null==p?void 0:p.img;}else r?(s=r,f=!0):s=c;var v=s&&n.createPattern(s,d);return v&&(l=h?rC(nS(h),new i_({})):V.mat4.identity(V.mat4.create()),f&&V.mat4.scale(l,l,[1/i,1/i,1]),v.setTransform({a:l[0],b:l[1],c:l[4],d:l[5],e:l[12]+a[0],f:l[13]+a[1]})),u&&v&&(this.patternCache[u]=v),v;}},{key:"getOrCreateGradient",value:function(e,t){var n=this.generateGradientKey(e),r=e.type,i=e.steps,a=e.min,o=e.width,s=e.height,l=e.angle,u=e.cx,c=e.cy,d=e.size;if(this.gradientCache[n])return this.gradientCache[n];var h=null;if(r===tk.LinearGradient){var f,p,v,g,m=(f=l.value*ey,p=0+o/2,v=0+s/2,g=Math.abs(o*Math.cos(f))+Math.abs(s*Math.sin(f)),{x1:a[0]+p-Math.cos(f)*g/2,y1:a[1]+v-Math.sin(f)*g/2,x2:a[0]+p+Math.cos(f)*g/2,y2:a[1]+v+Math.sin(f)*g/2}),y=m.x1,b=m.y1,E=m.x2,x=m.y2;h=t.createLinearGradient(y,b,E,x);}else if(r===tk.RadialGradient){var k,S,T,M=(k=u.value,S=c.value,u.unit===tc.kPercentage&&(k=u.value/100*o),c.unit===tc.kPercentage&&(S=c.value/100*s),T=Math.max((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S])),d&&(d instanceof tN?T=d.value:d instanceof tT&&("closest-side"===d.value?T=Math.min(k,o-k,S,s-S):"farthest-side"===d.value?T=Math.max(k,o-k,S,s-S):"closest-corner"===d.value&&(T=Math.min((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S]))))),{x:k+a[0],y:S+a[1],r:T}),w=M.x,N=M.y,C=M.r;h=t.createRadialGradient(w,N,0,w,N,C);}return h&&(i.forEach(function(e){var t,n=e.offset,r=e.color;n.unit===tc.kPercentage&&(null===(t=h)||void 0===t||t.addColorStop(n.value/100,r.toString()));}),this.gradientCache[n]=h),this.gradientCache[n];}},{key:"generateGradientKey",value:function(e){var t=e.type,n=e.min,r=e.width,i=e.height,a=e.steps,o=e.angle,s=e.cx,l=e.cy,u=e.size;return"gradient-".concat(t,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==l?void 0:l.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map(function(e){var t=e.offset,n=e.color;return"".concat(t).concat(n);}).join("-"));}},{key:"generatePatternKey",value:function(e){var t=e.image,n=e.repetition;return(0,j.isString)(t)?"pattern-".concat(t,"-").concat(n):"rect"===t.nodeName?"pattern-".concat(t.entity,"-").concat(n):void 0;}}]);function i9(e){if(!e.complete)return[0,0];var t=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r=256;return[256,512].forEach(function(e){Math.ceil(n/e)*Math.ceil(t/e)<1e3&&(r=e);}),[r,r];}i8.isSupportTile=!!rq.createCanvas();var i7=function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,o=function(e,t,n){var r=e.parsedStyle,i=r.width,a=r.height;i&&!a?e.setAttribute("height",n/t*i):!i&&a&&e.setAttribute("width",t/n*a);},s=function(e){var t=e.target,r=t.nodeName,a=t.attributes;if(r===Q.IMAGE){var s=a.src,l=a.keepAspectRatio;i.getImageSync(s,t,function(e){var r=e.img,i=r.width,a=r.height;l&&o(t,i,a),t.dirty(),n.dirty();});}},l=function(e){var t=e.target,r=e.attrName,a=e.prevValue,s=e.newValue;t.nodeName===Q.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,t),(0,j.isString)(s)&&i.getOrCreateImage(s,t).then(function(e){var r=e.img,i=r.width,a=r.height;t.attributes.keepAspectRatio&&o(t,i,a),t.dirty(),n.dirty();}).catch(function(){}));};n.hooks.init.tap(e.tag,function(){a.addEventListener(rZ.MOUNTED,s),a.addEventListener(rZ.ATTR_MODIFIED,l);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener(rZ.MOUNTED,s),a.removeEventListener(rZ.ATTR_MODIFIED,l);});}}]);}();i7.tag="LoadImage";var ae=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).name="image-loader",e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"init",value:function(e){this.context.imagePool=new i8(this.context,e),this.addRenderingPlugin(new i7);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(ee),at=Object.freeze({__proto__:null,ImagePool:i8,Plugin:ae}),an=function(){function e(){(0,R.default)(this,e),this.displayObjectHTMLElementMap=new WeakMap;}return(0,D.default)(e,[{key:"joinTransformMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+t[0],e[13]+t[1]].join(","),")");}},{key:"apply",value:function(t,n){var r=this,i=t.camera,a=t.renderingContext,o=t.renderingService;this.context=t;var s=a.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,u=function(e,t){t.style.transform=r.joinTransformMatrix(e.getWorldTransform(),e.getOrigin());},c=function(e){var t=e.target;if(t.nodeName===Q.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(t);r.$camera.appendChild(n),Object.keys(t.attributes).forEach(function(e){r.updateAttribute(e,t);}),u(t,n),l.set(n,t);}},d=function(e){var t=e.target;if(t.nodeName===Q.HTML&&r.$camera){var n=r.getOrCreateEl(t);n&&(n.remove(),l.delete(n));}},h=function(e){var t=e.target;if(t.nodeName===Q.HTML){var n=e.attrName;r.updateAttribute(n,t);}},f=function(e){for(var t=e.detail,n=0;n<t.length;n++){var i=t[n].target;(i.nodeName===Q.FRAGMENT?i.childNodes:[i]).forEach(function(e){if(e.nodeName===Q.HTML){var t=r.getOrCreateEl(e);u(e,t);}});}},p=function(){if(r.$camera){var e=r.context.config,t=e.width,n=e.height;r.$camera.parentElement.style.width="".concat(t||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px");}};o.hooks.init.tap(e.tag,function(){s.addEventListener(i$.RESIZE,p),s.addEventListener(rZ.MOUNTED,c),s.addEventListener(rZ.UNMOUNTED,d),s.addEventListener(rZ.ATTR_MODIFIED,h),s.addEventListener(rZ.BOUNDS_CHANGED,f);}),o.hooks.endFrame.tap(e.tag,function(){r.$camera&&a.renderReasons.has(rX.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()));}),o.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(i$.RESIZE,p),s.removeEventListener(rZ.MOUNTED,c),s.removeEventListener(rZ.UNMOUNTED,d),s.removeEventListener(rZ.ATTR_MODIFIED,h),s.removeEventListener(rZ.BOUNDS_CHANGED,f);});}},{key:"createCamera",value:function(e){var t=this.context.config,n=t.document,r=t.width,i=t.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",l=o.querySelector("#".concat(s));if(!l){var u=(n||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(r||0,"px"),u.style.height="".concat(i||0,"px");var c=(n||document).createElement("div");l=c,c.id=s,c.style.position="absolute",c.style.left="".concat(a.offsetLeft||0,"px"),c.style.top="".concat(a.offsetTop||0,"px"),c.style.transformOrigin="left top",c.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),c.style.pointerEvents="none",c.style.width="100%",c.style.height="100%",u.appendChild(c),o.appendChild(u);}return l;}return null;}},{key:"getOrCreateEl",value:function(e){var t=this.context.config.document,n=this.displayObjectHTMLElementMap.get(e);return n||(n=(t||document).createElement("div"),e.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(e,n),e.id&&(n.id=e.id),e.name&&n.setAttribute("name",e.name),e.className&&(n.className=e.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),n;}},{key:"updateAttribute",value:function(e,t){var n=this.getOrCreateEl(t);switch(e){case"innerHTML":var r=t.parsedStyle.innerHTML;(0,j.isString)(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(t.parsedStyle.x,"px");break;case"y":n.style.top="".concat(t.parsedStyle.y,"px");break;case"transformOrigin":var i=t.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=t.parsedStyle.width;n.style.width=(0,j.isNumber)(a)?"".concat(a,"px"):a.toString();break;case"height":var o=t.parsedStyle.height;n.style.height=(0,j.isNumber)(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=t.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var l=t.parsedStyle.visibility;n.style.visibility=l;break;case"pointerEvents":var u=t.parsedStyle.pointerEvents;n.style.pointerEvents=void 0===u?"auto":u;break;case"opacity":var c=t.parsedStyle.opacity;n.style.opacity="".concat(c);break;case"fill":var d=t.parsedStyle.fill,h="";tq(d)?h=d.isNone?"transparent":t.getAttribute("fill"):Array.isArray(d)?h=t.getAttribute("fill"):tY(d),n.style.background=h;break;case"stroke":var f=t.parsedStyle.stroke,p="";tq(f)?p=f.isNone?"transparent":t.getAttribute("stroke"):Array.isArray(f)?p=t.getAttribute("stroke"):tY(f),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":var v=t.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var g=t.style.filter;n.style.filter=g;break;default:(0,j.isNil)(t.style[e])||""===t.style[e]||(n.style[e]=t.style[e]);}}}]);}();an.tag="HTMLRendering";var ar=Object.freeze({__proto__:null,Plugin:function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).name="html-renderer",e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"init",value:function(){this.addRenderingPlugin(new an);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(ee)}),ai=function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,o=t.config;this.context=t;var s=a.root.ownerDocument.defaultView,l=function(e){i.hooks.pointerMove.call(e);},u=function(e){i.hooks.pointerUp.call(e);},c=function(e){i.hooks.pointerDown.call(e);},d=function(e){i.hooks.pointerOver.call(e);},h=function(e){i.hooks.pointerOut.call(e);},f=function(e){i.hooks.pointerCancel.call(e);},p=function(e){i.hooks.pointerWheel.call(e);},v=function(e){i.hooks.click.call(e);},g=function(e){n.globalThis.document.addEventListener("pointermove",l,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("pointerleave",h,!0),e.addEventListener("pointerover",d,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",f,!0);},m=function(e){e.addEventListener("touchstart",c,!0),e.addEventListener("touchend",u,!0),e.addEventListener("touchmove",l,!0),e.addEventListener("touchcancel",f,!0);},y=function(e){n.globalThis.document.addEventListener("mousemove",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("mouseout",h,!0),e.addEventListener("mouseover",d,!0),n.globalThis.addEventListener("mouseup",u,!0);},b=function(e){n.globalThis.document.removeEventListener("pointermove",l,!0),e.removeEventListener("pointerdown",c,!0),e.removeEventListener("pointerleave",h,!0),e.removeEventListener("pointerover",d,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",f,!0);},E=function(e){e.removeEventListener("touchstart",c,!0),e.removeEventListener("touchend",u,!0),e.removeEventListener("touchmove",l,!0),e.removeEventListener("touchcancel",f,!0);},x=function(e){n.globalThis.document.removeEventListener("mousemove",l,!0),e.removeEventListener("mousedown",c,!0),e.removeEventListener("mouseout",h,!0),e.removeEventListener("mouseover",d,!0),n.globalThis.removeEventListener("mouseup",u,!0);};i.hooks.init.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="none",e.style.msTouchAction="none"):s.supportsPointerEvents&&(e.style.touchAction="none"),s.supportsPointerEvents?g(e):y(e),s.supportsTouchEvents&&m(e),o.useNativeClickEvent&&e.addEventListener("click",v,!0),e.addEventListener("wheel",p,{passive:!0,capture:!0});}),i.hooks.destroy.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="",e.style.msTouchAction=""):s.supportsPointerEvents&&(e.style.touchAction=""),s.supportsPointerEvents?b(e):x(e),s.supportsTouchEvents&&E(e),o.useNativeClickEvent&&e.removeEventListener("click",v,!0),e.removeEventListener("wheel",p,!0);});}}]);}();ai.tag="DOMInteraction";var aa=Object.freeze({__proto__:null,Plugin:function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).name="dom-interaction",e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"init",value:function(){this.addRenderingPlugin(new ai);}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}}]);}(ee)});(function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.contextService,i=t.config,a=r.getDomElement(),o=function(e){n.hooks.pointerDown.call(e);},s=function(e){n.hooks.pointerUp.call(e);},l=function(e){n.hooks.pointerMove.call(e);},u=function(e){n.hooks.pointerOver.call(e);},c=function(e){n.hooks.pointerOut.call(e);},d=function(e){n.hooks.click.call(e);},h=function(e){n.hooks.pointerCancel.call(e);};n.hooks.init.tap(e.tag,function(){a.addEventListener("touchstart",o,!0),a.addEventListener("touchend",s,!0),a.addEventListener("touchmove",l,!0),a.addEventListener("touchcancel",h,!0),a.addEventListener("mouseout",c,!0),a.addEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.addEventListener("click",d,!0);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener("touchstart",o,!0),a.removeEventListener("touchend",s,!0),a.removeEventListener("touchmove",l,!0),a.removeEventListener("touchcancel",h,!0),a.removeEventListener("mouseout",c,!0),a.removeEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.removeEventListener("click",d,!0);});}}]);})().tag="MobileInteraction";},"12b7564a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"createNode",{enumerable:!0,get:function(){return a;}});var r=n("6bff9c72"),i=new Map;"undefined"!=typeof document&&i.set("tooltip",document.createElement("div"));var a=function(e,t){void 0===t&&(t=!1);var n=null;if(t)n=i.get("tooltip");else if(n=document.createElement("div"),null==e?void 0:e.key){var a=i.get(e.key);a?n=a:i.set(e.key,n);}return(0,r.render)(e,n),n;};},"133675a0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Image:function(){return a;},connectImage:function(){return l;},dispatchPositionChange:function(){return u;}});var r=n("a566da36"),i=n("61beb903");class a extends r.Image{constructor(e){super(e),this.onMounted=()=>{this.handleRadius();},this.onAttrModified=()=>{this.handleRadius();},s=this,this.isMutationObserved=!0,this.addEventListener(r.ElementEvent.MOUNTED,this.onMounted),this.addEventListener(r.ElementEvent.ATTR_MODIFIED,this.onAttrModified);}handleRadius(){let{radius:e,clipPath:t,width:n=0,height:i=0}=this.attributes;if(e&&n&&i){let[a,o]=this.getBounds().min,s={x:a,y:o,radius:e,width:n,height:i};if(t)Object.assign(this.parsedStyle.clipPath.style,s);else{let e=new r.Rect({style:s});this.style.clipPath=e;}}else t&&(this.style.clipPath=null);}}let o=new WeakMap,s=null,l=e=>{if(s&&(0,i.getAncestorShapes)(s).includes(e)){let t=o.get(e);t?t.includes(s)||t.push(s):o.set(e,[s]);}},u=e=>{let t=o.get(e);t&&t.forEach(e=>e.handleRadius());};},"15a0e3a2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"executor",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("00d6b05d"),a=n("2be73991"),o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let s=(e,t,n)=>{let s;if(!n.length)return null;let[l,u]=t,c=t=>{var n;if(!t)return{shape:e,fromStyle:l,toStyle:u};{let i=e.getShape(t);if(!i)return null;let a=`get${(0,r.upperFirst)(t)}Style`,o=(null===(n=null==e?void 0:e[a])||void 0===n?void 0:n.bind(e))||(e=>e);return{shape:i,fromStyle:(null==o?void 0:o(l))||{},toStyle:(null==o?void 0:o(u))||{}};}},d=n.map(e=>{var{fields:t,shape:n,states:r}=e,l=o(e,["fields","shape","states"]);let u=c(n);if(!u)return null;let{shape:d,fromStyle:h,toStyle:f}=u,p=[{},{}];if(t.forEach(e=>{var t,n;Object.assign(p[0],{[e]:null!==(t=h[e])&&void 0!==t?t:(0,i.inferDefaultValue)(e)}),Object.assign(p[1],{[e]:null!==(n=f[e])&&void 0!==n?n:(0,i.inferDefaultValue)(e)});}),p.some(e=>Object.keys(e).some(e=>["x","y","z"].includes(e)))){let{x:e=0,y:t=0,z:n,transform:r=""}=d.attributes||{};p.forEach(i=>{var o,s,l;i.transform=(0,a.replaceTranslateInTransform)(null!==(o=i.x)&&void 0!==o?o:e,null!==(s=i.y)&&void 0!==s?s:t,null!==(l=i.z)&&void 0!==l?l:n,r);});}let v=d.animate((0,i.preprocessKeyframes)(p),l);return void 0===n&&(s=v),v;}).filter(Boolean),h=s||(null==d?void 0:d[0]);return h?(0,i.createAnimationsProxy)(h,d.filter(e=>e!=e)):null;};},"16abca2d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DragElementForce",{enumerable:!0,get:function(){return u;}});var r=n("81401a10"),i=n("d5a5db80"),a=n("ec6e52f6"),o=n("71473486"),s=n("b6ebc843"),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class u extends s.DragElement{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(null==e?void 0:e.id));}validate(e){return!!this.context.layout&&(this.forceLayoutInstance?super.validate(e):(a.print.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1));}moveElement(e,t){return l(this,void 0,void 0,function*(){let n=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((r,a)=>{let{x:s=0,y:l=0}=r.style||{};n&&(0,i.invokeLayoutMethod)(n,"setFixedPosition",e[a],[...(0,o.add)([+s,+l],this.clampByRotation(t))]);});});}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);let t=this.forceLayoutInstance;t&&(0,i.getLayoutProperty)(t,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(e=>{let{x:n=0,y:a=0}=e.style||{};t&&(0,i.invokeLayoutMethod)(t,"setFixedPosition",(0,r.idOf)(e),[+n,+a]);});}onDrag(e){if(!this.enable)return;let t=this.getDelta(e);this.moveElement(this.target,t);}onDragEnd(){let e=this.forceLayoutInstance;e&&(0,i.getLayoutProperty)(e,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach(t=>{e&&(0,i.invokeLayoutMethod)(e,"setFixedPosition",(0,r.idOf)(t),[null,null,null]);});}}},"16bb9463":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"boundTest",{enumerable:!0,get:function(){return c;}});var r=n("18f14020"),i=n("01a29d03"),a=n("bcf4e626"),o=n("9e868a30"),s=n("39218125"),l=n("e6a028a0"),u=n("b2775701");function c(e,t,n){var c,d,h=t.crossPadding,f=new Set,p=null,v=function(e,t){var n=e.type,l=e.labelDirection,u=e.crossSize;if(!u)return!1;if("arc"===n){var c=e.center,d=e.radius,h=(0,r.__read)(c,2),f=h[0],p=h[1],v="negative"===l?0:u,g=-d-v,m=d+v,y=(0,r.__read)((0,i.parseSeriesAttr)(t),4),b=y[0],E=y[1],x=y[2],k=y[3];return new s.Bounds(f+g-k,p+g-b,f+m+E,p+m+x);}var S=(0,r.__read)(e.startPos,2),T=S[0],M=S[1],w=(0,r.__read)(e.endPos,2),N=w[0],C=w[1],_=(0,r.__read)((0,o.isAxisVertical)(e)?[-t,0,t,0]:[0,t,0,-t],4),P=_[0],A=_[1],O=_[2],L=_[3],R=(0,a.getLabelVector)(0,e),D=(0,i.scale)(R,u),I=new s.Bounds(T,M,N,C);return I.x1+=L,I.y1+=P,I.x2+=A+D[0],I.y2+=O+D[1],I;}(t,h);try{for(var g=(0,r.__values)(e),m=g.next();!m.done;m=g.next()){var y,b=m.value;!v||(0,l.contain)(v,b)?p&&((y=p)&&y.firstChild?(0,u.intersect)(y.firstChild,b.firstChild,(0,i.parseSeriesAttr)(n)):0)?(f.add(p),f.add(b)):p=b:f.add(b);}}catch(e){c={error:e};}finally{try{m&&!m.done&&(d=g.return)&&d.call(g);}finally{if(c)throw c.error;}}return Array.from(f);}},"177711d9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseEdge",{enumerable:!0,get:function(){return m;}});var r=n("852bbaa9"),i=n("a566da36"),a=n("abe9d8d6"),o=n("8a0aecd6"),s=n("a2c47206"),l=n("966f7de2"),u=n("9da99c33"),c=n("db863a29"),d=n("cdd49f4a"),h=r._(n("2e87bde6")),f=n("27a6f2bf"),p=n("65216f3f"),v=n("988eb09c"),g=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class m extends p.BaseElement{constructor(e){super((0,d.mergeOptions)({style:m.defaultStyleProps},e)),this.type="edge";}get sourceNode(){let{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e);}get targetNode(){let{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e);}getKeyStyle(e){let t=this.getGraphicStyle(e),{loop:n}=t,r=g(t,["loop"]),{sourceNode:a,targetNode:o}=this,s={d:n&&(0,l.isSameNode)(a,o)?this.getLoopPath(e):this.getKeyPath(e)};return i.Path.PARSED_STYLE_LIST.forEach(e=>{e in r&&(s[e]=r[e]);}),s;}getLoopPath(e){let{sourcePort:t,targetPort:n}=e,r=this.sourceNode,i=(0,o.getNodeBBox)(r),a=Math.max((0,o.getBBoxWidth)(i),(0,o.getBBoxHeight)(i)),{placement:l,clockwise:c,dist:d=a}=(0,u.subStyleProps)(this.getGraphicStyle(e),"loop");return(0,s.getCubicLoopPath)(r,l,c,d,t,n);}getEndpoints(e,t=!0,n=[]){let{sourcePort:r,targetPort:i}=e,{sourceNode:a,targetNode:o}=this,[s,u]=(0,l.findPorts)(a,o,r,i);if(!t)return[s?(0,l.getPortPosition)(s):a.getCenter(),u?(0,l.getPortPosition)(u):o.getCenter()];let c="function"==typeof n?n():n;return[(0,l.getConnectionPoint)(s||a,c[0]||u||o),(0,l.getConnectionPoint)(u||o,c[c.length-1]||s||a)];}getHaloStyle(e){if(!1===e.halo)return!1;let t=this.getKeyStyle(e),n=(0,u.subStyleProps)(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},t),n);}getLabelStyle(e){if(!1===e.label||!e.labelText)return!1;let t=(0,u.subStyleProps)(this.getGraphicStyle(e),"label"),{placement:n,offsetX:r,offsetY:i,autoRotate:a,maxWidth:o}=t,l=g(t,["placement","offsetX","offsetY","autoRotate","maxWidth"]),c=(0,s.getLabelPositionStyle)(this.shapeMap.key,n,a,r,i),d=this.shapeMap.key.getLocalBounds();return Object.assign({wordWrapWidth:(0,f.getWordWrapWidthByEnds)([d.min,d.max],o)},c,l);}getBadgeStyle(e){if(!1===e.badge||!e.badgeText)return!1;let t=(0,u.subStyleProps)(e,"badge"),{offsetX:n,offsetY:r,placement:i}=t;return Object.assign(g(t,["offsetX","offsetY","placement"]),(0,s.getBadgePositionStyle)(this.shapeMap,i,e.labelPlacement,n,r));}drawArrow(e,t){var n;let r="start"===t,a=e["start"===t?"startArrow":"endArrow"],o=this.shapeMap.key;if(a){let t=this.getArrowStyle(e,r),[n,a,s]=r?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],l=o.parsedStyle[n];if(l)l.attr(t);else{let e=new(t.src?i.Image:i.Path)({style:t});o.style[n]=e;}o.style[a]=e[s]||t.width/2+ +t.lineWidth;}else{let e=r?"markerStart":"markerEnd";null===(n=o.style[e])||void 0===n||n.destroy(),o.style[e]=null;}}getArrowStyle(e,t){let n=this.getShape("key").attributes,r=(0,u.subStyleProps)(this.getGraphicStyle(e),t?"startArrow":"endArrow"),{size:i,type:o}=r,l=g(r,["size","type"]),[d,f]=(0,c.parseSize)((0,s.getArrowSize)(n.lineWidth,i)),p=((0,a.isFunction)(o)?o:h[o]||h.triangle)(d,f);return Object.assign((0,a.pick)(n,["stroke","strokeOpacity","fillOpacity"]),{width:d,height:f},Object.assign({},p&&{d:p,fill:"simple"===o?"":n.stroke}),l);}drawLabelShape(e,t){let n=this.getLabelStyle(e);this.upsert("label",v.Label,n,t);}drawHaloShape(e,t){let n=this.getHaloStyle(e);this.upsert("halo",i.Path,n,t);}drawBadgeShape(e,t){let n=this.getBadgeStyle(e);this.upsert("badge",v.Badge,n,t);}drawSourceArrow(e){this.drawArrow(e,"start");}drawTargetArrow(e){this.drawArrow(e,"end");}drawKeyShape(e,t){let n=this.getKeyStyle(e);return this.upsert("key",i.Path,n,t);}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t));}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this);}animate(e,t){let n=super.animate(e,t);return n?new Proxy(n,{set:(e,t,n)=>("currentTime"===t&&Promise.resolve().then(()=>this.onframe()),Reflect.set(e,t,n))}):n;}}m.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};},"17ed9727":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("03fe22c6"),t);},"190a0ca4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{copyAttributes:function(){return o;},getLocalBBox:function(){return i;},isHorizontal:function(){return a;}});var r=n("18f14020");function i(e){var t=e.getLocalBounds(),n=t.min,i=t.max,a=(0,r.__read)([n,i],2),o=(0,r.__read)(a[0],2),s=o[0],l=o[1],u=(0,r.__read)(a[1],2),c=u[0],d=u[1];return{x:s,y:l,width:c-s,height:d-l,left:s,bottom:d,top:l,right:c};}function a(e,t){var n=(0,r.__read)(e,2),i=n[0],a=n[1],o=(0,r.__read)(t,2),s=o[0],l=o[1];return i!==s&&a===l;}function o(e,t){var n,i,a=t.attributes;try{for(var o=(0,r.__values)(Object.entries(a)),s=o.next();!s.done;s=o.next()){var l=(0,r.__read)(s.value,2),u=l[0],c=l[1];"id"!==u&&"className"!==u&&e.attr(u,c);}}catch(e){n={error:e};}finally{try{s&&!s.done&&(i=o.return)&&i.call(o);}finally{if(n)throw n.error;}}}},"1a081974":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"GraphinContext",{enumerable:!0,get:function(){return r;}});var r=n("777fffbe")._(n("3e6b097d")).default.createContext({graph:null,isReady:!1});},"1af423ec":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Group",{enumerable:!0,get:function(){return r.Group;}});var r=n("f7bb74fc");},"1b1409b3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"light",{enumerable:!0,get:function(){return r;}});let r=(0,n("ed0ed952").create)({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"});},"1b50313f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Category",{enumerable:!0,get:function(){return d;}});var r=n("18f14020"),i=n("c086f503"),a=n("9225b8d3"),o=n("01a29d03"),s=n("2023ec2c"),l=n("4f490d8b"),u=n("51bc7eb7"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),t.prototype.update=function(e){this.attr(e);},t;}(a.HTML),d=function(e){function t(t){return e.call(this,t,u.CATEGORY_DEFAULT_OPTIONS)||this;}return(0,r.__extends)(t,e),t.prototype.renderTitle=function(e,t,n){var i=this.attributes,a=i.showTitle,l=i.titleText,c=i.classNamePrefix,d=(0,o.subStyleProps)(this.attributes,"title"),h=(0,r.__read)((0,o.splitStyle)(d),2),f=h[0],p=h[1];this.titleGroup=e.maybeAppendByClassName(u.CLASS_NAMES.titleGroup,"g").styles(p);var v=(0,r.__assign)((0,r.__assign)({width:t,height:n},f),{text:a?l:"",classNamePrefix:c});this.title=this.titleGroup.maybeAppendByClassName(u.CLASS_NAMES.title,function(){return new s.Title({style:v});}).update(v);},t.prototype.renderCustom=function(e){var t=this.attributes.data,n={innerHTML:this.attributes.render(t),pointerEvents:"auto"};e.maybeAppendByClassName(u.CLASS_NAMES.html,function(){return new c({className:u.CLASS_NAMES.html.name,style:n});}).update(n);},t.prototype.renderItems=function(e,t){var n=t.x,i=t.y,a=t.width,s=t.height,c=(0,o.subStyleProps)(this.attributes,"title",!0),d=(0,r.__read)((0,o.splitStyle)(c),2),h=d[0],f=d[1],p=(0,r.__assign)((0,r.__assign)({},h),{width:a,height:s,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(u.CLASS_NAMES.itemsGroup,"g").styles((0,r.__assign)((0,r.__assign)({},f),{transform:"translate(".concat(n,", ").concat(i,")")}));var v=this;this.itemsGroup.selectAll(u.CLASS_NAMES.items.class).data(["items"]).join(function(e){return e.append(function(){return new l.CategoryItems({style:p});}).attr("className",u.CLASS_NAMES.items.name).each(function(){v.items=(0,o.select)(this);});},function(e){return e.update(p);},function(e){return e.remove();});},t.prototype.adjustLayout=function(){if(this.attributes.showTitle){var e=this.title.node().getAvailableSpace(),t=e.x,n=e.y;this.itemsGroup.node().style.transform="translate(".concat(t,", ").concat(n,")");}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,t=e.showTitle,n=e.width,r=e.height;return t?this.title.node().getAvailableSpace():new o.BBox(0,0,n,r);},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t,n,r=null===(t=this.title)||void 0===t?void 0:t.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?(0,s.getBBox)(r,i):e.prototype.getBBox.call(this);},t.prototype.render=function(e,t){var n=this.attributes,r=n.width,i=n.height,a=n.x,s=n.y,l=n.classNamePrefix,u=n.render,c=(0,o.select)(t),d=t.className||"legend-category";l?t.attr("className","".concat(d," ").concat(l,"legend")):t.className||t.attr("className","legend-category"),t.style.transform="translate(".concat(void 0===a?0:a,", ").concat(void 0===s?0:s,")"),u?this.renderCustom(c):(this.renderTitle(c,r,i),this.renderItems(c,this.availableSpace),this.adjustLayout());},t;}(i.Component);},"1ccb7cfc":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Rect",{enumerable:!0,get:function(){return r.Rect;}});var r=n("f7bb74fc");},"1d8e11d8":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Cubic",{enumerable:!0,get:function(){return o;}});var r=n("a2c47206"),i=n("cdd49f4a"),a=n("177711d9");class o extends a.BaseEdge{constructor(e){super((0,i.mergeOptions)({style:o.defaultStyleProps},e));}getKeyPath(e){let[t,n]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:o}=e,s=this.getControlPoints(t,n,(0,r.parseCurvePosition)(a),(0,r.parseCurveOffset)(o),i);return(0,r.getCubicPath)(t,n,s);}getControlPoints(e,t,n,i,a){return(null==a?void 0:a.length)===2?a:[(0,r.getCurveControlPoint)(e,t,n[0],i[0]),(0,r.getCurveControlPoint)(e,t,n[1],i[1])];}}o.defaultStyleProps={curvePosition:.5,curveOffset:20};},"2023ec2c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Title:function(){return d;},getBBox:function(){return u;}});var r=n("18f14020"),i=n("c086f503"),a=n("01a29d03"),o=n("b81750fa"),s=n("51bc7eb7"),l=(0,a.classNames)({text:"text"},"title");function u(e,t){var n=e.attributes,i=n.position,o=n.spacing,s=n.inset,l=n.text,u=e.getBBox(),c=t.getBBox(),d=(0,a.parsePosition)(i),h=(0,r.__read)((0,a.parseSeriesAttr)(l?o:0),4),f=h[0],p=h[1],v=h[2],g=h[3],m=(0,r.__read)((0,a.parseSeriesAttr)(s),4),y=m[0],b=m[1],E=m[2],x=m[3],k=(0,r.__read)([g+p,f+v],2),S=k[0],T=k[1],M=(0,r.__read)([x+b,y+E],2),w=M[0],N=M[1];if("l"===d[0])return new a.BBox(u.x,u.y,c.width+u.width+S+w,Math.max(c.height+N,u.height));if("t"===d[0])return new a.BBox(u.x,u.y,Math.max(c.width+w,u.width),c.height+u.height+T+N);var C=(0,r.__read)([t.attributes.width||c.width,t.attributes.height||c.height],2),_=C[0],P=C[1];return new a.BBox(c.x,c.y,_+u.width+S+w,P+u.height+T+N);}function c(e,t){var n=Object.entries(t).reduce(function(t,n){var i=(0,r.__read)(n,2),a=i[0],o=i[1];return e.node().attr(a)||(t[a]=o),t;},{});e.styles(n);}var d=function(e){function t(t){return e.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this;}return(0,r.__extends)(t,e),t.prototype.getAvailableSpace=function(){var e=this.attributes,t=e.width,n=e.height,i=e.position,o=e.spacing,s=e.inset,u=this.querySelector(l.text.class);if(!u)return new a.BBox(0,0,+t,+n);var c=u.getBBox(),d=c.width,h=c.height,f=(0,r.__read)((0,a.parseSeriesAttr)(o),4),p=f[0],v=f[1],g=f[2],m=f[3],y=(0,r.__read)([0,0,+t,+n],4),b=y[0],E=y[1],x=y[2],k=y[3],S=(0,a.parsePosition)(i);if(S.includes("i"))return new a.BBox(b,E,x,k);S.forEach(function(e,i){var a,o;"t"===e&&(E=(a=(0,r.__read)(0===i?[h+g,+n-h-g]:[0,+n],2))[0],k=a[1]),"r"===e&&(x=(0,r.__read)([+t-d-m],1)[0]),"b"===e&&(k=(0,r.__read)([+n-h-p],1)[0]),"l"===e&&(b=(o=(0,r.__read)(0===i?[d+v,+t-d-v]:[0,+t],2))[0],x=o[1]);});var T=(0,r.__read)((0,a.parseSeriesAttr)(s),4),M=T[0],w=T[1],N=T[2],C=T[3],_=(0,r.__read)([C+w,M+N],2),P=_[0],A=_[1];return new a.BBox(b+C,E+M,x-P,k-A);},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new a.BBox(0,0,0,0);},t.prototype.render=function(e,t){var n,i,u,d,h,f,p,v,g,m,y,b,E,x,k,S,T=this;e.width,e.height,e.position,e.spacing;var M=e.classNamePrefix,w=(0,r.__rest)(e,["width","height","position","spacing","classNamePrefix"]),N=(0,r.__read)((0,a.splitStyle)(w),1)[0],C=(h=e.width,f=e.height,p=e.position,g=(v=(0,r.__read)([+h/2,+f/2],2))[0],m=v[1],b=(y=(0,r.__read)([+g,+m,"center","middle"],4))[0],E=y[1],x=y[2],k=y[3],(S=(0,a.parsePosition)(p)).includes("l")&&(b=(n=(0,r.__read)([0,"start"],2))[0],x=n[1]),S.includes("r")&&(b=(i=(0,r.__read)([+h,"end"],2))[0],x=i[1]),S.includes("t")&&(E=(u=(0,r.__read)([0,"top"],2))[0],k=u[1]),S.includes("b")&&(E=(d=(0,r.__read)([+f,"bottom"],2))[0],k=d[1]),{x:b,y:E,textAlign:x,textBaseline:k}),_=C.x,P=C.y,A=C.textAlign,O=C.textBaseline;(0,a.ifShow)(!!w.text,(0,a.select)(t),function(e){var t=(0,o.getLegendClassName)(l.text.name,s.CLASSNAME_SUFFIX_MAP.title,M);T.title=e.maybeAppendByClassName(l.text,"text").attr("className",t).styles(N).call(c,{x:_,y:P,textAlign:A,textBaseline:O}).node();});},t;}(i.Component);},21162038:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3Time",{enumerable:!0,get:function(){return i;}});var r=n("90abb703");let i=(e,t,n,i,a)=>{let o=e>t,s=o?t:e,l=o?e:t,[u,c]=(0,r.findTickInterval)(s,l,n,i,a),d=u.range(s,new Date(+l+1),c,!0);return o?d.reverse():d;};},"2125b09b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Axis",{enumerable:!0,get:function(){return g;}});var r=n("18f14020"),i=n("f457f3e3"),a=n("c086f503"),o=n("01a29d03"),s=n("cd5371db"),l=n("f19e0084"),u=n("045d7620"),c=n("9e868a30"),d=n("af83e449"),h=n("95d68719"),f=n("d5e231fc"),p=n("82f544b2");function v(e,t,n,i){var a=e.showLine,l=e.showTick,h=e.showLabel,v=e.classNamePrefix,g=t.maybeAppendByClassName(s.CLASS_NAMES.lineGroup,"g");(0,f.applyClassName)(g,s.CLASS_NAMES.lineGroup,p.CLASSNAME_SUFFIX_MAP.lineGroup,v);var m=(0,o.ifShow)(a,g,function(t){return(0,c.renderAxisLine)(t,e,i);})||[],y=t.maybeAppendByClassName(s.CLASS_NAMES.tickGroup,"g");(0,f.applyClassName)(y,s.CLASS_NAMES.tickGroup,p.CLASSNAME_SUFFIX_MAP.tickGroup,v);var b=(0,o.ifShow)(l,y,function(t){return(0,d.renderTicks)(t,n,e,i);})||[],E=t.maybeAppendByClassName(s.CLASS_NAMES.labelGroup,"g");(0,f.applyClassName)(E,s.CLASS_NAMES.labelGroup,p.CLASSNAME_SUFFIX_MAP.labelGroup,v);var x=(0,o.ifShow)(h,E,function(r){return(0,u.renderLabels)(r,n,e,i,t.node());})||[];return(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(m),!1),(0,r.__read)(b),!1),(0,r.__read)(x),!1).filter(function(e){return!!e;});}var g=function(e){function t(t){return e.call(this,t,s.AXIS_BASE_DEFAULT_ATTR)||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,t,n){var a=this,u=e.titleText,c=e.data,d=e.animate,g=e.showTitle,m=e.showGrid,y=e.dataThreshold,b=e.truncRange,E=e.classNamePrefix,x=t.className||"axis";E?t.attr("className","".concat(x," ").concat(E,"axis")):t.className||t.attr("className","axis");var k=(0,o.sampling)(c,y).filter(function(e){var t=e.value;return!b||!(t>b[0])||!(t<b[1]);}),S=(0,i.parseAnimationOption)(void 0===n?d:n),T=(0,o.select)(t).maybeAppendByClassName(s.CLASS_NAMES.gridGroup,"g");(0,f.applyClassName)(T,s.CLASS_NAMES.gridGroup,p.CLASSNAME_SUFFIX_MAP.gridGroup,E);var M=(0,o.ifShow)(m,T,function(t){return(0,l.renderGrid)(t,k,e,S);})||[],w=(0,o.select)(t).maybeAppendByClassName(s.CLASS_NAMES.mainGroup,"g");(0,f.applyClassName)(w,s.CLASS_NAMES.mainGroup,p.CLASSNAME_SUFFIX_MAP.mainGroup,E),u&&(!this.initialized&&S.enter||this.initialized&&S.update)&&v(e,(0,o.select)(this.offscreenGroup),k,(0,i.parseAnimationOption)(!1));var N=v(e,(0,o.select)(w.node()),k,S),C=(0,o.select)(t).maybeAppendByClassName(s.CLASS_NAMES.titleGroup,"g");(0,f.applyClassName)(C,s.CLASS_NAMES.titleGroup,p.CLASSNAME_SUFFIX_MAP.titleGroup,E);var _=(0,o.ifShow)(g,C,function(t){return(0,h.renderTitle)(t,a,e,S);})||[];return(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(M),!1),(0,r.__read)(N),!1),(0,r.__read)(_),!1).flat().filter(function(e){return!!e;});},t;}(a.Component);},"215c6f85":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"themeOf",{enumerable:!0,get:function(){return o;}});var r=n("6b0531cc"),i=n("d1f78d64"),a=n("ec6e52f6");function o(e){let{theme:t}=e;return t?(0,i.getExtension)(r.ExtensionCategory.THEME,t)||(a.print.warn(`The theme of ${t} is not registered.`),{}):{};}},"2172d3d6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3Log",{enumerable:!0,get:function(){return a;}});var r=n("4f434d3c"),i=n("90abb703");let a=(e,t,n,a=10)=>{let o=e<0,s=(0,i.pows)(a,o),l=(0,i.logs)(a,o),u=t<e,c=u?t:e,d=u?e:t,h=l(c),f=l(d),p=[];if(!(a%1)&&f-h<n){if(h=Math.floor(h),f=Math.ceil(f),o)for(;h<=f;h+=1){let e=s(h);for(let t=a-1;t>=1;t-=1){let n=e*t;if(n>d)break;n>=c&&p.push(n);}}else for(;h<=f;h+=1){let e=s(h);for(let t=1;t<a;t+=1){let n=e*t;if(n>d)break;n>=c&&p.push(n);}}2*p.length<n&&(p=(0,r.d3Ticks)(c,d,n));}else{let e=-1===n?f-h:Math.min(f-h,n);p=(0,r.d3Ticks)(h,f,e).map(s);}return u?p.reverse():p;};},"21b783dc":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"MindMap",{enumerable:!0,get:function(){return u;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("66366487"),s=n("aeeab442"),l=n("3d6de037");let u=(0,r.forwardRef)(({children:e,...t},n)=>{let u=(0,r.useMemo)(()=>{let{data:e,type:n="default",nodeMinWidth:r,nodeMaxWidth:i,direction:u="alternate",labelField:c,defaultExpandLevel:d,...h}=t;return(0,s.mergeOptions)(a.COMMON_OPTIONS,l.DEFAULT_OPTIONS,{data:(0,o.formatTreeData)(e,d)},(0,l.getMindMapOptions)({type:n,nodeMinWidth:r,nodeMaxWidth:i,direction:u,labelField:c}),h);},[t]);return r.default.createElement(i.BaseGraph,{...u,ref:n},e);});},"226c6f8d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Sequential",{enumerable:!0,get:function(){return u;}});var r,i=n("abe9d8d6"),a=n("4f434d3c"),o=n("90abb703"),s=n("b515d568"),l=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o;};let u=r=class extends s.Linear{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:i.identity,tickMethod:a.d3Ticks,tickCount:5};}constructor(e){super(e);}clone(){return new r(this.options);}};u=r=l([(0,o.interpolatize)(function(e){return[e(0),e(1)];},e=>{let[t,n]=e;return(0,o.compose)((0,o.createInterpolateNumber)(0,1),(0,o.createNormalize)(t,n));})],u);},"22d76f01":function(e,t,n){"use strict";function r(e,t){return t-e?n=>(n-e)/(t-e):e=>.5;}n.d(t,"__esModule",{value:!0}),n.d(t,"createNormalize",{enumerable:!0,get:function(){return r;}});},"22f2a901":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("4667342b");},"23ceba14":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("20246f83"),t);},"24de82fb":function(e,t,n){"use strict";function r(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r;}n.d(t,"__esModule",{value:!0}),n.d(t,"sampling",{enumerable:!0,get:function(){return r;}});},"257efb3b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r,i,a=n("777fffbe"),o=a._(n("b1a4abb6")),s=a._(n("72ce8fb5")),l=n("276fa9d1"),u=function(){function e(t,n){(0,o.default)(this,e),this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[],this.type=t,this.target=n;}return(0,s.default)(e,null,[{key:"copy",value:function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n;}}]);}(),c=new WeakMap;function d(e,t){for(var n=e;n;n=n.parentNode){var r=c.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.options;if(n===e||o.subtree){var s=t(o);s&&a.enqueue(s);}}}}(0,s.default)(function e(t,n,r){(0,o.default)(this,e),this.transientObservedNodes=[],this.observer=t,this.target=n,this.options=r;},[{key:"enqueue",value:function(e){var t,n=this.observer.records,a=n.length;if(n.length>0){var o,s=(o=n[a-1],o===e?o:i&&(o===i||o===r)?i:null);if(s){n[a-1]=s;return;}}else t=this.observer,f.push(t),h||(h=!0,void 0!==l.runtime.globalThis?l.runtime.globalThis.setTimeout(p):p());n[a]=e;}},{key:"addListeners",value:function(){this.addListeners_(this.target);}},{key:"addListeners_",value:function(e){var t=this.options;t.attributes&&e.addEventListener(l.ElementEvent.ATTR_MODIFIED,this,!0),t.childList&&e.addEventListener(l.ElementEvent.INSERTED,this,!0),(t.childList||t.subtree)&&e.addEventListener(l.ElementEvent.REMOVED,this,!0);}},{key:"removeListeners",value:function(){this.removeListeners_(this.target);}},{key:"removeListeners_",value:function(e){var t=this.options;t.attributes&&e.removeEventListener(l.ElementEvent.ATTR_MODIFIED,this,!0),t.childList&&e.removeEventListener(l.ElementEvent.INSERTED,this,!0),(t.childList||t.subtree)&&e.removeEventListener(l.ElementEvent.REMOVED,this,!0);}},{key:"removeTransientObservers",value:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=c.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break;}},this);}},{key:"handleEvent",value:function(e){switch(e.stopImmediatePropagation(),e.type){case l.ElementEvent.ATTR_MODIFIED:var t=e.attrName,n=e.relatedNode.namespaceURI;(o=r=new u("attributes",s=e.target)).attributeName=t,o.attributeNamespace=n;var a=e.attrChange===l.MutationEvent.ADDITION?null:e.prevValue;d(s,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?(i||((i=u.copy(r)).oldValue=a),i):o;});break;case l.ElementEvent.REMOVED:case l.ElementEvent.INSERTED:s=e.relatedNode;var o,s,c,h,f=e.target;e.type===l.ElementEvent.INSERTED?(c=[f],h=[]):(c=[],h=[f]);var p=f.previousSibling,v=f.nextSibling;(o=r=new u("childList",s)).addedNodes=c,o.removedNodes=h,o.previousSibling=p,o.nextSibling=v,d(s,function(e){if(e.childList)return o;});}r=i=void 0;}}]);var h=!1,f=[];function p(){h=!1;var e=f;f=[],e.sort(function(e,t){return e.uid-t.uid;});var t=!1;e.forEach(function(e){var n=e.takeRecords();(function(e){e.nodes.forEach(function(t){var n=c.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers();});});})(e),n.length&&(e.callback(n,e),t=!0);}),t&&p();}},"25d8992f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return s;},getFlowDirectionGraphOptions:function(){return l;}});var r=n("777fffbe")._(n("3e6b097d")),i=n("02c619b4"),a=n("2b663a31");let{TextNode:o}=i.RCNode,s={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{strokeOpacity:.5},state:{active:{strokeOpacity:1}}},layout:{type:"dagre",rankdir:"LR",animation:!1},transforms:["translate-react-node-origin"]},l=({labelField:e})=>({node:{style:{component:t=>{let n=(0,a.formatLabel)(t,e);return r.default.createElement(o,{type:"filled",text:n});},size:[100,40],ports:[{placement:"left"},{placement:"right"}]}}});},"27349b1b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Title",{enumerable:!0,get:function(){return g;}});var r=n("6b0531cc"),i=n("9644f472"),a=n("28792030"),o=n("9da99c33"),s=n("0d562788"),l=n("98176abe"),u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let c={fill:"#1D2129",wordWrap:!0,maxLines:1,textOverflow:"ellipsis",textBaseline:"top",textAlign:"start",x:0},d=Object.assign(Object.assign({},c),{fillOpacity:.9,fontSize:16,fontWeight:"bold"}),h=Object.assign(Object.assign({},c),{fillOpacity:.65,fontSize:12,fontWeight:"normal"}),f={align:"left",spacing:8,size:44,padding:[16,24,0,24]},p="title",v="subtitle";class g extends s.BasePlugin{get padding(){return(0,a.parsePadding)(this.options.padding);}constructor(e,t){super(e,Object.assign({},f,t)),this.onRender=()=>{let e=this.updateCanvas();this.renderTitle(e);},this.bindEvents();}bindEvents(){let{graph:e}=this.context;e.on(r.GraphEvent.AFTER_RENDER,this.onRender),e.on(r.GraphEvent.AFTER_ANIMATE,this.onRender);}unbindEvents(){let{graph:e}=this.context;e.off(r.GraphEvent.AFTER_RENDER,this.onRender),e.off(r.GraphEvent.AFTER_ANIMATE,this.onRender);}destroy(){var e,t;this.unbindEvents(),null===(e=this.canvas)||void 0===e||e.destroy(),null===(t=this.container)||void 0===t||t.remove(),super.destroy();}updateCanvas(){let{size:e,className:t,align:n}=this.options,[r]=this.context.canvas.getSize(),[i=0,,a=0]=this.padding,o=e+i+a;if(this.canvas){let{width:e,height:t}=this.canvas.getConfig();(r!==e||o!==t)&&this.canvas.resize(r,o);}else{let e={left:"left-top",center:"top",right:"right-top"},[i,a]=(0,l.createPluginCanvas)({width:r,height:o,placement:e[n]||e.left,className:"title-canvas",graphCanvas:this.context.canvas});t&&i.classList.add(t),this.container=i,this.canvas=a;}return this.canvas;}renderTitle(e){let t=new m({options:this.options,ctx:this.context});e.removeChildren(),t.getTitle().forEach(t=>{t&&e.appendChild(t);});}}class m{get padding(){return(0,a.parsePadding)(this.options.padding);}constructor(e){let{options:t,ctx:n}=e;this.options=t,this.context=n;}getTitle(){let e=this.options,t=e[p],n=e[v],{spacing:r=44,padding:a,align:s}=e,l=u(e,["symbol"==typeof p?p:p+"","symbol"==typeof v?v:v+"","spacing","padding","align"]),c=(0,o.subStyleProps)(l,p),f=(0,o.subStyleProps)(l,v),[g]=this.context.graph.getSize(),[m=0,y=0,,b=0]=this.padding,E=g-b-y,x=null,k=b,S="left";switch(s){case"left":default:k=b,S="left";break;case"center":k=g/2,S="center";break;case"right":k=g-y,S="right";}let T=new i.Label({className:p,style:Object.assign(Object.assign(Object.assign(Object.assign({},d),{wordWrapWidth:E-5,x:k,y:m,textAlign:S}),c),{text:t})}),M=T.getBBox();return n&&(x=new i.Label({className:"subTitle",style:Object.assign(Object.assign(Object.assign(Object.assign({},h),{wordWrapWidth:E-5,x:k,y:M.height+r+m,textAlign:S}),f),{text:n})})),[T,x];}}},"276fa9d1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AABB:function(){return ei;},CSS:function(){return iY;},Camera:function(){return eA;},CameraType:function(){return eN;},Canvas:function(){return i6;},Circle:function(){return iw;},CustomElement:function(){return iC;},CustomEvent:function(){return rF;},DisplayObject:function(){return iM;},ERROR_MSG_METHOD_NOT_IMPLEMENTED:function(){return ec;},ElementEvent:function(){return rq;},Ellipse:function(){return i_;},FederatedEvent:function(){return rR;},Group:function(){return iP;},HTML:function(){return iO;},Image:function(){return iL;},Line:function(){return iD;},MutationEvent:function(){return rX;},Path:function(){return iB;},Polygon:function(){return iG;},Polyline:function(){return iV;},PropertySyntax:function(){return eG;},Rect:function(){return ij;},Shape:function(){return K;},Text:function(){return iH;},convertToPath:function(){return nd;},createVec3:function(){return ep;},deg2rad:function(){return eg;},getAngle:function(){return eh;},parseColor:function(){return tW;},propertyMetadataCache:function(){return nI;},runtime:function(){return id;}});var r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y,b,E,x,k,S,T,M,w,N,C,_=n("777fffbe"),P=_._(n("ab297151")),A=_._(n("b1a4abb6")),O=_._(n("72ce8fb5")),L=_._(n("d60881d0")),R=_._(n("0b95a4d2")),D=_._(n("0afdccfb")),I=_._(n("7465ab36")),B=_._(n("32f41e1c")),F=n("597fa39f");n("f90e84e3");var G=n("abe9d8d6"),z=_._(n("3214ccb5")),V=_._(n("51ffafbb")),j=n("bc7d4453"),U=_._(n("2fabd5d4")),H=_._(n("cb203630")),W=_._(n("1982f763")),Y=_._(n("01aac514"));let q=n("1714eebe");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==q||"undefined"!=typeof self&&self;var X={exports:{}};r=function(){function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r;}function t(e,t){return e<t?-1:e>t?1:0;}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear();};function r(e,t){i(e,0,e.children.length,t,e);}function i(e,t,n,r,i){i||(i=h(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<n;o++){var s=e.children[o];a(i,e.leaf?r(s):s);}return i;}function a(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e;}function o(e,t){return e.minX-t.minX;}function s(e,t){return e.minY-t.minY;}function l(e){return(e.maxX-e.minX)*(e.maxY-e.minY);}function u(e){return e.maxX-e.minX+(e.maxY-e.minY);}function c(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY;}function d(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY;}function h(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};}function f(n,r,i,a,o){for(var s=[r,i];s.length;)if(!((i=s.pop())-(r=s.pop())<=a)){var l=r+Math.ceil((i-r)/a/2)*a;(function t(n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),h=Math.max(i,Math.floor(r-l*c/s+d)),f=Math.min(a,Math.floor(r+(s-l)*c/s+d));t(n,r,h,f,o);}var p=n[r],v=i,g=a;for(e(n,i,r),o(n[a],p)>0&&e(n,i,a);v<g;){for(e(n,v,g),v++,g--;0>o(n[v],p);)v++;for(;o(n[g],p)>0;)g--;}0===o(n[i],p)?e(n,i,g):e(n,++g,a),g<=r&&(i=g+1),r<=g&&(a=g-1);}})(n,l,r||0,i||n.length-1,o||t),s.push(r,l,l,i);}}return n.prototype.all=function(){return this._all(this.data,[]);},n.prototype.search=function(e){var t=this.data,n=[];if(!d(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;d(e,s)&&(t.leaf?n.push(o):c(e,s)?this._all(o,n):i.push(o));}t=i.pop();}return n;},n.prototype.collides=function(e){var t=this.data;if(!d(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(d(e,a)){if(t.leaf||c(e,a))return!0;n.push(i);}}t=n.pop();}return!1;},n.prototype.load=function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this;}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r;}this._insert(n,this.data.height-n.height-1,!0);}}else this.data=n;return this;},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this;},n.prototype.clear=function(){return this.data=h([]),this;},n.prototype.remove=function(e,t){if(!e)return this;for(var n,r,i,a=this.data,o=this.toBBox(e),s=[],l=[];a||s.length;){if(a||(a=s.pop(),r=s[s.length-1],n=l.pop(),i=!0),a.leaf){var u=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return -1;}(e,a.children,t);if(-1!==u){a.children.splice(u,1),s.push(a),this._condense(s);break;}}!i&&!a.leaf&&c(a,o)?(s.push(a),l.push(n),n=0,r=a,a=a.children[0]):r?(n++,a=r.children[n],i=!1):a=null;}return this;},n.prototype.toBBox=function(e){return e;},n.prototype.compareMinX=function(e,t){return e.minX-t.minX;},n.prototype.compareMinY=function(e,t){return e.minY-t.minY;},n.prototype.toJSON=function(){return this.data;},n.prototype.fromJSON=function(e){return this.data=e,this;},n.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t;},n.prototype._build=function(e,t,n,i){var a,o=n-t+1,s=this._maxEntries;if(o<=s)return r(a=h(e.slice(t,n+1)),this.toBBox),a;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(a=h([])).leaf=!1,a.height=i;var l=Math.ceil(o/s),u=l*Math.ceil(Math.sqrt(s));f(e,t,n,u,this.compareMinX);for(var c=t;c<=n;c+=u){var d=Math.min(c+u-1,n);f(e,c,d,l,this.compareMinY);for(var p=c;p<=d;p+=l){var v=Math.min(p+l-1,d);a.children.push(this._build(e,p,v,i-1));}}return r(a,this.toBBox),a;},n.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var u=t.children[s],c=l(u),d=(Math.max(u.maxX,e.maxX)-Math.min(u.minX,e.minX))*(Math.max(u.maxY,e.maxY)-Math.min(u.minY,e.minY))-c;d<a?(a=d,i=c<i?c:i,o=u):d===a&&c<i&&(i=c,o=u);}t=o||t.children[0];}return t;},n.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],o=this._chooseSubtree(r,this.data,t,i);for(o.children.push(e),a(o,r);t>=0;)if(i[t].children.length>this._maxEntries)this._split(i,t),t--;else break;this._adjustParentBBoxes(r,i,t);},n.prototype._split=function(e,t){var n=e[t],i=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,i);var o=this._chooseSplitIndex(n,a,i),s=h(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,r(n,this.toBBox),r(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s);},n.prototype._splitRoot=function(e,t){this.data=h([e,t]),this.data.height=e.height+1,this.data.leaf=!1,r(this.data,this.toBBox);},n.prototype._chooseSplitIndex=function(e,t,n){for(var r,a=1/0,o=1/0,s=t;s<=n-t;s++){var u=i(e,0,s,this.toBBox),c=i(e,s,n,this.toBBox),d=function(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-r);}(u,c),h=l(u)+l(c);d<a?(a=d,r=s,o=h<o?h:o):d===a&&h<o&&(o=h,r=s);}return r||n-t;},n.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:o,i=e.leaf?this.compareMinY:s;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r);},n.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var o=this.toBBox,s=i(e,0,t,o),l=i(e,n-t,n,o),c=u(s)+u(l),d=t;d<n-t;d++){var h=e.children[d];a(s,e.leaf?o(h):h),c+=u(s);}for(var f=n-t-1;f>=t;f--){var p=e.children[f];a(l,e.leaf?o(p):p),c+=u(l);}return c;},n.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)a(t[r],e);},n.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():r(e[t],this.toBBox);},n;},X.exports=r();var $=X.exports,K=((i={}).GROUP="g",i.FRAGMENT="fragment",i.CIRCLE="circle",i.ELLIPSE="ellipse",i.IMAGE="image",i.RECT="rect",i.LINE="line",i.POLYLINE="polyline",i.POLYGON="polygon",i.TEXT="text",i.PATH="path",i.HTML="html",i.MESH="mesh",i),Z=((a={})[a.ZERO=0]="ZERO",a[a.NEGATIVE_ONE=1]="NEGATIVE_ONE",a),Q=F.vec3.add,J=F.vec3.copy,ee=F.vec3.max,et=F.vec3.min,en=F.vec3.scale,er=F.vec3.sub,ei=function(){function e(){(0,A.default)(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0];}return(0,O.default)(e,[{key:"update",value:function(e,t){J(this.center,e),J(this.halfExtents,t),er(this.min,this.center,this.halfExtents),Q(this.max,this.center,this.halfExtents);}},{key:"setMinMax",value:function(e,t){Q(this.center,t,e),en(this.center,this.center,.5),er(this.halfExtents,t,e),en(this.halfExtents,this.halfExtents,.5),J(this.min,e),J(this.max,t);}},{key:"getMin",value:function(){return this.min;}},{key:"getMax",value:function(){return this.max;}},{key:"add",value:function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return;}var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],l=o[1],u=o[2],c=r-s,d=r+s,h=i-l,f=i+l,p=a-u,v=a+u,g=t.center,m=g[0],y=g[1],b=g[2],E=t.halfExtents,x=E[0],k=E[1],S=E[2],T=m-x,M=m+x,w=y-k,N=y+k,C=b-S,_=b+S;T<c&&(c=T),M>d&&(d=M),w<h&&(h=w),N>f&&(f=N),C<p&&(p=C),_>v&&(v=_),n[0]=(c+d)*.5,n[1]=(h+f)*.5,n[2]=(p+v)*.5,o[0]=(d-c)*.5,o[1]=(f-h)*.5,o[2]=(v-p)*.5,this.min[0]=c,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=f,this.max[2]=v;}}},{key:"setFromTransformedAABB",value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],l=t[8],u=t[1],c=t[5],d=t[9],h=t[2],f=t[6],p=t[10],v=Math.abs(o),g=Math.abs(s),m=Math.abs(l),y=Math.abs(u),b=Math.abs(c),E=Math.abs(d),x=Math.abs(h),k=Math.abs(f),S=Math.abs(p);n[0]=t[12]+o*i[0]+s*i[1]+l*i[2],n[1]=t[13]+u*i[0]+c*i[1]+d*i[2],n[2]=t[14]+h*i[0]+f*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+m*a[2],r[1]=y*a[0]+b*a[1]+E*a[2],r[2]=x*a[0]+k*a[1]+S*a[2],er(this.min,n,r),Q(this.max,n,r);}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2];}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new e,r=ee([0,0,0],this.getMin(),t.getMin()),i=et([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n;}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?J([0,0,0],this.min):272===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]];}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?J([0,0,0],this.max):272===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]];}}],[{key:"isEmpty",value:function(e){return!e||0===e.halfExtents[0]&&0===e.halfExtents[1]&&0===e.halfExtents[2];}}]);}(),ea=(0,O.default)(function e(t,n){(0,A.default)(this,e),this.distance=t||0,this.normal=n||F.vec3.fromValues(0,1,0),this.updatePNVertexFlag();},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0);}},{key:"distanceToPoint",value:function(e){return F.vec3.dot(e,this.normal)-this.distance;}},{key:"normalize",value:function(){var e=1/F.vec3.len(this.normal);F.vec3.scale(this.normal,this.normal,e),this.distance*=e;}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),a=i>=0&&i<=1;return a&&n&&F.vec3.lerp(n,e,t,i),a;}}]),eo=((o={})[o.OUTSIDE=4294967295]="OUTSIDE",o[o.INSIDE=0]="INSIDE",o[o.INDETERMINATE=2147483647]="INDETERMINATE",o),es=(0,O.default)(function e(t){if((0,A.default)(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new ea);},[{key:"extractFromVPMatrix",value:function(e){var t=(0,I.default)(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];F.vec3.set(this.planes[0].normal,a-n,u-o,f-c),this.planes[0].distance=m-p,F.vec3.set(this.planes[1].normal,a+n,u+o,f+c),this.planes[1].distance=m+p,F.vec3.set(this.planes[2].normal,a+r,u+s,f+d),this.planes[2].distance=m+v,F.vec3.set(this.planes[3].normal,a-r,u-s,f-d),this.planes[3].distance=m-v,F.vec3.set(this.planes[4].normal,a-i,u-l,f-h),this.planes[4].distance=m-g,F.vec3.set(this.planes[5].normal,a+i,u+l,f+h),this.planes[5].distance=m+g,this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag();});}}]),el=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,A.default)(this,e),this.x=0,this.y=0,this.x=t,this.y=n;}return(0,O.default)(e,[{key:"clone",value:function(){return new e(this.x,this.y);}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y;}}]);}(),eu=function(){function e(t,n,r,i){(0,A.default)(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i;}return(0,O.default)(e,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new e(t.x,t.y,t.width,t.height);}},{key:"applyTransform",value:function(t,n){var r=F.vec4.fromValues(t.x,t.y,0,1),i=F.vec4.fromValues(t.x+t.width,t.y,0,1),a=F.vec4.fromValues(t.x,t.y+t.height,0,1),o=F.vec4.fromValues(t.x+t.width,t.y+t.height,0,1),s=F.vec4.create(),l=F.vec4.create(),u=F.vec4.create(),c=F.vec4.create();F.vec4.transformMat4(s,r,n),F.vec4.transformMat4(l,i,n),F.vec4.transformMat4(u,a,n),F.vec4.transformMat4(c,o,n);var d=Math.min(s[0],l[0],u[0],c[0]),h=Math.min(s[1],l[1],u[1],c[1]),f=Math.max(s[0],l[0],u[0],c[0]),p=Math.max(s[1],l[1],u[1],c[1]);return e.fromRect({x:d,y:h,width:f-d,height:p-h});}}]);}(),ec="Method not implemented.",ed="Use document.documentElement instead.";function eh(e){return void 0===e?0:e>360||e<-360?e%360:e;}var ef=F.vec3.create();function ep(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Array.isArray(e)&&3===e.length?r?F.vec3.clone(e):F.vec3.copy(ef,e):(0,G.isNumber)(e)?r?F.vec3.fromValues(e,t,n):F.vec3.set(ef,e,t,n):r?F.vec3.fromValues(e[0],e[1]||t,e[2]||n):F.vec3.set(ef,e[0],e[1]||t,e[2]||n);}var ev=Math.PI/180;function eg(e){return e*ev;}var em=180/Math.PI,ey=Math.PI/2;function eb(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y;return 16===t.length?(i=F.mat4.getScaling(F.vec3.create(),t),o=(a=(0,I.default)(i,3))[0],s=a[1],l=a[2],(u=Math.asin(-t[2]/o))<ey?u>-ey?(n=Math.atan2(t[6]/s,t[10]/l),r=Math.atan2(t[1]/o,t[0]/o)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=u,e[2]=r):(c=t[0],d=t[1],h=t[2],f=t[3],m=c*c+(p=d*d)+(v=h*h)+(g=f*f),(y=c*f-d*h)>.499995*m?(e[0]=ey,e[1]=2*Math.atan2(d,c),e[2]=0):y<-.499995*m?(e[0]=-ey,e[1]=2*Math.atan2(d,c),e[2]=0):(e[0]=Math.asin(2*(c*h-f*d)),e[1]=Math.atan2(2*(c*f+d*h),1-2*(v+g)),e[2]=Math.atan2(2*(c*d+h*f),1-2*(p+v)))),e;}function eE(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s;}if(o){var l=1/o;r*=l,i*=l;}var u=Math.atan2(n,t)*em;return[e[6],e[7],a,o,u];}var ex=F.mat4.create(),ek=F.mat4.create(),eS=F.vec4.create(),eT=[F.vec3.create(),F.vec3.create(),F.vec3.create()],eM=F.vec3.create();function ew(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i;}var eN=((s={})[s.ORBITING=0]="ORBITING",s[s.EXPLORING=1]="EXPLORING",s[s.TRACKING=2]="TRACKING",s),eC=((l={})[l.DEFAULT=0]="DEFAULT",l[l.ROTATIONAL=1]="ROTATIONAL",l[l.TRANSLATIONAL=2]="TRANSLATIONAL",l[l.CINEMATIC=3]="CINEMATIC",l),e_=((u={})[u.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",u[u.PERSPECTIVE=1]="PERSPECTIVE",u),eP={UPDATED:"updated"},eA=(0,O.default)(function e(){(0,A.default)(this,e),this.clipSpaceNearZ=Z.NEGATIVE_ONE,this.eventEmitter=new B.default,this.matrix=F.mat4.create(),this.right=F.vec3.fromValues(1,0,0),this.up=F.vec3.fromValues(0,1,0),this.forward=F.vec3.fromValues(0,0,1),this.position=F.vec3.fromValues(0,0,1),this.focalPoint=F.vec3.fromValues(0,0,0),this.distanceVector=F.vec3.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=F.mat4.create(),this.projectionMatrixInverse=F.mat4.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=eN.EXPLORING,this.trackingMode=eC.DEFAULT,this.projectionMode=e_.PERSPECTIVE,this.frustum=new es,this.orthoMatrix=F.mat4.create();},[{key:"isOrtho",value:function(){return this.projectionMode===e_.ORTHOGRAPHIC;}},{key:"getProjectionMode",value:function(){return this.projectionMode;}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix;}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse;}},{key:"getFrustum",value:function(){return this.frustum;}},{key:"getPosition",value:function(){return this.position;}},{key:"getFocalPoint",value:function(){return this.focalPoint;}},{key:"getDollyingStep",value:function(){return this.dollyingStep;}},{key:"getNear",value:function(){return this.near;}},{key:"getFar",value:function(){return this.far;}},{key:"getZoom",value:function(){return this.zoom;}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix;}},{key:"getView",value:function(){return this.view;}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e;}},{key:"setType",value:function(e,t){return this.type=e,this.type===eN.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===eN.TRACKING&&void 0!==t&&this.setTrackingMode(t),this;}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this;}},{key:"setTrackingMode",value:function(e){if(this.type!==eN.TRACKING)throw Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this;}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this;}},{key:"getViewTransform",value:function(){return F.mat4.invert(F.mat4.create(),this.matrix);}},{key:"getWorldTransform",value:function(){return this.matrix;}},{key:"jitterProjectionMatrix",value:function(e,t){var n=F.mat4.fromTranslation(F.mat4.create(),[e,t,0]);this.jitteredProjectionMatrix=F.mat4.multiply(F.mat4.create(),n,this.projectionMatrix);}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0;}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this;}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e;}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this;}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this;}},{key:"setNear",value:function(e){return this.projectionMode===e_.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this;}},{key:"setFar",value:function(e){return this.projectionMode===e_.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this;}},{key:"setViewOffset",value:function(e,t,n,r,i,a){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===e_.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===e_.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===e_.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===e_.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this;}},{key:"setZoomByViewportPoint",value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=o.x,l=o.y,u=F.vec3.fromValues(s-r,l-i,0),c=F.vec3.dot(u,this.right)/F.vec3.length(this.right),d=F.vec3.dot(u,this.up)/F.vec3.length(this.up),h=this.getPosition(),f=(0,I.default)(h,2),p=f[0],v=f[1],g=this.getFocalPoint(),m=(0,I.default)(g,2),y=m[0],b=m[1];return this.setPosition(p-c,v-d),this.setFocalPoint(y-c,b-d),this;}},{key:"setPerspective",value:function(e,t,n,r){this.projectionMode=e_.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var i,a=this.near*Math.tan(.5*this.fov*ev)/this.zoom,o=2*a,s=this.aspect*o,l=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var u=this.view.fullWidth,c=this.view.fullHeight;l+=this.view.offsetX*s/u,a-=this.view.offsetY*o/c,s*=this.view.width/u,o*=this.view.height/c;}return!function(e,t,n,r,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=2*a,d=n-t,h=r-i,f=o-a,p=o*a;u?(s=-o/f,l=-p/f):(s=-(o+a)/f,l=-2*p/f),e[0]=c/d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c/h,e[6]=0,e[7]=0,e[8]=(n+t)/d,e[9]=(r+i)/h,e[10]=s,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0;}(this.projectionMatrix,l,l+s,a-o,a,e,this.far,this.clipSpaceNearZ===Z.ZERO),F.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this;}},{key:"setOrthographic",value:function(e,t,n,r,i,a){this.projectionMode=e_.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var o,s=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,d=u-s,h=u+s,f=c+l,p=c-l;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=v*this.view.offsetX,h=d+v*this.view.width,f-=g*this.view.offsetY,p=f-g*this.view.height;}return this.clipSpaceNearZ===Z.NEGATIVE_ONE?F.mat4.ortho(this.projectionMatrix,d,h,f,p,i,a):F.mat4.orthoZO(this.projectionMatrix,d,h,f,p,i,a),F.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this;}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],r=ep(e,t,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this;}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=F.vec3.fromValues(0,1,0);if(this.focalPoint=ep(e,t,n),this.trackingMode===eC.CINEMATIC){var i=F.vec3.subtract(F.vec3.create(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=Math.asin(t/F.vec3.length(i))*em,o=90+Math.atan2(n,e)*em,s=F.mat4.create();F.mat4.rotateY(s,s,o*ev),F.mat4.rotateX(s,s,a*ev),r=F.vec3.transformMat4(F.vec3.create(),[0,1,0],s);}return F.mat4.invert(this.matrix,F.mat4.lookAt(F.mat4.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this;}},{key:"getDistance",value:function(){return this.distance;}},{key:"getDistanceVector",value:function(){return this.distanceVector;}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=F.vec3.create();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this;}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this;}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this;}},{key:"setAzimuth",value:function(e){return this.azimuth=eh(e),this.computeMatrix(),this._getAxes(),this.type===eN.ORBITING||this.type===eN.EXPLORING?this._getPosition():this.type===eN.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getAzimuth",value:function(){return this.azimuth;}},{key:"setElevation",value:function(e){return this.elevation=eh(e),this.computeMatrix(),this._getAxes(),this.type===eN.ORBITING||this.type===eN.EXPLORING?this._getPosition():this.type===eN.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getElevation",value:function(){return this.elevation;}},{key:"setRoll",value:function(e){return this.roll=eh(e),this.computeMatrix(),this._getAxes(),this.type===eN.ORBITING||this.type===eN.EXPLORING?this._getPosition():this.type===eN.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getRoll",value:function(){return this.roll;}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate();}},{key:"computeMatrix",value:function(){var e=F.quat.setAxisAngle(F.quat.create(),[0,0,1],this.roll*ev);F.mat4.identity(this.matrix);var t=F.quat.setAxisAngle(F.quat.create(),[1,0,0],(this.rotateWorld&&this.type!==eN.TRACKING||this.type===eN.TRACKING?1:-1)*this.elevation*ev),n=F.quat.setAxisAngle(F.quat.create(),[0,1,0],(this.rotateWorld&&this.type!==eN.TRACKING||this.type===eN.TRACKING?1:-1)*this.azimuth*ev),r=F.quat.multiply(F.quat.create(),n,t);r=F.quat.multiply(F.quat.create(),r,e);var i=F.mat4.fromQuat(F.mat4.create(),r);this.type===eN.ORBITING||this.type===eN.EXPLORING?(F.mat4.translate(this.matrix,this.matrix,this.focalPoint),F.mat4.multiply(this.matrix,this.matrix,i),F.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===eN.TRACKING&&(F.mat4.translate(this.matrix,this.matrix,this.position),F.mat4.multiply(this.matrix,this.matrix,i));}},{key:"_setPosition",value:function(e,t,n){this.position=ep(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix();}},{key:"_getAxes",value:function(){F.vec3.copy(this.right,ep(F.vec4.transformMat4(F.vec4.create(),[1,0,0,0],this.matrix))),F.vec3.copy(this.up,ep(F.vec4.transformMat4(F.vec4.create(),[0,1,0,0],this.matrix))),F.vec3.copy(this.forward,ep(F.vec4.transformMat4(F.vec4.create(),[0,0,1,0],this.matrix))),F.vec3.normalize(this.right,this.right),F.vec3.normalize(this.up,this.up),F.vec3.normalize(this.forward,this.forward);}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=F.vec3.length(this.distanceVector);if(0===r){this.elevation=0,this.azimuth=0;return;}this.type===eN.TRACKING?(this.elevation=Math.asin(t/r)*em,this.azimuth=Math.atan2(-e,-n)*em):this.rotateWorld?(this.elevation=Math.asin(t/r)*em,this.azimuth=Math.atan2(-e,-n)*em):(this.elevation=-(Math.asin(t/r)*em),this.azimuth=-(Math.atan2(-e,-n)*em));}},{key:"_getPosition",value:function(){F.vec3.copy(this.position,ep(F.vec4.transformMat4(F.vec4.create(),[0,0,0,1],this.matrix))),this._getDistance();}},{key:"_getFocalPoint",value:function(){F.vec3.transformMat3(this.distanceVector,[0,0,-this.distance],F.mat3.fromMat4(F.mat3.create(),this.matrix)),F.vec3.add(this.focalPoint,this.position,this.distanceVector),this._getDistance();}},{key:"_getDistance",value:function(){this.distanceVector=F.vec3.subtract(F.vec3.create(),this.focalPoint,this.position),this.distance=F.vec3.length(this.distanceVector),this.dollyingStep=this.distance/100;}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===e_.ORTHOGRAPHIC){var e=this.position,t=F.quat.setAxisAngle(F.quat.create(),[0,0,1],-this.roll*Math.PI/180);F.mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,F.vec3.fromValues((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),F.vec3.fromValues(this.zoom,this.zoom,1),e);}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=F.mat4.multiply(F.mat4.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(eP.UPDATED);}}},{key:"rotate",value:function(e,t,n){throw Error(ec);}},{key:"pan",value:function(e,t){throw Error(ec);}},{key:"dolly",value:function(e){throw Error(ec);}},{key:"createLandmark",value:function(e,t){throw Error(ec);}},{key:"gotoLandmark",value:function(e,t){throw Error(ec);}},{key:"cancelLandmarkAnimation",value:function(){throw Error(ec);}}]),eO=((c={})[c.Standard=0]="Standard",c),eL=((d={})[d.ADDED=0]="ADDED",d[d.REMOVED=1]="REMOVED",d[d.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",d),eR=F.vec3.create(),eD=F.mat4.create(),eI=F.quat.create();function eB(e){if(e.localDirtyFlag){if(0!==e.localSkew[0]||0!==e.localSkew[1]){F.mat4.fromRotationTranslationScaleOrigin(e.localTransform,e.localRotation,e.localPosition,F.vec3.fromValues(1,1,1),e.origin),(0!==e.localSkew[0]||0!==e.localSkew[1])&&(F.mat4.identity(eD),eD[4]=Math.tan(e.localSkew[0]),eD[1]=Math.tan(e.localSkew[1]),F.mat4.multiply(e.localTransform,e.localTransform,eD));var t=F.mat4.fromRotationTranslationScaleOrigin(eD,F.quat.set(eI,0,0,0,1),F.vec3.set(eR,1,1,1),e.localScale,e.origin);F.mat4.multiply(e.localTransform,e.localTransform,t);}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=0!==r[0]||0!==r[1]||0!==r[2],l=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],u=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];l||u||c?F.mat4.fromRotationTranslationScaleOrigin(n,i,r,a,o):s?F.mat4.fromTranslation(n,r):F.mat4.identity(n);}e.localDirtyFlag=!1;}}var eF={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new eu(0,0,0,0)},eG=((h={}).COORDINATE="<coordinate>",h.COLOR="<color>",h.PAINT="<paint>",h.NUMBER="<number>",h.ANGLE="<angle>",h.OPACITY_VALUE="<opacity-value>",h.SHADOW_BLUR="<shadow-blur>",h.LENGTH="<length>",h.PERCENTAGE="<percentage>",h.LENGTH_PERCENTAGE="<length> | <percentage>",h.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",h.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",h.LIST_OF_POINTS="<list-of-points>",h.PATH="<path>",h.FILTER="<filter>",h.Z_INDEX="<z-index>",h.OFFSET_DISTANCE="<offset-distance>",h.DEFINED_PATH="<defined-path>",h.MARKER="<marker>",h.TRANSFORM="<transform>",h.TRANSFORM_ORIGIN="<transform-origin>",h.TEXT="<text>",h.TEXT_TRANSFORM="<text-transform>",h);function ez(e,t,n){e.prototype=t.prototype=n,n.constructor=e;}function eV(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n;}function ej(){}var eU="\\s*([+-]?\\d+)\\s*",eH="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eW="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eY=/^#([0-9a-f]{3,8})$/,eq=RegExp(`^rgb\\(${eU},${eU},${eU}\\)$`),eX=RegExp(`^rgb\\(${eW},${eW},${eW}\\)$`),e$=RegExp(`^rgba\\(${eU},${eU},${eU},${eH}\\)$`),eK=RegExp(`^rgba\\(${eW},${eW},${eW},${eH}\\)$`),eZ=RegExp(`^hsl\\(${eH},${eW},${eW}\\)$`),eQ=RegExp(`^hsla\\(${eH},${eW},${eW},${eH}\\)$`),eJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e0(){return this.rgb().formatHex();}function e1(){return this.rgb().formatRgb();}function e2(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eY.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e3(t):3===n?new e6(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e4(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eq.exec(e))?new e6(t[1],t[2],t[3],1):(t=eX.exec(e))?new e6(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=e$.exec(e))?e4(t[1],t[2],t[3],t[4]):(t=eK.exec(e))?e4(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eZ.exec(e))?tt(t[1],t[2]/100,t[3]/100,1):(t=eQ.exec(e))?tt(t[1],t[2]/100,t[3]/100,t[4]):eJ.hasOwnProperty(e)?e3(eJ[e]):"transparent"===e?new e6(NaN,NaN,NaN,0):null;}function e3(e){return new e6(e>>16&255,e>>8&255,255&e,1);}function e4(e,t,n,r){return r<=0&&(e=t=n=NaN),new e6(e,t,n,r);}function e6(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r;}function e5(){return`#${te(this.r)}${te(this.g)}${te(this.b)}`;}function e8(){let e=e9(this.opacity);return`${1===e?"rgb(":"rgba("}${e7(this.r)}, ${e7(this.g)}, ${e7(this.b)}${1===e?")":`, ${e})`}`;}function e9(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function e7(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function te(e){return((e=e7(e))<16?"0":"")+e.toString(16);}function tt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tr(e,t,n,r);}function tn(e){if(e instanceof tr)return new tr(e.h,e.s,e.l,e.opacity);if(e instanceof ej||(e=e2(e)),!e)return new tr;if(e instanceof tr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new tr(o,s,l,e.opacity);}function tr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r;}function ti(e){return(e=(e||0)%360)<0?e+360:e;}function ta(e){return Math.max(0,Math.min(1,e||0));}function to(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255;}function ts(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=e.apply(this,i);return n.cache=s.set(o,l)||s,l;};return n.cache=new(ts.Cache||Map),ts.cacheList.push(n.cache),n;}ez(ej,e2,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:e0,formatHex:e0,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return tn(this).formatHsl();},formatRgb:e1,toString:e1}),ez(e6,function(e,t,n,r){var i;return 1==arguments.length?((i=e)instanceof ej||(i=e2(i)),i)?new e6((i=i.rgb()).r,i.g,i.b,i.opacity):new e6:new e6(e,t,n,null==r?1:r);},eV(ej,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e6(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new e6(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new e6(e7(this.r),e7(this.g),e7(this.b),e9(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:e5,formatHex:e5,formatHex8:function(){return`#${te(this.r)}${te(this.g)}${te(this.b)}${te((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:e8,toString:e8})),ez(tr,function(e,t,n,r){return 1==arguments.length?tn(e):new tr(e,t,n,null==r?1:r);},eV(ej,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tr(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new tr(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new e6(to(e>=240?e-240:e+120,i,r),to(e,i,r),to(e<120?e+240:e-120,i,r),this.opacity);},clamp(){return new tr(ti(this.h),ta(this.s),ta(this.l),e9(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let e=e9(this.opacity);return`${1===e?"hsl(":"hsla("}${ti(this.h)}, ${100*ta(this.s)}%, ${100*ta(this.l)}%${1===e?")":`, ${e})`}`;}})),ts.Cache=Map,ts.cacheList=[],ts.clearCache=function(){ts.cacheList.forEach(function(e){return e.clear();});};var tl=((f={})[f.kUnknown=0]="kUnknown",f[f.kNumber=1]="kNumber",f[f.kPercentage=2]="kPercentage",f[f.kEms=3]="kEms",f[f.kPixels=4]="kPixels",f[f.kRems=5]="kRems",f[f.kDegrees=6]="kDegrees",f[f.kRadians=7]="kRadians",f[f.kGradians=8]="kGradians",f[f.kTurns=9]="kTurns",f[f.kMilliseconds=10]="kMilliseconds",f[f.kSeconds=11]="kSeconds",f[f.kInteger=12]="kInteger",f),tu=((p={})[p.kUNumber=0]="kUNumber",p[p.kUPercent=1]="kUPercent",p[p.kULength=2]="kULength",p[p.kUAngle=3]="kUAngle",p[p.kUTime=4]="kUTime",p[p.kUOther=5]="kUOther",p),tc=((v={})[v.kYes=0]="kYes",v[v.kNo=1]="kNo",v),td=((g={})[g.kYes=0]="kYes",g[g.kNo=1]="kNo",g),th=[{name:"em",unit_type:tl.kEms},{name:"px",unit_type:tl.kPixels},{name:"deg",unit_type:tl.kDegrees},{name:"rad",unit_type:tl.kRadians},{name:"grad",unit_type:tl.kGradians},{name:"ms",unit_type:tl.kMilliseconds},{name:"s",unit_type:tl.kSeconds},{name:"rem",unit_type:tl.kRems},{name:"turn",unit_type:tl.kTurns}],tf=((m={})[m.kUnknownType=0]="kUnknownType",m[m.kUnparsedType=1]="kUnparsedType",m[m.kKeywordType=2]="kKeywordType",m[m.kUnitType=3]="kUnitType",m[m.kSumType=4]="kSumType",m[m.kProductType=5]="kProductType",m[m.kNegateType=6]="kNegateType",m[m.kInvertType=7]="kInvertType",m[m.kMinType=8]="kMinType",m[m.kMaxType=9]="kMaxType",m[m.kClampType=10]="kClampType",m[m.kTransformType=11]="kTransformType",m[m.kPositionType=12]="kPositionType",m[m.kURLImageType=13]="kURLImageType",m[m.kColorType=14]="kColorType",m[m.kUnsupportedColorType=15]="kUnsupportedColorType",m),tp=function(e){switch(e){case tl.kNumber:case tl.kInteger:return tu.kUNumber;case tl.kPercentage:return tu.kUPercent;case tl.kPixels:return tu.kULength;case tl.kMilliseconds:case tl.kSeconds:return tu.kUTime;case tl.kDegrees:case tl.kRadians:case tl.kGradians:case tl.kTurns:return tu.kUAngle;default:return tu.kUOther;}},tv=function(e){switch(e){case tu.kUNumber:return tl.kNumber;case tu.kULength:return tl.kPixels;case tu.kUPercent:return tl.kPercentage;case tu.kUTime:return tl.kSeconds;case tu.kUAngle:return tl.kDegrees;default:return tl.kUnknown;}},tg=function(e){var t=1;switch(e){case tl.kPixels:case tl.kDegrees:case tl.kSeconds:break;case tl.kMilliseconds:t=.001;break;case tl.kRadians:t=180/Math.PI;break;case tl.kGradians:t=.9;break;case tl.kTurns:t=360;}return t;},tm=function(e){switch(e){case tl.kNumber:case tl.kInteger:break;case tl.kPercentage:return"%";case tl.kEms:return"em";case tl.kRems:return"rem";case tl.kPixels:return"px";case tl.kDegrees:return"deg";case tl.kRadians:return"rad";case tl.kGradians:return"grad";case tl.kMilliseconds:return"ms";case tl.kSeconds:return"s";case tl.kTurns:return"turn";}return"";},ty=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"toString",value:function(){return this.buildCSSText(tc.kNo,td.kNo,"");}},{key:"isNumericValue",value:function(){return this.getType()>=tf.kUnitType&&this.getType()<=tf.kClampType;}}],[{key:"isAngle",value:function(e){return e===tl.kDegrees||e===tl.kRadians||e===tl.kGradians||e===tl.kTurns;}},{key:"isLength",value:function(e){return e>=tl.kEms&&e<tl.kDegrees;}},{key:"isRelativeUnit",value:function(e){return e===tl.kPercentage||e===tl.kEms||e===tl.kRems;}},{key:"isTime",value:function(e){return e===tl.kSeconds||e===tl.kMilliseconds;}}]),tb=function(e){function t(e){var n;return(0,A.default)(this,t),(n=(0,R.default)(this,t)).colorSpace=e,n;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"getType",value:function(){return tf.kColorType;}},{key:"to",value:function(e){return this;}}]);}(ty),tE=((y={})[y.Constant=0]="Constant",y[y.LinearGradient=1]="LinearGradient",y[y.RadialGradient=2]="RadialGradient",y),tx=function(e){function t(e,n){var r;return(0,A.default)(this,t),(r=(0,R.default)(this,t)).type=e,r.value=n,r;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clone",value:function(){return new t(this.type,this.value);}},{key:"buildCSSText",value:function(e,t,n){return n;}},{key:"getType",value:function(){return tf.kColorType;}}]);}(ty),tk=function(e){function t(e){var n;return(0,A.default)(this,t),(n=(0,R.default)(this,t)).value=e,n;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clone",value:function(){return new t(this.value);}},{key:"getType",value:function(){return tf.kKeywordType;}},{key:"buildCSSText",value:function(e,t,n){return n+this.value;}}]);}(ty),tS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(e)?"NaN":e>0?"infinity":"-infinity")+t;},tT=function(e){return tv(tp(e));},tM=function(e){function t(e){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl.kNumber;return(0,A.default)(this,t),r=(0,R.default)(this,t),i="string"==typeof a?(n=a)?"number"===n?tl.kNumber:"percent"===n||"%"===n?tl.kPercentage:th.find(function(e){return e.name===n;}).unit_type:tl.kUnknown:a,r.unit=i,r.value=e,r;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clone",value:function(){return new t(this.value,this.unit);}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit;}},{key:"getType",value:function(){return tf.kUnitType;}},{key:"convertTo",value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=tT(this.unit);if(n!==tT(e)||n===tl.kUnknown)return null;var r=tg(this.unit)/tg(e);return new t(this.value*r,e);}},{key:"buildCSSText",value:function(e,t,n){var r;switch(this.unit){case tl.kUnknown:break;case tl.kInteger:r=Number(this.value).toFixed(0);break;case tl.kNumber:case tl.kPercentage:case tl.kEms:case tl.kRems:case tl.kPixels:case tl.kDegrees:case tl.kRadians:case tl.kGradians:case tl.kMilliseconds:case tl.kSeconds:case tl.kTurns:var i=this.value,a=tm(this.unit);if(i<-999999||i>999999){var o=tm(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?tS(i,o):i+(o||"");}else r="".concat(i).concat(a);}return n+r;}}]);}(ty),tw=new tM(0,"px");new tM(1,"px");var tN=new tM(0,"deg"),tC=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,A.default)(this,t),(i=(0,R.default)(this,t,["rgb"])).r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.alpha);}},{key:"buildCSSText",value:function(e,t,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")");}}]);}(tb),t_=new tk("unset"),tP={"":t_,unset:t_,initial:new tk("initial"),inherit:new tk("inherit")},tA=new tC(0,0,0,0,!0),tO=new tC(0,0,0,0),tL=ts(function(e,t,n,r){return new tC(e,t,n,r);},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")");}),tR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl.kNumber;return new tM(e,t);};new tM(50,"%");var tD=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){throw Error("".concat(t,": ").concat(e));}function r(){return i("linear-gradient",e.linearGradient,o)||i("repeating-linear-gradient",e.repeatingLinearGradient,o)||i("radial-gradient",e.radialGradient,s)||i("repeating-radial-gradient",e.repeatingRadialGradient,s)||i("conic-gradient",e.conicGradient,s);}function i(t,r,i){return a(r,function(r){var a=i();return a&&!y(e.comma)&&n("Missing comma before color stops"),{type:t,orientation:a,colorStops:h(f)};});}function a(t,r){var i=y(t);if(i){y(e.startCall)||n("Missing (");var a=r(i);return y(e.endCall)||n("Missing )"),a;}}function o(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1);}function s(){var n,r,i=l();return i&&((n=[]).push(i),r=t,y(e.comma)&&((i=l())?n.push(i):t=r)),n;}function l(){var e,t,n=((e=m("shape",/^(circle)/i,0))&&(e.style=g()||u()),e||((t=m("shape",/^(ellipse)/i,0))&&(t.style=v()||u()),t));if(n)n.at=c();else{var r=u();if(r){n=r;var i=c();i&&(n.at=i);}else{var a=d();a&&(n={type:"default-radial",at:a});}}return n;}function u(){return m("extent-keyword",e.extentKeywords,1);}function c(){if(m("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e;}}function d(){var e={x:v(),y:v()};if(e.x||e.y)return{type:"position",value:e};}function h(t){var r=t(),i=[];if(r)for(i.push(r);y(e.comma);)(r=t())?i.push(r):n("One extra comma");return i;}function f(){var t=m("hex",e.hexColor,1)||a(e.rgbaColor,function(){return{type:"rgba",value:h(p)};})||a(e.rgbColor,function(){return{type:"rgb",value:h(p)};})||m("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=v(),t;}function p(){return y(e.number)[1];}function v(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||g();}function g(){return m("px",e.pixelValue,1)||m("em",e.emValue,1);}function m(e,t,n){var r=y(t);if(r)return{type:e,value:r[n]};}function y(e){var n=/^[\n\r\t\s]+/.exec(t);n&&b(n[0].length);var r=e.exec(t);return r&&b(r[0].length),r;}function b(e){t=t.substring(e);}return function(e){var i;return t=e,i=h(r),t.length>0&&n("Invalid input not EOF"),i;};}(),tI=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tB=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tF=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,tG=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,tz={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},tV=ts(function(e){return tR("angular"===e.type?Number(e.value):tz[e.value]||0,"deg");}),tj=ts(function(e){var t=50,n=50,r="%",i="%";if((null==e?void 0:e.type)==="position"){var a=e.value,o=a.x,s=a.y;(null==o?void 0:o.type)==="position-keyword"&&("left"===o.value?t=0:"center"===o.value?t=50:"right"===o.value?t=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),(null==s?void 0:s.type)==="position-keyword"&&("left"===s.value?t=0:"center"===s.value?n=50:"right"===s.value?t=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),((null==o?void 0:o.type)==="px"||(null==o?void 0:o.type)==="%"||(null==o?void 0:o.type)==="em")&&(r=null==o?void 0:o.type,t=Number(o.value)),((null==s?void 0:s.type)==="px"||(null==s?void 0:s.type)==="%"||(null==s?void 0:s.type)==="em")&&(i=null==s?void 0:s.type,n=Number(s.value));}return{cx:tR(t,r),cy:tR(n,i)};}),tU=ts(function(e){if(e.indexOf("linear")>-1||e.indexOf("radial")>-1)return tD(e).map(function(e){var t=e.type,n=e.orientation,r=e.colorStops;!function(e){var t=e.length;e[t-1].length=null!==(a=e[t-1].length)&&void 0!==a?a:{type:"%",value:"100"},t>1&&(e[0].length=null!==(o=e[0].length)&&void 0!==o?o:{type:"%",value:"0"});for(var n=0,r=Number(e[0].length.value),i=1;i<t;i++){var a,o,s,l=null===(s=e[i].length)||void 0===s?void 0:s.value;if(!(0,G.isNil)(l)&&!(0,G.isNil)(r)){for(var u=1;u<i-n;u++)e[n+u].length={type:"%",value:"".concat(r+(Number(l)-r)*u/(i-n))};n=i,r=Number(l);}}}(r);var i=r.map(function(e){var t,n;return{offset:tR(Number(e.length.value),"%"),color:(t=e.type,n=e.value,"hex"===t?"#".concat(n):"literal"===t?n:"rgb"===t?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")"))};});if("linear-gradient"===t)return new tx(tE.LinearGradient,{angle:n?tV(n):tN,steps:i});if("radial-gradient"===t&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var a,o=tj(n[0].at),s=o.cx,l=o.cy;if(n[0].style){var u=n[0].style,c=u.type,d=u.value;"extent-keyword"===c?(tP[d]||(tP[d]=new tk(d)),a=tP[d]):a=tR(d,c);}return new tx(tE.RadialGradient,{cx:s,cy:l,size:a,steps:i});}});var t=e[0];if("("===e[1]||"("===e[2]){if("l"===t){var n=tI.exec(e);if(n){var r,i=(null===(r=n[2].match(tG))||void 0===r?void 0:r.map(function(e){return e.split(":");}))||[];return[new tx(tE.LinearGradient,{angle:tR(parseFloat(n[1]),"deg"),steps:i.map(function(e){var t=(0,I.default)(e,2),n=t[0],r=t[1];return{offset:tR(100*Number(n),"%"),color:r};})})];}}else if("r"===t){var a=function(e){var t=tB.exec(e);if(t){var n,r=(null===(n=t[4].match(tG))||void 0===n?void 0:n.map(function(e){return e.split(":");}))||[];return{cx:tR(50,"%"),cy:tR(50,"%"),steps:r.map(function(e){var t=(0,I.default)(e,2),n=t[0],r=t[1];return{offset:tR(100*Number(n),"%"),color:r};})};}return null;}(e);if(a){if(!(0,G.isString)(a))return[new tx(tE.RadialGradient,a)];e=a;}}else if("p"===t)return function(e){var t=tF.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat";}return{image:r,repetition:n};}return null;}(e);}});function tH(e){return e&&!(0,G.isNil)(e.r)&&!(0,G.isNil)(e.g)&&!(0,G.isNil)(e.b);}var tW=ts(function(e){if((t=e)&&t.image)return(0,P.default)({repetition:"repeat"},e);if((0,G.isNil)(e)&&(e=""),"transparent"===e)return tO;if("currentColor"===e)e="black";else if("none"===e)return tA;var t,n=tU(e);if(n)return n;var r=e2(e),i=[0,0,0,0];return null!==r&&(i[0]=r.r||0,i[1]=r.g||0,i[2]=r.b||0,i[3]=r.opacity),tL.apply(void 0,i);});function tY(e,t){if(tH(e)&&tH(t))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round((0,G.clamp)(t[n],0,255));return t[3]=(0,G.clamp)(t[3],0,1),"rgba(".concat(t.join(","),")");}];}function tq(e,t){if((0,G.isNil)(t))return tR(0,"px");if(isFinite(Number(t="".concat(t).trim().toLowerCase()))){if("px".search(e)>=0)return tR(Number(t),"px");if("deg".search(e)>=0)return tR(Number(t),"deg");}var n=[];t=t.replace(e,function(e){return n.push(e),"U".concat(e);});var r="U(".concat(e.source,")");return n.map(function(e){return tR(Number(t.replace(RegExp("U".concat(e),"g"),"").replace(RegExp(r,"g"),"*0")),e);})[0];}var tX=function(e){return tq(/px/g,e);},t$=ts(tX);ts(function(e){return tq(RegExp("%","g"),e);});var tK=function(e){return(0,G.isNumber)(e)||isFinite(Number(e))?tR(Number(e)||0,"px"):tq(RegExp("px|%|em|rem","g"),e);},tZ=ts(tK),tQ=function(e){return tq(RegExp("deg|rad|grad|turn","g"),e);},tJ=ts(tQ);function t0(e){var t=0;return e.unit===tl.kDegrees?t=e.value:e.unit===tl.kRadians?t=Number(e.value)*em:e.unit===tl.kTurns?t=360*Number(e.value):e.value&&(t=e.value),t;}function t1(e,t){var n;return(Array.isArray(e)?n=e.map(function(e){return Number(e);}):(0,G.isString)(e)?n=e.split(" ").map(function(e){return Number(e);}):(0,G.isNumber)(e)&&(n=[e]),2===t)?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===t?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===t&&n.length%2==1?[].concat((0,L.default)(n),(0,L.default)(n)):n;}function t2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.unit===tl.kPixels)return Number(e.value);if(e.unit===tl.kPercentage&&n){var i=n.nodeName===K.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2;}return 0;}var t3=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function t4(e){return e.toString();}var t6=function(e){return"number"==typeof e?tR(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?tR(Number(e)):tR(0);},t5=ts(t6);function t8(e,t){return[e,t,t4];}function t9(e,t){return function(n,r){return[n,r,function(n){return t4((0,G.clamp)(n,e,t));}];};}function t7(e,t){if(e.length===t.length)return[e,t,function(e){return e;}];}function ne(e){return 0===e.parsedStyle.d.totalLength&&(e.parsedStyle.d.totalLength=(0,G.getTotalLength)(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength;}function nt(e,t){return e[0]===t[0]&&e[1]===t[1];}function nn(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.acos((a+o-(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)))/(2*Math.sqrt(a)*Math.sqrt(o)));if(!s||0===Math.sin(s)||(0,G.isNumberEqual)(s,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return{xExtra:t/2*(1/Math.sin(s/2))*Math.cos(s/2-(l=l>Math.PI/2?Math.PI-l:l))-t/2||0,yExtra:t/2*(1/Math.sin(s/2))*Math.cos((u=u>Math.PI/2?Math.PI-u:u)-s/2)-t/2||0};}function nr(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])];}ts(function(e){return(0,G.isString)(e)?e.split(" ").map(t5):e.map(t5);});var ni=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r);},na=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n);var l=(r=(0,G.mod)(r,360))*ev;if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-o.x)/2,c=(e.y-o.y)/2,d={x:Math.cos(l)*u+Math.sin(l)*c,y:-Math.sin(l)*u+Math.cos(l)*c},h=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var f=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2))/(Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2)),p=(i!==a?1:-1)*Math.sqrt(f=f<0?0:f),v={x:p*(t*d.y/n),y:p*(-(n*d.x)/t)},g={x:Math.cos(l)*v.x-Math.sin(l)*v.y+(e.x+o.x)/2,y:Math.sin(l)*v.x+Math.cos(l)*v.y+(e.y+o.y)/2},m={x:(d.x-v.x)/t,y:(d.y-v.y)/n},y=ni({x:1,y:0},m),b=ni(m,{x:(-d.x-v.x)/t,y:(-d.y-v.y)/n});!a&&b>0?b-=2*Math.PI:a&&b<0&&(b+=2*Math.PI);var E=y+(b%=2*Math.PI)*s,x=t*Math.cos(E),k=n*Math.sin(E);return{x:Math.cos(l)*x-Math.sin(l)*k+g.x,y:Math.sin(l)*x+Math.cos(l)*k+g.y,ellipticalArcStartAngle:y,ellipticalArcEndAngle:y+b,ellipticalArcAngle:E,ellipticalArcCenter:g,resultantRx:t,resultantRy:n};};function no(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,d=na({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},t),h=na({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),f=h.x-d.x,p=h.y-d.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v};}function ns(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]);}function nl(e,t){return ns(e)*ns(t)?(e[0]*t[0]+e[1]*t[1])/(ns(e)*ns(t)):1;}function nu(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(nl(e,t));}function nc(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,a=e*i,o=t*i,s=n-e,l=n+e,u=r-t,c=r+t;return[["M",s,r],["C",s,r-o,n-a,u,n,u],["C",n+a,u,l,r-o,l,r],["C",l,r+o,n+a,c,n,c],["C",n-a,c,s,r+o,s,r],["Z"]];}function nd(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getLocalTransform(),a=[];switch(e.nodeName){case K.LINE:var o=e.parsedStyle,s=o.x1,l=o.y1,u=o.x2,c=o.y2;a=[["M",void 0===s?0:s,void 0===l?0:l],["L",void 0===u?0:u,void 0===c?0:c]];break;case K.CIRCLE:var d=e.parsedStyle,h=d.r,f=void 0===h?0:h,p=d.cx,v=d.cy;a=nc(f,f,void 0===p?0:p,void 0===v?0:v);break;case K.ELLIPSE:var g=e.parsedStyle,m=g.rx,y=g.ry,b=g.cx,E=g.cy;a=nc(void 0===m?0:m,void 0===y?0:y,void 0===b?0:b,void 0===E?0:E);break;case K.POLYLINE:case K.POLYGON:t=e.parsedStyle.points.points,n=e.nodeName===K.POLYGON,r=t.map(function(e,t){return[0===t?"M":"L",e[0],e[1]];}),n&&r.push(["Z"]),a=r;break;case K.RECT:var x=e.parsedStyle,k=x.width,S=void 0===k?0:k,T=x.height,M=void 0===T?0:T,w=x.x,N=x.y,C=x.radius;a=function(e,t,n,r,i){if(i){var a=(0,I.default)(i,4),o=a[0],s=a[1],l=a[2],u=a[3],c=e>0?1:-1,d=t>0?1:-1,h=c+d!==0?1:0;return[["M",c*o+n,r],["L",e-c*s+n,r],s?["A",s,s,0,0,h,e+n,d*s+r]:null,["L",e+n,t-d*l+r],l?["A",l,l,0,0,h,e+n-c*l,t+r]:null,["L",n+c*u,t+r],u?["A",u,u,0,0,h,n,t+r-d*u]:null,["L",n,d*o+r],o?["A",o,o,0,0,h,c*o+n,r]:null,["Z"]].filter(function(e){return e;});}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]];}(S,M,void 0===w?0:w,void 0===N?0:N,C&&C.some(function(e){return 0!==e;})&&C.map(function(e){return(0,G.clamp)(e,0,Math.min(Math.abs(S)/2,Math.abs(M)/2));}));break;case K.PATH:var _=e.parsedStyle.d.absolutePath;a=(0,L.default)(_);}if(a.length)return a.reduce(function(e,t){var n="";if("M"===t[0]||"L"===t[0]){var r=F.vec3.fromValues(t[1],t[2],0);i&&F.vec3.transformMat4(r,r,i),n="".concat(t[0]).concat(r[0],",").concat(r[1]);}else if("Z"===t[0])n=t[0];else if("C"===t[0]){var a=F.vec3.fromValues(t[1],t[2],0),o=F.vec3.fromValues(t[3],t[4],0),s=F.vec3.fromValues(t[5],t[6],0);i&&(F.vec3.transformMat4(a,a,i),F.vec3.transformMat4(o,o,i),F.vec3.transformMat4(s,s,i)),n="".concat(t[0]).concat(a[0],",").concat(a[1],",").concat(o[0],",").concat(o[1],",").concat(s[0],",").concat(s[1]);}else if("A"===t[0]){var l=F.vec3.fromValues(t[6],t[7],0);i&&F.vec3.transformMat4(l,l,i),n="".concat(t[0]).concat(t[1],",").concat(t[2],",").concat(t[3],",").concat(t[4],",").concat(t[5],",").concat(l[0],",").concat(l[1]);}else if("Q"===t[0]){var u=F.vec3.fromValues(t[1],t[2],0),c=F.vec3.fromValues(t[3],t[4],0);i&&(F.vec3.transformMat4(u,u,i),F.vec3.transformMat4(c,c,i)),n="".concat(t[0]).concat(t[1],",").concat(t[2],",").concat(t[3],",").concat(t[4],"}");}return e+n;},"");}var nh=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};try{t=(0,G.normalizePath)(e);}catch(n){t=(0,G.normalizePath)(""),console.error("[g]: Invalid SVG Path definition: ".concat(e));}!function(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:("C"===i||"A"===i||"Q"===i)&&(o=[n[n.length-2],n[n.length-1]]),o&&nt(a,o)&&(e.splice(t,1),t--);}}}(t);var t,n=function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break;}}return t;}(t),r=function(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]]);}return r.length>0&&n.push(r),{polygons:t,polylines:n};}(t),i=r.polygons,a=r.polylines,o=function(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var l=e[s];r=e[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var d=function(e,t){var n=t[1],r=t[2],i=(0,G.mod)(t[3]*ev,2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?-(v*r)*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,E=[(d-g)/n,(h-m)/r],x=[(-1*d-g)/n,(-1*h-m)/r],k=nu([1,0],E),S=nu(E,x);return -1>=nl(E,x)&&(S=Math.PI),nl(E,x)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:nt(e,[u,c])?0:n,ry:nt(e,[u,c])?0:r,startAngle:k,endAngle:k+S,xRotation:i,arcFlag:a,sweepFlag:o};}(n,l);c.arcParams=d;}if("Z"===u)n=i,r=e[a+1];else{var h=l.length;n=[l[h-2],l[h-1]];}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),c.currentPoint=n,t[a]&&nt(n,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]];}else if("T"===u){var g=t[s-1],m=nr(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]]);}else if("C"===u){var y=[l[1],l[2]],b=[l[3],l[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-y[0],b[1]-y[1]]);}else if("S"===u){var E=t[s-1],x=nr(E.currentPoint,p),k=[l[1],l[2]];"C"===E.command?(c.command="C",c.startTangent=[p[0]-x[0],p[1]-x[1]]):(c.command="SQ",c.startTangent=[p[0]-k[0],p[1]-k[1]]),c.endTangent=[n[0]-k[0],n[1]-k[1]];}else if("A"===u){var S=no(c,0),T=S.x,M=S.y,w=no(c,1,!1),N=w.x,C=w.y;c.startTangent=[T,M],c.endTangent=[N,C];}t.push(c);}return t;}(t),s=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=(0,j.quadBox)(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=(0,j.cubicBox)(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var d=o.arcParams;c=(0,j.arcBox)(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height));}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;});var h=(0,G.min)(n),f=(0,G.min)(r),p=(0,G.max)(n),v=(0,G.max)(r);if(0===i.length)return{x:h,y:f,width:p-h,height:v-f};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint;y[0]===h?h-=nn(m,0).xExtra:y[0]===p&&(p+=nn(m,0).xExtra),y[1]===f?f-=nn(m,t).yExtra:y[1]===v&&(v+=nn(m,t).yExtra);}return{x:h,y:f,width:p-h,height:v-f};}(o,0),l=s.x,u=s.y,c=s.width,d=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(d)?d:0}};},nf=ts(nh);function np(e){return(0,G.isString)(e)?nf(e):nh(e);}function nv(e,t,n){var r=e.curve,i=t.curve;r&&0!==r.length||(r=(0,G.path2Curve)(e.absolutePath,!1),e.curve=r),i&&0!==i.length||(i=(0,G.path2Curve)(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=(0,G.equalizeSegments)(r,i));var o=(0,G.getDrawDirection)(a[0])!==(0,G.getDrawDirection)(a[1])?(0,G.reverseCurve)(a[0]):(0,G.clonePath)(a[0]);return[o,(0,G.getRotatedCurve)(a[1],o),function(e){return e;}];}function ng(e,t){return[e.points,t.points,function(e){return e;}];}var nm=/\s*(\w+)\(([^)]*)\)/g;function ny(e){return function(t){var n=0;return e.map(function(e){return null===e?t[n++]:e;});};}function nb(e){return e;}var nE={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],nb],matrix3d:["NNNNNNNNNNNNNNNN",nb],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ny([null,null,new tM(1)]),nb],scaleX:["N",ny([null,new tM(1),new tM(1)]),ny([null,new tM(1)])],scaleY:["N",ny([new tM(1),null,new tM(1)]),ny([new tM(1),null])],scaleZ:["N",ny([new tM(1),new tM(1),null])],scale3d:["NNN",nb],skew:["Aa",null,nb],skewX:["A",null,ny([null,tN])],skewY:["A",null,ny([tN,null])],translate:["Tt",ny([null,null,tw]),nb],translateX:["T",ny([null,tw,tw]),ny([null,tw])],translateY:["T",ny([tw,null,tw]),ny([tw,null])],translateZ:["L",ny([tw,tw,null])],translate3d:["TTL",nb]};function nx(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!nE[a])return[];var s=o.map(function(e){return tR(e);});t.push({t:a,d:s});}return t;}function nk(e){if(Array.isArray(e))return nx(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nm.lastIndex=0;(t=nm.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nE[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tN:tQ(e);},N:t6,T:tK,L:tX})[d.toUpperCase()](c):({a:tN,n:l[0],t:tw})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nm.lastIndex===e.length)return n;}return[];}function nS(e){switch(e.t){case"rotateX":return[1,0,0,0,0,Math.cos(i=t0(e.d[0])*ev),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return[Math.cos(i=t0(e.d[0])*ev),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return[Math.cos(i=t0(e.d[0])*ev),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=t0(e.d[3])*ev;var t,n,r,i,a=t*t+n*n+r*r;if(0===a)t=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);t/=o,n/=o,r/=o;}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(t*n*u+r*l),2*(t*r*u-n*l),0,2*(t*n*u-r*l),1-2*(t*t+r*r)*u,2*(n*r*u+t*l),0,2*(t*r*u+n*l),2*(n*r*u-t*l),1-2*(t*t+n*n)*u,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var c=t0(e.d[0])*ev;return[1,Math.tan(t0(e.d[1])*ev),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return[1,0,0,0,Math.tan(i=t0(e.d[0])*ev),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return[1,Math.tan(i=t0(e.d[0])*ev),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t2(e.d[0],0,null)||0,n=t2(e.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t2(e.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=t2(e.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=t2(e.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t2(e.d[0],0,null)||0,n=t2(e.d[1],0,null)||0,r=t2(e.d[2],0,null)||0,1];case"perspective":var d=t2(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(e){return e.value;});}}function nT(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]];}function nM(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return!function(e,t,n,r,i,a){if(!(!function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0;}(ex,e)||(F.mat4.copy(ek,ex),ek[3]=0,ek[7]=0,ek[11]=0,ek[15]=1,1e-8>Math.abs(F.mat4.determinant(ek))))){var o=ex[3],s=ex[7],l=ex[11],u=ex[12],c=ex[13],d=ex[14],h=ex[15];if(0!==o||0!==s||0!==l){if(eS[0]=o,eS[1]=s,eS[2]=l,eS[3]=h,!F.mat4.invert(ek,ek))return;F.mat4.transpose(ek,ek),F.vec4.transformMat4(i,eS,ek);}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=c,t[2]=d,eT[0][0]=ex[0],eT[0][1]=ex[1],eT[0][2]=ex[2],eT[1][0]=ex[4],eT[1][1]=ex[5],eT[1][2]=ex[6],eT[2][0]=ex[8],eT[2][1]=ex[9],eT[2][2]=ex[10],n[0]=F.vec3.length(eT[0]),F.vec3.normalize(eT[0],eT[0]),r[0]=F.vec3.dot(eT[0],eT[1]),ew(eT[1],eT[1],eT[0],1,-r[0]),n[1]=F.vec3.length(eT[1]),F.vec3.normalize(eT[1],eT[1]),r[0]/=n[1],r[1]=F.vec3.dot(eT[0],eT[2]),ew(eT[2],eT[2],eT[0],1,-r[1]),r[2]=F.vec3.dot(eT[1],eT[2]),ew(eT[2],eT[2],eT[1],1,-r[2]),n[2]=F.vec3.length(eT[2]),F.vec3.normalize(eT[2],eT[2]),r[1]/=n[2],r[2]/=n[2],F.vec3.cross(eM,eT[1],eT[2]),0>F.vec3.dot(eT[0],eM))for(var f=0;f<3;f++)n[f]*=-1,eT[f][0]*=-1,eT[f][1]*=-1,eT[f][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+eT[0][0]-eT[1][1]-eT[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-eT[0][0]+eT[1][1]-eT[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-eT[0][0]-eT[1][1]+eT[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+eT[0][0]+eT[1][1]+eT[2][2],0)),eT[2][1]>eT[1][2]&&(a[0]=-a[0]),eT[0][2]>eT[2][0]&&(a[1]=-a[1]),eT[1][0]>eT[0][1]&&(a[2]=-a[2]);}}(0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(nS).reduce(nT),t,n,r,i,a),[[t,n,r,a,i]];}var nw=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n;}return function(t,n,r,i,a){for(var o,s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)s[l][3]=a[l];for(var u=0;u<3;u++)for(var c=0;c<3;c++)s[3][u]+=t[c]*s[c][u];var d=i[0],h=i[1],f=i[2],p=i[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+f*f),v[0][1]=2*(d*h-f*p),v[0][2]=2*(d*f+h*p),v[1][0]=2*(d*h+f*p),v[1][1]=1-2*(d*d+f*f),v[1][2]=2*(h*f-d*p),v[2][0]=2*(d*f-h*p),v[2][1]=2*(h*f+d*p),v[2][2]=1-2*(d*d+h*h),s=e(s,v);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],s=e(s,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],s=e(s,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],s=e(s,g));for(var m=0;m<3;m++)for(var y=0;y<3;y++)s[m][y]*=n[m];return 0===(o=s)[0][2]&&0===o[0][3]&&0===o[1][2]&&0===o[1][3]&&0===o[2][0]&&0===o[2][1]&&1===o[2][2]&&0===o[2][3]&&0===o[3][2]&&1===o[3][3]?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3]);};}();function nN(e){return e.toFixed(6).replace(".000000","");}function nC(e,t){var n,r;return(e.decompositionPair!==t&&(e.decompositionPair=t,n=nM(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=nM(t)),null===n[0]||null===r[0])?[[!1],[!0],function(n){return n?t[0].d:e[0].d;}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=function(e,t,n){var r=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n;}(e,t);r=(0,G.clamp)(r,-1,1);var i=[];if(1===r)i=e;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i;}(n[0][3],r[0][3],e[5]);return nw(e[0],e[1],e[2],t,e[4]).map(nN).join(",");}]);}function n_(e){return e.replace(/[XY]/,"");}function nP(e){return e.replace(/(X|Y|Z|3d)?$/,"3d");}function nA(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=0;i<e.length;i++)!function(){var n=e[i],r=n.t,a=n.d,o="scale"===r.substring(0,5)?1:0;t.push({t:r,d:a.map(function(e){return"number"==typeof e?tR(o):tR(o,e.unit);})});}();}var a=[],o=[],s=[];if(e.length!==t.length){var l=nC(e,t);a=[l[0]],o=[l[1]],s=[["matrix",[l[2]]]];}else for(var u=0;u<e.length;u++){var c=e[u].t,d=t[u].t,h=e[u].d,f=t[u].d,p=nE[c],v=nE[d],g=void 0;if("perspective"===c&&"perspective"===d||("matrix"===c||"matrix3d"===c)&&("matrix"===d||"matrix3d"===d)){var m=nC([e[u]],[t[u]]);a.push(m[0]),o.push(m[1]),s.push(["matrix",[m[2]]]);continue;}if(c===d)g=c;else if(p[2]&&v[2]&&n_(c)===n_(d))g=n_(c),h=p[2](h),f=v[2](f);else if(p[1]&&v[1]&&nP(c)===nP(d))g=nP(c),h=p[1](h),f=v[1](f);else{var y=nC(e,t);a=[y[0]],o=[y[1]],s=[["matrix",[y[2]]]];break;}for(var b=[],E=[],x=[],k=0;k<h.length;k++){var S=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=e.value||0,s=t.value||0,l=tT(e.unit),u=e.convertTo(l),c=t.convertTo(l);return u&&c?(o=u.value,s=c.value,a=tm(e.unit)):(tM.isLength(e.unit)||tM.isLength(t.unit))&&(o=t2(e,i,n),s=t2(t,i,n),a="px"),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a;}];}(h[k],f[k],n,!1,k);b[k]=S[0],E[k]=S[1],x.push(S[2]);}a.push(b),o.push(E),s.push([g,x]);}if(r){var T=a;a=o,o=T;}return[a,o,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return s[t][1][n](e);}).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),"matrix3d"===s[t][0]&&6===n.split(",").length&&(s[t][0]="matrix"),"".concat(s[t][0],"(").concat(n,")");}).join(" ");}];}var nO=ts(function(e){if((0,G.isString)(e)){if("text-anchor"===e)return[tR(0,"px"),tR(0,"px")];var t=e.split(" ");return(1===t.length&&("top"===t[0]||"bottom"===t[0]?(t[1]=t[0],t[0]="center"):t[1]="center"),2!==t.length)?null:[tZ(nL(t[0])),tZ(nL(t[1]))];}return[tR(e[0]||0,"px"),tR(e[1]||0,"px")];});function nL(e){return"center"===e?"50%":"left"===e||"top"===e?"0%":"right"===e||"bottom"===e?"100%":e;}var nR=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:eG.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:eG.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:eG.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:eG.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:eG.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:eG.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:eG.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:eG.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:eG.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:eG.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:eG.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:eG.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:eG.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:eG.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:eG.FILTER},{n:"clipPath",syntax:eG.DEFINED_PATH},{n:"textPath",syntax:eG.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:eG.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:eG.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:eG.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:eG.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:eG.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:eG.COORDINATE},{n:"y1",int:!0,l:!0,syntax:eG.COORDINATE},{n:"z1",int:!0,l:!0,syntax:eG.COORDINATE},{n:"x2",int:!0,l:!0,syntax:eG.COORDINATE},{n:"y2",int:!0,l:!0,syntax:eG.COORDINATE},{n:"z2",int:!0,l:!0,syntax:eG.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:eG.PATH,p:50},{n:"points",int:!0,l:!0,syntax:eG.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:eG.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:eG.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:eG.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:eG.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:eG.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:eG.NUMBER,d:function(e){return e===K.PATH||e===K.POLYGON||e===K.POLYLINE?"4":"10";}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:eG.MARKER},{n:"markerEnd",syntax:eG.MARKER},{n:"markerMid",syntax:eG.MARKER},{n:"markerStartOffset",syntax:eG.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:eG.LENGTH,l:!0,int:!0,d:"0"}],nD=new Set(nR.filter(function(e){return!!e.l;}).map(function(e){return e.n;})),nI={},nB=(0,O.default)(function e(t){var n=this;(0,A.default)(this,e),this.runtime=t,nR.forEach(function(e){n.registerMetadata(e);});},[{key:"registerMetadata",value:function(e){[e.n].concat((0,L.default)(e.a||[])).forEach(function(t){nI[t]=e;});}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e];}},{key:"processProperties",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var i=e.parsedStyle.clipPath,a=e.parsedStyle.offsetPath;!function(e,t){var n=nF(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r]);}(e,t);var o=!!r.forceUpdateGeometry;if(!o){for(var s in t)if(nD.has(s)){o=!0;break;}}var l=nF(e);l.has("fill")&&t.fill&&(e.parsedStyle.fill=tW(t.fill)),l.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=tW(t.stroke)),l.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=tW(t.shadowColor)),l.has("filter")&&t.filter&&(e.parsedStyle.filter=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;(e=n.exec(t))&&e.index===i;)if(i=e.index+e[0].length,t3.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map(function(e){return tq(/deg|rad|grad|turn|px|%/g,e)||tW(e);})}),n.lastIndex===t.length)return r;return[];}(t.filter)),l.has("radius")&&!(0,G.isNil)(t.radius)&&(e.parsedStyle.radius=t1(t.radius,4)),l.has("lineDash")&&!(0,G.isNil)(t.lineDash)&&(e.parsedStyle.lineDash=t1(t.lineDash,"even")),l.has("points")&&t.points&&(e.parsedStyle.points=(n=t.points,{points:(0,G.isString)(n)?n.split(" ").map(function(e){var t=e.split(","),n=(0,I.default)(t,2),r=n[0],i=n[1];return[Number(r),Number(i)];}):n,totalLength:0,segments:[]})),l.has("d")&&""===t.d&&(e.parsedStyle.d=(0,P.default)({},eF)),l.has("d")&&t.d&&(e.parsedStyle.d=np(t.d)),l.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[eG.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),l.has("clipPath")&&!(0,G.isUndefined)(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[eG.DEFINED_PATH].calculator("clipPath",i,t.clipPath,e,this.runtime),l.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[eG.DEFINED_PATH].calculator("offsetPath",a,t.offsetPath,e,this.runtime),l.has("transform")&&t.transform&&(e.parsedStyle.transform=function(e){if(Array.isArray(e))return nx(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nm.lastIndex=0;(t=nm.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nE[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tN:tJ(e);},N:t5,T:tZ,L:t$})[d.toUpperCase()](c):({a:tN,n:l[0],t:tw})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nm.lastIndex===e.length)return n;}return[];}(t.transform)),l.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=nO(t.transformOrigin)),l.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[eG.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),l.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[eG.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),l.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[eG.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),l.has("zIndex")&&!(0,G.isNil)(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[eG.Z_INDEX].postProcessor(e),l.has("offsetDistance")&&!(0,G.isNil)(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[eG.OFFSET_DISTANCE].postProcessor(e),l.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[eG.TRANSFORM].postProcessor(e),l.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[eG.TRANSFORM_ORIGIN].postProcessor(e),o&&(e.geometry.dirty=!0,e.dirty(!0,!0),r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e));}},{key:"updateGeometry",value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||(r.contentBounds=new ei),r.renderBounds||(r.renderBounds=new ei);var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=a.cy,l=a.cz,u=a.hwidth,c=void 0===u?0:u,d=a.hheight,h=void 0===d?0:d,f=a.hdepth,p=[Math.abs(c),Math.abs(h),void 0===f?0:f],v=i.stroke,g=i.lineWidth,m=i.increasedLineWidthForHitTesting,y=i.shadowType,b=void 0===y?"outer":y,E=i.shadowColor,x=i.filter,k=i.transformOrigin,S=[void 0===o?0:o,void 0===s?0:s,void 0===l?0:l];r.contentBounds.update(S,p);var T=t===K.POLYLINE||t===K.POLYGON||t===K.PATH?Math.SQRT2:.5;if(v&&!v.isNone){var M=(((void 0===g?1:g)||0)+((void 0===m?0:m)||0))*T;p[0]+=M,p[1]+=M;}if(r.renderBounds.update(S,p),E&&b&&"inner"!==b){var w=r.renderBounds,N=w.min,C=w.max,_=i.shadowBlur,P=i.shadowOffsetX,A=i.shadowOffsetY,O=_||0,L=P||0,R=A||0,D=N[0]-O+L,I=C[0]+O+L,B=N[1]-O+R,G=C[1]+O+R;N[0]=Math.min(N[0],D),C[0]=Math.max(C[0],I),N[1]=Math.min(N[1],B),C[1]=Math.max(C[1],G),r.renderBounds.setMinMax(N,C);}(void 0===x?[]:x).forEach(function(e){var t=e.name,n=e.params;if("blur"===t){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,F.vec3.add(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]));}else if("drop-shadow"===t){var a=n[0].value,o=n[1].value,s=n[2].value,l=r.renderBounds,u=l.min,c=l.max,d=u[0]-s+a,h=c[0]+s+a,f=u[1]-s+o,p=c[1]+s+o;u[0]=Math.min(u[0],d),c[0]=Math.max(c[0],h),u[1]=Math.min(u[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(u,c);}}),e.geometry.dirty=!1;var z=h<0,V=(c<0?-1:1)*(k?t2(k[0],0,e,!0):0),j=(z?-1:1)*(k?t2(k[1],1,e,!0):0);(V||j)&&e.setOrigin(V,j);}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===K.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===K.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR));}}]);function nF(e){return e.constructor.PARSED_STYLE_LIST;}var nG=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t8;},[{key:"calculator",value:function(e,t,n,r){return t0(n);}}]),nz=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n,r,i){return n instanceof tk&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),"clipPath"===e&&r.forEach(function(e){0===e.childNodes.length&&i.sceneGraphService.dirtyToRoot(e);}),n;}}]),nV=(0,O.default)(function e(){(0,A.default)(this,e),this.parser=tW,this.mixer=tY;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tk?"none"===n.value?tA:tO:n;}}]),nj=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n){return n instanceof tk?[]:n;}}]);function nU(e){var t=e.parsedStyle.fontSize;return(0,G.isNil)(t)?null:t;}var nH=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t8;},[{key:"calculator",value:function(e,t,n,r,i){if((0,G.isNumber)(n))return n;if(!tM.isRelativeUnit(n.unit))return n.value;if(n.unit===tl.kPercentage)return 0;if(n.unit===tl.kEms){if(r.parentNode){var a,o=nU(r.parentNode);if(o)return o*n.value;}return 0;}if(n.unit===tl.kRems){if(null!=r&&null!==(a=r.ownerDocument)&&void 0!==a&&a.documentElement){var s=nU(r.ownerDocument.documentElement);if(s)return s*n.value;}return 0;}}}]),nW=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t7;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nY=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t7;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nq=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){n instanceof tk&&(n=null);var i,a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a;}}]),nX=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t8;},[{key:"calculator",value:function(e,t,n){return n.value;}}]),n$=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t9(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===K.LINE||i===K.PATH||i===K.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y);}}}}]),nK=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=t9(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nZ=(0,O.default)(function e(){(0,A.default)(this,e),this.parser=np,this.mixer=nv;},[{key:"calculator",value:function(e,t,n){return n instanceof tk&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new eu(0,0,0,0)}:n;}}]),nQ=(0,O.default)(function e(){(0,A.default)(this,e),this.mixer=ng;}),nJ=function(e){function t(){var e;(0,A.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,R.default)(this,t,[].concat(r))).mixer=t9(0,1/0),e;}return(0,D.default)(t,e),(0,O.default)(t);}(nH),n0=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n instanceof tk?"unset"===n.value?"":n.value:"".concat(n);}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||"";}}]),n1=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a;}return n.value;}}]),n2=new WeakMap,n3="undefined"!=typeof window&&void 0!==window.document;function n4(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t);}}return n-r;}function n6(e,t){if(n3)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t);}var n5={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},n8="object"==typeof performance&&performance.now?performance:Date;function n9(e){return e.nodeName===K.FRAGMENT||e.getRootNode().nodeName===K.FRAGMENT;}var n7=1,re="object"==typeof self&&self.self===self?self:"object"==typeof q&&q.global===q?q:{},rt=Date.now(),rn={},rr=Date.now(),ri=function(e){if("function"!=typeof e)throw TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-rr,r=n7++;return rn[r]=e,Object.keys(rn).length>1||setTimeout(function(){rr=t;var e=rn;rn={},Object.keys(e).forEach(function(t){return e[t](re.performance&&"function"==typeof re.performance.now?re.performance.now():Date.now()-rt);});},n>16?0:16-n),r;},ra=function(e){return"string"!=typeof e?ri:""===e?re.requestAnimationFrame:re["".concat(e,"RequestAnimationFrame")];},ro=function(e,t){for(var n=0;void 0!==e[n];){if(t(e[n]))return e[n];n+=1;}}(["","webkit","moz","ms","o"],function(e){return!!ra(e);}),rs=ra(ro),rl="string"!=typeof ro?function(e){delete rn[e];}:""===ro?re.cancelAnimationFrame:re["".concat(ro,"CancelAnimationFrame")]||re["".concat(ro,"CancelRequestAnimationFrame")];re.requestAnimationFrame=rs,re.cancelAnimationFrame=rl;var ru=(0,O.default)(function e(){(0,A.default)(this,e),this.callbacks=[];},[{key:"getCallbacksNum",value:function(){return this.callbacks.length;}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(e){return e.apply(void 0,t);}));}}]),rc=(0,O.default)(function e(){(0,A.default)(this,e),this.callbacks=[];},[{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:(b=(0,H.default)((0,U.default)().mark(function e(){var t,n,r,i,a=arguments;return(0,U.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=6;break;}return e.next=1,(t=this.callbacks)[0].apply(t,a);case 1:n=e.sent,r=0;case 2:if(!(r<this.callbacks.length-1)){e.next=5;break;}return i=this.callbacks[r],e.next=3,i(n);case 3:n=e.sent;case 4:r++,e.next=2;break;case 5:return e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop();}},e,this);})),function(){return b.apply(this,arguments);})}]),rd=(0,O.default)(function e(){(0,A.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=arguments;this.callbacks.forEach(function(e){e.apply(void 0,r);});}}]),rh=(0,O.default)(function e(){(0,A.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=0;a<this.callbacks.length-1;a++)i=(0,this.callbacks[a])(i);return i;}return null;}}]),rf=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rp=/([\"\'])[^\'\"]+\1/;function rv(e,t,n){return F.mat4.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e;}var rg=F.mat4.create(),rm=F.mat4.create(),ry={scale:function(e){F.mat4.fromScaling(rg,[e[0].value,e[1].value,1]);},scaleX:function(e){F.mat4.fromScaling(rg,[e[0].value,1,1]);},scaleY:function(e){F.mat4.fromScaling(rg,[1,e[0].value,1]);},scaleZ:function(e){F.mat4.fromScaling(rg,[1,1,e[0].value]);},scale3d:function(e){F.mat4.fromScaling(rg,[e[0].value,e[1].value,e[2].value]);},translate:function(e){F.mat4.fromTranslation(rg,[e[0].value,e[1].value,0]);},translateX:function(e){F.mat4.fromTranslation(rg,[e[0].value,0,0]);},translateY:function(e){F.mat4.fromTranslation(rg,[0,e[0].value,0]);},translateZ:function(e){F.mat4.fromTranslation(rg,[0,0,e[0].value]);},translate3d:function(e){F.mat4.fromTranslation(rg,[e[0].value,e[1].value,e[2].value]);},rotate:function(e){F.mat4.fromZRotation(rg,t0(e[0])*ev);},rotateX:function(e){F.mat4.fromXRotation(rg,t0(e[0])*ev);},rotateY:function(e){F.mat4.fromYRotation(rg,t0(e[0])*ev);},rotateZ:function(e){F.mat4.fromZRotation(rg,t0(e[0])*ev);},rotate3d:function(e){F.mat4.fromRotation(rg,t0(e[3])*ev,[e[0].value,e[1].value,e[2].value]);},skew:function(e){rv(rg,e[0].value*ev,e[1].value*ev);},skewX:function(e){rv(rg,e[0].value*ev,0);},skewY:function(e){rv(rg,0,e[0].value*ev);},matrix:function(e){F.mat4.set(rg,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1);},matrix3d:function(e){F.mat4.set.apply(F.mat4,[rg].concat((0,L.default)(e.map(function(e){return e.value;}))));}},rb=F.vec3.fromValues(1,1,1),rE=F.vec3.create(),rx={translate:function(e,t){id.sceneGraphService.setLocalScale(e,rb,!1),id.sceneGraphService.setLocalEulerAngles(e,rE,void 0,void 0,!1),id.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),id.sceneGraphService.dirtyLocalTransform(e,e.transformable);}},rk=(0,O.default)(function e(){(0,A.default)(this,e),this.parser=nk,this.mixer=nA;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tk?[]:n;}},{key:"postProcessor",value:function(e){!function(e,t){if(e.length){if(1===e.length&&rx[e[0].t]){rx[e[0].t](t,e[0].d);return;}for(var n=F.mat4.identity(rm),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=ry[a];s&&(s(o),F.mat4.mul(n,n,rg));}t.setLocalTransform(n);}else t.resetLocalTransform();t.getLocalTransform();}(e.parsedStyle.transform,e);}}]),rS=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===tl.kPixels&&t[1].unit===tl.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds();}}]),rT=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n.value;}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&t.dirty(),r&&(r.dirty=!0,r.dirtyReason=eL.Z_INDEX_CHANGED);}}}]),rM=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.r,a=void 0===i?0:i;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:a,hheight:a};}}]),rw=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.rx,a=e.ry;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:void 0===i?0:i,hheight:void 0===a?0:a};}}]),rN=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.min(n,i),s=(Math.max(t,r)-a)/2,l=(Math.max(n,i)-o)/2;return{cx:a+s,cy:o+l,hwidth:s,hheight:l};}}]),rC=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width,a=t.height,o=i/2,s=a/2;return{cx:n+o,cy:r+s,hwidth:o,hheight:s};}}]),r_=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e){if(e.points&&(0,G.isArray)(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,(0,L.default)(t.map(function(e){return e[0];}))),r=Math.max.apply(Math,(0,L.default)(t.map(function(e){return e[0];}))),i=Math.min.apply(Math,(0,L.default)(t.map(function(e){return e[1];}))),a=Math.max.apply(Math,(0,L.default)(t.map(function(e){return e[1];}))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s};}return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rP=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.src,a=e.width,o=e.height,s=void 0===a?0:a,l=void 0===o?0:o;return!i||(0,G.isString)(i)||(s||(s=i.width,e.width=s),l||(l=i.height,e.height=l)),{cx:(void 0===n?0:n)+s/2,cy:(void 0===r?0:r)+l/2,hwidth:s/2,hheight:l/2};}}]),rA=(0,O.default)(function e(t){(0,A.default)(this,e),this.globalRuntime=t;},[{key:"isReadyToMeasure",value:function(e,t){return e.text;}},{key:"update",value:function(e,t){var n,r=e.text,i=e.textAlign,a=void 0===i?"start":i,o=e.lineWidth,s=void 0===o?1:o,l=e.textBaseline,u=void 0===l?"alphabetic":l,c=e.dx,d=void 0===c?0:c,h=e.dy,f=void 0===h?0:h,p=e.x,v=e.y;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var g=((null==t||null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,m=this.globalRuntime.textService.measureText(r,e,g);e.metrics=m;var y=m.width,b=m.height,E=y/2,x=b/2,k=(void 0===p?0:p)+E;"center"===a||"middle"===a?k+=s/2-E:("right"===a||"end"===a)&&(k+=s-2*E);var S=(void 0===v?0:v)-x;return"middle"===u?S+=x:"top"===u||"hanging"===u?S+=2*x:"alphabetic"===u||("bottom"===u||"ideographic"===u)&&(S+=0),d&&(k+=d),f&&(S+=f),{cx:k,cy:S,hwidth:E,hheight:x};}}]),rO=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rL=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.width,a=void 0===i?0:i,o=e.height,s=void 0===o?0:o;return{cx:(void 0===n?0:n)+a/2,cy:(void 0===r?0:r)+s/2,hwidth:a/2,hheight:s/2};}}]),rR=(0,O.default)(function e(t){(0,A.default)(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new el,this.page=new el,this.canvas=new el,this.viewport=new el,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t;},[{key:"name",get:function(){return this.type;}},{key:"layerX",get:function(){return this.layer.x;}},{key:"layerY",get:function(){return this.layer.y;}},{key:"pageX",get:function(){return this.page.x;}},{key:"pageY",get:function(){return this.page.y;}},{key:"x",get:function(){return this.canvas.x;}},{key:"y",get:function(){return this.canvas.y;}},{key:"canvasX",get:function(){return this.canvas.x;}},{key:"canvasY",get:function(){return this.canvas.y;}},{key:"viewportX",get:function(){return this.viewport.x;}},{key:"viewportY",get:function(){return this.viewport.y;}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"propagationPath",get:function(){return this.composedPath();}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function(){this.propagationStopped=!0;}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw Error(ec);}}]),rD=function(e){function t(){var e;(0,A.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,R.default)(this,t,[].concat(r))).client=new el,e.movement=new el,e.offset=new el,e.global=new el,e.screen=new el,e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clientX",get:function(){return this.client.x;}},{key:"clientY",get:function(){return this.client.y;}},{key:"movementX",get:function(){return this.movement.x;}},{key:"movementY",get:function(){return this.movement.y;}},{key:"offsetX",get:function(){return this.offset.x;}},{key:"offsetY",get:function(){return this.offset.y;}},{key:"globalX",get:function(){return this.global.x;}},{key:"globalY",get:function(){return this.global.y;}},{key:"screenX",get:function(){return this.screen.x;}},{key:"screenY",get:function(){return this.screen.y;}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e);}},{key:"initMouseEvent",value:function(){throw Error(ec);}}]);}(rR),rI=function(e){function t(){var e;(0,A.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,R.default)(this,t,[].concat(r))).width=0,e.height=0,e.isPrimary=!1,e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function(){throw Error("getPredictedEvents is not supported!");}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this);}}]);}(rD),rB=function(e){function t(){return(0,A.default)(this,t),(0,R.default)(this,t,arguments);}return(0,D.default)(t,e),(0,O.default)(t,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this);}}]);}(rD),rF=function(e){function t(e,n){var r;return(0,A.default)(this,t),(r=(0,R.default)(this,t,[null])).type=e,r.detail=n,Object.assign(r,n),r;}return(0,D.default)(t,e),(0,O.default)(t);}(rR),rG=(0,O.default)(function e(){(0,A.default)(this,e),this.emitter=new B.default;},[{key:"on",value:function(e,t,n){return this.addEventListener(e,t,n),this;}},{key:"addEventListener",value:function(e,t,n){var r=!1,i=!1;if((0,G.isBoolean)(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o;}r&&(e+="capture"),t=(0,G.isFunction)(t)?t:t.handleEvent;var s=(0,G.isFunction)(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this;}},{key:"off",value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this;}},{key:"removeAllEventListeners",value:function(){var e;null===(e=this.emitter)||void 0===e||e.removeAllListeners();}},{key:"removeEventListener",value:function(e,t,n){if(!this.emitter)return this;((0,G.isBoolean)(n)?n:null==n?void 0:n.capture)&&(e+="capture"),t=(0,G.isFunction)(t)?t:null===(r=t)||void 0===r?void 0:r.handleEvent;var r,i=(0,G.isFunction)(t)?void 0:t;return this.emitter.off(e,t,i),this;}},{key:"emit",value:function(e,t){this.dispatchEvent(new rF(e,t));}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e);}},{key:"dispatchEvent",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;if(t=this.document?this:this.defaultView?this.defaultView:null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView){if(e.manager=t.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],r||(e.target=this),e.manager.dispatchEvent(e,e.type,r);}else this.dispatchEventToSelf(e);return!e.defaultPrevented;}}]),rz=function(e){function t(){var e;(0,A.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,R.default)(this,t,[].concat(r))).shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e.destroyed=!1,e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"textContent",get:function(){var e="";this.nodeName===K.TEXT&&(e+=this.style.text);var t,n=(0,W.default)(this.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.nodeName===K.TEXT?e+=r.nodeValue:e+=r.textContent;}}catch(e){n.e(e);}finally{n.f();}return e;},set:function(e){var t=this;this.childNodes.slice().forEach(function(e){t.removeChild(e);}),this.nodeName===K.TEXT&&(this.style.text="".concat(e));}},{key:"getRootNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this;}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0;}},{key:"isDefaultNamespace",value:function(e){throw Error(ec);}},{key:"lookupNamespaceURI",value:function(e){throw Error(ec);}},{key:"lookupPrefix",value:function(e){throw Error(ec);}},{key:"normalize",value:function(){throw Error(ec);}},{key:"isEqualNode",value:function(e){return this===e;}},{key:"isSameNode",value:function(e){return this.isEqualNode(e);}},{key:"parent",get:function(){return this.parentNode;}},{key:"parentElement",get:function(){return null;}},{key:"nextSibling",get:function(){return null;}},{key:"previousSibling",get:function(){return null;}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null;}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null;}},{key:"compareDocumentPosition",value:function(e){if(e===this)return 0;for(var n,r=e,i=this,a=[r],o=[i];null!==(n=r.parentNode)&&void 0!==n?n:i.parentNode;)r=r.parentNode?(a.push(r.parentNode),r.parentNode):r,i=i.parentNode?(o.push(i.parentNode),i.parentNode):i;if(r!==i)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=a.length>o.length?a:o,l=s===a?o:a;if(s[s.length-l.length]===l[0])return s===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var u=s.length-l.length,c=l.length-1;c>=0;c--){var d=l[c],h=s[u+c];if(h!==d){var f=d.parentNode.childNodes;if(f.indexOf(d)<f.indexOf(h)){if(l===a)return t.DOCUMENT_POSITION_PRECEDING;return t.DOCUMENT_POSITION_FOLLOWING;}if(s===a)return t.DOCUMENT_POSITION_PRECEDING;break;}}return t.DOCUMENT_POSITION_FOLLOWING;}},{key:"contain",value:function(e){return this.contains(e);}},{key:"contains",value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t;}},{key:"getAncestor",value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t;}},{key:"forEach",value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(!1===e(n))break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r]);}}}],[{key:"isNode",value:function(e){return!!e.childNodes;}}]);}(rG);rz.DOCUMENT_POSITION_DISCONNECTED=1,rz.DOCUMENT_POSITION_PRECEDING=2,rz.DOCUMENT_POSITION_FOLLOWING=4,rz.DOCUMENT_POSITION_CONTAINS=8,rz.DOCUMENT_POSITION_CONTAINED_BY=16,rz.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var rV=(0,O.default)(function e(t,n){var r=this;(0,A.default)(this,e),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=F.mat4.create(),this.tmpVec3=F.vec3.create(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)r.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;r.dispatchEvent(t,n?"rightdown":"mousedown");}r.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t);},this.onPointerUp=function(e){var t=n8.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup");}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var l=o;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var u=2===n.button;r.notifyTarget(n,u?"rightupoutside":"mouseupoutside");}rz.isNode(l)&&(l=l.parentNode);}delete a.pressTargetsByButton[e.button],s=l;}if(s){var c,d=r.clonePointerEvent(n,"click");d.target=s,d.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});var h=r.context.renderingContext.root.ownerDocument.defaultView,f=a.clicksByButton[e.button];f.target===d.target&&t-f.timeStamp<h.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=d.target,f.timeStamp=t,d.detail=f.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==d.pointerType&&"touch"!==d.pointerType||r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d);}r.freeEvent(n);},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o="mousemove"===e.type?"mouseout":"pointerout",s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!t.composedPath().includes(a)){var l=r.createPointerEvent(e,"pointerleave",a||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!t.composedPath().includes(l.target);)l.currentTarget=l.target,r.notifyTarget(l),n&&r.notifyTarget(l,"mouseleave"),rz.isNode(l.target)&&(l.target=l.target.parentNode);r.freeEvent(l);}r.freeEvent(s);}if(a!==t.target){var u="mousemove"===e.type?"mouseover":"pointerover",c=r.clonePointerEvent(t,u);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var d=a&&rz.isNode(a)&&a.parentNode;d&&d!==(rz.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&d!==t.target;)d=d.parentNode;if(!d||d===(rz.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var h=r.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==a&&h.target!==(rz.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),n&&r.notifyTarget(h,"mouseenter"),rz.isNode(h.target)&&(h.target=h.target.parentNode);r.freeEvent(h);}r.freeEvent(c);}r.dispatchEvent(t,"pointermove"),"touch"===t.pointerType&&r.dispatchEvent(t,"touchmove"),n&&(r.dispatchEvent(t,"mousemove"),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t);},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(e,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(rz.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),rz.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o);}r.cursor=null;},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(rz.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),rz.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a);},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||("mouse"===i.pointerType||"pen"===i.pointerType)&&r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),rz.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button];}r.freeEvent(i);},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t);},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t);}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t);},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick);}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear();}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a);}return{scaleX:t,scaleY:n,bbox:e};}},{key:"client2Viewport",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new el((e.x-((null==i?void 0:i.left)||0))/n,(e.y-((null==i?void 0:i.top)||0))/r);}},{key:"viewport2Client",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new el((e.x+((null==i?void 0:i.left)||0))*n,(e.y+((null==i?void 0:i.top)||0))*r);}},{key:"viewport2Canvas",value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),l=r.getWorldTransform(),u=F.mat4.multiply(this.tmpMatrix,l,s),c=F.vec3.set(this.tmpVec3,t/a*2-1,(1-n/o)*2-1,0);return F.vec3.transformMat4(c,c,u),new el(c[0],c[1]);}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=F.mat4.multiply(this.tmpMatrix,n,r),a=F.vec3.set(this.tmpVec3,e.x,e.y,0);F.vec3.transformMat4(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,l=o.height;return new el((a[0]+1)/2*s,(1-(a[1]+1)/2)*l);}},{key:"setPickHandler",value:function(e){this.pickHandler=e;}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority;});}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type));}}},{key:"dispatchEvent",value:function(e,t,n){if(n){e.eventPhase=e.AT_TARGET;var r=this.rootTarget.defaultView||null;e.currentTarget=r,this.notifyListeners(e,t);}else e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;}}}},{key:"propagationPath",value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<2048&&e!==this.rootTarget;r++)rz.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t;}},{key:"hitTest",value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null;}},{key:"isNativeEventFromCanvas",value:function(e,t){var n,r=null==t?void 0:t.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r);}return null!=t&&!!t.composedPath&&t.composedPath().indexOf(e)>-1;}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i;}return null;}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY});}},{key:"createPointerEvent",value:function(e,t,n,r){var i=this.allocateEvent(rI);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof t&&(i.type=t),i;}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(rB);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t;}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e];}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(rB);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t;}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(rI);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!=t?t:n.type,n;}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist;}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset);}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=n8.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport);}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t;}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e);}},{key:"notifyTarget",value:function(e,t){t=null!=t?t:e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t);}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r){if("fn"in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e);}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(r===this.rootTarget||rz.isNode(r)&&r.parentNode===t)t=e[n];else break;}return t;}},{key:"getCursor",value:function(e){for(var t=e;t;){var n=!!t.getAttribute&&t.getAttribute("cursor");if(n)return n;t=rz.isNode(t)&&t.parentNode;}}}]),rj=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||id.offscreenCanvas)this.canvas=e||id.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,P.default)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,P.default)({willReadFrequently:!0},t)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"));}catch(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,P.default)({willReadFrequently:!0},t));}return this.canvas.width=10,this.canvas.height=10,this.canvas;}},{key:"getOrCreateContext",value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context;}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0);}catch(e){}try{return document.createElement("canvas");}catch(e){}return null;}}]),rU=((E={})[E.CAMERA_CHANGED=0]="CAMERA_CHANGED",E[E.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",E[E.NONE=2]="NONE",E),rH=(0,O.default)(function e(t,n){(0,A.default)(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new rd,initAsync:new ru,dirtycheck:new rh,cull:new rh,beginFrame:new rd,beforeRender:new rd,render:new rd,afterRender:new rd,endFrame:new rd,destroy:new rd,pick:new rc,pickSync:new rh,pointerDown:new rd,pointerUp:new rd,pointerMove:new rd,pointerOut:new rd,pointerOver:new rd,pointerWheel:new rd,pointerCancel:new rd,click:new rd},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(e){var t=this,n=(0,P.default)((0,P.default)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(e){e.apply(n,t.globalRuntime);}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e();}).catch(function(e){});}},{key:"getStats",value:function(){return this.stats;}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(rU.CAMERA_CHANGED);}},{key:"render",value:function(e,t,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===i.renderReasons.size&&i.renderReasons.has(rU.CAMERA_CHANGED),o=!e.disableRenderHooks||!a;o&&this.renderDisplayObject(i.root,e,i),this.hooks.beginFrame.call(t),o&&i.renderListCurrentFrame.forEach(function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e);}),this.hooks.endFrame.call(t),i.renderListCurrentFrame=[],i.renderReasons.clear(),n();}}},{key:"renderDisplayObject",value:function(e,t,n){for(var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling,s=[e];s.length>0;){var l,u=s.pop();!function(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e,l=null;s&&(l=o?r.hooks.cull.call(s,r.context.camera):s)&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(l)),e.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0);}(u);for(var c=(null===(l=u.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?u.sortable.sorted:u.childNodes,d=c.length-1;d>=0;d--)s.push(c[d]);}}},{key:"sort",value:function(e,t){var n,r;(null==t||null===(n=t.sorted)||void 0===n?void 0:n.length)>0&&t.dirtyReason!==eL.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var r=t.sorted.indexOf(n);if(r>-1&&t.sorted.splice(r,1),e.childNodes.indexOf(n)>-1){if(0===t.sorted.length)t.sorted.push(n);else{var i=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;0>n4(e[i],t)?n=i+1:r=i;}return n;}(t.sorted,n);t.sorted.splice(i,0,n);}}}):t.sorted=e.childNodes.slice().sort(n4),(null===(r=t.sorted)||void 0===r?void 0:r.length)>0&&0===e.childNodes.filter(function(e){return e.parsedStyle.zIndex;}).length&&(t.sorted=[]);}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents();}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(rU.DISPLAY_OBJECT_CHANGED);}}]),rW=/\[\s*(.*)=(.*)\s*\]/,rY=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"selectOne",value:function(e,t){var n=this;if(e.startsWith("."))return t.find(function(t){return((null==t?void 0:t.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.find(function(t){return t.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):null;}return t.find(function(n){return t!==n&&n.nodeName===e;});}},{key:"selectAll",value:function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(r){return t!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.findAll(function(r){return t!==r&&r.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):[];}return t.findAll(function(n){return t!==n&&n.nodeName===e;});}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),r=n.name,i=n.value;return"name"===r?t.name===i:this.attributeToString(t,r)===i;}return t.nodeName===e;}},{key:"getIdOrClassname",value:function(e){return e.substring(1);}},{key:"getAttribute",value:function(e){var t=e.match(rW),n="",r="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),r=t[2].replace(/"/g,"")),{name:n,value:r};}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return(0,G.isNil)(n)?"":n.toString?n.toString():"";}}]),rq=((x={}).ATTR_MODIFIED="DOMAttrModified",x.INSERTED="DOMNodeInserted",x.MOUNTED="DOMNodeInsertedIntoDocument",x.REMOVED="removed",x.UNMOUNTED="DOMNodeRemovedFromDocument",x.REPARENT="reparent",x.DESTROY="destroy",x.BOUNDS_CHANGED="bounds-changed",x.CULLED="culled",x),rX=function(e){function t(e,n,r,i,a,o,s,l){var u;return(0,A.default)(this,t),(u=(0,R.default)(this,t,[null])).relatedNode=n,u.prevValue=r,u.newValue=i,u.attrName=a,u.attrChange=o,u.prevParsedValue=s,u.newParsedValue=l,u.type=e,u;}return(0,D.default)(t,e),(0,O.default)(t);}(rR);rX.ADDITION=2,rX.MODIFICATION=1,rX.REMOVAL=3;var r$=new rX(rq.REPARENT,null,"","","",0,"",""),rK=F.vec2.create(),rZ=F.vec3.create(),rQ=F.vec3.fromValues(1,1,1),rJ=F.mat4.create(),r0=F.vec2.create(),r1=F.vec3.create(),r2=F.mat4.create(),r3=F.quat.create(),r4=F.vec3.create(),r6=F.quat.create(),r5=F.vec3.create(),r8=F.vec3.create(),r9=F.vec3.create(),r7=F.mat4.create(),ie=F.quat.create(),it=F.quat.create(),ir=F.quat.create(),ii={affectChildren:!0},ia=(0,O.default)(function e(t){(0,A.default)(this,e),this.pendingEvents=new Map,this.boundsChangedEvent=new rF(rq.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=t;},[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t);}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t);}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t);}},{key:"attach",value:function(e,t,n){var r=!1;e.parentNode&&(r=e.parentNode!==t,this.detach(e));var i=e.nodeName===K.FRAGMENT,a=n9(t);e.parentNode=t;var o=i?e.childNodes:[e];(0,G.isNumber)(n)?o.forEach(function(e){t.childNodes.splice(n,0,e),e.parentNode=t;}):o.forEach(function(e){t.childNodes.push(e),e.parentNode=t;});var s=t.sortable;if((null!=s&&null!==(u=s.sorted)&&void 0!==u&&u.length||s.dirty||e.parsedStyle.zIndex)&&(-1===s.dirtyChildren.indexOf(e)&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=eL.ADDED),!a){if(i)this.dirtifyFragment(e);else{var l=e.transformable;l&&this.dirtyWorldTransform(e,l);}if(r){var u,c,d=(null===(c=t.ownerDocument)||void 0===c||null===(c=c.defaultView)||void 0===c||null===(c=c.getConfig())||void 0===c||null===(c=c.future)||void 0===c?void 0:c.experimentalCancelEventPropagation)===!0;e.dispatchEvent(r$,d,d);}}}},{key:"detach",value:function(e){if(e.parentNode){var t,n,r=e.transformable,i=e.parentNode.sortable;(null!=i&&null!==(t=i.sorted)&&void 0!==t&&t.length||null!==(n=e.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(e)&&i.dirtyChildren.push(e),i.dirty=!0,i.dirtyReason=eL.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),r&&this.dirtyWorldTransform(e,r),e.parentNode=null;}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition;}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation;}},{key:"getLocalScale",value:function(e){return e.transformable.localScale;}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew;}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return eB(t),t.localTransform;}},{key:"setLocalPosition",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;r8[0]=t[0],r8[1]=t[1],r8[2]=null!==(n=t[2])&&void 0!==n?n:0,!F.vec3.equals(i.localPosition,r8)&&(F.vec3.copy(i.localPosition,r8),r&&this.dirtyLocalTransform(e,i));}},{key:"translateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=F.vec3.fromValues(t,n,r));var i=e.transformable;F.vec3.equals(t,rZ)||(F.vec3.transformQuat(t,t,i.localRotation),F.vec3.add(i.localPosition,i.localPosition,t),this.dirtyLocalTransform(e,i));}},{key:"setLocalRotation",value:function(e,t,n,r,i){var a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];"number"==typeof t&&(t=F.quat.set(r3,t,n,r,i));var o=e.transformable;F.quat.copy(o.localRotation,t),a&&this.dirtyLocalTransform(e,o);}},{key:"rotateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=F.vec3.fromValues(t,n,r));var i=e.transformable;F.quat.fromEuler(it,t[0],t[1],t[2]),F.quat.mul(i.localRotation,i.localRotation,it),this.dirtyLocalTransform(e,i);}},{key:"setLocalScale",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;F.vec3.set(r1,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:i.localScale[2]),!F.vec3.equals(r1,i.localScale)&&(F.vec3.copy(i.localScale,r1),r&&this.dirtyLocalTransform(e,i));}},{key:"scaleLocal",value:function(e,t){var n,r=e.transformable;F.vec3.multiply(r.localScale,r.localScale,F.vec3.set(r1,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:1)),this.dirtyLocalTransform(e,r);}},{key:"setLocalSkew",value:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];"number"==typeof t&&(t=F.vec2.set(r0,t,n));var i=e.transformable;F.vec2.copy(i.localSkew,t),r&&this.dirtyLocalTransform(e,i);}},{key:"setLocalEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];"number"==typeof t&&(t=F.vec3.fromValues(t,n,r));var a=e.transformable;F.quat.fromEuler(a.localRotation,t[0],t[1],t[2]),i&&this.dirtyLocalTransform(e,a);}},{key:"setLocalTransform",value:function(e,t){var n=F.mat4.getTranslation(r4,t),r=F.mat4.getRotation(r6,t),i=F.mat4.getScaling(r5,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,rQ,!1),this.setLocalPosition(e,rZ,!1),this.setLocalEulerAngles(e,rZ,void 0,void 0,!1),this.setLocalSkew(e,rK,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"getPosition",value:function(e){var t=e.transformable;return F.mat4.getTranslation(t.position,this.getWorldTransform(e,t));}},{key:"getRotation",value:function(e){var t=e.transformable;return F.mat4.getRotation(t.rotation,this.getWorldTransform(e,t));}},{key:"getScale",value:function(e){var t=e.transformable;return F.mat4.getScaling(t.scaling,this.getWorldTransform(e,t));}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin;}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transformable;return(t.localDirtyFlag||t.dirtyFlag)&&(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),t.worldTransform;}},{key:"setPosition",value:function(e,t){var n,r=e.transformable;if(r9[0]=t[0],r9[1]=t[1],r9[2]=null!==(n=t[2])&&void 0!==n?n:0,!F.vec3.equals(this.getPosition(e),r9)){if(F.vec3.copy(r.position,r9),null!==e.parentNode&&e.parentNode.transformable){var i=e.parentNode.transformable;F.mat4.copy(r7,i.worldTransform),F.mat4.invert(r7,r7),F.vec3.transformMat4(r.localPosition,r9,r7);}else F.vec3.copy(r.localPosition,r9);this.dirtyLocalTransform(e,r);}}},{key:"translate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=F.vec3.set(r1,t,n,r)),F.vec3.equals(t,rZ)||(F.vec3.add(r1,this.getPosition(e),t),this.setPosition(e,r1));}},{key:"setRotation",value:function(e,t,n,r,i){var a=e.transformable;if("number"==typeof t&&(t=F.quat.fromValues(t,n,r,i)),null!==e.parentNode&&e.parentNode.transformable){var o=this.getRotation(e.parentNode);F.quat.copy(r3,o),F.quat.invert(r3,r3),F.quat.multiply(a.localRotation,r3,t),F.quat.normalize(a.localRotation,a.localRotation),this.dirtyLocalTransform(e,a);}else this.setLocalRotation(e,t);}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=F.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){F.quat.fromEuler(r3,t[0],t[1],t[2]);var a=this.getRotation(e),o=this.getRotation(e.parentNode);F.quat.copy(ir,o),F.quat.invert(ir,ir),F.quat.multiply(r3,ir,r3),F.quat.multiply(i.localRotation,r3,a),F.quat.normalize(i.localRotation,i.localRotation),this.dirtyLocalTransform(e,i);}else this.rotateLocal(e,t);}},{key:"setOrigin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=[t,n,r]);var i=e.transformable;if(t[0]!==i.origin[0]||t[1]!==i.origin[1]||t[2]!==i.origin[2]){var a=i.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtyLocalTransform(e,i);}}},{key:"setEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=F.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){F.quat.fromEuler(i.localRotation,t[0],t[1],t[2]);var a=this.getRotation(e.parentNode);F.quat.copy(ie,F.quat.invert(r3,a)),F.quat.mul(i.localRotation,i.localRotation,ie),this.dirtyLocalTransform(e,i);}else this.setLocalEulerAngles(e,t);}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!ei.isEmpty(r)){var i=n||new ei;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i;}return null;}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.geometry;return n.dirty&&id.styleValueRegistry.updateGeometry(e),(t?n.renderBounds:n.contentBounds||null)||new ei;}},{key:"getBounds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(e,n,i);if(e.childNodes.forEach(function(e){var r=t.getBounds(e,n);r&&(a?a.add(r):(a=i||new ei).update(r.center,r.halfExtents));}),a||(a=new ei),n){var o=function(e){var t,n=e;do{if(null===(t=n.parsedStyle)||void 0===t?void 0:t.clipPath)return n;n=n.parentElement;}while(null!==n)return null;}(e);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents);}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a;}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=rJ;e.parentNode.transformable&&(t=F.mat4.invert(r2,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!ei.isEmpty(n)){var r=new ei;return r.setFromTransformedAABB(n,t),r;}}return this.getBounds(e);}},{key:"getBoundingClientRect",value:function(e){var t,n,r=this.getGeometryBounds(e);ei.isEmpty(r)||(n=new ei).setFromTransformedAABB(r,this.getWorldTransform(e));var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=(0,I.default)(a,2),s=o[0],l=o[1],u=n.getMax(),c=(0,I.default)(u,2),d=c[0],h=c[1];return new eu(s+((null==i?void 0:i.left)||0),l+((null==i?void 0:i.top)||0),d-s,h-l);}return new eu((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0);}},{key:"internalUpdateTransform",value:function(e){var t,n,r=null===(n=e.parentNode)||void 0===n?void 0:n.transformable;eB(e.transformable),(t=e.transformable).dirtyFlag&&(r?F.mat4.multiply(t.worldTransform,r.worldTransform,t.localTransform):F.mat4.copy(t.worldTransform,t.localTransform),t.dirtyFlag=!1);}},{key:"internalUpdateElement",value:function(e,t){var n=(null===(s=e.ownerDocument)||void 0===s||null===(s=s.defaultView)||void 0===s||null===(s=s.getConfig())||void 0===s||null===(s=s.future)||void 0===s?void 0:s.experimentalAttributeUpdateOptimization)===!0,r=t[t.length-1],i=(null==r?void 0:r.transformDirty)||(null===(l=e.transformable)||void 0===l?void 0:l.localDirtyFlag);e.transformable&&((d=e.transformable).dirtyFlag||(d.dirtyFlag=i)),this.internalUpdateTransform(e),i&&(null===(h=e.dirty)||void 0===h||h.call(e,!0,!0));var a=(null===(u=e.renderable)||void 0===u?void 0:u.boundsDirty)||(null===(c=e.renderable)||void 0===c?void 0:c.renderBoundsDirty);if((i||a)&&(null==r?void 0:r.shapeUpdated)===!1&&n)for(var o=t.length-1;o>=0;){var s,l,u,c,d,h,f,p,v=t[o];if(v.shapeUpdated)break;null===(f=(p=v.node).dirty)||void 0===f||f.call(p,!0,!0),v.shapeUpdated=!0,o-=1;}return i;}},{key:"syncHierarchy",value:function(e){for(var t,n,r=[e],i=e.parentNode?[{node:e.parentNode,transformDirty:(null===(t=e.parentNode.transformable)||void 0===t?void 0:t.localDirtyFlag)||(null===(n=e.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];r.length>0;){for(var a=r.pop(),o=i[i.length-1];i.length>0&&a.parentNode!==o.node;)o=i.pop();var s=this.internalUpdateElement(a,i);if(a.childNodes.length>0){for(var l=a.childNodes.length-1;l>=0;l--)r.push(a.childNodes[l]);i.push({node:a,transformDirty:s,shapeUpdated:!1});}}}},{key:"dirtyLocalTransform",value:function(e,t){n9(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtyWorldTransform(e,t));}},{key:"dirtyWorldTransform",value:function(e,t){this.dirtifyWorldInternal(e,t),this.dirtyToRoot(e,!0);}},{key:"dirtifyWorldInternal",value:function(e,t){var n,r=this,i=(null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization)===!0;t.dirtyFlag||(t.dirtyFlag=!0,e.dirty(!0,!0),i||e.childNodes.forEach(function(e){var t=e.transformable;r.dirtifyWorldInternal(e,t);}));}},{key:"dirtyToRoot",value:function(e){for(var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,o=(null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalAttributeUpdateOptimization)===!0;a&&(null===(n=(r=a).dirty)||void 0===n||n.call(r,!0,!0),!o);)a=a.parentNode;i&&e.forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),this.informDependentDisplayObjects(e),this.pendingEvents.set(e,i);}},{key:"dirtifyFragment",value:function(e){var t,n=e.transformable;n&&(n.dirtyFlag=!0,n.localDirtyFlag=!0),null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);for(var r=e.childNodes.length,i=0;i<r;i++)this.dirtifyFragment(e.childNodes[i]);e.nodeName===K.FRAGMENT&&this.pendingEvents.set(e,!1);}},{key:"triggerPendingEvents",value:function(){var e,t,n=this,r=new Set,i=function(t,i){if(!(!t.isConnected||r.has(t))&&t.nodeName!==K.FRAGMENT){if(n.boundsChangedEvent.detail=i,n.boundsChangedEvent.target=t,t.isMutationObserved)t.dispatchEvent(n.boundsChangedEvent);else{if(void 0===e){var a;e=(null===(a=t.ownerDocument.defaultView)||void 0===a||null===(a=a.getConfig())||void 0===a||null===(a=a.future)||void 0===a?void 0:a.experimentalCancelEventPropagation)===!0;}t.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0,e);}r.add(t);}};this.pendingEvents.forEach(function(e,n){if(n.nodeName!==K.FRAGMENT){if(void 0===t){var r;t=(null===(r=n.ownerDocument)||void 0===r||null===(r=r.defaultView)||void 0===r||null===(r=r.getConfig())||void 0===r||null===(r=r.future)||void 0===r?void 0:r.experimentalAttributeUpdateOptimization)===!0;}ii.affectChildren=e,t?i(n,ii):e?n.forEach(function(e){i(e,ii);}):i(n,ii);}}),r.clear(),this.clearPendingEvents();}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear();}},{key:"updateDisplayObjectDependency",value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1);}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r);}}},{key:"informDependentDisplayObjects",value:function(e){var t,n=this,r=this.displayObjectDependencyMap.get(e);if(r){var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalCancelEventPropagation;Object.keys(r).forEach(function(e){r[e].forEach(function(t){n.dirtyToRoot(t,!0),t.dispatchEvent(new rX(rq.ATTR_MODIFIED,t,n,n,e,rX.MODIFICATION,n,n),i,i),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback(e,n,n);});});}}}]),io={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},is=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,il=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),iu=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),ic=(0,O.default)(function e(t){var n=this;(0,A.default)(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return!n.isBreakingSpace(t)&&!!(e&&(iu.exec(t)||il.exec(e)));},this.trimByKinsokuShorui=function(e){var t=(0,L.default)(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t;},this.runtime=t;},[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=io.MetricsString+io.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(io.BaselineSymbol).width),l=io.HeightMultiplier*s;s=s*io.BaselineMultiplier|0,r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var u=i.getImageData(0,0,o||1,l||1).data,c=u.length,d=4*o,h=0,f=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<d;v+=4)if(255!==u[f+v]){p=!0;break;}if(p)break;f+=d;}for(n.ascent=s-h,f=c-d,p=!1,h=l;h>s;--h){for(var g=0;g<d;g+=4)if(255!==u[f+g]){p=!0;break;}if(p)break;f-=d;}return n.descent=h-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n;}},{key:"measureText",value:function(e,t,n){var r=t.fontSize,i=void 0===r?16:r,a=t.wordWrap,o=t.lineHeight,s=t.lineWidth,l=void 0===s?1:s,u=t.textBaseline,c=void 0===u?"alphabetic":u,d=t.textAlign,h=void 0===d?"start":d,f=t.letterSpacing,p=void 0===f?0:f,v=t.textPath;t.textPathSide,t.textPathStartOffset;var g=t.leading,m=void 0===g?0:g,y=function(e){for(var t=e.fontSize,n=void 0===t?16:t,r=e.fontFamily,i=e.fontStyle,a=e.fontVariant,o=e.fontWeight,s=(0,G.isNumber)(n)&&"".concat(n,"px")||"16px",l=(void 0===r?"sans-serif":r).split(","),u=l.length-1;u>=0;u--){var c=l[u].trim();!rp.test(c)&&0>rf.indexOf(c)&&(c='"'.concat(c,'"')),l[u]=c;}return"".concat(void 0===i?"normal":i," ").concat(void 0===a?"normal":a," ").concat(void 0===o?"normal":o," ").concat(s," ").concat(l.join(","));}(t),b=this.measureFont(y,n);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);E.font=y,t.isOverflowing=!1;var x=(void 0!==a&&a?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),k=Array(x.length),S=0;if(v){v.getTotalLength();for(var T=0;T<x.length;T++)E.measureText(x[T]).width,x[T].length;}else{for(var M=0;M<x.length;M++){var w=E.measureText(x[M]).width+(x[M].length-1)*p;k[M]=w,S=Math.max(S,w);}var N=S+l,C=o||b.fontSize+l,_=Math.max(C,b.fontSize+l)+(x.length-1)*(C+m);C+=m;var P=0;return"middle"===c?P=-_/2:"bottom"===c||"alphabetic"===c||"ideographic"===c?P=-_:("top"===c||"hanging"===c)&&(P=0),{font:y,width:N,height:_,lines:x,lineWidths:k,lineHeight:C,maxLineWidth:S,fontProperties:b,lineMetrics:k.map(function(e,t){var n=0;return"center"===h||"middle"===h?n-=e/2:("right"===h||"end"===h)&&(n-=e),new eu(n-l/2,P+t*C,e+l,C);})};}}},{key:"wordWrap",value:function(e,t,n){var r=this,i=Array.from(e);if(0===i.length)return"";var a=this,o=t.wordWrapWidth,s=t.letterSpacing,l=void 0===s?0:s,u=t.maxLines,c=void 0===u?1/0:u,d=t.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),f=(void 0===o?0:o)+l,p="";"ellipsis"===d?p="...":d&&"clip"!==d&&(p=d);var v=[""],g=0,m=0,y=-1,b={},E=function(e){return r.getFromCache(e,l,b,h);},x=E(p);function k(e,t,n,r){for(;E(e)<r&&t<i.length-1&&!a.isNewline(i[t+1]);)t+=1,e+=i[t];for(;E(e)>r&&t>=n;)t-=1,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t};}function S(e,t){if(!(x<=0)&&!(x>f)){if(!v[e]){v[e]=p;return;}var n=k(v[e],t,y+1,f-x);v[e]=n.lineTxt+p;}}for(var T=0;T<i.length;T++){var M=i[T],w=i[T-1],N=i[T+1],C=E(M);if(this.isNewline(M)){if(g+1>=c){T<i.length-1&&S(g,T-1),t.isOverflowing=!0;break;}y=T-1,m=0,v[g+=1]="";continue;}if(C>f){S(g,T-1),t.isOverflowing=!0;break;}if(m>0&&m+C>f){var _=k(v[g],T-1,y+1,f);if(_.txtLastCharIndex!==T-1){if(v[g]=_.lineTxt,_.txtLastCharIndex===i.length-1)break;M=i[T=_.txtLastCharIndex+1],w=i[T-1],N=i[T+1],C=E(M);}if(g+1>=c){S(g,T-1),t.isOverflowing=!0;break;}if(y=T-1,m=0,v[g+=1]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[g]||"",E)),this.shouldBreakByKinsokuShorui(M,N)&&(v=this.trimByKinsokuShorui(v),m+=E(w||""));}m+=C,v[g]+=M;}return v.join("\n");}},{key:"isBreakingSpace",value:function(e){return"string"==typeof e&&io.BreakingSpaces.indexOf(e.charCodeAt(0))>=0;}},{key:"isNewline",value:function(e){return"string"==typeof e&&io.Newlines.indexOf(e.charCodeAt(0))>=0;}},{key:"trimToBreakable",value:function(e){var t=(0,L.default)(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return t;var i=n.slice(r,r+1),a=this.isBreakingSpace(i);return t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,r+(a?0:1)),t;}},{key:"canBreakInLastChar",value:function(e){return!(e&&is.test(e));}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce(function(e,n){return e+t(n);},0);}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!is.test(e[t]))return t;return -1;}},{key:"getFromCache",value:function(e,t,n,r){var i=n[e];if("number"!=typeof i){var a=e.length*t;i=r.measureText(e).width+a,n[e]=i;}return i;}}]),id={},ih=(S=new rP,T=new r_,k={},(0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)(k,K.FRAGMENT,null),K.CIRCLE,new rM),K.ELLIPSE,new rw),K.RECT,S),K.IMAGE,S),K.GROUP,new rO),K.LINE,new rN),K.TEXT,new rA(id)),K.POLYLINE,T),K.POLYGON,T),(0,z.default)((0,z.default)((0,z.default)(k,K.PATH,new rC),K.HTML,new rL),K.MESH,null)),ip=(w=new nV,N=new nH,M={},(0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)(M,eG.PERCENTAGE,null),eG.NUMBER,new nX),eG.ANGLE,new nG),eG.DEFINED_PATH,new nz),eG.PAINT,w),eG.COLOR,w),eG.FILTER,new nj),eG.LENGTH,N),eG.LENGTH_PERCENTAGE,N),eG.LENGTH_PERCENTAGE_12,new nW),(0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)((0,z.default)(M,eG.LENGTH_PERCENTAGE_14,new nY),eG.COORDINATE,new nH),eG.OFFSET_DISTANCE,new n$),eG.OPACITY_VALUE,new nK),eG.PATH,new nZ),eG.LIST_OF_POINTS,new nQ),eG.SHADOW_BLUR,new nJ),eG.TEXT,new n0),eG.TEXT_TRANSFORM,new n1),eG.TRANSFORM,new rk),(0,z.default)((0,z.default)((0,z.default)(M,eG.TRANSFORM_ORIGIN,new rS),eG.Z_INDEX,new rT),eG.MARKER,new nq));id.CameraContribution=eA,id.AnimationTimeline=null,id.EasingFunction=null,id.offscreenCanvasCreator=new rj,id.sceneGraphSelector=new rY,id.sceneGraphService=new ia(id),id.textService=new ic(id),id.geometryUpdaterFactory=ih,id.CSSPropertySyntaxFactory=ip,id.styleValueRegistry=new nB(id),id.layoutRegistry=null,id.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==q?q:{},id.enableStyleSyntax=!0,id.enableSizeAttenuation=!1;var iv=0,ig=new rX(rq.INSERTED,null,"","","",0,"",""),im=new rX(rq.REMOVED,null,"","","",0,"",""),iy=new rF(rq.DESTROY),ib=function(e){function t(){var e;(0,A.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,R.default)(this,t,[].concat(r))).entity=iv++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:eO.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"dirty",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.renderable.dirty=e,t&&(this.renderable.boundsDirty=e,this.renderable.renderBoundsDirty=e);}},{key:"className",get:function(){return this.getAttribute("class")||"";},set:function(e){this.setAttribute("class",e);}},{key:"classList",get:function(){return this.className.split(" ").filter(function(e){return""!==e;});}},{key:"tagName",get:function(){return this.nodeName;}},{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"parentElement",get:function(){return this.parentNode;}},{key:"nextSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null;}return null;}},{key:"previousSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null;}return null;}},{key:"cloneNode",value:function(e){throw Error(ec);}},{key:"appendChild",value:function(e,t){var n;if(e.destroyed)throw Error("Cannot append a destroyed element.");return id.sceneGraphService.attach(e,this,t),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(n9(this)||e.nodeName!==K.FRAGMENT?this.ownerDocument.defaultView.mountChildren(e):this.ownerDocument.defaultView.mountFragment(e)),this.isMutationObserved&&(ig.relatedNode=this,e.dispatchEvent(ig)),e;}},{key:"insertBefore",value:function(e,t){if(t){e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);-1===n?this.appendChild(e):this.appendChild(e,n);}else this.appendChild(e);return e;}},{key:"replaceChild",value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t;}},{key:"removeChild",value:function(e){var t,n,r=(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return im.relatedNode=this,e.dispatchEvent(im,r,r),null!==(n=e.ownerDocument)&&void 0!==n&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),id.sceneGraphService.detach(e),e;}},{key:"removeChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t);}}},{key:"destroyChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy();}}},{key:"matches",value:function(e){return id.sceneGraphService.matches(e,this);}},{key:"getElementById",value:function(e){return id.sceneGraphService.querySelector("#".concat(e),this);}},{key:"getElementsByName",value:function(e){return id.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this);}},{key:"getElementsByClassName",value:function(e){return id.sceneGraphService.querySelectorAll(".".concat(e),this);}},{key:"getElementsByTagName",value:function(e){return id.sceneGraphService.querySelectorAll(e,this);}},{key:"querySelector",value:function(e){return id.sceneGraphService.querySelector(e,this);}},{key:"querySelectorAll",value:function(e){return id.sceneGraphService.querySelectorAll(e,this);}},{key:"closest",value:function(e){var t=this;do{if(id.sceneGraphService.matches(e,t))return t;t=t.parentElement;}while(null!==t)return null;}},{key:"find",value:function(e){var t=this,n=null;return this.forEach(function(r){return!(r!==t&&e(r))||(n=r,!1);}),n;}},{key:"findAll",value:function(e){var t=this,n=[];return this.forEach(function(r){r!==t&&e(r)&&n.push(r);}),n;}},{key:"after",value:function(){var e=this;if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){var i;return null===(i=e.parentNode)||void 0===i?void 0:i.appendChild(n,t+r+1);});}}},{key:"before",value:function(){if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n.slice(1);this.parentNode.appendChild(i,e),i.after.apply(i,(0,L.default)(a));}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove();}},{key:"append",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t);});}},{key:"prepend",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t,n){return e.appendChild(t,n);});}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments);}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this;}},{key:"destroy",value:function(){var e,t=(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(iy,t,t),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0;}},{key:"getGeometryBounds",value:function(){return id.sceneGraphService.getGeometryBounds(this);}},{key:"getRenderBounds",value:function(){return id.sceneGraphService.getBounds(this,!0);}},{key:"getBounds",value:function(){return id.sceneGraphService.getBounds(this);}},{key:"getLocalBounds",value:function(){return id.sceneGraphService.getLocalBounds(this);}},{key:"getBoundingClientRect",value:function(){return id.sceneGraphService.getBoundingClientRect(this);}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle));}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes);}},{key:"getAttribute",value:function(e){if("symbol"!=typeof e)return this.attributes[e];}},{key:"hasAttribute",value:function(e){return this.getAttributeNames().includes(e);}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length;}},{key:"removeAttribute",value:function(e){this.setAttribute(e,null),delete this.attributes[e];}},{key:"setAttribute",value:function(e,t,n,r){this.attributes[e]=t;}},{key:"getAttributeNS",value:function(e,t){throw Error(ec);}},{key:"getAttributeNode",value:function(e){throw Error(ec);}},{key:"getAttributeNodeNS",value:function(e,t){throw Error(ec);}},{key:"hasAttributeNS",value:function(e,t){throw Error(ec);}},{key:"removeAttributeNS",value:function(e,t){throw Error(ec);}},{key:"removeAttributeNode",value:function(e){throw Error(ec);}},{key:"setAttributeNS",value:function(e,t,n){throw Error(ec);}},{key:"setAttributeNode",value:function(e){throw Error(ec);}},{key:"setAttributeNodeNS",value:function(e){throw Error(ec);}},{key:"toggleAttribute",value:function(e,t){throw Error(ec);}}]);}(rz);function iE(e){return!!(null!=e&&e.nodeName);}var ix=id.globalThis.Proxy?id.globalThis.Proxy:function(){},ik=new rX(rq.ATTR_MODIFIED,null,null,null,null,rX.MODIFICATION,null,null),iS=F.vec3.create(),iT=F.quat.create(),iM=function(e){function t(e){var n;return(0,A.default)(this,t),(n=(0,R.default)(this,t)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||K.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),id.enableStyleSyntax&&(n.style=new ix({setProperty:function(e,t){n.setAttribute(e,t);},getPropertyValue:function(e){return n.getAttribute(e);},removeProperty:function(e){n.removeAttribute(e);},item:function(){return"";}},{get:function(e,t){return void 0!==e[t]?e[t]:n.getAttribute(t);},set:function(e,t,r){return n.setAttribute(t,r),!0;}})),n;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"destroy",value:function(){(0,V.default)(t,"destroy",this,3)([]),this.getAnimations().forEach(function(e){e.cancel();});}},{key:"cloneNode",value:function(e,t){var n=(0,P.default)({},this.attributes);for(var r in n){var i=n[r];iE(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i));}var a=new this.constructor((0,P.default)((0,P.default)({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n);}}),a;}},{key:"initAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};id.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.dirty();}},{key:"setAttribute",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];!(0,G.isUndefined)(n)&&(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),(0,V.default)(t,"setAttribute",this,3)([e,n]));}},{key:"internalSetAttribute",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.attributes[e],a=this.parsedStyle[e];id.styleValueRegistry.processProperties(this,(0,z.default)({},e,t),r),this.dirty();var o=this.parsedStyle[e];if(this.isConnected){if(ik.relatedNode=this,ik.prevValue=i,ik.newValue=t,ik.attrName=e,ik.prevParsedValue=a,ik.newParsedValue=o,this.isMutationObserved)this.dispatchEvent(ik);else{var s,l=(null===(s=this.ownerDocument.defaultView.getConfig().future)||void 0===s?void 0:s.experimentalCancelEventPropagation)===!0;ik.target=this,this.ownerDocument.defaultView.dispatchEvent(ik,!0,l);}}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(n=this.attributeChangedCallback)||void 0===n||n.call(this,e,i,t,a,o));}},{key:"getBBox",value:function(){var e=this.getBounds(),t=e.getMin(),n=(0,I.default)(t,2),r=n[0],i=n[1],a=e.getMax(),o=(0,I.default)(a,2);return new eu(r,i,o[0]-r,o[1]-i);}},{key:"setOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return id.sceneGraphService.setOrigin(this,ep(e,t,n,!1)),this;}},{key:"getOrigin",value:function(){return id.sceneGraphService.getOrigin(this);}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return id.sceneGraphService.setPosition(this,ep(e,t,n,!1)),this;}},{key:"setLocalPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return id.sceneGraphService.setLocalPosition(this,ep(e,t,n,!1)),this;}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return id.sceneGraphService.translate(this,ep(e,t,n,!1)),this;}},{key:"translateLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return id.sceneGraphService.translateLocal(this,ep(e,t,n,!1)),this;}},{key:"getPosition",value:function(){return id.sceneGraphService.getPosition(this);}},{key:"getLocalPosition",value:function(){return id.sceneGraphService.getLocalPosition(this);}},{key:"scale",value:function(e,t,n){return this.scaleLocal(e,t,n);}},{key:"scaleLocal",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=ep(e,t,n,!1)),id.sceneGraphService.scaleLocal(this,e),this;}},{key:"setLocalScale",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=ep(e,t,n,!1)),id.sceneGraphService.setLocalScale(this,e),this;}},{key:"getLocalScale",value:function(){return id.sceneGraphService.getLocalScale(this);}},{key:"getScale",value:function(){return id.sceneGraphService.getScale(this);}},{key:"getEulerAngles",value:function(){var e=eb(iS,id.sceneGraphService.getWorldTransform(this));return(0,I.default)(e,3)[2]*em;}},{key:"getLocalEulerAngles",value:function(){var e=eb(iS,id.sceneGraphService.getLocalRotation(this));return(0,I.default)(e,3)[2]*em;}},{key:"setEulerAngles",value:function(e){return id.sceneGraphService.setEulerAngles(this,0,0,e),this;}},{key:"setLocalEulerAngles",value:function(e){return id.sceneGraphService.setLocalEulerAngles(this,0,0,e),this;}},{key:"rotateLocal",value:function(e,t,n){return(0,G.isNil)(t)&&(0,G.isNil)(n)?id.sceneGraphService.rotateLocal(this,0,0,e):id.sceneGraphService.rotateLocal(this,e,t,n),this;}},{key:"rotate",value:function(e,t,n){return(0,G.isNil)(t)&&(0,G.isNil)(n)?id.sceneGraphService.rotate(this,0,0,e):id.sceneGraphService.rotate(this,e,t,n),this;}},{key:"setRotation",value:function(e,t,n,r){return id.sceneGraphService.setRotation(this,e,t,n,r),this;}},{key:"setLocalRotation",value:function(e,t,n,r){return id.sceneGraphService.setLocalRotation(this,e,t,n,r),this;}},{key:"setLocalSkew",value:function(e,t){return id.sceneGraphService.setLocalSkew(this,e,t),this;}},{key:"getRotation",value:function(){return id.sceneGraphService.getRotation(this);}},{key:"getLocalRotation",value:function(){return id.sceneGraphService.getLocalRotation(this);}},{key:"getLocalSkew",value:function(){return id.sceneGraphService.getLocalSkew(this);}},{key:"getLocalTransform",value:function(){return id.sceneGraphService.getLocalTransform(this);}},{key:"getWorldTransform",value:function(){return id.sceneGraphService.getWorldTransform(this);}},{key:"setLocalTransform",value:function(e){return id.sceneGraphService.setLocalTransform(this,e),this;}},{key:"resetLocalTransform",value:function(){id.sceneGraphService.resetLocalTransform(this);}},{key:"getAnimations",value:function(){return this.activeAnimations;}},{key:"animate",value:function(e,t){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,e,t):null;}},{key:"isVisible",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.visibility)!=="hidden";}},{key:"interactive",get:function(){return this.isInteractive();},set:function(e){this.style.pointerEvents=e?"auto":"none";}},{key:"isInteractive",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.pointerEvents)!=="none";}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible);}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,L.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))+1),this;}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,L.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))-1),this;}},{key:"getConfig",value:function(){return this.config;}},{key:"attr",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?(0,G.isObject)(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t]);}),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes;}},{key:"getMatrix",value:function(e){var t,n,r,i=e||this.getWorldTransform(),a=F.mat4.getTranslation(iS,i),o=(0,I.default)(a,2),s=o[0],l=o[1],u=F.mat4.getScaling(iS,i),c=(0,I.default)(u,2),d=c[0],h=c[1],f=eb(iS,F.mat4.getRotation(iT,i)),p=(0,I.default)(f,3),v=p[0],g=p[2];return n=Math.cos(t=v||g),r=Math.sin(t),F.mat3.fromValues(d*n,h*r,0,-d*r,h*n,0,s,l,1);}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform());}},{key:"setMatrix",value:function(e){var t=eE(e),n=(0,I.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o);}},{key:"setLocalMatrix",value:function(e){var t=eE(e),n=(0,I.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o);}},{key:"show",value:function(){this.forEach(function(e){e.style.visibility="visible";});}},{key:"hide",value:function(){this.forEach(function(e){e.style.visibility="hidden";});}},{key:"getCount",value:function(){return this.childElementCount;}},{key:"getParent",value:function(){return this.parentElement;}},{key:"getChildren",value:function(){return this.children;}},{key:"getFirst",value:function(){return this.firstElementChild;}},{key:"getLast",value:function(){return this.lastElementChild;}},{key:"getChildByIndex",value:function(e){return this.children[e]||null;}},{key:"add",value:function(e,t){return this.appendChild(e,t);}},{key:"set",value:function(e,t){this.config[e]=t;}},{key:"get",value:function(e){return this.config[e];}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"setZIndex",value:function(e){return this.style.zIndex=e,this;}}]);}(ib);iM.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var iw=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.CIRCLE},e)]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM);iw.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var iN=["style"],iC=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,Y.default)(n,iN);return(0,A.default)(this,t),(e=(0,R.default)(this,t,[(0,P.default)({style:r},i)])).isCustomElement=!0,e;}return(0,D.default)(t,e),(0,O.default)(t);}(iM);iC.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var i_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.ELLIPSE},e)]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM);i_.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),function(e){function t(){return(0,A.default)(this,t),(0,R.default)(this,t,[{type:K.FRAGMENT}]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM).PARSED_STYLE_LIST=new Set(["class","className"]);var iP=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.GROUP},e)]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM);iP.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iA=["style"],iO=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,Y.default)(n,iA);return(0,A.default)(this,t),(e=(0,R.default)(this,t,[(0,P.default)({type:K.HTML,style:r},i)])).cullable.enable=!1,e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"getDomElement",value:function(){return this.parsedStyle.$el;}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"getLocalBounds",value:function(){if(this.parentNode){var e=F.mat4.invert(F.mat4.create(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!ei.isEmpty(t)){var n=new ei;return n.setFromTransformedAABB(t,e),n;}}return this.getBounds();}}]);}(iM);iO.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var iL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.IMAGE},e)]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM);iL.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var iR=["style"],iD=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,Y.default)(n,iR);(0,A.default)(this,t),(e=(0,R.default)(this,t,[(0,P.default)({type:K.LINE,style:(0,P.default)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&iE(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&iE(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"x1"===e||"y1"===e||"x2"===e||"y2"===e||"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iE(r)&&(this.markerStartAngle=0,r.remove()),i&&iE(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e&&(r&&iE(r)&&(this.markerEndAngle=0,r.remove()),i&&iE(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)));}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=s.x1,f=s.x2,p=s.y1,v=s.y2,g=e?l:u;if(g&&iE(g)){var m=0;e?(r=h,i=p,t=f-h,n=v-p,a=c||0,o=this.markerStartAngle):(r=f,i=v,t=h-f,n=p-v,a=d||0,o=this.markerEndAngle),m=Math.atan2(n,t),g.setLocalEulerAngles(180*m/Math.PI+o),g.setLocalPosition(r+Math.cos(m)*a,i+Math.sin(m)*a);}}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=(0,j.linePointAt)(r,i,a,o,e),l=s.x,u=s.y,c=F.vec3.transformMat4(F.vec3.create(),F.vec3.fromValues(l,u,0),t?this.getWorldTransform():this.getLocalTransform());return new el(c[0],c[1]);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getTotalLength",value:function(){var e=this.parsedStyle,t=e.x1,n=e.y1,r=e.x2,i=e.y2;return(0,j.lineLength)(t,n,r,i);}}]);}(iM);iD.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var iI=["style"],iB=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,Y.default)(n,iI);(0,A.default)(this,t),(e=(0,R.default)(this,t,[(0,P.default)({type:K.PATH,style:r,initialParsedStyle:{miterLimit:4,d:(0,P.default)({},eF)}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iE(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iE(l)&&e.placeMarkerMid(l),s&&iE(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"d"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iE(r)&&(this.markerStartAngle=0,r.remove()),i&&iE(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iE(r)&&(this.markerEndAngle=0,r.remove()),i&&iE(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=e?l:u;if(h&&iE(h)){var f=0;if(e){var p=this.getStartTangent(),v=(0,I.default)(p,2),g=v[0],m=v[1];r=m[0],i=m[1],t=g[0]-m[0],n=g[1]-m[1],a=c||0,o=this.markerStartAngle;}else{var y=this.getEndTangent(),b=(0,I.default)(y,2),E=b[0],x=b[1];r=x[0],i=x[1],t=E[0]-x[0],n=E[1]-x[1],a=d||0,o=this.markerEndAngle;}f=Math.atan2(n,t),h.setLocalEulerAngles(180*f/Math.PI+o),h.setLocalPosition(r+Math.cos(f)*a,i+Math.sin(f)*a);}}},{key:"placeMarkerMid",value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(e){e.remove();}),e&&iE(e))for(var n=1;n<t.length-1;n++){var r=(0,I.default)(t[n].currentPoint,2),i=r[0],a=r[1],o=1===n?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a);}}},{key:"getTotalLength",value:function(){return ne(this);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.d.absolutePath,r=(0,G.getPointAtLength)(n,e),i=r.x,a=r.y,o=F.vec3.transformMat4(F.vec3.create(),F.vec3.fromValues(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new el(o[0],o[1]);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(e*ne(this),t);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?t.push([n[0]-i[0],n[1]-i[1]]):t.push([r[0],r[1]]),t.push([n[0],n[1]]);}return t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?n.push([i[0]-a[0],i[1]-a[1]]):n.push([r[0],r[1]]),n.push([i[0],i[1]]);}return n;}}]);}(iM);iB.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var iF=["style"],iG=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,Y.default)(n,iF);(0,A.default)(this,t),(e=(0,R.default)(this,t,[(0,P.default)({type:K.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iE(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iE(l)&&e.placeMarkerMid(l),s&&iE(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"points"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iE(r)&&(this.markerStartAngle=0,r.remove()),i&&iE(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iE(r)&&(this.markerEndAngle=0,r.remove()),i&&iE(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=(s.points||{}).points,f=e?l:u;if(f&&iE(f)&&h){var p=0;if(r=h[0][0],i=h[0][1],e)t=h[1][0]-h[0][0],n=h[1][1]-h[0][1],a=c||0,o=this.markerStartAngle;else{var v=h.length;this.parsedStyle.isClosed?(t=h[v-1][0]-h[0][0],n=h[v-1][1]-h[0][1]):(r=h[v-1][0],i=h[v-1][1],t=h[v-2][0]-h[v-1][0],n=h[v-2][1]-h[v-1][1]),a=d||0,o=this.markerEndAngle;}p=Math.atan2(n,t),f.setLocalEulerAngles(180*p/Math.PI+o),f.setLocalPosition(r+Math.cos(p)*a,i+Math.sin(p)*a);}}},{key:"placeMarkerMid",value:function(e){var t=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(e){e.remove();}),this.markerMidList=[],e&&iE(e)&&t)for(var n=1;n<(this.parsedStyle.isClosed?t.length:t.length-1);n++){var r=t[n][0],i=t[n][1],a=1===n?e:e.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i);}}}]);}(iM);iG.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var iz=["style"],iV=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,Y.default)(e,iz);return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)]);}return(0,D.default)(t,e),(0,O.default)(t,[{key:"getTotalLength",value:function(){return 0===this.parsedStyle.points.totalLength&&(this.parsedStyle.points.totalLength=(0,j.polylineLength)(this.parsedStyle.points.points)),this.parsedStyle.points.totalLength;}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach(function(e,t){n[t+1]&&((r=[0,0])[0]=o/s,i=(0,j.lineLength)(e[0],e[1],n[t+1][0],n[t+1][1]),o+=i,r[1]=o/s,a.push(r));}),this.parsedStyle.points.segments=a;}var l=0,u=0;this.parsedStyle.points.segments.forEach(function(t,n){e>=t[0]&&e<=t[1]&&(l=(e-t[0])/(t[1]-t[0]),u=n);});var c=(0,j.linePointAt)(n[u][0],n[u][1],n[u+1][0],n[u+1][1],l),d=c.x,h=c.y,f=F.vec3.transformMat4(F.vec3.create(),F.vec3.fromValues(d,h,0),t?this.getWorldTransform():this.getLocalTransform());return new el(f[0],f[1]);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n;}}]);}(iG);iV.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iG.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var ij=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.RECT},e)]);}return(0,D.default)(t,e),(0,O.default)(t);}(iM);ij.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var iU=["style"],iH=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,Y.default)(e,iU);return(0,A.default)(this,t),(0,R.default)(this,t,[(0,P.default)({type:K.TEXT,style:(0,P.default)({fill:"black"},n)},r)]);}return(0,D.default)(t,e),(0,O.default)(t,[{key:"getComputedTextLength",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.maxLineWidth)||0;}},{key:"getLineBoundingRects",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.lineMetrics)||[];}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing;}}]);}(iM);iH.PARSED_STYLE_LIST=new Set([].concat((0,L.default)(iM.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var iW=(0,O.default)(function e(){(0,A.default)(this,e),this.registry={},this.define(K.CIRCLE,iw),this.define(K.ELLIPSE,i_),this.define(K.RECT,ij),this.define(K.IMAGE,iL),this.define(K.LINE,iD),this.define(K.GROUP,iP),this.define(K.PATH,iB),this.define(K.POLYGON,iG),this.define(K.POLYLINE,iV),this.define(K.TEXT,iH),this.define(K.HTML,iO);},[{key:"define",value:function(e,t){this.registry[e]=t;}},{key:"get",value:function(e){return this.registry[e];}}]),iY={number:function(e){return new tM(e);},percent:function(e){return new tM(e,"%");},px:function(e){return new tM(e,"px");},em:function(e){return new tM(e,"em");},rem:function(e){return new tM(e,"rem");},deg:function(e){return new tM(e,"deg");},grad:function(e){return new tM(e,"grad");},rad:function(e){return new tM(e,"rad");},turn:function(e){return new tM(e,"turn");},s:function(e){return new tM(e,"s");},ms:function(e){return new tM(e,"ms");},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,a=e.syntax;id.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:a});},registerLayout:function(e,t){id.layoutRegistry.registerLayout(e,t);}},iq=function(e){var t,n;function r(){(0,A.default)(this,r),(e=(0,R.default)(this,r)).defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new id.AnimationTimeline(e);}catch(e){}var e,t={};return nR.forEach(function(e){var n=e.n,r=e.inh,i=e.d;r&&i&&(t[n]=(0,G.isFunction)(i)?i(K.GROUP):i);}),e.documentElement=new iP({id:"g-root",style:t}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e;}return(0,D.default)(r,e),(0,O.default)(r,[{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"createElement",value:function(e,t){if("svg"===e)return this.documentElement;var n=this.defaultView.customElements.get(e);n||(console.warn("Unsupported tagName: ",e),n="tspan"===e?iH:iP);var r=new n(t);return r.ownerDocument=this,r;}},{key:"createElementNS",value:function(e,t,n){return this.createElement(t,n);}},{key:"cloneNode",value:function(e){throw Error(ec);}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy();}catch(e){}}},{key:"elementsFromBBox",value:function(e,t,n,r){var i=this.defaultView.context.rBushRoot.search({minX:e,minY:t,maxX:n,maxY:r}),a=[];return i.forEach(function(e){var t=e.displayObject,n=t.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===n?"auto":n);(!r||r&&t.isVisible())&&!t.isCulled()&&t.isInteractive()&&a.push(t);}),a.sort(function(e,t){return t.sortable.renderOrder-e.sortable.renderOrder;}),a;}},{key:"elementFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return d&&d[0]||this.documentElement;}},{key:"elementFromPoint",value:(t=(0,H.default)((0,U.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h;return(0,U.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=this.defaultView.canvas2Viewport({x:t,y:n})).x,a=r.y,s=(o=this.defaultView.getConfig()).width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=1;break;}return e.abrupt("return",null);case 1:return c=(u=this.defaultView.viewport2Client({x:i,y:a})).x,d=u.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:c,clientY:d},picked:[]});case 2:return h=e.sent.picked,e.abrupt("return",h&&h[0]||this.documentElement);case 3:case"end":return e.stop();}},e,this);})),function(e,n){return t.apply(this,arguments);})},{key:"elementsFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return d[d.length-1]!==this.documentElement&&d.push(this.documentElement),d;}},{key:"elementsFromPoint",value:(n=(0,H.default)((0,U.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h;return(0,U.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=this.defaultView.canvas2Viewport({x:t,y:n})).x,a=r.y,s=(o=this.defaultView.getConfig()).width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=1;break;}return e.abrupt("return",[]);case 1:return c=(u=this.defaultView.viewport2Client({x:i,y:a})).x,d=u.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:c,clientY:d},picked:[]});case 2:return(h=e.sent.picked)[h.length-1]!==this.documentElement&&h.push(this.documentElement),e.abrupt("return",h);case 3:case"end":return e.stop();}},e,this);})),function(e,t){return n.apply(this,arguments);})},{key:"appendChild",value:function(e,t){throw Error(ed);}},{key:"insertBefore",value:function(e,t){throw Error(ed);}},{key:"removeChild",value:function(e,t){throw Error(ed);}},{key:"replaceChild",value:function(e,t,n){throw Error(ed);}},{key:"append",value:function(){throw Error(ed);}},{key:"prepend",value:function(){throw Error(ed);}},{key:"getElementById",value:function(e){return this.documentElement.getElementById(e);}},{key:"getElementsByName",value:function(e){return this.documentElement.getElementsByName(e);}},{key:"getElementsByTagName",value:function(e){return this.documentElement.getElementsByTagName(e);}},{key:"getElementsByClassName",value:function(e){return this.documentElement.getElementsByClassName(e);}},{key:"querySelector",value:function(e){return this.documentElement.querySelector(e);}},{key:"querySelectorAll",value:function(e){return this.documentElement.querySelectorAll(e);}},{key:"find",value:function(e){return this.documentElement.find(e);}},{key:"findAll",value:function(e){return this.documentElement.findAll(e);}}]);}(rz),iX=function(){function e(t){(0,A.default)(this,e),this.strategies=t;}return(0,O.default)(e,[{key:"apply",value:function(t){var n=t.config,r=t.camera,i=t.renderingService,a=t.renderingContext,o=this.strategies;i.hooks.cull.tap(e.tag,function(e){if(e){var t,i=e.cullable;if(0===o.length?i.visible=a.unculledEntities.indexOf(e.entity)>-1:i.visible=o.every(function(t){return t.isVisible(r,e);}),!e.isCulled()&&e.isVisible())return e;var s=(null===(t=n.future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return e.dispatchEvent(new rF(rq.CULLED),s,s),null;}return e;}),i.hooks.afterRender.tap(e.tag,function(e){e.cullable.visibilityPlaneMask=-1;});}}]);}();iX.tag="Culling";var i$=function(){function e(){var t=this;(0,A.default)(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new rI(null),this.rootWheelEvent=new rB(null),this.onPointerMove=function(e){var n=null===(r=t.context.renderingContext.root)||void 0===r||null===(r=r.ownerDocument)||void 0===r?void 0:r.defaultView;if(!n.supportsTouchEvents||"touch"!==e.pointerType){var r,i,a=t.normalizeToPointerEvent(e,n),o=(0,W.default)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=t.bootstrapEvent(t.rootPointerEvent,s,n,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);}},this.onClick=function(e){var n,r,i=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=t.normalizeToPointerEvent(e,i),o=(0,W.default)(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=t.bootstrapEvent(t.rootPointerEvent,s,i,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);};}return(0,O.default)(e,[{key:"apply",value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null;}),r.hooks.pointerWheel.tap(e.tag,function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t);}),r.hooks.pointerDown.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t=n.normalizeToPointerEvent(e,i);n.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();var r,a=(0,W.default)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerUp.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,e)?"":"outside",o=n.normalizeToPointerEvent(e,i),s=(0,W.default)(o);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,e);u.type+=a,n.context.eventService.mapEvent(u);}}catch(e){s.e(e);}finally{s.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(e){var t,r=n.normalizeToPointerEvent(e,i),a=(0,W.default)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);});}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),l=s.x,u=s.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n5[e.type]||e.type),e;}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t;}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=n8.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null;}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default");}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];(0,G.isUndefined)(i.button)&&(i.button=0),(0,G.isUndefined)(i.buttons)&&(i.buttons=1),(0,G.isUndefined)(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,G.isUndefined)(i.width)&&(i.width=i.radiusX||1),(0,G.isUndefined)(i.height)&&(i.height=i.radiusY||1),(0,G.isUndefined)(i.tiltX)&&(i.tiltX=0),(0,G.isUndefined)(i.tiltY)&&(i.tiltY=0),(0,G.isUndefined)(i.pointerType)&&(i.pointerType="touch"),(0,G.isUndefined)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,G.isUndefined)(i.pressure)&&(i.pressure=i.force||.5),(0,G.isUndefined)(i.twist)&&(i.twist=0),(0,G.isUndefined)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i);}else t.isMouseEvent(e)&&((0,G.isUndefined)(e.isPrimary)&&(e.isPrimary=!0),(0,G.isUndefined)(e.width)&&(e.width=1),(0,G.isUndefined)(e.height)&&(e.height=1),(0,G.isUndefined)(e.tiltX)&&(e.tiltX=0),(0,G.isUndefined)(e.tiltY)&&(e.tiltY=0),(0,G.isUndefined)(e.pointerType)&&(e.pointerType="mouse"),(0,G.isUndefined)(e.pointerId)&&(e.pointerId=1),(0,G.isUndefined)(e.pressure)&&(e.pressure=.5),(0,G.isUndefined)(e.twist)&&(e.twist=0),(0,G.isUndefined)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),n.push(e);return n;}}]);}();i$.tag="Event";var iK=[K.CIRCLE,K.ELLIPSE,K.IMAGE,K.RECT,K.LINE,K.POLYLINE,K.POLYGON,K.TEXT,K.PATH,K.HTML],iZ=(0,O.default)(function e(){(0,A.default)(this,e);},[{key:"isVisible",value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(ei.isEmpty(i))return!1;var a=e.getFrustum(),o=null===(n=t.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||eo.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==eo.OUTSIDE,r.visible;}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n,r){if(n===eo.OUTSIDE||n===eo.INSIDE)return n;for(var i=eo.INSIDE,a=iK.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var l=1<<o;if((n&l)!=0&&(!a||4!==o&&5!==o)){var u=r[o],c=u.normal,d=u.distance;if(F.vec3.dot(c,t.getPositiveFarPoint(r[o]))+d<0)return eo.OUTSIDE;F.vec3.dot(c,t.getNegativeFarPoint(r[o]))+d<0&&(i|=l);}}return i;}}]),iQ=function(){function e(){(0,A.default)(this,e),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1;}return(0,O.default)(e,[{key:"apply",value:function(t){var n,r,i=this,a=t.config,o=t.renderingService,s=t.renderingContext,l=t.rBushRoot,u=s.root.ownerDocument.defaultView;this.rBush=l;var c=function(e){o.dirtify();},d=function(e){i.syncTasks.set(e.target,e.detail.affectChildren),o.dirtify();},h=function(e){var t=e.target;id.enableSizeAttenuation&&id.styleValueRegistry.updateSizeAttenuation(t,u.getCamera().getZoom());},f=function(e){var t=e.target,n=t.rBushNode;null!=n&&n.aabb&&i.rBush.remove(n.aabb),i.syncTasks.delete(t),id.sceneGraphService.dirtyToRoot(t),o.dirtify();};o.hooks.init.tap(e.tag,function(){u.addEventListener(rq.MOUNTED,h),u.addEventListener(rq.UNMOUNTED,f),u.addEventListener(rq.ATTR_MODIFIED,c),u.addEventListener(rq.BOUNDS_CHANGED,d);}),o.hooks.destroy.tap(e.tag,function(){u.removeEventListener(rq.MOUNTED,h),u.removeEventListener(rq.UNMOUNTED,f),u.removeEventListener(rq.ATTR_MODIFIED,c),u.removeEventListener(rq.BOUNDS_CHANGED,d),i.syncTasks.clear();});var p=null!==(n=id.globalThis.requestIdleCallback)&&void 0!==n?n:rs.bind(id.globalThis),v=(null===(r=a.future)||void 0===r?void 0:r.experimentalRICSyncRTree)===!0;o.hooks.endFrame.tap(e.tag,function(){i.isFirstTimeRendering?(i.isFirstTimeRendering=!1,i.syncing=!0,p(function(){i.syncRTree(!0),i.isFirstTimeRenderingFinished=!0;})):v&&id.globalThis.requestIdleCallback&&id.globalThis.cancelIdleCallback?(id.globalThis.cancelIdleCallback(i.ricSyncRTreeId),i.ricSyncRTreeId=id.globalThis.requestIdleCallback(function(){return i.syncRTree();})):i.syncRTree();});}},{key:"syncNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isConnected){var n=e.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=e.getRenderBounds();if(r){var i=e.renderable;t&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new ei),i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=r.getMin(),o=(0,I.default)(a,2),s=o[0],l=o[1],u=r.getMax(),c=(0,I.default)(u,2),d=c[0],h=c[1];n.aabb||(n.aabb={}),n.aabb.displayObject=e,n.aabb.minX=s,n.aabb.minY=l,n.aabb.maxX=d,n.aabb.maxY=h;}if(n.aabb&&!isNaN(n.aabb.maxX)&&!isNaN(n.aabb.maxX)&&!isNaN(n.aabb.minX)&&!isNaN(n.aabb.minY))return n.aabb;}}},{key:"syncRTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=e.syncNode(i,t);a&&(n.push(a),r.add(i));}};this.syncTasks.forEach(function(e,t){e&&t.forEach(i);for(var n=t;n;)i(n),n=n.parentElement;}),this.rBush.load(n),n.length=0,this.syncing=!1;}}}]);}();iQ.tag="Prepare";var iJ=((C={}).READY="ready",C.BEFORE_RENDER="beforerender",C.RERENDER="rerender",C.AFTER_RENDER="afterrender",C.BEFORE_DESTROY="beforedestroy",C.AFTER_DESTROY="afterdestroy",C.RESIZE="resize",C.DIRTY_RECTANGLE="dirtyrectangle",C.RENDERER_CHANGED="rendererchanged",C),i0=new rF(rq.MOUNTED),i1=new rF(rq.UNMOUNTED),i2=new rF(iJ.BEFORE_RENDER),i3=new rF(iJ.RERENDER),i4=new rF(iJ.AFTER_RENDER),i6=function(e){function t(e){(0,A.default)(this,t),(i=(0,R.default)(this,t)).Element=iM,i.inited=!1,i.context={};var n,r,i,a=e.container,o=e.canvas,s=e.renderer,l=e.width,u=e.height,c=e.background,d=e.cursor,h=e.supportsMutipleCanvasesInOneContainer,f=e.cleanUpOnDestroy,p=void 0===f||f,v=e.offscreenCanvas,g=e.devicePixelRatio,m=e.requestAnimationFrame,y=e.cancelAnimationFrame,b=e.createImage,E=e.supportsTouchEvents,x=e.supportsPointerEvents,k=e.isTouchEvent,S=e.isMouseEvent,T=e.dblClickSpeed,M=l,w=u,N=g||n3&&window.devicePixelRatio||1;return N=N>=1?Math.ceil(N):1,o&&(M=l||("auto"===(n=n6(o,"width"))?o.offsetWidth:parseFloat(n))||o.width/N,w=u||("auto"===(r=n6(o,"height"))?o.offsetHeight:parseFloat(r))||o.height/N),i.customElements=new iW,i.devicePixelRatio=N,i.requestAnimationFrame=null!=m?m:rs.bind(id.globalThis),i.cancelAnimationFrame=null!=y?y:rl.bind(id.globalThis),i.createImage=null!=b?b:function(){return new window.Image;},i.supportsTouchEvents=null!=E?E:"ontouchstart"in id.globalThis,i.supportsPointerEvents=null!=x?x:!!id.globalThis.PointerEvent,i.isTouchEvent=null!=k?k:function(e){return i.supportsTouchEvents&&e instanceof id.globalThis.TouchEvent;},i.isMouseEvent=null!=S?S:function(e){return!id.globalThis.MouseEvent||e instanceof id.globalThis.MouseEvent&&(!i.supportsPointerEvents||!(e instanceof id.globalThis.PointerEvent));},v&&(id.offscreenCanvas=v),i.document=new iq,i.document.defaultView=i,h||function(e,t,n){if(e){var r="string"==typeof e?document.getElementById(e):e;n2.has(r)&&n2.get(r).destroy(n),n2.set(r,t);}}(a,i,p),i.initRenderingContext((0,P.default)((0,P.default)({},e),{},{width:M,height:w,background:null!=c?c:"transparent",cursor:null!=d?d:"default",cleanUpOnDestroy:p,devicePixelRatio:N,requestAnimationFrame:i.requestAnimationFrame,cancelAnimationFrame:i.cancelAnimationFrame,createImage:i.createImage,supportsTouchEvents:i.supportsTouchEvents,supportsPointerEvents:i.supportsPointerEvents,isTouchEvent:i.isTouchEvent,isMouseEvent:i.isMouseEvent,dblClickSpeed:null!=T?T:200})),i.initDefaultCamera(M,w,s.clipSpaceNearZ),i.initRenderer(s,!0),i;}return(0,D.default)(t,e),(0,O.default)(t,[{key:"initRenderingContext",value:function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1};}},{key:"initDefaultCamera",value:function(e,t,n){var r=this,i=new id.CameraContribution;i.clipSpaceNearZ=n,i.setType(eN.EXPLORING,eC.DEFAULT).setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0).setOrthographic(-(e/2),e/2,t/2,-(t/2),.1,1e3),i.canvas=this,i.eventEmitter.on(eP.UPDATED,function(){r.context.renderingContext.renderReasons.add(rU.CAMERA_CHANGED),id.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation();}),this.context.camera=i;}},{key:"updateSizeAttenuation",value:function(){var e=this.getCamera().getZoom();this.document.documentElement.forEach(function(t){id.styleValueRegistry.updateSizeAttenuation(t,e);});}},{key:"getConfig",value:function(){return this.context.config;}},{key:"getRoot",value:function(){return this.document.documentElement;}},{key:"getCamera",value:function(){return this.context.camera;}},{key:"getContextService",value:function(){return this.context.contextService;}},{key:"getEventService",value:function(){return this.context.eventService;}},{key:"getRenderingService",value:function(){return this.context.renderingService;}},{key:"getRenderingContext",value:function(){return this.context.renderingContext;}},{key:"getStats",value:function(){return this.getRenderingService().getStats();}},{key:"ready",get:function(){var e=this;return!this.readyPromise&&(this.readyPromise=new Promise(function(t){e.resolveReadyPromise=function(){t(e);};}),this.inited&&this.resolveReadyPromise()),this.readyPromise;}},{key:"destroy",value:function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=arguments.length>1?arguments[1]:void 0;ts.clearCache();var r=(null===(e=this.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;n||this.dispatchEvent(new rF(iJ.BEFORE_DESTROY),r,r),this.frameId&&this.cancelAnimationFrame(this.frameId);var i=this.getRoot();t&&(this.unmountChildren(i),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),n||this.dispatchEvent(new rF(iJ.AFTER_DESTROY),r,r);var a=function(e){e.currentTarget=null,e.manager=null,e.target=null,e.relatedNode=null;};a(i0),a(i1),a(i2),a(i3),a(i4),a(ik),a(ig),a(im),a(iy);}},{key:"changeSize",value:function(e,t){this.resize(e,t);}},{key:"resize",value:function(e,t){var n,r=this.context.config;r.width=e,r.height=t,this.getContextService().resize(e,t);var i=this.context.camera,a=i.getProjectionMode();i.setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0),a===e_.ORTHOGRAPHIC?i.setOrthographic(-(e/2),e/2,t/2,-(t/2),i.getNear(),i.getFar()):i.setAspect(e/t);var o=(null===(n=r.future)||void 0===n?void 0:n.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new rF(iJ.RESIZE,{width:e,height:t}),o,o);}},{key:"appendChild",value:function(e,t){return this.document.documentElement.appendChild(e,t);}},{key:"insertBefore",value:function(e,t){return this.document.documentElement.insertBefore(e,t);}},{key:"removeChild",value:function(e){return this.document.documentElement.removeChild(e);}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren();}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren();}},{key:"render",value:function(e){var t,n=this;e&&(i2.detail=e,i4.detail=e);var r=(null===(t=this.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;this.dispatchEvent(i2,r,r),this.getRenderingService().render(this.getConfig(),e,function(){n.dispatchEvent(i3,r,r);}),this.dispatchEvent(i4,r,r);}},{key:"run",value:function(){var e=this,t=function(n,r){e.render(r),e.frameId=e.requestAnimationFrame(t);};t();}},{key:"initRenderer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)throw Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new $,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new i$,new iQ,new iX([new iZ])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService((0,P.default)((0,P.default)({},id),this.context)),this.context.renderingService=new rH(id,this.context),this.context.eventService=new rV(id,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,n,!0)):this.context.contextService.initAsync().then(function(){t.initRenderingService(e,n);}).catch(function(e){console.error(e);});}},{key:"initRenderingService",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init(function(){t.inited=!0;var i,a=(null===(i=t.getConfig().future)||void 0===i?void 0:i.experimentalCancelEventPropagation)===!0;n?r?t.requestAnimationFrame(function(){t.dispatchEvent(new rF(iJ.READY),a,a);}):t.dispatchEvent(new rF(iJ.READY),a,a):t.dispatchEvent(new rF(iJ.RENDERER_CHANGED),a,a),t.readyPromise&&t.resolveReadyPromise(),n||t.getRoot().forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),t.mountChildren(t.getRoot()),e.getConfig().enableAutoRendering&&t.run();});}},{key:"loadRendererContainerModule",value:function(e){var t=this;e.getPlugins().forEach(function(e){e.context=t.context,e.init(id);});}},{key:"setRenderer",value:function(e){var t=this.getConfig();if(t.renderer!==e){var n=t.renderer;t.renderer=e,this.destroy(!1,!0),(0,L.default)((null==n?void 0:n.getPlugins())||[]).reverse().forEach(function(e){e.destroy(id);}),this.initRenderer(e);}}},{key:"setCursor",value:function(e){this.getConfig().cursor=e,this.getContextService().applyCursorStyle(e);}},{key:"unmountChildren",value:function(e){var t=this;if(e.childNodes.forEach(function(e){t.unmountChildren(e);}),this.inited){if(e.isMutationObserved)e.dispatchEvent(i1);else{var n,r=(null===(n=this.getConfig().future)||void 0===n?void 0:n.experimentalCancelEventPropagation)===!0;i1.target=e,this.dispatchEvent(i1,!0,r);}e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1;}e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback();}},{key:"mountChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n9(e);if(this.inited){if(!e.isConnected&&(e.ownerDocument=this.document,e.isConnected=!0,!n)){if(e.isMutationObserved)e.dispatchEvent(i0);else{var r,i=(null===(r=this.getConfig().future)||void 0===r?void 0:r.experimentalCancelEventPropagation)===!0;i0.target=e,this.dispatchEvent(i0,!0,i);}}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",e.nodeName);e.childNodes.forEach(function(e){t.mountChildren(e,n);}),e.isCustomElement&&e.connectedCallback&&e.connectedCallback();}},{key:"mountFragment",value:function(e){this.mountChildren(e,!1);}},{key:"client2Viewport",value:function(e){return this.getEventService().client2Viewport(e);}},{key:"viewport2Client",value:function(e){return this.getEventService().viewport2Client(e);}},{key:"viewport2Canvas",value:function(e){return this.getEventService().viewport2Canvas(e);}},{key:"canvas2Viewport",value:function(e){return this.getEventService().canvas2Viewport(e);}},{key:"getPointByClient",value:function(e,t){return this.client2Viewport({x:e,y:t});}},{key:"getClientByPoint",value:function(e,t){return this.viewport2Client({x:e,y:t});}}]);}(rG);},"27a6f2bf":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getWordWrapWidthByBox:function(){return a;},getWordWrapWidthByEnds:function(){return o;},getWordWrapWidthWithBase:function(){return i;}});var r=n("71473486");function i(e,t){let n=2*e;return"string"==typeof t?n=e*Number(t.replace("%",""))/100:"number"==typeof t&&(n=t),isNaN(n)&&(n=2*e),n;}function a(e,t,n=1,r=!1){return i((e.max[0]-e.min[0])*(r?n:1),t);}function o(e,t,n=1){return i((0,r.distance)(e[0],e[1])*n,t);}},"27a9fe4d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getItemsBBox",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("eb97948a");function a(e){for(var t=1/0,n=1/0,a=-1/0,o=-1/0,s=0;s<e.length;s++){var l=e[s],u=l.x,c=l.y,d=l.width,h=l.height,f=(0,r.__read)([u+d,c+h],2),p=f[0],v=f[1];u<t&&(t=u),c<n&&(n=c),p>a&&(a=p),v>o&&(o=v);}return new i.BBox(t,n,a-t,o-n);}},28792030:function(e,t,n){"use strict";function r(e=0){if(Array.isArray(e)){let[t=0,n=t,r=t,i=n]=e;return[t,n,r,i];}return[e,e,e,e];}function i(e=0){let t=r(e);return t[0]+t[2];}n.d(t,"__esModule",{value:!0}),n.e(t,{getVerticalPadding:function(){return i;},parsePadding:function(){return r;}});},"28c22ab1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"AssignColorByBranch",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.BaseTransform{static defaultOptions={colors:["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};constructor(e,t){super(e,Object.assign({},i.defaultOptions,t));}beforeDraw(e){let t=this.context.model.getNodeData();if(0===t.length)return e;let n=0,r=(e,i)=>{var a;let o=t.find(t=>t.id==e);o&&(o.style||(o.style={}),o.style.color=i||this.options.colors[n++%this.options.colors.length],null===(a=o.children)||void 0===a||a.forEach(e=>{var t;return r(e,null===(t=o.style)||void 0===t?void 0:t.color);}));};return t.filter(e=>1===e.depth).forEach(e=>r(e.id)),e;}}},"29b470de":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{measureText:function(){return o;},measureTextHeight:function(){return l;},measureTextWidth:function(){return s;}});var r=n("c5eb7168"),i=n("346c1bbd"),a=this&&this.__spreadArray||function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t));},o=(0,r.memoize)(function(e,t){void 0===t&&(t={});var n=t.fontSize,a=t.fontFamily,o=t.fontWeight,s=t.fontStyle,l=t.fontVariant,u=(0,i.getCanvasContext)();return u.font=[s,o,l,"".concat(n,"px"),void 0===a?"sans-serif":a].join(" "),u.measureText((0,r.isString)(e)?e:"");},function(e,t){return void 0===t&&(t={}),a([e],(0,r.values)(t),!0).join("");}),s=function(e,t){return void 0===t&&(t={}),o(e,t).width;},l=function(e,t){void 0===t&&(t={});var n=o(e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;};},"29bf47da":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Time",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("9c40fbca"),a=n("da5246de"),o=n("21162038"),s=n("90abb703");function l(e){let t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n;}class u extends a.Continuous{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:o.d3Time,interpolate:s.createInterpolateNumber,mask:void 0,utc:!1};}chooseTransforms(){return[e=>+e,e=>new Date(e)];}chooseNice(){return s.d3TimeNice;}getTickMethodOptions(){let{domain:e,tickCount:t,tickInterval:n,utc:r}=this.options;return[e[0],e[e.length-1],t,n,r];}getFormatter(){let{mask:e,utc:t}=this.options,n=t?s.utcIntervalMap:s.localIntervalMap,a=t?l:r.identity;return t=>(0,i.format)(a(t),e||(0,s.chooseNiceTimeMask)(t,n));}clone(){return new u(this.options);}}},"2a08964b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getXYByPlacement:function(){return s;},getXYByRelativePlacement:function(){return o;},hasPosition:function(){return a;},positionOf:function(){return i;}});var r=n("b625de69");function i(e){let{x:t=0,y:n=0,z:r=0}=e.style||{};return[+t,+n,+r];}function a(e){let{x:t,y:n,z:r}=e.style||{};return void 0!==t||void 0!==n||void 0!==r;}function o(e,t){let[n,r]=t,{min:i,max:a}=e;return[i[0]+n*(a[0]-i[0]),i[1]+r*(a[1]-i[1])];}function s(e,t="center"){return o(e,(0,r.parsePlacement)(t));}},"2b663a31":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"formatLabel",{enumerable:!0,get:function(){return i;}});var r=n("c5eb7168");function i(e,t){return String(t?"function"==typeof t?t(e):(0,r.get)(e,`data.${t}`,e.id):e.id);}},"2b7b8fb0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{BrushSelect:function(){return c;},getCursorPoint:function(){return d;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("81401a10"),s=n("8bdd800c"),l=n("db1e79e1"),u=n("32576f8a");class c extends u.BaseBehavior{constructor(e,t){super(e,(0,i.deepMix)({},c.defaultOptions,t)),this.shortcut=new l.Shortcut(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents();}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;let{canvas:t,graph:n}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new r.Rect({id:"g6-brush-select",style:i}),t.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y];}onPointerMove(e){var t;if(!this.startPoint)return;let{immediately:n,mode:r}=this.options;this.endPoint=d(e,this.context.graph),null===(t=this.rectShape)||void 0===t||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&"default"===r&&this.updateElementsStates((0,s.getBoundingPoints)(this.startPoint,this.endPoint));}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return;}this.endPoint=d(e,this.context.graph),this.updateElementsStates((0,s.getBoundingPoints)(this.startPoint,this.endPoint)),this.clearBrush();}}clearStates(){this.endPoint||this.clearElementsStates();}clearElementsStates(){let{graph:e}=this.context,t=Object.values(e.getData()).reduce((e,t)=>Object.assign({},e,t.reduce((e,t)=>{var n;let r=null===(n=t.states||[])||void 0===n?void 0:n.filter(e=>e!==this.options.state);return e[(0,o.idOf)(t)]=r,e;},{})),{});e.setElementState(t,this.options.animation);}updateElementsStates(e){let{graph:t}=this.context,{enableElements:n,state:r,mode:a,onSelect:o}=this.options,s=this.selector(t,e,n),l={};switch(a){case"union":s.forEach(e=>{l[e]=[...t.getElementState(e),r];});break;case"diff":s.forEach(e=>{let n=t.getElementState(e);l[e]=n.includes(r)?n.filter(e=>e!==r):[...n,r];});break;case"intersect":s.forEach(e=>{let n=t.getElementState(e);l[e]=n.includes(r)?[r]:[];});break;default:s.forEach(e=>{l[e]=[r];});}(0,i.isFunction)(o)&&o(l),t.setElementState(l,this.options.animation);}selector(e,t,n){if(!n||0===n.length)return[];let r=[],i=e.getData();if(n.forEach(n=>{i[`${n}s`].forEach(n=>{let i=(0,o.idOf)(n);"hidden"!==e.getElementVisibility(i)&&(0,s.isPointInPolygon)(e.getElementPosition(i),t)&&r.push(i);});}),n.includes("edge")){let e=i.edges;null==e||e.forEach(e=>{let{source:t,target:n}=e;r.includes(t)&&r.includes(n)&&r.push((0,o.idOf)(e));});}return r;}clearBrush(){var e;null===(e=this.rectShape)||void 0===e||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0;}isKeydown(){let{trigger:e}=this.options,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter(e=>"drag"!==e));}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,i.isFunction)(t)?t(e):!!t;}bindEvents(){let{graph:e}=this.context;e.on(a.CommonEvent.POINTER_DOWN,this.onPointerDown),e.on(a.CommonEvent.POINTER_MOVE,this.onPointerMove),e.on(a.CommonEvent.POINTER_UP,this.onPointerUp),e.on(a.CanvasEvent.CLICK,this.clearStates);}unbindEvents(){let{graph:e}=this.context;e.off(a.CommonEvent.POINTER_DOWN,this.onPointerDown),e.off(a.CommonEvent.POINTER_MOVE,this.onPointerMove),e.off(a.CommonEvent.POINTER_UP,this.onPointerUp),e.off(a.CanvasEvent.CLICK,this.clearStates);}update(e){this.unbindEvents(),this.options=(0,i.deepMix)(this.options,e),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy();}}c.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};let d=(e,t)=>{if(("node"===e.targetType||"combo"===e.targetType)&&!(e.nativeEvent.target instanceof HTMLCanvasElement)){let[n,r]=t.getCanvasByClient([e.client.x,e.client.y]);return[n,r];}return[e.canvas.x,e.canvas.y];};},"2b8d3cb9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"replaceChildren",{enumerable:!0,get:function(){return i;}});var r=n("18f14020"),i=function(e,t){if(null==t){e.innerHTML="";return;}e.replaceChildren?Array.isArray(t)?e.replaceChildren.apply(e,(0,r.__spreadArray)([],(0,r.__read)(t),!1)):e.replaceChildren(t):(e.innerHTML="",Array.isArray(t)?t.forEach(function(t){return e.appendChild(t);}):e.appendChild(t));};},"2be73991":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"replaceTranslateInTransform",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e,t,n,a=[]){if(!a&&0===e&&0===t&&0===n)return null;if(Array.isArray(a)){let i=-1,o=[];for(let r=0;r<a.length;r++){let s=a[r];if("translate"===s[0]){if(s[1]===e&&s[2]===t)return null;i=r,o.push(["translate",e,t]);}else if("translate3d"===s[0]){if(s[1]===e&&s[2]===t&&s[3]===n)return null;i=r,o.push(["translate3d",e,t,null!=n?n:0]);}else o.push(s);}return(-1===i&&o.splice(0,0,(0,r.isNumber)(n)?["translate3d",e,t,null!=n?n:0]:["translate",e,t]),0===o.length)?null:o;}let o=a?a.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?`translate(${e}, ${t})${o}`:`translate3d(${e}, ${t}, ${n})${o}`;}},"2d6394cf":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Grid",{enumerable:!0,get:function(){return c;}});var r=n("18f14020"),i=n("f457f3e3"),a=n("c086f503"),o=n("01a29d03"),s=(0,o.classNames)({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function l(e){return e.reduce(function(e,t,n){return e.push((0,r.__spreadArray)([0===n?"M":"L"],(0,r.__read)(t),!1)),e;},[]);}function u(e,t,n){return"surround"===t.type?function(e,t,n){var i=t.connect,a=t.center;if("line"===(void 0===i?"line":i))return l(e);if(!a)return[];var s=(0,o.distance)(e[0],a),u=n?0:1;return e.reduce(function(e,t,n){return 0===n?e.push((0,r.__spreadArray)(["M"],(0,r.__read)(t),!1)):e.push((0,r.__spreadArray)(["A",s,s,0,0,u],(0,r.__read)(t),!1)),e;},[]);}(e,t,n):l(e);}var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,t){e.type,e.center,e.areaFill,e.closed;var n,a,l,c,d,h=(0,r.__rest)(e,["type","center","areaFill","closed"]),f=(a=void 0===(n=e.data)?[]:n,e.closed?a.map(function(e){var t=e.points,n=(0,r.__read)(t,1)[0];return(0,r.__assign)((0,r.__assign)({},e),{points:(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t),!1),[n],!1)});}):a),p=(0,o.select)(t).maybeAppendByClassName(s.lineGroup,"g"),v=(0,o.select)(t).maybeAppendByClassName(s.regionGroup,"g"),g=(l=e.animate,c=e.isBillboard,d=f.map(function(t,n){return{id:t.id||"grid-line-".concat(n),d:u(t.points,e)};}),p.selectAll(s.line.class).data(d,function(e){return e.id;}).join(function(e){return e.append("path").each(function(e,t){var n=(0,o.getCallbackValue)((0,o.getPrimitiveAttributes)((0,r.__assign)({d:e.d},h)),[e,t,d]);this.attr((0,r.__assign)({class:s.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:c},n));});},function(e){return e.transition(function(e,t){var n=(0,o.getCallbackValue)((0,o.getPrimitiveAttributes)((0,r.__assign)({d:e.d},h)),[e,t,d]);return(0,i.transition)(this,n,l.update);});},function(e){return e.transition(function(){var e=this,t=(0,i.fadeOut)(this,l.exit);return(0,i.onAnimateFinished)(t,function(){return e.remove();}),t;});}).transitions()),m=function(e,t,n){var a=n.animate,l=n.connect,c=n.areaFill;if(t.length<2||!c||!l)return[];for(var d=Array.isArray(c)?c:[c,"transparent"],h=[],f=0;f<t.length-1;f++){var p=(0,r.__read)([t[f].points,t[f+1].points],2),v=function(e,t,n){var i=n.type,a=n.connect,s=n.center,l=n.closed?[["Z"]]:[],c=(0,r.__read)([u(e,n),u(t.slice().reverse(),n,!0)],2),d=c[0],h=c[1],f=(0,r.__read)([e[0],t.slice(-1)[0]],2),p=f[0],v=f[1],g=function(e,t){return[d,e,h,t,l].flat();};if("line"===a||"surround"===i)return g([(0,r.__spreadArray)(["L"],(0,r.__read)(v),!1)],[(0,r.__spreadArray)(["L"],(0,r.__read)(p),!1)]);if(!s)throw Error("Arc grid need to specified center");var m=(0,r.__read)([(0,o.distance)(v,s),(0,o.distance)(p,s)],2),y=m[0],b=m[1];return g([(0,r.__spreadArray)(["A",y,y,0,0,1],(0,r.__read)(v),!1),(0,r.__spreadArray)(["L"],(0,r.__read)(v),!1)],[(0,r.__spreadArray)(["A",b,b,0,0,0],(0,r.__read)(p),!1),(0,r.__spreadArray)(["L"],(0,r.__read)(p),!1)]);}(p[0],p[1],n);h.push({d:v,fill:d[f%d.length]});}return e.selectAll(s.region.class).data(h,function(e,t){return t;}).join(function(e){return e.append("path").each(function(e,t){var n=(0,o.getCallbackValue)(e,[e,t,h]);this.attr(n);}).attr("className",s.region.name);},function(e){return e.transition(function(e,t){var n=(0,o.getCallbackValue)(e,[e,t,h]);return(0,i.transition)(this,n,a.update);});},function(e){return e.transition(function(){var e=this,t=(0,i.fadeOut)(this,a.exit);return(0,i.onAnimateFinished)(t,function(){return e.remove();}),t;});}).transitions();}(v,f,e);return(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(g),!1),(0,r.__read)(m),!1);},t;}(a.Component);},"2e4c3b5a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Handle",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("c086f503"),a=n("01a29d03"),o=n("bd3ad08a"),s=(0,a.classNames)({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,t){var n=e.x,i=e.y,o=e.size,l=void 0===o?10:o,u=e.radius,c=e.orientation,d=e.classNamePrefix,h=(0,r.__rest)(e,["x","y","size","radius","orientation","classNamePrefix"]),f=2.4*l,p=d?"".concat(s.iconRect.name," ").concat(d,"handle-icon-rect"):s.iconRect.name,v=function(e){return d?"".concat(s.iconLine,"-").concat(e," ").concat(d,"handle-icon-line"):"".concat(s.iconLine,"-").concat(e);},g=(0,a.select)(t).maybeAppendByClassName(s.iconRect,"rect").attr("className",p).styles((0,r.__assign)((0,r.__assign)({},h),{width:l,height:f,radius:void 0===u?l/4:u,x:n-l/2,y:i-f/2,transformOrigin:"center"})),m=n+1/3*l-l/2,y=n+2/3*l-l/2,b=i+1/4*f-f/2,E=i+3/4*f-f/2;g.maybeAppendByClassName("".concat(s.iconLine,"-1"),"line").attr("className",v(1)).styles((0,r.__assign)({x1:m,x2:m,y1:b,y2:E},h)),g.maybeAppendByClassName("".concat(s.iconLine,"-2"),"line").attr("className",v(2)).styles((0,r.__assign)({x1:y,x2:y,y1:b,y2:E},h)),"vertical"===c&&(g.node().style.transform="rotate(90)");},t;}(i.Component),u=function(e){function t(t){return e.call(this,t,o.HANDLE_DEFAULT_CFG)||this;}return(0,r.__extends)(t,e),t.prototype.renderLabel=function(e){var t=this,n=this.attributes,i=n.x,l=n.y,u=n.showLabel,c=(0,a.subStyleProps)(this.attributes,"label"),d=c.x,h=void 0===d?0:d,f=c.y,p=void 0===f?0:f,v=c.transform,g=c.transformOrigin,m=(0,r.__rest)(c,["x","y","transform","transformOrigin"]),y=(0,r.__read)((0,a.splitStyle)(m,[]),2),b=y[0],E=y[1],x=(0,a.select)(e).maybeAppendByClassName(s.labelGroup,"g").styles(E),k=(0,r.__assign)((0,r.__assign)({},o.HANDLE_LABEL_DEFAULT_CFG),b),S=k.text,T=(0,r.__rest)(k,["text"]);(0,a.ifShow)(!!u,x,function(e){t.label=e.maybeAppendByClassName(s.label,"text").styles((0,r.__assign)((0,r.__assign)({},T),{x:i+h,y:l+p,transform:v,transformOrigin:g,text:"".concat(S)})),t.label.on("mousedown",function(e){e.stopPropagation();}),t.label.on("touchstart",function(e){e.stopPropagation();});});},t.prototype.renderIcon=function(e){var t=this.attributes,n=t.x,i=t.y,u=t.orientation,c=t.type,d=t.classNamePrefix,h=(0,r.__assign)((0,r.__assign)({x:n,y:i,orientation:u,classNamePrefix:d},o.HANDLE_ICON_DEFAULT_CFG),(0,a.subStyleProps)(this.attributes,"icon")),f=this.attributes.iconShape,p=void 0===f?function(){return new l({style:h});}:f;(0,a.select)(e).maybeAppendByClassName(s.iconGroup,"g").selectAll(s.icon.class).data([p]).join(function(e){return e.append("string"==typeof p?p:function(){return p(c);}).attr("className",s.icon.name);},function(e){return e.update(h);},function(e){return e.remove();});},t.prototype.render=function(e,t){this.renderIcon(t),this.renderLabel(t);},t;}(i.Component);},"2e87bde6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{circle:function(){return r;},diamond:function(){return a;},rect:function(){return s;},simple:function(){return u;},triangle:function(){return i;},triangleRect:function(){return l;},vee:function(){return o;}});let r=(e,t)=>{let n=Math.max(e,t)/2;return[["M",-e/2,0],["A",n,n,0,1,0,2*n-e/2,0],["A",n,n,0,1,0,-e/2,0],["Z"]];},i=(e,t)=>[["M",-e/2,0],["L",e/2,-t/2],["L",e/2,t/2],["Z"]],a=(e,t)=>[["M",-e/2,0],["L",0,-t/2],["L",e/2,0],["L",0,t/2],["Z"]],o=(e,t)=>[["M",-e/2,0],["L",e/2,-t/2],["L",4*e/5-e/2,0],["L",e/2,t/2],["Z"]],s=(e,t)=>[["M",-e/2,-t/2],["L",e/2,-t/2],["L",e/2,t/2],["L",-e/2,t/2],["Z"]],l=(e,t)=>{let n=e/2,r=e/7,i=e-r;return[["M",-n,0],["L",0,-t/2],["L",0,t/2],["Z"],["M",i-n,-t/2],["L",i+r-n,-t/2],["L",i+r-n,t/2],["L",i-n,t/2],["Z"]];},u=(e,t)=>[["M",e/2,-t/2],["L",-e/2,0],["L",e/2,0],["L",-e/2,0],["L",e/2,t/2]];},"2f0b0faf":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("c82d6b9d"),t);},"2f3b9e1a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AntVDagreLayout:function(){return c.AntVDagreLayout;},AutoAdaptLabel:function(){return r.AutoAdaptLabel;},Background:function(){return d.Background;},Badge:function(){return u.Badge;},BaseBehavior:function(){return r.BaseBehavior;},BaseCombo:function(){return a.BaseCombo;},BaseEdge:function(){return o.BaseEdge;},BaseLayout:function(){return c.BaseLayout;},BaseNode:function(){return l.BaseNode;},BasePlugin:function(){return d.BasePlugin;},BaseShape:function(){return u.BaseShape;},BaseTransform:function(){return g.BaseTransform;},BrushSelect:function(){return r.BrushSelect;},BubbleSets:function(){return d.BubbleSets;},CameraSetting:function(){return d.CameraSetting;},Canvas:function(){return p.Canvas;},CanvasEvent:function(){return i.CanvasEvent;},Circle:function(){return l.Circle;},CircleCombo:function(){return a.CircleCombo;},CircularLayout:function(){return c.CircularLayout;},ClickSelect:function(){return r.ClickSelect;},CollapseExpand:function(){return r.CollapseExpand;},ComboCombinedLayout:function(){return c.ComboCombinedLayout;},ComboEvent:function(){return i.ComboEvent;},CommonEvent:function(){return i.CommonEvent;},CompactBoxLayout:function(){return c.compactBox;},ConcentricLayout:function(){return c.ConcentricLayout;},ContainerEvent:function(){return i.ContainerEvent;},Contextmenu:function(){return d.Contextmenu;},CreateEdge:function(){return r.CreateEdge;},Cubic:function(){return o.Cubic;},CubicHorizontal:function(){return o.CubicHorizontal;},CubicRadial:function(){return o.CubicRadial;},CubicVertical:function(){return o.CubicVertical;},D3ForceLayout:function(){return c.D3ForceLayout;},DagreLayout:function(){return c.DagreLayout;},DendrogramLayout:function(){return c.dendrogram;},Diamond:function(){return l.Diamond;},Donut:function(){return l.Donut;},DragCanvas:function(){return r.DragCanvas;},DragElement:function(){return r.DragElement;},DragElementForce:function(){return r.DragElementForce;},EdgeBundling:function(){return d.EdgeBundling;},EdgeEvent:function(){return i.EdgeEvent;},EdgeFilterLens:function(){return d.EdgeFilterLens;},Ellipse:function(){return l.Ellipse;},ExtensionCategory:function(){return i.ExtensionCategory;},FishboneLayout:function(){return c.FishboneLayout;},Fisheye:function(){return d.Fisheye;},FixElementSize:function(){return r.FixElementSize;},FocusElement:function(){return r.FocusElement;},ForceAtlas2Layout:function(){return c.ForceAtlas2Layout;},ForceLayout:function(){return c.ForceLayout;},FruchtermanLayout:function(){return c.FruchtermanLayout;},Fullscreen:function(){return d.Fullscreen;},Graph:function(){return v.Graph;},GraphEvent:function(){return i.GraphEvent;},GridLayout:function(){return c.GridLayout;},GridLine:function(){return d.GridLine;},HTML:function(){return l.HTML;},Hexagon:function(){return l.Hexagon;},History:function(){return d.History;},HistoryEvent:function(){return i.HistoryEvent;},HoverActivate:function(){return r.HoverActivate;},Hull:function(){return d.Hull;},Icon:function(){return u.Icon;},Image:function(){return l.Image;},IndentedLayout:function(){return c.indented;},Label:function(){return u.Label;},LassoSelect:function(){return r.LassoSelect;},Legend:function(){return d.Legend;},Line:function(){return o.Line;},MDSLayout:function(){return c.MDSLayout;},MapNodeSize:function(){return g.MapNodeSize;},MindmapLayout:function(){return c.mindmap;},Minimap:function(){return d.Minimap;},NodeEvent:function(){return i.NodeEvent;},OptimizeViewportTransform:function(){return r.OptimizeViewportTransform;},PlaceRadialLabels:function(){return g.PlaceRadialLabels;},Polyline:function(){return o.Polyline;},ProcessParallelEdges:function(){return g.ProcessParallelEdges;},Quadratic:function(){return o.Quadratic;},RadialLayout:function(){return c.RadialLayout;},RandomLayout:function(){return c.RandomLayout;},Rect:function(){return l.Rect;},RectCombo:function(){return a.RectCombo;},ScrollCanvas:function(){return r.ScrollCanvas;},Shortcut:function(){return k.Shortcut;},SnakeLayout:function(){return c.SnakeLayout;},Snapline:function(){return d.Snapline;},Star:function(){return l.Star;},Timebar:function(){return d.Timebar;},Title:function(){return d.Title;},Toolbar:function(){return d.Toolbar;},Tooltip:function(){return d.Tooltip;},Triangle:function(){return l.Triangle;},Watermark:function(){return d.Watermark;},ZoomCanvas:function(){return r.ZoomCanvas;},effect:function(){return s.effect;},getExtension:function(){return h.getExtension;},getExtensions:function(){return h.getExtensions;},idOf:function(){return y.idOf;},invokeLayoutMethod:function(){return b.invokeLayoutMethod;},isCollapsed:function(){return m.isCollapsed;},omitStyleProps:function(){return x.omitStyleProps;},parseSize:function(){return S.parseSize;},positionOf:function(){return E.positionOf;},register:function(){return f.register;},setVisibility:function(){return M.setVisibility;},subStyleProps:function(){return x.subStyleProps;},treeToGraphData:function(){return T.treeToGraphData;}});var r=n("bc2fd635"),i=n("6b0531cc"),a=n("fc97b607"),o=n("3a060085"),s=n("c3987985"),l=n("cfda2b31"),u=n("988eb09c"),c=n("8a0441b2"),d=n("5ccee541"),h=n("d1f78d64"),f=n("4c9c9fd1"),p=n("6dc96f78"),v=n("69927a8c"),g=n("7f9242cd"),m=n("f20c9f5f"),y=n("81401a10"),b=n("d5a5db80"),E=n("2a08964b"),x=n("9da99c33"),k=n("db1e79e1"),S=n("db863a29"),T=n("b6eb382e"),M=n("6f097fb0");},"307b1650":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CreateEdge",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("bd7a65f9"),o=n("32576f8a"),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};let l="g6-create-edge-assist-node-id";class u extends o.BaseBehavior{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.drop=e=>s(this,void 0,void 0,function*(){let{targetType:t}=e;["combo","node"].includes(t)&&this.source?yield this.handleCreateEdge(e):yield this.cancelEdge();}),this.handleCreateEdge=e=>s(this,void 0,void 0,function*(){var t,n,r;if(!this.validate(e))return;let{graph:i,canvas:o,batch:s,element:u}=this.context,{style:c}=this.options;if(this.source){this.createEdge(e),yield this.cancelEdge();return;}s.startBatch(),o.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([e.target.id])[0];let d=i.getElementData(this.source);i.addNodeData([{id:l,type:"circle",[a.OVERRIDE_KEY]:!1,style:{size:1,visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(t=d.style)||void 0===t?void 0:t.x,y:null===(n=d.style)||void 0===n?void 0:n.y}}]),i.addEdgeData([{id:"g6-create-edge-assist-edge-id",source:this.source,target:l,style:Object.assign({pointerEvents:"none"},c)}]),yield null===(r=u.draw({animation:!1}))||void 0===r?void 0:r.finished;}),this.updateAssistEdge=e=>s(this,void 0,void 0,function*(){var t;if(!this.source)return;let{model:n,element:r}=this.context;n.translateNodeTo(l,[e.client.x,e.client.y]),yield null===(t=r.draw({animation:!1,silence:!0}))||void 0===t?void 0:t.finished;}),this.createEdge=e=>{var t,n;let{graph:i}=this.context,{style:a,onFinish:o,onCreate:s}=this.options;if(void 0===(null===(t=e.target)||void 0===t?void 0:t.id)||void 0===this.source)return;let l=null===(n=this.getSelectedNodeIDs([e.target.id]))||void 0===n?void 0:n[0],u=s({id:`${this.source}-${l}-${(0,r.uniqueId)()}`,source:this.source,target:l,style:a});u&&(i.addEdgeData([u]),o(u));},this.cancelEdge=()=>s(this,void 0,void 0,function*(){var e;if(!this.source)return;let{graph:t,element:n,batch:r}=this.context;t.removeNodeData([l]),this.source=void 0,yield null===(e=n.draw({animation:!1}))||void 0===e?void 0:e.finished,r.endBatch();}),this.bindEvents();}update(e){super.update(e),this.bindEvents();}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;this.unbindEvents(),"click"===t?(e.on(i.NodeEvent.CLICK,this.handleCreateEdge),e.on(i.ComboEvent.CLICK,this.handleCreateEdge),e.on(i.CanvasEvent.CLICK,this.cancelEdge),e.on(i.EdgeEvent.CLICK,this.cancelEdge)):(e.on(i.NodeEvent.DRAG_START,this.handleCreateEdge),e.on(i.ComboEvent.DRAG_START,this.handleCreateEdge),e.on(i.CommonEvent.POINTER_UP,this.drop)),e.on(i.CommonEvent.POINTER_MOVE,this.updateAssistEdge);}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(e=>e.id).concat(e)));}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}unbindEvents(){let{graph:e}=this.context;e.off(i.NodeEvent.CLICK,this.handleCreateEdge),e.off(i.ComboEvent.CLICK,this.handleCreateEdge),e.off(i.CanvasEvent.CLICK,this.cancelEdge),e.off(i.EdgeEvent.CLICK,this.cancelEdge),e.off(i.NodeEvent.DRAG_START,this.handleCreateEdge),e.off(i.ComboEvent.DRAG_START,this.handleCreateEdge),e.off(i.CommonEvent.POINTER_UP,this.drop),e.off(i.CommonEvent.POINTER_MOVE,this.updateAssistEdge);}destroy(){this.unbindEvents(),super.destroy();}}u.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:e=>e,onFinish:()=>{}};},"32576f8a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseBehavior",{enumerable:!0,get:function(){return i;}});var r=n("c23b41b5");class i extends r.BaseExtension{}},"32f32d40":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("4667342b");var r=new Map;"undefined"!=typeof document&&r.set("tooltip",document.createElement("div"));},"3376c710":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Axis:function(){return o.Axis;},Category:function(){return s.Category;},Continuous:function(){return s.Continuous;},Layout:function(){return u.Layout;},Marker:function(){return r.Marker;},Scrollbar:function(){return a.Scrollbar;},Slider:function(){return i.Slider;},Timebar:function(){return c.Timebar;},Tooltip:function(){return l.Tooltip;}});var r=n("e6d068ba"),i=n("014bbf9e"),a=n("d431610e"),o=n("9b91cc25"),s=n("955c2878"),l=n("7e456020"),u=n("79e82817"),c=n("40c33301");},"340b05e9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ReactNode",{enumerable:!0,get:function(){return a;}});var r=n("38871e26"),i=n("855ee20a");class a extends r.HTML{getKeyStyle(e){return Object.assign({},super.getKeyStyle(e));}constructor(e){super(e);}update(e){super.update(e);}connectedCallback(){super.connectedCallback();let{component:e}=this.attributes;(0,i.render)(e,this.getDomElement());}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),"component"===e&&t!==n&&(0,i.render)(this.attributes.component,this.getDomElement());}destroy(){(0,i.unmount)(this.getDomElement()),super.destroy();}}},"341f4ae3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"isValid",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e){return!(0,r.isUndefined)(e)&&!(0,r.isNull)(e)&&!Number.isNaN(e);}},"346c1bbd":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getCanvasContext",{enumerable:!0,get:function(){return i;}});var r,i=function(){return r||(r=document.createElement("canvas").getContext("2d")),r;};},"34de554e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Log",{enumerable:!0,get:function(){return s;}});var r=n("da5246de"),i=n("90abb703"),a=n("2172d3d6"),o=n("695f0234");class s extends r.Continuous{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:i.createInterpolateValue,tickMethod:a.d3Log,tickCount:5};}chooseNice(){return o.d3LogNice;}getTickMethodOptions(){let{domain:e,tickCount:t,base:n}=this.options;return[e[0],e[e.length-1],t,n];}chooseTransforms(){let{base:e,domain:t}=this.options,n=t[0]<0;return[(0,i.logs)(e,n),(0,i.pows)(e,n)];}clone(){return new s(this.options);}}},"358b2a8b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DEFAULT_INDICATOR_STYLE_PROPS",{enumerable:!0,get:function(){return r;}});var r={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString();},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999};},"367c3e1e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{freeJoin:function(){return y;},getBBoxSize:function(){return h;},getDirection:function(){return d;},insideNode:function(){return m;},nodeToNode:function(){return g;},nodeToPoint:function(){return p;},orth:function(){return l;},pointToNode:function(){return v;},pointToPoint:function(){return f;}});var r=n("abe9d8d6"),i=n("8a0aecd6"),a=n("8bdd800c"),o=n("71473486");let s={padding:10};function l(e,t,n,r,l,u){let{padding:c}=Object.assign(s,u),h=(0,i.getNodeBBox)(n,c),y=(0,i.getNodeBBox)(r,c),b=[e,...l,t],E=null,x=[];for(let e=0,t=b.length;e<t-1;e++){let n=e+1,r=b[e],o=b[n],s=(0,a.isOrthogonal)(r,o),l=null;if(0===e){if(n===t-1){if(h.intersects(y))l=m(r,o,h,y);else if((0,i.isPointBBoxCenter)(r,h)||(0,i.isPointBBoxCenter)(o,y))s||(l=g(r,o,h,y));else{let e=(0,i.getNearestBoundaryPoint)(r,h),t=(0,i.getNearestBoundaryPoint)(o,y);(l=f(e,t,d(e,t))).points.unshift(e),l.points.push(t);}}else(0,i.isPointInBBox)(o,h)?l=m(r,o,h,(0,i.getNodeBBox)(o,c),E):s||(l=p(r,o,h));}else n===t-1?(0,i.isPointInBBox)(r,y)?l=m(r,o,(0,i.getNodeBBox)(r,c),y,E):s||(l=v(r,o,y,E)):s||(l=f(r,o,E));l?(x.push(...l.points),E=l.direction):E=d(r,o),n<t-1&&x.push(o);}return x.map(o.toVector2);}let u={N:"S",S:"N",W:"E",E:"W"},c={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function d(e,t){let[n,r]=e,[i,a]=t;return n===i?r>a?"N":"S":r===a?n>i?"W":"E":null;}function h(e,t){return"N"===t||"S"===t?(0,i.getBBoxHeight)(e):(0,i.getBBoxWidth)(e);}function f(e,t,n){let r=[e[0],t[1]],i=[t[0],e[1]],a=d(e,r),o=d(e,i),s=n?u[n]:null,l=a===n||a!==s&&o!==n?r:i;return{points:[l],direction:d(l,t)};}function p(e,t,n){if((0,i.isPointBBoxCenter)(e,n)){let r=y(e,t,n);return{points:[r],direction:d(r,t)};}{let r=(0,i.getNearestBoundaryPoint)(e,n),a=["left","right"].includes((0,i.getNearestBoundarySide)(e,n))?[t[0],r[1]]:[r[0],t[1]];return{points:[a],direction:d(a,t)};}}function v(e,t,n,o){let s=(0,i.isPointBBoxCenter)(t,n)?t:(0,i.getNearestBoundaryPoint)(t,n),l=[[s[0],e[1]],[e[0],s[1]]],u=l.filter(e=>(0,i.isPointOutsideBBox)(e,n)&&!(0,i.isPointOnBBoxBoundary)(e,n,!0)),c=u.filter(t=>d(t,e)!==o);if(c.length>0){let n=c.find(t=>d(e,t)===o)||c[0];return{points:[n],direction:d(n,t)};}{let i=(0,r.difference)(l,u)[0],s=(0,a.moveTo)(t,i,h(n,o)/2);return{points:[y(s,e,n),s],direction:d(s,t)};}}function g(e,t,n,r){let s=p(e,t,n),l=(0,o.toVector3)(s.points[0]);if((0,i.isPointInBBox)(l,r)){s=p(t,e,r);let u=(0,o.toVector3)(s.points[0]);if((0,i.isPointInBBox)(u,n)){let i=(0,a.moveTo)(e,l,h(n,d(e,l))/2),o=(0,a.moveTo)(t,u,h(r,d(t,u))/2),c=[(i[0]+o[0])/2,(i[1]+o[1])/2],f=p(e,c,n),g=v(c,t,r,f.direction);s.points=[f.points[0],g.points[0]],s.direction=g.direction;}}return s;}function m(e,t,n,s,l){let u;let h=(0,i.getCombinedBBox)([n,s]),f=(0,o.distance)(t,h.center)>(0,o.distance)(e,h.center),[p,v]=f?[t,e]:[e,t],g=(0,i.getBBoxHeight)(h)+(0,i.getBBoxWidth)(h);if(l){let e=[p[0]+g*Math.cos(c[l]),p[1]+g*Math.sin(c[l])];u=(0,a.moveTo)((0,i.getNearestBoundaryPoint)(e,h),e,.01);}else u=(0,a.moveTo)((0,i.getNearestBoundaryPoint)(p,h),p,-.01);let m=y(u,v,h),b=[(0,a.round)(u,2),(0,a.round)(m,2)];if((0,r.isEqual)((0,a.round)(u),(0,a.round)(m))){let e=(0,o.angle)((0,o.subtract)(u,p),[1,0,0])+Math.PI/2;m=[v[0]+g*Math.cos(e),v[1]+g*Math.sin(e),0];let t=y(u,m=(0,a.round)((0,a.moveTo)((0,i.getNearestBoundaryPoint)(m,h),v,-.01),2),h);b=[u,t,m];}return{points:f?b.reverse():b,direction:f?d(u,t):d(m,t)};}function y(e,t,n){let r=[e[0],t[1]];return(0,i.isPointInBBox)(r,n)&&(r=[t[0],e[1]]),r;}},"36e82e0d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CubicHorizontal",{enumerable:!0,get:function(){return a;}});var r=n("cdd49f4a"),i=n("1d8e11d8");class a extends i.Cubic{constructor(e){super((0,r.mergeOptions)({style:a.defaultStyleProps},e));}getControlPoints(e,t,n,r){let i=t[0]-e[0];return[[e[0]+i*n[0]+r[0],e[1]],[t[0]-i*n[1]+r[1],t[1]]];}}a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},38242230:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"deepAssign",{enumerable:!0,get:function(){return o;}});var r=n("18f14020"),i=n("abe9d8d6"),a=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=5),Object.entries(t).forEach(function(s){var l=(0,r.__read)(s,2),u=l[0],c=l[1];Object.prototype.hasOwnProperty.call(t,u)&&(c?(0,i.isPlainObject)(c)?((0,i.isPlainObject)(e[u])||(e[u]={}),n<o?a(e[u],c,n+1,o):e[u]=t[u]):(0,i.isArray)(c)?(e[u]=[],e[u]=e[u].concat(c)):e[u]=c:e[u]=c);});},o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)a(e,t[r]);return e;};},"38871e26":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{iconfont:function(){return a;},version:function(){return i.version;}});var r=n("d1751d7c");n("fb1d3f6a"),r._(n("2f3b9e1a"),t);var i=n("afc63cf6");let a={css:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css",js:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js"};},"38da6d3f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Donut",{enumerable:!0,get:function(){return d;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("49bbc4a4"),o=n("9da99c33"),s=n("db863a29"),l=n("cdd49f4a"),u=n("f8157ecf"),c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class d extends u.Circle{constructor(e){super((0,l.mergeOptions)({style:d.defaultStyleProps},e));}parseOuterR(){let{size:e}=this.parsedAttributes;return Math.min(...(0,s.parseSize)(e))/2;}parseInnerR(){let{innerR:e}=this.parsedAttributes;return(0,i.isString)(e)?parseInt(e)/100*this.parseOuterR():e;}drawDonutShape(e,t){let{donuts:n}=e;if(!(null==n?void 0:n.length))return;let s=n.map(e=>(0,i.isNumber)(e)?{value:e}:e),l=(0,o.subStyleProps)(this.getGraphicStyle(e),"donut"),u=(0,a.getPaletteColors)(e.donutPalette);if(!u)return;let d=s.reduce((e,t)=>{var n;return e+(null!==(n=t.value)&&void 0!==n?n:0);},0),h=this.parseOuterR(),f=this.parseInnerR(),p=0;s.forEach((e,n)=>{let{value:i=0,color:a=u[n%u.length]}=e,o=c(e,["value","color"]),g=(0===d?1/s.length:i/d)*360;this.upsert(`round${n}`,r.Path,Object.assign(Object.assign(Object.assign({},l),{d:v(h,f,p,p+g),fill:a}),o),t),p+=g;});}render(e,t=this){super.render(e,t),this.drawDonutShape(e,t);}}d.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};let h=(e,t,n,r)=>[e+Math.sin(r)*n,t-Math.cos(r)*n],f=(e,t,n,r)=>r<=0||n<=r?[["M",e-n,t],["A",n,n,0,1,1,e+n,t],["A",n,n,0,1,1,e-n,t],["Z"]]:[["M",e-n,t],["A",n,n,0,1,1,e+n,t],["A",n,n,0,1,1,e-n,t],["Z"],["M",e+r,t],["A",r,r,0,1,0,e-r,t],["A",r,r,0,1,0,e+r,t],["Z"]],p=(e,t,n,r,i,a)=>{let[o,s]=[i/360*2*Math.PI,a/360*2*Math.PI],l=[h(e,t,r,o),h(e,t,n,o),h(e,t,n,s),h(e,t,r,s)],u=s-o>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",n,n,0,u,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",r,r,0,u,0,l[0][0],l[0][1]],["Z"]];},v=(e=0,t=0,n,r)=>{let[i,a]=[0,0];return Math.abs(n-r)%360<1e-6?f(i,a,e,t):p(i,a,e,t,n,r);};},39218125:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Bounds:function(){return a;},getBounds:function(){return o;}});var r=n("18f14020"),i=n("01a29d03"),a=function(){function e(e,t,n,r){this.set(e,t,n,r);}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0;},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[[s*r-l*o+u,l*r+s*o+c],[s*a-l*o+u,l*a+s*o+c],[s*r-l*i+u,l*r+s*i+c],[s*a-l*i+u,l*a+s*i+c]];},e.prototype.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this;},e.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE;},e;}();function o(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var o=e.getBounds(),s=(0,r.__read)(o.min,2),l=s[0],u=s[1],c=(0,r.__read)(o.max,2),d=c[0],h=c[1],f=e.getBBox(),p=f.width,v=f.height,g=0,m=0,y=l,b=u,E=(0,i.textOf)(e);if(E){v-=1.5;var x=E.style.textAlign,k=E.style.textBaseline;"center"===x?y=(l+d)/2:("right"===x||"end"===x)&&(y=d),"middle"===k?b=(u+h)/2:"bottom"===k&&(b=h);}var S=(0,r.__read)((0,i.parseSeriesAttr)(t),4),T=S[0],M=void 0===T?0:T,w=S[1],N=void 0===w?0:w,C=S[2],_=S[3],P=new a((g+=l)-(void 0===_?N:_),(m+=u)-M,g+p+N,m+v+(void 0===C?M:C));return e.setEulerAngles(n),P.rotatedPoints((0,i.degToRad)(n),y,b);}},39296384:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),(0,n("52a9f3ff").registerBuiltInExtensions)();},"39ebc4f0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{OrganizationChartNode:function(){return r.OrganizationChartNode;},TextNode:function(){return i.TextNode;}});var r=n("5a01f209"),i=n("93aaeb3c");},"39f45b08":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{createOffscreenGroup:function(){return l;},isInOffscreenGroup:function(){return u;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("1af423ec"),o=n("6a10edb6"),s=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=e.apply(this,(0,r.__spreadArray)([],(0,r.__read)(t),!1))||this;return a.isMutationObserved=!0,a.addEventListener(i.ElementEvent.INSERTED,function(){(0,o.hide)(a);}),a;}return(0,r.__extends)(t,e),t;}(a.Group);function l(e){var t=e.appendChild(new s({class:"offscreen"}));return(0,o.hide)(t),t;}function u(e){for(var t=e;t;){if("offscreen"===t.className)return!0;t=t.parent;}return!1;}},"3a060085":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{BaseEdge:function(){return r.BaseEdge;},Cubic:function(){return i.Cubic;},CubicHorizontal:function(){return a.CubicHorizontal;},CubicRadial:function(){return o.CubicRadial;},CubicVertical:function(){return s.CubicVertical;},Line:function(){return l.Line;},Polyline:function(){return u.Polyline;},Quadratic:function(){return c.Quadratic;}});var r=n("177711d9"),i=n("1d8e11d8"),a=n("36e82e0d"),o=n("ad38acb3"),s=n("087d2bf0"),l=n("4bdde6ae"),u=n("91e44670"),c=n("fd6f263b");},"3a145a5a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"segmentsIntersect",{enumerable:!0,get:function(){return i;}});var r=n("777fffbe")._(n("93ff44d0"));function i(e,t,n,i){let a=(0,r.default)(e,n,i),o=(0,r.default)(t,n,i);if(a>0&&o>0||a<0&&o<0)return!1;let s=(0,r.default)(n,e,t),l=(0,r.default)(i,e,t);return(!(s>0)||!(l>0))&&(!(s<0)||!(l<0))&&(0!==a||0!==o||0!==s||0!==l||function(e,t,n,r){for(let i=0;i<2;++i){let a=e[i],o=t[i],[s,l]=[Math.min(a,o),Math.max(a,o)],u=n[i],c=r[i],[d,h]=[Math.min(u,c),Math.max(u,c)];if(h<s||l<d)return!1;}return!0;}(e,t,n,i));}},"3a369f8c":function(e,t,n){"use strict";function r(e,t){let n,r,i,a,o,s;let l=0|e.length,u=0|t.length;if(1===l&&1===u)return function(e,t){let n=e+t,r=n-e,i=e-(n-r)+(t-r);return i?[i,n]:[n];}(e[0],-t[0]);let c=Array(l+u),d=0,h=0,f=0,p=Math.abs,v=e[0],g=p(v),m=-t[f],y=p(m);g<y?(r=v,(h+=1)<l&&(g=p(v=e[h]))):(r=m,(f+=1)<u&&(y=p(m=-t[f]))),h<l&&g<y||f>=u?(n=v,(h+=1)<l&&(g=p(v=e[h]))):(n=m,(f+=1)<u&&(y=p(m=-t[f])));let b=n+r,E=b-n,x=r-E,k=x,S=b;for(;h<l&&f<u;)g<y?(n=v,(h+=1)<l&&(g=p(v=e[h]))):(n=m,(f+=1)<u&&(y=p(m=-t[f]))),E=(b=n+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i;for(;h<l;)E=(b=(n=v)+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i,(h+=1)<l&&(v=e[h]);for(;f<u;)E=(b=(n=m)+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i,(f+=1)<u&&(m=-t[f]);return k&&(c[d++]=k),S&&(c[d++]=S),d||(c[d++]=0),c.length=d,c;}n.d(t,"__esModule",{value:!0}),n.d(t,"robustSubtract",{enumerable:!0,get:function(){return r;}});},"3a39b5a7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CameraSetting",{enumerable:!0,get:function(){return a;}});var r=n("6b0531cc"),i=n("0d562788");class a extends i.BasePlugin{constructor(e,t){super(e,t),this.setOptions=e=>{let t=(e,t)=>{switch(e){case"projectionMode":return"perspective"===t?1:0;case"cameraType":return({orbiting:0,exploring:1,tracking:2})[t];case"aspect":if("number"==typeof t)return t;return this.getCanvasAspect();default:return t;}};Object.entries({cameraType:"setType",near:"setNear",far:"setFar",fov:"setFov",aspect:"setAspect",projectionMode:"setProjectionMode",distance:"setDistance",minDistance:"setMinDistance",maxDistance:"setMaxDistance",roll:"setRoll",elevation:"setElevation",azimuth:"setAzimuth"}).forEach(([n,r])=>{let i=e[n];if(void 0!==i){let e=t(n,i);this.context.canvas.getCamera()[r](e);}});},this.bindEvents();}update(e){this.setOptions(e),super.update(e);}bindEvents(){this.context.graph.once(r.GraphEvent.BEFORE_DRAW,()=>this.setOptions(this.options));}getCanvasAspect(){let[e,t]=this.context.viewport.getCanvasSize();return e/t;}}},"3af71481":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"LassoSelect",{enumerable:!0,get:function(){return o;}});var r=n("a566da36"),i=n("905895f2"),a=n("2b7b8fb0");class o extends a.BrushSelect{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;let{canvas:t,graph:n}=this.context;this.pathShape=new r.Path({id:"g6-lasso-select",style:this.options.style}),t.appendChild(this.pathShape),this.points=[(0,a.getCursorPoint)(e,n)];}onPointerMove(e){var t;if(!this.points)return;let{immediately:n,mode:r}=this.options;this.points.push((0,a.getCursorPoint)(e,this.context.graph)),null===(t=this.pathShape)||void 0===t||t.setAttribute("d",(0,i.pointsToPath)(this.points)),n&&"default"===r&&this.points.length>2&&super.updateElementsStates(this.points);}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return;}super.updateElementsStates(this.points),this.clearLasso();}}clearLasso(){var e;null===(e=this.pathShape)||void 0===e||e.remove(),this.pathShape=void 0,this.points=void 0;}}},"3b1d6410":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Hexagon",{enumerable:!0,get:function(){return o;}});var r=n("95550d14"),i=n("966f7de2"),a=n("90e17978");class o extends a.Polygon{constructor(e){super(e);}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2;}getPoints(e){return(0,i.getHexagonPoints)(this.getOuterR(e));}getIconStyle(e){let t=super.getIconStyle(e),n=this.getOuterR(e)*r.ICON_SIZE_RATIO;return!!t&&Object.assign({width:n,height:n},t);}}},"3b3a06de":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"dark",{enumerable:!0,get:function(){return r;}});let r=(0,n("ed0ed952").create)({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"});},"3c9838c6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DataController",{enumerable:!0,get:function(){return v;}});var r=n("440e77c8"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("f20c9f5f"),s=n("bd7a65f9"),l=n("4eb3f949"),u=n("aa8f6430"),c=n("81401a10"),d=n("2a08964b"),h=n("ec6e52f6"),f=n("d88e9b7d"),p=n("71473486");class v{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new r.Graph;}pushChange(e){if(this.isTraceless)return;let{type:t}=e;if(t===a.ChangeType.NodeUpdated||t===a.ChangeType.EdgeUpdated||t===a.ChangeType.ComboUpdated){let{value:n,original:r}=e;this.changes.push({value:(0,s.cloneElementData)(n),original:(0,s.cloneElementData)(r),type:t});}else this.changes.push({value:(0,s.cloneElementData)(e.value),type:t});}getChanges(){return this.changes;}clearChanges(){this.changes=[];}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--;}isBatching(){return this.batchCount>0;}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1;}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e);}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()};}getNodeData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=(0,u.toG6Data)(n);return this.isCombo((0,c.idOf)(r))||(void 0===e?t.push(r):e.includes((0,c.idOf)(r))&&t.push(r)),t;},[]);}getEdgeDatum(e){return(0,u.toG6Data)(this.model.getEdge(e));}getEdgeData(e){return this.model.getAllEdges().reduce((t,n)=>{let r=(0,u.toG6Data)(n);return void 0===e?t.push(r):e.includes((0,c.idOf)(r))&&t.push(r),t;},[]);}getComboData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=(0,u.toG6Data)(n);return this.isCombo((0,c.idOf)(r))&&(void 0===e?t.push(r):e.includes((0,c.idOf)(r))&&t.push(r)),t;},[]);}getRootsData(e=a.TREE_KEY){return this.model.getRoots(e).map(u.toG6Data);}getAncestorsData(e,t){let{model:n}=this;return n.hasNode(e)&&n.hasTreeStructure(t)?n.getAncestors(e,t).map(u.toG6Data):[];}getDescendantsData(e){let t=this.getElementDataById(e),n=[];return(0,f.dfs)(t,e=>{e!==t&&n.push(e);},e=>this.getChildrenData((0,c.idOf)(e)),"TB"),n;}getParentData(e,t){let{model:n}=this;if(!t){h.print.warn("The hierarchy structure key is not specified");return;}if(!n.hasNode(e)||!n.hasTreeStructure(t))return;let r=n.getParent(e,t);return r?(0,u.toG6Data)(r):void 0;}getChildrenData(e){let t="node"===this.getElementType(e)?a.TREE_KEY:a.COMBO_KEY,{model:n}=this;return n.hasNode(e)&&n.hasTreeStructure(t)?n.getChildren(e,t).map(u.toG6Data):[];}getElementsDataByType(e){return"node"===e?this.getNodeData():"edge"===e?this.getEdgeData():"combo"===e?this.getComboData():[];}getElementDataById(e){return"edge"===this.getElementType(e)?this.getEdgeDatum(e):this.getNodeLikeDatum(e);}getNodeLikeDatum(e){let t=this.model.getNode(e);return(0,u.toG6Data)(t);}getNodeLikeData(e){return this.model.getAllNodes().reduce((t,n)=>{let r=(0,u.toG6Data)(n);return e?e.includes((0,c.idOf)(r))&&t.push(r):t.push(r),t;},[]);}getElementDataByState(e,t){return this.getElementsDataByType(e).filter(e=>{var n;return null===(n=e.states)||void 0===n?void 0:n.includes(t);});}getElementState(e){var t;return(null===(t=this.getElementDataById(e))||void 0===t?void 0:t.states)||[];}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e);}hasEdge(e){return this.model.hasEdge(e);}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e);}getRelatedEdgesData(e,t="both"){return this.model.getRelatedEdges(e,t).map(u.toG6Data);}getNeighborNodesData(e){return this.model.getNeighbors(e).map(u.toG6Data);}setData(e){let{nodes:t=[],edges:n=[],combos:r=[]}=e,{nodes:i,edges:a,combos:o}=this.getData(),u=(0,l.arrayDiff)(i,t,e=>(0,c.idOf)(e),s.isElementDataEqual),d=(0,l.arrayDiff)(a,n,e=>(0,c.idOf)(e),s.isElementDataEqual),h=(0,l.arrayDiff)(o,r,e=>(0,c.idOf)(e),s.isElementDataEqual);this.batch(()=>{let e={nodes:u.enter,edges:d.enter,combos:h.enter};this.addData(e),this.computeZIndex(e,"add",!0);let t={nodes:u.update,edges:d.update,combos:h.update};this.updateData(t),this.computeZIndex(t,"update",!0);let n={nodes:u.exit.map(c.idOf),edges:d.exit.map(c.idOf),combos:h.exit.map(c.idOf)};this.removeData(n);});}addData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.addComboData(r),this.addNodeData(t),this.addEdgeData(n);}),this.computeZIndex(e,"add");}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(e=>(this.pushChange({value:e,type:a.ChangeType.NodeAdded}),(0,u.toGraphlibData)(e)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"));}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(e=>(this.pushChange({value:e,type:a.ChangeType.EdgeAdded}),(0,u.toGraphlibData)(e)))),this.computeZIndex({edges:e},"add"));}addComboData(e=[]){if(!e.length)return;let{model:t}=this;t.hasTreeStructure(a.COMBO_KEY)||t.attachTreeStructure(a.COMBO_KEY),t.addNodes(e.map(e=>(this.comboIds.add((0,c.idOf)(e)),this.pushChange({value:e,type:a.ChangeType.ComboAdded}),(0,u.toGraphlibData)(e)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add");}addChildrenData(e,t){let n=this.getNodeLikeDatum(e),r=t.map(c.idOf);this.addNodeData(t),this.updateNodeData([{id:e,children:[...n.children||[],...r]}]),this.addEdgeData(r.map(t=>({source:e,target:t})));}computeZIndex(e,t,n=!1){!n&&this.isBatching()||this.batch(()=>{let{nodes:n=[],edges:r=[],combos:o=[]}=e;o.forEach(e=>{var n,r,o;let s=(0,c.idOf)(e);if("add"===t&&(0,i.isNumber)(null===(n=e.style)||void 0===n?void 0:n.zIndex)||"update"===t&&!("combo"in e))return;let l=this.getParentData(s,a.COMBO_KEY),u=l?(null!==(o=null===(r=l.style)||void 0===r?void 0:r.zIndex)&&void 0!==o?o:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:s,style:{zIndex:u}}]);});}),n.forEach(e=>{var n,r,o;let s=(0,c.idOf)(e);if("add"===t&&(0,i.isNumber)(null===(n=e.style)||void 0===n?void 0:n.zIndex)||"update"===t&&!("combo"in e)&&!("children"in e))return;let l=0,u=this.getParentData(s,a.COMBO_KEY);if(u)l=((null===(r=u.style)||void 0===r?void 0:r.zIndex)||0)+1;else{let e=this.getParentData(s,a.TREE_KEY);e&&(l=(null===(o=null==e?void 0:e.style)||void 0===o?void 0:o.zIndex)||0);}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:s,style:{zIndex:l}}]);});}),r.forEach(e=>{var t,n,r,a,o;if((0,i.isNumber)(null===(t=e.style)||void 0===t?void 0:t.zIndex))return;let{id:s,source:l,target:u}=e;if(s){let e=this.getEdgeDatum(s);l=e.source,u=e.target;}else s=(0,c.idOf)(e);if(!l||!u)return;let d=(null===(r=null===(n=this.getNodeLikeDatum(l))||void 0===n?void 0:n.style)||void 0===r?void 0:r.zIndex)||0,h=(null===(o=null===(a=this.getNodeLikeDatum(u))||void 0===a?void 0:a.style)||void 0===o?void 0:o.zIndex)||0;this.updateEdgeData([{id:(0,c.idOf)(e),style:{zIndex:Math.max(d,h)-1}}]);});});}getFrontZIndex(e){var t;let n=this.getElementType(e),r=this.getElementDataById(e),i=this.getData();if(Object.assign(i,{[`${n}s`]:i[`${n}s`].filter(t=>(0,c.idOf)(t)!==e)}),"combo"===n&&!(0,o.isCollapsed)(r)){let t=new Set(this.getAncestorsData(e,a.COMBO_KEY).map(c.idOf));i.nodes=i.nodes.filter(e=>!t.has((0,c.idOf)(e))),i.combos=i.combos.filter(e=>!t.has((0,c.idOf)(e))),i.edges=i.edges.filter(({source:e,target:n})=>!t.has(e)&&!t.has(n));}return Math.max((null===(t=r.style)||void 0===t?void 0:t.zIndex)||0,0,...Object.values(i).flat().map(e=>{var t;return((null===(t=null==e?void 0:e.style)||void 0===t?void 0:t.zIndex)||0)+1;}));}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;let{model:t}=this;e.forEach(e=>{let n=(0,c.idOf)(e),r=(0,c.parentIdOf)(e);void 0!==r&&(t.hasTreeStructure(a.COMBO_KEY)||t.attachTreeStructure(a.COMBO_KEY),null===r&&this.refreshComboData(n),this.setParent(n,(0,c.parentIdOf)(e),a.COMBO_KEY));let i=e.children||[];if(i.length){t.hasTreeStructure(a.TREE_KEY)||t.attachTreeStructure(a.TREE_KEY);let e=i.filter(e=>t.hasNode(e));e.forEach(e=>this.setParent(e,n,a.TREE_KEY)),e.length!==i.length&&this.updateNodeData([{id:n,children:e}]);}});}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0;}updateData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.updateNodeData(t),this.updateComboData(r),this.updateEdgeData(n);}),this.computeZIndex(e,"update");}updateNodeData(e=[]){if(!e.length)return;let{model:t}=this;this.batch(()=>{let n=[];e.forEach(e=>{let r=(0,c.idOf)(e),i=(0,u.toG6Data)(t.getNode(r));if((0,s.isElementDataEqual)(i,e))return;let o=(0,s.mergeElementsData)(i,e);this.pushChange({value:o,original:i,type:a.ChangeType.NodeUpdated}),t.mergeNodeData(r,o),n.push(o);}),this.updateNodeLikeHierarchy(n);}),this.computeZIndex({nodes:e},"update");}refreshData(){let{nodes:e,edges:t,combos:n}=this.getData();e.forEach(e=>{this.pushChange({value:e,original:e,type:a.ChangeType.NodeUpdated});}),t.forEach(e=>{this.pushChange({value:e,original:e,type:a.ChangeType.EdgeUpdated});}),n.forEach(e=>{this.pushChange({value:e,original:e,type:a.ChangeType.ComboUpdated});});}syncNodeLikeDatum(e){let{model:t}=this,n=(0,c.idOf)(e);if(!t.hasNode(n))return;let r=(0,u.toG6Data)(t.getNode(n)),i=(0,s.mergeElementsData)(r,e);t.mergeNodeData(n,i);}syncEdgeDatum(e){let{model:t}=this,n=(0,c.idOf)(e);if(!t.hasEdge(n))return;let r=(0,u.toG6Data)(t.getEdge(n)),i=(0,s.mergeElementsData)(r,e);t.mergeEdgeData(n,i);}updateEdgeData(e=[]){if(!e.length)return;let{model:t}=this;this.batch(()=>{e.forEach(e=>{let n=(0,c.idOf)(e),r=(0,u.toG6Data)(t.getEdge(n));if((0,s.isElementDataEqual)(r,e))return;e.source&&r.source!==e.source&&t.updateEdgeSource(n,e.source),e.target&&r.target!==e.target&&t.updateEdgeTarget(n,e.target);let i=(0,s.mergeElementsData)(r,e);this.pushChange({value:i,original:r,type:a.ChangeType.EdgeUpdated}),t.mergeEdgeData(n,i);});}),this.computeZIndex({edges:e},"update");}updateComboData(e=[]){if(!e.length)return;let{model:t}=this;t.batch(()=>{let n=[];e.forEach(e=>{let r=(0,c.idOf)(e),i=(0,u.toG6Data)(t.getNode(r));if((0,s.isElementDataEqual)(i,e))return;let o=(0,s.mergeElementsData)(i,e);this.pushChange({value:o,original:i,type:a.ChangeType.ComboUpdated}),t.mergeNodeData(r,o),n.push(o);}),this.updateNodeLikeHierarchy(n);}),this.computeZIndex({combos:e},"update");}setParent(e,t,n,r=!0){if(e===t)return;let o=this.getNodeLikeDatum(e),s=(0,c.parentIdOf)(o);s!==t&&n===a.COMBO_KEY&&(this.isCombo(e),this.syncNodeLikeDatum({id:e,combo:t})),this.model.setParent(e,t,n),r&&n===a.COMBO_KEY&&(0,i.uniq)([s,t]).forEach(e=>{void 0!==e&&this.refreshComboData(e);});}refreshComboData(e){let t=this.getComboData([e])[0],n=this.getAncestorsData(e,a.COMBO_KEY);t&&this.pushChange({value:t,original:t,type:a.ChangeType.ComboUpdated}),n.forEach(e=>{this.pushChange({value:e,original:e,type:a.ChangeType.ComboUpdated});});}getElementPosition(e){let t=this.getElementDataById(e);return(0,d.positionOf)(t);}translateNodeLikeBy(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t);}translateNodeLikeTo(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t);}translateNodeBy(e,t){let n=this.getElementPosition(e),r=(0,p.add)(n,[...t,0].slice(0,3));this.translateNodeTo(e,r);}translateNodeTo(e,t){let[n=0,r=0,i=0]=t;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:n,y:r,z:i}}]);});}translateComboBy(e,t){let[n=0,r=0,i=0]=t;if([n,r,i].some(isNaN)||[n,r,i].every(e=>0===e))return;let o=this.getComboData([e])[0];if(!o)return;let l=new Set;(0,f.dfs)(o,e=>{let t=(0,c.idOf)(e);if(l.has(t))return;l.add(t);let[o,u,h]=(0,d.positionOf)(e),f=(0,s.mergeElementsData)(e,{style:{x:o+n,y:u+r,z:h+i}});this.pushChange({value:f,original:e,type:this.isCombo(t)?a.ChangeType.ComboUpdated:a.ChangeType.NodeUpdated}),this.model.mergeNodeData(t,f);},e=>this.getChildrenData((0,c.idOf)(e)),"BT");}translateComboTo(e,t){var n;if(t.some(isNaN))return;let[r=0,i=0,o=0]=t,l=null===(n=this.getComboData([e]))||void 0===n?void 0:n[0];if(!l)return;let[u,h,p]=(0,d.positionOf)(l),v=r-u,g=i-h,m=o-p;(0,f.dfs)(l,e=>{let t=(0,c.idOf)(e),[n,r,i]=(0,d.positionOf)(e),o=(0,s.mergeElementsData)(e,{style:{x:n+v,y:r+g,z:i+m}});this.pushChange({value:o,original:e,type:this.isCombo(t)?a.ChangeType.ComboUpdated:a.ChangeType.NodeUpdated}),this.model.mergeNodeData(t,o);},e=>this.getChildrenData((0,c.idOf)(e)),"BT");}removeData(e){let{nodes:t,edges:n,combos:r}=e;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(t),this.removeComboData(r),this.latestRemovedComboIds=new Set(r);});}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(e=>{this.removeEdgeData(this.getRelatedEdgesData(e).map(c.idOf)),this.pushChange({value:this.getNodeData([e])[0],type:a.ChangeType.NodeRemoved}),this.removeNodeLikeHierarchy(e);}),this.model.removeNodes(e);});}removeEdgeData(e=[]){e.length&&(e.forEach(e=>this.pushChange({value:this.getEdgeData([e])[0],type:a.ChangeType.EdgeRemoved})),this.model.removeEdges(e));}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(e=>{this.pushChange({value:this.getComboData([e])[0],type:a.ChangeType.ComboRemoved}),this.removeNodeLikeHierarchy(e),this.comboIds.delete(e);}),this.model.removeNodes(e);});}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(a.COMBO_KEY)){let t=(0,c.parentIdOf)(this.getNodeLikeDatum(e));this.setParent(e,void 0,a.COMBO_KEY,!1),this.model.getChildren(e,a.COMBO_KEY).forEach(e=>{let n=(0,u.toG6Data)(e),r=(0,c.idOf)(n);this.setParent((0,c.idOf)(n),t,a.COMBO_KEY,!1);let i=(0,s.mergeElementsData)(n,{id:(0,c.idOf)(n),combo:t});this.pushChange({value:i,original:n,type:this.isCombo(r)?a.ChangeType.ComboUpdated:a.ChangeType.NodeUpdated}),this.model.mergeNodeData((0,c.idOf)(n),i);}),(0,i.isNil)(t)||this.refreshComboData(t);}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw Error((0,h.format)(`Unknown element type of id: ${e}`));}destroy(){let{model:e}=this,t=e.getAllNodes(),n=e.getAllEdges();e.removeEdges(n.map(e=>e.id)),e.removeNodes(t.map(e=>e.id)),this.context={};}}},"3ce512c8":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ChartLoading",{enumerable:!0,get:function(){return o;}});var r=n("777fffbe")._(n("3e6b097d")),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e;}).apply(this,arguments);},a=function(e,t){if(void 0===t&&(t={}),"undefined"==typeof document)return"loading";var n="";t&&Object.keys(t).forEach(function(e){n+="".concat(e,": ").concat(t[e],";\n");});var r=e.attachShadow({mode:"open"}),i=document.createElement("div"),a=document.createElement("style");a.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n    ".concat(n,"\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  "),i.classList.add("loading"),i.innerHTML="<div></div><div></div><div></div><div></div>",r.appendChild(a),r.appendChild(i);},o=function(e){var t=e.loadingTemplate,n=e.theme,o=e.loading,s=r.default.useRef(null),l="object"==typeof o?o:{},u=l.container,c=l.icon,d=void 0===c?{}:c;return r.default.useEffect(function(){!t&&s.current&&a(s.current,d);},[]),r.default.createElement("div",{className:"charts-loading-container",style:i({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:"dark"===(void 0===n?"light":n)?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},void 0===u?{}:u)},t||r.default.createElement("div",{ref:s}));};},"3cf5da85":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{labelFormatter:function(){return i;},parseBySeries:function(){return o;},parseByTime:function(){return a;}});var r=n("afcfc7b4");function i(e,t){return"number"==typeof e?o(e):a(e,t);}function a(e,t){var n=new Date(e);switch(t){case"half-hour":case"hour":case"four-hour":if([0,6,12,18].includes(n.getHours())&&0===n.getMinutes())return(0,r.formatTime)(n,"HH:mm\nYYYY-MM-DD");return(0,r.formatTime)(n,"HH:mm");case"half-day":if(12>n.getHours())return"AM\n".concat((0,r.formatTime)(n,"YYYY-MM-DD"));return"PM";case"day":if([1,10,20].includes(n.getDate()))return(0,r.formatTime)(n,"DD\nYYYY-MM");return(0,r.formatTime)(n,"DD");case"week":if(7>=n.getDate())return(0,r.formatTime)(n,"DD\nYYYY-MM");return(0,r.formatTime)(n,"DD");case"month":if([0,6].includes(n.getMonth()))return(0,r.formatTime)(n,"MM\u6708\nYYYY");return(0,r.formatTime)(n,"MM\u6708");case"season":if([0].includes(n.getMonth()))return(0,r.formatTime)(n,"MM\u6708\nYYYY");return(0,r.formatTime)(n,"MM\u6708");case"year":return(0,r.formatTime)(n,"YYYY");default:return(0,r.formatTime)(n,"YYYY-MM-DD HH:mm");}}function o(e){var t=String(Math.floor(e/3600)).padStart(2,"0"),n=String(Math.floor(e%3600/60)).padStart(2,"0"),r=String(Math.floor(e%60)).padStart(2,"0");return e<3600?"".concat(n,":").concat(r):"".concat(t,":").concat(n,":").concat(r);}},"3d432940":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Icon",{enumerable:!0,get:function(){return o;}});var r=n("a566da36"),i=n("04a20e6f"),a=n("133675a0");class o extends i.BaseShape{constructor(e){super(e);}isImage(){let{src:e}=this.attributes;return!!e;}getIconStyle(e=this.attributes){let{width:t=0,height:n=0}=e,r=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-t/2,y:-n/2},r):Object.assign({textBaseline:"middle",textAlign:"center"},r);}render(e=this.attributes,t=this){this.upsert("icon",this.isImage()?a.Image:r.Text,this.getIconStyle(e),t);}}},"3d6de037":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return f;},getMindMapOptions:function(){return p;}});var r=n("777fffbe"),i=n("c5eb7168"),a=r._(n("3e6b097d")),o=n("02c619b4"),s=n("2b663a31"),l=n("e50a16b8"),u=n("74355096"),c=n("91053888");let{ArrowCountIcon:d}=o.CollapseExpandIcon,{TextNode:h}=o.RCNode,f={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{lineWidth:3}},transforms:e=>[...e,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(e,t){let n=(0,u.getNodeSide)(this,t);return a.default.createElement(d,{graph:this,data:t,isCollapsed:e,placement:"left"===n?"left":"right"});},iconPlacement:function(e){return"left"===(0,u.getNodeSide)(this,e)?"left":"right";}}],layout:{type:"mindmap",direction:"H",preLayout:!1,getWidth:()=>120,getHGap:()=>64},animation:{duration:500}};function p({type:e,direction:t,nodeMinWidth:n,nodeMaxWidth:r,labelField:o}){let d={};if("boxed"===e){let e=n||120,t=r||300;d={node:{style:{component:n=>{var r;let i=n.depth,l=null===(r=n.style)||void 0===r?void 0:r.color,u=(0,s.formatLabel)(n,o),{font:d}=(0,c.getBoxedTextNodeStyle)(u,e,t,i),f={text:u,color:l,maxWidth:t,font:d};return Object.assign(f,0===i?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:1===i?{type:"filled"}:{type:"outlined"}),a.default.createElement(h,{...f});},size:n=>{let r=(0,s.formatLabel)(n,o);return(0,c.getBoxedTextNodeStyle)(r,e,t,n.depth).size;},dx:function(n){let r=(0,u.getNodeSide)(this,n),i=(0,s.formatLabel)(n,o),[a]=(0,c.getBoxedTextNodeStyle)(i,e,t,n.depth).size;return"left"===r?-a:"center"===r?-a/2:0;},ports:[{placement:"left"},{placement:"right"}]}},edge:{style:{stroke:function(e){let t=this.getNodeData(e.source);return(0,i.get)(t,"style.color","#99ADD1");}}},transforms:e=>[...e,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"mindmap",getHeight:n=>{let r=(0,s.formatLabel)(n,o),[,i]=(0,c.getBoxedTextNodeStyle)(r,e,t,n.depth).size;return i;},getVGap:()=>14}};}else if("linear"===e){let e=n||0,t=r||300;d={node:{style:{component:function(n){var r;let i=(0,u.getNodeSide)(this,n),l=n.depth,d=null===(r=n.style)||void 0===r?void 0:r.color,f=(0,s.formatLabel)(n,o),{font:p}=(0,c.getLinearTextNodeStyle)(f,e,t,l),v={text:f,color:d,maxWidth:t,font:p};return Object.assign(v,0===l?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:"left"===i?{textAlign:"right"}:"center"===i?{textAlign:"center"}:{}}),a.default.createElement(h,{...v});},size:n=>{let r=(0,s.formatLabel)(n,o);return(0,c.getLinearTextNodeStyle)(r,e,t,n.depth).size;},dx:function(n){let r=(0,u.getNodeSide)(this,n),i=(0,s.formatLabel)(n,o),[a]=(0,c.getLinearTextNodeStyle)(i,e,t,n.depth).size;return"left"===r?-a:"center"===r?-a/2:0;},dy:function(n){let r=(0,s.formatLabel)(n,o),[,i]=(0,c.getLinearTextNodeStyle)(r,e,t,n.depth).size;return i/2;},ports:function(e){return"center"===(0,u.getNodeSide)(this,e)?[{placement:"left"},{placement:"right"}]:[{placement:"left-bottom"},{placement:"right-bottom"}];}}},edge:{style:{stroke:function(e){let t=this.getNodeData(e.target);return(0,i.get)(t,"style.color","#99ADD1");}}},layout:{type:"mindmap",getHeight:n=>{let r=(0,s.formatLabel)(n,o),[,i]=(0,c.getLinearTextNodeStyle)(r,e,t,n.depth).size;return i;},getVGap:()=>12},transforms:n=>[...n.filter(e=>"collapse-expand-react-node"!==e.key),{type:"assign-color-by-branch",key:"assign-color-by-branch"},{...n.find(e=>"collapse-expand-react-node"===e.key),iconOffsetY:n=>{if(0===n.depth)return 0;let r=(0,s.formatLabel)(n,o),[,i]=(0,c.getLinearTextNodeStyle)(r,e,t,n.depth).size;return i/2;}}]};}else{let e=[24,16];d={node:{style:{component:e=>{let t=(0,s.formatLabel)(e,o);return a.default.createElement(h,{type:"filled",text:t});},size:t=>{let n=(0,s.formatLabel)(t,o);return(0,l.measureTextSize)(n,e);},dx:function(t){let n=(0,u.getNodeSide)(this,t),r=(0,s.formatLabel)(t,o),[i]=(0,l.measureTextSize)(r,e);return"left"===n?-i:"center"===n?-i/2:0;},ports:[{placement:"left"},{placement:"right"}]}},layout:{type:"mindmap",getHeight:t=>{let n=(0,s.formatLabel)(t,o),[,r]=(0,l.measureTextSize)(n,e);return r;}}};}if(t){var f;(f=d).layout||(f.layout={}),d.layout.direction="alternate"===t?"H":"left"===t?"RL":"LR";}return d;}},"3e76858e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Ordinal:function(){return l;},defaultUnknown:function(){return i;}});var r=n("9d4f096a");let i=Symbol("defaultUnknown");function a(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r);}function o(e){let{value:t,from:n,to:r,mapper:a,notFoundReturn:o}=e,s=a.get(t);if(void 0===s){if(o!==i)return o;s=n.push(t)-1,a.set(t,s);}return r[s%r.length];}function s(e){return e instanceof Date?e=>`${e}`:"object"==typeof e?e=>JSON.stringify(e):e=>e;}class l extends r.Base{getDefaultOptions(){return{domain:[],range:[],unknown:i};}constructor(e){super(e);}map(e){return 0===this.domainIndexMap.size&&a(this.domainIndexMap,this.getDomain(),this.domainKey),o({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(e){return 0===this.rangeIndexMap.size&&a(this.rangeIndexMap,this.getRange(),this.rangeKey),o({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(e){let[t]=this.options.domain,[n]=this.options.range;if(this.domainKey=s(t),this.rangeKey=s(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return;}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0);}clone(){return new l(this.options);}getRange(){return this.options.range;}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain;}}},"3ef355b1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return s;},getFlowGraphOptions:function(){return l;}});var r=n("777fffbe")._(n("3e6b097d")),i=n("02c619b4"),a=n("2b663a31");let{TextNode:o}=i.RCNode,s={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,endArrow:!0,radius:8,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},l=({direction:e,labelField:t})=>({node:{style:{component:e=>{let n=(0,a.formatLabel)(e,t);return r.default.createElement(o,{type:"filled",text:n});},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}});},"3f2a568d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{alignFields:function(){return s;},parseCommand:function(){return l;}});var r=n("abe9d8d6"),i=n("00d6b05d"),a=n("fc95c318"),o=n("81401a10");function s(e,t){for(let n in e)(0,r.isObject)(e[n])&&!Array.isArray(e[n])&&null!==e[n]?(t[n]||(t[n]={}),s(e[n],t[n])):void 0===t[n]&&(t[n]=(0,i.inferDefaultValue)(n));}function l(e,t=!1,n){let r={animation:t,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:u,remove:c}=(0,a.groupByChangeType)((0,a.reduceDataChanges)(e));return["nodes","edges","combos"].forEach(e=>{u[e]&&u[e].forEach(t=>{var i,a;let l=Object.assign({},t.value),u=Object.assign({},t.original);if(n){let e=n.graph.getElementType((0,o.idOf)(t.original)),r="edge"===e?"stroke":"fill",i=n.element.getElementComputedStyle(e,t.original);u=Object.assign(Object.assign({},t.original),{style:Object.assign({[r]:i[r]},t.original.style)});}s(l,u),(i=r.current.update)[e]||(i[e]=[]),r.current.update[e].push(l),(a=r.original.update)[e]||(a[e]=[]),r.original.update[e].push(u);}),i[e]&&i[e].forEach(t=>{var n,i;let a=Object.assign({},t.value);(n=r.current.add)[e]||(n[e]=[]),r.current.add[e].push(a),(i=r.original.remove)[e]||(i[e]=[]),r.original.remove[e].push(a);}),c[e]&&c[e].forEach(t=>{var n,i;let a=Object.assign({},t.value);(n=r.current.remove)[e]||(n[e]=[]),r.current.remove[e].push(a),(i=r.original.add)[e]||(i[e]=[]),r.original.add[e].push(a);});}),r;}},"3fa947ae":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Contour",{enumerable:!0,get:function(){return d;}});var r=n("a566da36"),i=n("4793a9ef"),a=n("9da99c33"),o=n("cdd49f4a"),s=n("27a6f2bf"),l=n("04a20e6f"),u=n("9644f472"),c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class d extends l.BaseShape{constructor(e){super((0,o.mergeOptions)({style:d.defaultStyleProps},e));}getLabelStyle(e){if(!e.label||!e.d||0===e.d.length)return!1;let t=(0,a.subStyleProps)(this.getGraphicStyle(e),"label"),{maxWidth:n,offsetX:r,offsetY:o,autoRotate:l,placement:u,closeToPath:d}=t,h=c(t,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),f=this.shapeMap.key,p=null==f?void 0:f.getRenderBounds();return Object.assign((0,i.getPolygonTextStyleByPlacement)(p,u,r,o,d,e.d,l),{wordWrapWidth:(0,s.getWordWrapWidthByBox)(p,n)},h);}getKeyStyle(e){return this.getGraphicStyle(e);}render(e,t){this.upsert("key",r.Path,this.getKeyStyle(e),t),this.upsert("label",u.Label,this.getLabelStyle(e),t);}}d.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};},"40c33301":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Timebar",{enumerable:!0,get:function(){return r.Timebar;}});var r=n("fc792d64");},"4264133e":function(e,t,n){"use strict";function r(e,t,n){let r=e+t,i=r-e,a=t-i,o=e-(r-i);return n?(n[0]=o+a,n[1]=r,n):[o+a,r];}n.d(t,"__esModule",{value:!0}),n.d(t,"fastTwoSum",{enumerable:!0,get:function(){return r;}});},"4359a82a":function(e,t,n){"use strict";function r(e,t){return[e[0]*t,e[1]*t];}function i(e,t){return[e[0]+t[0],e[1]+t[1]];}function a(e,t){return[e[0]-t[0],e[1]-t[1]];}function o(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])];}function s(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])];}function l(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2));}function u(e){if(0===e[0]&&0===e[1])return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t];}function c(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]];}n.d(t,"__esModule",{value:!0}),n.e(t,{add:function(){return i;},distance:function(){return l;},max:function(){return s;},min:function(){return o;},normalize:function(){return u;},scale:function(){return r;},sub:function(){return a;},vertical:function(){return c;}});},"444b815c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CollapseExpandCombo",{enumerable:!0,get:function(){return u;}});var r=n("6b0531cc"),i=n("f20c9f5f"),a=n("a2c47206"),o=n("81401a10"),s=n("eb4593bd"),l=n("fba51a74");class u extends s.BaseTransform{beforeDraw(e,t){if("visibility"===t.stage||!this.context.model.model.hasTreeStructure(r.COMBO_KEY))return e;let{model:n}=this.context,{add:s,update:u}=e,c=[...e.update.combos.entries(),...e.add.combos.entries()];for(;c.length;){let[t,r]=c.pop();if((0,i.isCollapsed)(r)){let r=n.getDescendantsData(t),i=r.map(o.idOf),{internal:d,external:h}=(0,a.getSubgraphRelatedEdges)(i,e=>n.getRelatedEdgesData(e));r.forEach(t=>{let r=(0,o.idOf)(t),i=c.findIndex(([e])=>e===r);-1!==i&&c.splice(i,1);let a=n.getElementType(r);(0,l.reassignTo)(e,"remove",a,t);}),d.forEach(t=>(0,l.reassignTo)(e,"remove","edge",t)),h.forEach(e=>{var t;let n=(0,o.idOf)(e);(null===(t=this.context.element)||void 0===t?void 0:t.getElement(n))?u.edges.set(n,e):s.edges.set(n,e);});}else{let r=n.getChildrenData(t),i=r.map(o.idOf),{edges:s}=(0,a.getSubgraphRelatedEdges)(i,e=>n.getRelatedEdgesData(e));[...r,...s].forEach(t=>{var r;let i=(0,o.idOf)(t),a=n.getElementType(i);(null===(r=this.context.element)||void 0===r?void 0:r.getElement(i))?(0,l.reassignTo)(e,"update",a,t):(0,l.reassignTo)(e,"add",a,t),"combo"===a&&c.push([i,t]);});}}return e;}}},"447ad7b5":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getClassNames:function(){return i;},getDefaultTooltipStyle:function(){return o;}});var r=n("18f14020");function i(e){return void 0===e&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")};}var a={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function o(e){void 0===e&&(e="");var t,n=i(e);return(t={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,r.__assign)({flex:1},a),t[".".concat(n.VALUE)]=(0,r.__assign)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},a),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t;}},"44db2d5d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Pow",{enumerable:!0,get:function(){return c;}});var r=n("abe9d8d6"),i=n("da5246de"),a=n("90abb703"),o=n("4f434d3c");let s=e=>t=>t<0?-((-t)**e):t**e,l=e=>t=>t<0?-((-t)**(1/e)):t**(1/e),u=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class c extends i.Continuous{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:a.createInterpolateValue,tickMethod:o.d3Ticks,tickCount:5};}constructor(e){super(e);}chooseTransforms(){let{exponent:e}=this.options;return 1===e?[r.identity,r.identity]:[.5===e?u:s(e),l(e)];}clone(){return new c(this.options);}}},"4645396b":function(e,t,n){"use strict";function r(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e;},{});}n.d(t,"__esModule",{value:!0}),n.d(t,"groupBy",{enumerable:!0,get:function(){return r;}});},"4664c89b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Animation",{enumerable:!0,get:function(){return o;}});var r=n("15a0e3a2"),i=n("00d6b05d"),a=n("bfa6e8c6");class o{constructor(e){this.tasks=[],this.animations=new Set,this.context=e;}getTasks(){let e=[...this.tasks];return this.tasks=[],e;}add(e,t){this.tasks.push([e,t]);}animate(e,t,n){var a,o,s;null===(a=null==t?void 0:t.before)||void 0===a||a.call(t);let l=this.getTasks().map(([t,a])=>{var o,s,l;let{element:u,elementType:c,stage:d}=t,h=(0,i.getElementAnimationOptions)(this.context.options,c,d,e);null===(o=null==a?void 0:a.before)||void 0===o||o.call(a);let f=h.length?(0,r.executor)(u,this.inferStyle(t,n),h):null;return f?(null===(s=null==a?void 0:a.beforeAnimate)||void 0===s||s.call(a,f),f.finished.then(()=>{var e,t;null===(e=null==a?void 0:a.afterAnimate)||void 0===e||e.call(a,f),null===(t=null==a?void 0:a.after)||void 0===t||t.call(a),this.animations.delete(f);})):null===(l=null==a?void 0:a.after)||void 0===l||l.call(a),f;}).filter(Boolean);l.forEach(e=>this.animations.add(e));let u=(0,i.createAnimationsProxy)(l);return u?(null===(o=null==t?void 0:t.beforeAnimate)||void 0===o||o.call(t,u),u.finished.then(()=>{var e,n;null===(e=null==t?void 0:t.afterAnimate)||void 0===e||e.call(t,u),null===(n=null==t?void 0:t.after)||void 0===n||n.call(t),this.release();})):null===(s=null==t?void 0:t.after)||void 0===s||s.call(t),u;}inferStyle(e,t){var n,r;let{element:o,elementType:s,stage:l,originalStyle:u,updatedStyle:c={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},u),c));let{modifiedStyle:d}=e,h={},f={};if("enter"===l)Object.assign(h,{opacity:0});else if("exit"===l)Object.assign(f,{opacity:0});else if("show"===l)Object.assign(h,{opacity:0}),Object.assign(f,{opacity:null!==(n=(0,a.getCachedStyle)(o,"opacity"))&&void 0!==n?n:(0,i.inferDefaultValue)("opacity")});else if("hide"===l)Object.assign(h,{opacity:null!==(r=(0,a.getCachedStyle)(o,"opacity"))&&void 0!==r?r:(0,i.inferDefaultValue)("opacity")}),Object.assign(f,{opacity:0});else if("collapse"===l){let{collapse:e}=t||{},{target:n,descendants:r,position:i}=e;if("node"===s){if(r.includes(o.id)){let[e,t,n]=i;Object.assign(f,{x:e,y:t,z:n});}}else if("combo"===s){if(o.id===n||r.includes(o.id)){let[e,t]=i;Object.assign(f,{x:e,y:t,childrenNode:u.childrenNode});}}else"edge"===s&&Object.assign(f,{sourceNode:d.sourceNode,targetNode:d.targetNode});}else if("expand"===l){let{expand:e}=t||{},{target:n,descendants:r,position:i}=e;if("node"===s){if(o.id===n||r.includes(o.id)){let[e,t,n]=i;Object.assign(h,{x:e,y:t,z:n});}}else if("combo"===s){if(o.id===n||r.includes(o.id)){let[e,t,n]=i;Object.assign(h,{x:e,y:t,z:n,childrenNode:d.childrenNode});}}else"edge"===s&&Object.assign(h,{sourceNode:d.sourceNode,targetNode:d.targetNode});}return[Object.keys(h).length>0?Object.assign({},u,h):u,Object.keys(f).length>0?Object.assign({},d,f):d];}stop(){this.animations.forEach(e=>e.cancel());}clear(){this.tasks=[];}release(){var e,t;let{canvas:n}=this.context,r=null===(t=null===(e=n.document)||void 0===e?void 0:e.timeline)||void 0===t?void 0:t.animationsWithPromises;r&&(n.document.timeline.animationsWithPromises=r.filter(e=>"finished"!==e.playState));}destroy(){this.stop(),this.animations.clear(),this.tasks=[];}}},"4667342b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("852bbaa9")._(n("26d5522d")),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e;}).apply(this,arguments);};this&&this.__awaiter,this&&this.__generator;var a=i({},r),o=a.version;a.render,a.unmountComponentAtNode;try{Number((o||"").split(".")[0])>=18&&a.createRoot;}catch(e){}},"4707dbcb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"EdgeBundling",{enumerable:!0,get:function(){return c;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("a2c47206"),o=n("81401a10"),s=n("2a08964b"),l=n("71473486"),u=n("0d562788");class c extends u.BasePlugin{constructor(e,t){super(e,Object.assign({},c.defaultOptions,t)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{let{model:e,element:t}=this.context,n=e.getEdgeData();this.divideEdges(this.options.divisions);let{cycles:r,iterRate:i,divRate:s}=this.options,{lambda:u,divisions:c,iterations:d}=this.options;for(let e=0;e<r;e++){for(let e=0;e<d;e++){let e={};n.forEach(t=>{var n;if(t.source===t.target)return;let r=(0,o.idOf)(t);e[r]=this.getEdgeForces(t,c,u);for(let t=0;t<c+1;t++)(n=this.edgePoints)[r]||(n[r]=[]),this.edgePoints[r][t]=(0,l.add)(this.edgePoints[r][t],e[r][t]);});}u/=2,c*=s,d*=i,this.divideEdges(c);}n.forEach(e=>{let n=(0,o.idOf)(e),r=t.getElement(n);null==r||r.update({d:(0,a.getPolylinePath)(this.edgePoints[n])});});},this.bindEvents();}get nodeMap(){return Object.fromEntries(this.context.model.getNodeData().map(e=>[(0,o.idOf)(e),(0,l.toVector2)((0,s.positionOf)(e))]));}divideEdges(e){this.context.model.getEdgeData().forEach(t=>{var n;let r=(0,o.idOf)(t);(n=this.edgePoints)[r]||(n[r]=[]);let i=this.nodeMap[t.source],a=this.nodeMap[t.target];if(1===e)this.edgePoints[r].push(i),this.edgePoints[r].push((0,l.divide)((0,l.add)(i,a),2)),this.edgePoints[r].push(a);else{let t=(0===this.edgePoints[r].length?(0,l.distance)(i,a):m(this.edgePoints[r]))/(e+1),n=t,o=[i];for(let e=1;e<this.edgePoints[r].length;e++){let i=this.edgePoints[r][e-1],a=this.edgePoints[r][e],s=(0,l.distance)(a,i);for(;s>n;){let e=n/s,r=(0,l.add)(i,(0,l.multiply)((0,l.subtract)(a,i),e));o.push(r),s-=n,n=t;}n-=s;}o.push(a),this.edgePoints[r]=o;}});}getVectorPosition(e){let t=this.nodeMap[e.source],n=this.nodeMap[e.target],[r,i]=(0,l.subtract)(n,t),a=(0,l.distance)(t,n);return{source:t,target:n,vx:r,vy:i,length:a};}measureEdgeCompatibility(e,t){let n=this.getVectorPosition(e),r=this.getVectorPosition(t),i=d(n,r);return i*h(n,r)*f(n,r)*g(n,r);}getEdgeBundles(){let e={},t=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((r,i)=>{n.forEach((n,a)=>{var s,l;!(a<=i)&&this.measureEdgeCompatibility(r,n)>=t&&(e[s=(0,o.idOf)(r)]||(e[s]=[]),e[(0,o.idOf)(r)].push(n),e[l=(0,o.idOf)(n)]||(e[l]=[]),e[(0,o.idOf)(n)].push(r));});}),e;}getSpringForce(e,t){let{pre:n,cur:r,next:i}=e;return(0,l.multiply)((0,l.subtract)((0,l.add)(n,i),(0,l.multiply)(r,2)),t);}getElectrostaticForce(e,t){(0,r.isEmpty)(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());let n=this.edgeBundles[(0,o.idOf)(t)],i=[0,0];return null==n||n.forEach(n=>{let r=this.edgePoints[(0,o.idOf)(n)][e],a=this.edgePoints[(0,o.idOf)(t)][e],s=(0,l.subtract)(r,a),u=(0,l.distance)(r,a);i=(0,l.add)(i,(0,l.multiply)(s,1/u));}),i;}getEdgeForces(e,t,n){let r=this.nodeMap[e.source],i=this.nodeMap[e.target],a=this.options.K/((0,l.distance)(r,i)*(t+1)),s=[[0,0]],u=(0,o.idOf)(e);for(let r=1;r<t;r++){let t=this.getSpringForce({pre:this.edgePoints[u][r-1],cur:this.edgePoints[u][r],next:this.edgePoints[u][r+1]||[0,0]},a),i=this.getElectrostaticForce(r,e);s.push((0,l.multiply)((0,l.add)(t,i),n));}return s.push([0,0]),s;}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.AFTER_RENDER,this.onBundle);}unbindEvents(){let{graph:e}=this.context;e.off(i.GraphEvent.AFTER_RENDER,this.onBundle);}destroy(){this.unbindEvents(),super.destroy();}}c.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};let d=(e,t)=>Math.abs((0,l.dot)([e.vx,e.vy],[t.vx,t.vy])/(e.length*t.length)),h=(e,t)=>{let n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n);},f=(e,t)=>{let n=(e.length+t.length)/2,r=(0,l.divide)((0,l.add)(e.source,e.target),2),i=(0,l.divide)((0,l.add)(t.source,t.target),2);return n/(n+(0,l.distance)(r,i));},p=(e,t)=>{if(t.source[0]===t.target[0])return[t.source[0],e[1]];if(t.source[1]===t.target[1])return[e[0],t.source[1]];let n=(t.source[1]-t.target[1])/(t.source[0]-t.target[0]),r=(n*n*t.source[0]+n*(e[1]-t.source[1])+e[0])/(n*n+1),i=n*(r-t.source[0])+t.source[1];return[r,i];},v=(e,t)=>{let n=p(t.source,e),r=p(t.target,e),i=(0,l.divide)((0,l.add)(n,r),2),a=(0,l.divide)((0,l.add)(e.source,e.target),2);return 0===(0,l.distance)(n,r)?0:Math.max(0,1-2*(0,l.distance)(a,i)/(0,l.distance)(n,r));},g=(e,t)=>Math.min(v(e,t),v(t,e)),m=e=>{let t=0;for(let n=1;n<e.length;n++)t+=(0,l.distance)(e[n],e[n-1]);return t;};},"4793a9ef":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getPolygonTextStyleByPlacement",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("905895f2"),a=n("8bdd800c"),o=n("2a08964b");function s(e,t,n,s,l,u,c){let[d,h]=(0,o.getXYByPlacement)(e,t),f={textAlign:"left"===t?"right":"right"===t?"left":"center",textBaseline:"top"===t?"bottom":"bottom"===t?"top":"middle",transform:[["translate",d+n,h+s]]};if("center"===t||!l)return f;let p=(0,i.pathToPoints)(u);if(!p||p.length<=3)return f;let v=p.map((e,t)=>{let n=p[(t+1)%p.length];return(0,r.isEqual)(e,n)?null:[e,n];}).filter(Boolean),g=(0,a.findNearestLine)([d,h],v),m=(0,a.findNearestPointOnLine)([d,h],g);if(m&&g&&(f.transform=[["translate",m[0]+n,m[1]+s]],c)){let e=Math.atan((g[0][1]-g[1][1])/(g[0][0]-g[1][0]));f.transform.push(["rotate",e/Math.PI*180]),f.textAlign="center",("right"===t||"left"===t)&&(e>0?f.textBaseline="right"===t?"bottom":"top":f.textBaseline="right"===t?"top":"bottom");}return f;}},"47cc8d53":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CustomElement",{enumerable:!0,get:function(){return r.CustomElement;}});var r=n("f7bb74fc");},49035947:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Linear",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("0017816c"),a=n("89123580"),o=n("d353eedf");class s extends i.Continuous{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:a.createInterpolateValue,tickMethod:o.d3Ticks,tickCount:5};}chooseTransforms(){return[r.identity,r.identity];}clone(){return new s(this.options);}}},"49bbc4a4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{assignColorByPalette:function(){return l;},getPaletteColors:function(){return u;},parsePalette:function(){return s;}});var r=n("abe9d8d6"),i=n("d1f78d64"),a=n("81401a10"),o=n("ec6e52f6");function s(e){if(e)return"string"==typeof e||"function"==typeof e||Array.isArray(e)?{type:"group",field:e=>e.id,color:e,invert:!1}:e;}function l(e,t){if(!t)return{};let{type:n,color:s,field:l,invert:u}=t,c=e=>{let t="string"==typeof s?(0,i.getExtension)("palette",s):s;if("function"==typeof t){let n={};return e.forEach(([e,r])=>{n[e]=t(u?1-r:r);}),n;}if(Array.isArray(t)){let n=u?[...t].reverse():t,r={};return e.forEach(([e,i])=>{r[e]=n[i%t.length];}),r;}return{};},d=(e,t)=>{var n;return"string"==typeof e?null===(n=t.data)||void 0===n?void 0:n[e]:null==e?void 0:e(t);};if("group"===n){let t=(0,r.groupBy)(e,e=>{if(!l)return"default";let t=d(l,e);return t?String(t):"default";}),n=c(Object.keys(t).map((e,t)=>[e,t])),i={};return Object.entries(t).forEach(([e,t])=>{t.forEach(t=>{i[(0,a.idOf)(t)]=n[e];});}),i;}if("value"===n){let[t,n]=e.reduce(([e,t],n)=>{let r=d(l,n);if("number"!=typeof r)throw Error((0,o.format)(`Palette field ${l} is not a number`));return[Math.min(e,r),Math.max(t,r)];},[1/0,-1/0]),r=n-t;return c(e.map(e=>[e.id,(d(l,e)-t)/r]));}}function u(e){let t="string"==typeof e?(0,i.getExtension)("palette",e):e;if("function"!=typeof t)return t;}},"4ac88e9f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{createInterpolateColor:function(){return a;},createInterpolateNumber:function(){return i;},createInterpolateRound:function(){return s;},createInterpolateValue:function(){return o;}});var r=n("989f6435");let i=(e,t)=>n=>e*(1-n)+t*n,a=(e,t)=>{let n=(0,r.string2rbg)(e),i=(0,r.string2rbg)(t);return null===n||null===i?n?()=>e:()=>t:e=>{let t=[,,,,];for(let r=0;r<4;r+=1){let a=n[r],o=i[r];t[r]=a*(1-e)+o*e;}let[r,a,o,s]=t;return`rgba(${Math.round(r)}, ${Math.round(a)}, ${Math.round(o)}, ${s})`;};},o=(e,t)=>"number"==typeof e&&"number"==typeof t?i(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):()=>e,s=(e,t)=>{let n=i(e,t);return e=>Math.round(n(e));};},"4aefbb18":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("32078424"),t);},"4b6193d0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("e2519325"),t);},"4bdde6ae":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Line",{enumerable:!0,get:function(){return a;}});var r=n("cdd49f4a"),i=n("177711d9");class a extends i.BaseEdge{constructor(e){super((0,r.mergeOptions)({style:a.defaultStyleProps},e));}getKeyPath(e){let[t,n]=this.getEndpoints(e);return[["M",t[0],t[1]],["L",n[0],n[1]]];}}a.defaultStyleProps={};},"4be70f65":function(e,t,n){"use strict";function r({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):n;}function i(e){return"object"==typeof e?e.valueOf():e;}n.d(t,"__esModule",{value:!0}),n.d(t,"InternMap",{enumerable:!0,get:function(){return a;}});class a extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=i,null!==e)for(let[t,n]of e)this.set(t,n);}get(e){return super.get(r({map:this.map,initKey:this.initKey},e));}has(e){return super.has(r({map:this.map,initKey:this.initKey},e));}set(e,t){return super.set(function({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n);}({map:this.map,initKey:this.initKey},e),t);}delete(e){return super.delete(function({map:e,initKey:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n;}({map:this.map,initKey:this.initKey},e));}}},"4c32f747":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ellipsisIt",{enumerable:!0,get:function(){return i;}});var r=n("73c47a5d");function i(e,t,n){void 0===n&&(n="..."),(0,r.applyToText)(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n});}},"4c46169a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"flex",{enumerable:!0,get:function(){return o;}});var r=n("18f14020"),i=n("d36f7e73"),a=n("eb97948a"),o=function(e,t,n){var o=e.width,s=e.height,l=n.flexDirection,u=void 0===l?"row":l,c=(n.flexWrap,n.justifyContent),d=void 0===c?"flex-start":c,h=(n.alignContent,n.alignItems),f=void 0===h?"flex-start":h,p="row"===u,v="row"===u||"column"===u,g=p?v?[1,0]:[-1,0]:v?[0,1]:[0,-1],m=(0,r.__read)([0,0],2),y=m[0],b=m[1],E=t.map(function(e){var t,n=e.width,i=e.height,o=(0,r.__read)([y,b],2),s=o[0],l=o[1];return y=(t=(0,r.__read)([y+n*g[0],b+i*g[1]],2))[0],b=t[1],new a.BBox(s,l,n,i);}),x=(0,i.getItemsBBox)(E),k={"flex-start":0,"flex-end":p?o-x.width:s-x.height,center:p?(o-x.width)/2:(s-x.height)/2},S=E.map(function(e){var t=e.x,n=e.y,r=a.BBox.fromRect(e);return r.x=p?t+k[d]:t,r.y=p?n:n+k[d],r;});(0,i.getItemsBBox)(S);var T=function(e){var t=(0,r.__read)(p?["height",s]:["width",o],2),n=t[0],i=t[1];switch(f){case"flex-start":default:return 0;case"flex-end":return i-e[n];case"center":return i/2-e[n]/2;}};return S.map(function(e){var t=e.x,n=e.y,r=a.BBox.fromRect(e);return r.x=p?t:t+T(r),r.y=p?n+T(r):n,r;}).map(function(t){var n,r,i=a.BBox.fromRect(t);return i.x+=null!==(n=e.x)&&void 0!==n?n:0,i.y+=null!==(r=e.y)&&void 0!==r?r:0,i;});};},"4c9c9fd1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"register",{enumerable:!0,get:function(){return a;}});var r=n("ec6e52f6"),i=n("b415022d");function a(e,t,n){i.EXTENSION_REGISTRY[e][t]&&r.print.warn(`The extension ${t} of ${e} has been registered before, and will be overridden.`),Object.assign(i.EXTENSION_REGISTRY[e],{[t]:n});}},"4e815d37":function(e,t,n){"use strict";function r(e,...t){return t.reduce((e,t)=>n=>e(t(n)),e);}n.d(t,"__esModule",{value:!0}),n.d(t,"compose",{enumerable:!0,get:function(){return r;}});},"4eb3f949":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"arrayDiff",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e,t,n,a=r.isEqual){let o=new Map(e.map(e=>[n(e),e])),s=new Map(t.map(e=>[n(e),e])),l=new Set(o.keys()),u=new Set(s.keys()),c=[],d=[],h=[],f=[];return u.forEach(e=>{l.has(e)?a(o.get(e),s.get(e))?f.push(s.get(e)):d.push(s.get(e)):c.push(s.get(e));}),l.forEach(e=>{u.has(e)||h.push(o.get(e));}),{enter:c,exit:h,keep:f,update:d};}},"4f434d3c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{d3Ticks:function(){return a;},insertBreaksToTicks:function(){return i;}});var r=n("90abb703");let i=(e,t)=>{if(!(null==t?void 0:t.length))return e;let n=Array.from(new Set([...e,...t.flatMap(e=>[e.start,e.end])])).sort((e,t)=>e-t).filter(e=>!t.some(({start:t,end:n})=>e>t&&e<n));return n.length?n:e;},a=(e,t,n,a)=>{let o,s;let l=e,u=t;if(l===u&&n>0)return[l];let c=(0,r.tickIncrement)(l,u,n);if(0===c||!Number.isFinite(c))return[];if(c>0){l=Math.ceil(l/c),s=Array(o=Math.ceil((u=Math.floor(u/c))-l+1));for(let e=0;e<o;e+=1)s[e]=(l+e)*c;}else{l=Math.ceil(l*(c=-c)),s=Array(o=Math.ceil((u=Math.floor(u*c))-l+1));for(let e=0;e<o;e+=1)s[e]=(l+e)/c;}return i(s,a);};},"4f490d8b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CategoryItems",{enumerable:!0,get:function(){return g;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("c086f503"),s=n("9225b8d3"),l=n("01a29d03"),u=n("bf663559"),c=n("dbd5a5c2"),d=n("88b6fb7f"),h=n("b81750fa"),f=n("51bc7eb7"),p=(0,l.classNames)({page:"item-page",navigator:"navigator",item:"item"},"items"),v=function(e,t,n){return(void 0===n&&(n=!0),e)?t(e):n;},g=function(e){function t(t){var n=e.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:a.noop,mouseenter:a.noop,mouseleave:a.noop})||this;return n.navigatorShape=[0,0],n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer();},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var e=this.attributes,t=e.gridRow,n=e.gridCol,r=e.data;if(!t&&!n)throw Error("gridRow and gridCol can not be set null at the same time");return t&&n?[t,n]:t?[t,r.length]:[r.length,n];},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var e=this.attributes,t=e.data,n=e.layout,i=e.poptip,a=e.focus,o=e.focusMarkerSize,s=e.classNamePrefix,u=(0,l.subStyleProps)(this.attributes,"item");return t.map(function(e,c){var d=e.id,h=void 0===d?c:d,f=e.label,p=e.value;return{id:"".concat(h),index:c,style:(0,r.__assign)({layout:n,labelText:f,valueText:p,poptip:i,focus:a,focusMarkerSize:o,classNamePrefix:s},Object.fromEntries(Object.entries(u).map(function(n){var i=(0,r.__read)(n,2),a=i[0],o=i[1];return[a,(0,l.getCallbackValue)(o,[e,c,t])];})))};});},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var e=this,t=this.attributes,n=t.orientation,i=t.width,a=t.rowPadding,o=t.colPadding,s=(0,r.__read)(this.navigatorShape,1)[0],l=(0,r.__read)(this.grid,2),u=l[0],c=l[1],d=c*u,h=0;return this.pageViews.children.map(function(t,l){var f,p,v=Math.floor(l/d),g=l%d,m=e.ifHorizontal(c,u),y=[Math.floor(g/m),g%m];"vertical"===n&&y.reverse();var b=(0,r.__read)(y,2),E=b[0],x=b[1],k=(i-s-(c-1)*o)/c,S=t.getBBox().height,T=(0,r.__read)([0,0],2),M=T[0],w=T[1];return"horizontal"===n?(M=(f=(0,r.__read)([h,E*(S+a)],2))[0],w=f[1],h=x===c-1?0:h+k+o):(M=(p=(0,r.__read)([x*(k+o),h],2))[0],w=p[1],h=E===u-1?0:h+S+a),{page:v,index:l,row:E,col:x,pageIndex:g,width:k,height:S,x:M,y:w};});},t.prototype.getFlexLayout=function(){var e=this.attributes,t=e.width,n=e.height,i=e.rowPadding,a=e.colPadding,o=(0,r.__read)(this.navigatorShape,1)[0],s=(0,r.__read)(this.grid,2),l=s[0],u=s[1],c=(0,r.__read)([t-o,n],2),d=c[0],h=c[1],f=(0,r.__read)([0,0,0,0,0,0,0,0],8),p=f[0],g=f[1],m=f[2],y=f[3],b=f[4],E=f[5],x=f[6],k=f[7];return this.pageViews.children.map(function(e,t){var n,o,s,c,f=e.getBBox(),S=f.width,T=f.height,M=0===x?0:a,w=x+M+S;return w<=d&&v(b,function(e){return e<u;})?(p=(n=(0,r.__read)([x+M,k,w],3))[0],g=n[1],x=n[2]):(E=(o=(0,r.__read)([E+1,0,0,k+T+i],4))[0],b=o[1],x=o[2],(k=o[3])+T<=h&&v(E,function(e){return e<l;}))?(p=(s=(0,r.__read)([x,k,S],3))[0],g=s[1],x=s[2]):(p=(c=(0,r.__read)([0,0,S,0,m+1,0,0,0],8))[0],g=c[1],x=c[2],k=c[3],m=c[4],y=c[5],E=c[6],b=c[7]),{width:S,height:T,x:p,y:g,page:m,index:t,pageIndex:y++,row:E,col:b++};});},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,t=e.call(this);return t.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):t;},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(e,t){var n=this.attributes.orientation;return(0,c.ifHorizontal)(n,e,t);},t.prototype.flattenPage=function(e){e.querySelectorAll(p.item.class).forEach(function(t){e.appendChild(t);}),e.querySelectorAll(p.page.class).forEach(function(t){e.removeChild(t).destroy();});},t.prototype.renderItems=function(e){var t=this.attributes,n=t.click,i=t.mouseenter,a=t.mouseleave,o=t.classNamePrefix;this.flattenPage(e);var s=this.dispatchCustomEvent.bind(this),u=(0,h.getLegendClassName)(p.item.name,f.CLASSNAME_SUFFIX_MAP.item,o);(0,l.select)(e).selectAll(p.item.class).data(this.renderData,function(e){return e.id;}).join(function(e){return e.append(function(e){var t=e.style,n=(0,r.__rest)(e,["style"]);return new d.CategoryItem({style:t},n);}).attr("className",u).on("click",function(){null==n||n(this),s("itemClick",{item:this});}).on("pointerenter",function(){null==i||i(this),s("itemMouseenter",{item:this});}).on("pointerleave",function(){null==a||a(this),s("itemMouseleave",{item:this});});},function(e){return e.each(function(e){var t=e.style;this.update(t);});},function(e){return e.remove();});},t.prototype.relayoutNavigator=function(){var e,t=this.attributes,n=t.layout,i=t.width,a=(null===(e=this.pageViews.children[0])||void 0===e?void 0:e.getBBox().height)||0,o=(0,r.__read)(this.navigatorShape,2),s=o[0],l=o[1];this.navigator.update("grid"===n?{pageWidth:i-s,pageHeight:a-l}:{});},t.prototype.adjustLayout=function(){var e=this,t=Object.entries((0,l.groupBy)(this.itemsLayout,"page")).map(function(e){var t=(0,r.__read)(e,2);return{page:t[0],layouts:t[1]};}),n=(0,r.__spreadArray)([],(0,r.__read)(this.navigator.getContainer().children),!1);t.forEach(function(t){var r=t.layouts,i=e.pageViews.appendChild(new s.Group({className:p.page.name}));r.forEach(function(e){var t=e.x,r=e.y,o=e.index,s=e.width,l=e.height,u=n[o];i.appendChild(u),(0,a.set)(u,"__layout__",e),u.update({x:t,y:r,width:s,height:l});});}),this.relayoutNavigator();},t.prototype.renderNavigator=function(e){var t=this.attributes,n=t.orientation,r=t.classNamePrefix,i=(0,l.subStyleProps)(this.attributes,"nav"),a=(0,l.deepAssign)({orientation:n,classNamePrefix:r},i),o=this;return e.selectAll(p.navigator.class).data(["nav"]).join(function(e){return e.append(function(){return new u.Navigator({style:a});}).attr("className",p.navigator.name).each(function(){o.navigator=this;});},function(e){return e.each(function(){this.update(a);});},function(e){return e.remove();}),this.navigator;},t.prototype.getBBox=function(){return this.navigator.getBBox();},t.prototype.render=function(e,t){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator((0,l.select)(t));this.renderItems(r.getContainer()),this.adjustLayout();}},t.prototype.dispatchCustomEvent=function(e,t){var n=new i.CustomEvent(e,{detail:t});this.dispatchEvent(n);},t;}(o.Component);},"4f74f79a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Minimap",{enumerable:!0,get:function(){return d;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("966f7de2"),o=n("81401a10"),s=n("28792030"),l=n("8bdd800c"),u=n("0d562788"),c=n("98176abe");class d extends u.BasePlugin{constructor(e,t){super(e,Object.assign({},d.defaultOptions,t)),this.onDraw=e=>{var t;null!==(t=null==e?void 0:e.data)&&void 0!==t&&t.render||this.onRender();},this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=e=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(e.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd));},this.onMaskDrag=e=>{if(!this.mask||!this.isMaskDragging)return;let{size:[t,n]}=this.options,{movementX:r,movementY:i}=e,{left:a,top:o,width:s,height:l}=this.mask.style,[,,u,c]=this.maskBBox,d=parseInt(a)+r,p=parseInt(o)+i,v=parseInt(s),g=parseInt(l);d<0&&(d=0),p<0&&(p=0),d+v>t&&(d=f(t-v,0)),p+g>n&&(p=f(n-g,0)),v<u&&(r>0?(d=f(d-r,0),v=h(v+r,t)):r<0&&(v=h(v-r,t))),g<c&&(i>0?(p=f(p-i,0),g=h(g+i,n)):i<0&&(g=h(g-i,n))),Object.assign(this.mask.style,{left:d+"px",top:p+"px",width:v+"px",height:g+"px"});let m=parseInt(a)-d,y=parseInt(o)-p;if(0===m&&0===y)return;let b=this.context.canvas.getCamera().getZoom()/this.canvas.getCamera().getZoom();this.context.graph.translateBy([m*b,y*b],!1);},this.onMaskDragEnd=e=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(e.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd));},this.onTransform=(0,r.throttle)(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera());},32,{leading:!0}),this.setOnRender(),this.bindEvents();}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents();}setOnRender(){this.onRender=(0,r.debounce)(()=>{this.renderMinimap(),this.renderMask();},this.options.delay);}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.AFTER_DRAW,this.onDraw),e.on(i.GraphEvent.AFTER_RENDER,this.onRender),e.on(i.GraphEvent.AFTER_ANIMATE,this.onRender),e.on(i.GraphEvent.AFTER_TRANSFORM,this.onTransform);}unbindEvents(){let{graph:e}=this.context;e.off(i.GraphEvent.AFTER_DRAW,this.onDraw),e.off(i.GraphEvent.AFTER_RENDER,this.onRender),e.off(i.GraphEvent.AFTER_ANIMATE,this.onRender),e.off(i.GraphEvent.AFTER_TRANSFORM,this.onTransform);}renderMinimap(){let e=this.getElements(),t=this.initCanvas();this.setShapes(t,e);}getElements(){let{filter:e}=this.options,{model:t,element:n}=this.context,r=t.getData(),i={nodes:r.nodes.filter(e=>null==n?void 0:n.getElement((0,o.idOf)(e))),edges:r.edges.filter(e=>{let t=null==n?void 0:n.getElement((0,o.idOf)(e));return t&&(0,a.isVisible)(t);}),combos:r.combos.filter(e=>null==n?void 0:n.getElement((0,o.idOf)(e)))};if(!e)return i;let{nodes:s,edges:l,combos:u}=i;return{nodes:s.filter(t=>e((0,o.idOf)(t),"node")),edges:l.filter(t=>e((0,o.idOf)(t),"edge")),combos:u.filter(t=>e((0,o.idOf)(t),"combo"))};}setShapes(e,t){let{nodes:n,edges:r,combos:i}=t,{shape:a}=this.options,{element:s}=this.context,l=(t,n)=>{let r;let i=(0,o.idOf)(t),l=null==s?void 0:s.getElement(i);if(!l)return;let u=l.getShape("key");if("string"==typeof a)r=l.getShape(a).cloneNode();else{let e=a(i,n,l);r=e===l?e.cloneNode(!0):e;}r.setPosition(u.getPosition()),l.style.zIndex&&(r.style.zIndex=l.style.zIndex),r.id=l.id,e.appendChild(r);};e.removeChildren(),r.forEach(e=>l(e,"edge")),i.forEach(e=>l(e,"combo")),n.forEach(e=>l(e,"node"));}initCanvas(){let{renderer:e,size:[t,n]}=this.options;if(this.canvas){let{width:r,height:i}=this.canvas.getConfig();(t!==r||n!==i)&&this.canvas.resize(t,n),e&&this.canvas.setRenderer(e);}else{let{className:r,position:i,container:a,containerStyle:o}=this.options,[s,l]=(0,c.createPluginCanvas)({renderer:e,width:t,height:n,placement:i,className:"minimap",container:a,containerStyle:o,graphCanvas:this.context.canvas});r&&s.classList.add(r),this.container=s,this.canvas=l;}return this.setCamera(),this.canvas;}createLandmark(e,t,n){let r=`${e.join(",")}-${t.join(",")}-${n}`;if(this.landmarkMap.has(r))return this.landmarkMap.get(r);let i=this.canvas.getCamera().createLandmark(r,{position:e,focalPoint:t,zoom:n});return this.landmarkMap.set(r,i),i;}setCamera(){var e;let{canvas:t}=this.context,n=null===(e=this.canvas)||void 0===e?void 0:e.getCamera();if(!n)return;let{size:[r,i],padding:a}=this.options,[o,l,u,c]=(0,s.parsePadding)(a),{min:d,max:h,center:f}=t.getBounds("elements"),p=Math.min((r-c-l)/(h[0]-d[0]),(i-o-u)/(h[1]-d[1])),v=this.createLandmark(f,f,p);n.gotoLandmark(v,0);}get maskBBox(){let{canvas:e}=this.context,t=e.getSize(),n=e.getCanvasByViewport([0,0]),r=e.getCanvasByViewport(t),i=this.canvas.canvas2Viewport((0,l.toPointObject)(n)),a=this.canvas.canvas2Viewport((0,l.toPointObject)(r)),o=a.x-i.x,s=a.y-i.y;return[i.x,i.y,o,s];}calculateMaskBBox(){let{size:[e,t]}=this.options,[n,r,i,a]=this.maskBBox;return n<0&&(i=h(i+n,e),n=0),r<0&&(a=h(a+r,t),r=0),n+i>e&&(i=f(e-n,0)),r+a>t&&(a=f(t-r,0)),[h(n,e),h(r,t),f(i,0),f(a,0)];}renderMask(){let{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",e=>e.preventDefault&&e.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask();}updateMask(){if(!this.mask)return;let[e,t,n,r]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:t+"px",left:e+"px",width:n+"px",height:r+"px"});}destroy(){var e,t,n;this.unbindEvents(),null===(e=this.canvas)||void 0===e||e.destroy(),null===(t=this.mask)||void 0===t||t.remove(),null===(n=this.container)||void 0===n||n.remove(),super.destroy();}}d.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};let h=(e,t)=>Math.min(e,t),f=(e,t)=>Math.max(e,t);},"508bb885":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{OverlapUtils:function(){return u;},canProcessOverlap:function(){return c;},processOverlap:function(){return d;}});var r=n("777fffbe"),i=n("01a29d03"),a=r._(n("a1c5fe05")),o=r._(n("984ad0be")),s=r._(n("7426bc92")),l=r._(n("612d2a0d")),u=new Map([["hide",o.default],["rotate",s.default],["ellipsis",a.default],["wrap",l.default]]);function c(e,t,n){return!(t.labelOverlap.length<1)&&("hide"===n?!(0,i.isInOffscreenGroup)(e[0]):"rotate"===n?!e.some(function(e){var t;return!!(null===(t=e.attr("transform"))||void 0===t?void 0:t.includes("rotate"));}):"ellipsis"!==n&&"wrap"!==n||e.filter(function(e){return e.querySelector("text");}).length>=1);}function d(e,t,n,r){var i=t.labelOverlap,a=void 0===i?[]:i;a.length&&a.forEach(function(i){var a=i.type,o=u.get(a);c(e,t,a)&&(null==o||o(e,i,t,r,n));});}},"51bc7eb7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{CATEGORY_DEFAULT_OPTIONS:function(){return s;},CLASSNAME_SUFFIX_MAP:function(){return a.CLASSNAME_SUFFIX_MAP;},CLASS_NAMES:function(){return c;},CONTINUOUS_DEFAULT_OPTIONS:function(){return l;},LEGEND_BASE_DEFAULT_OPTIONS:function(){return o;},STEP_RATIO:function(){return u;}});var r=n("01a29d03"),i=n("c28581c9"),a=n("66eb3e12"),o={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},s=(0,r.deepAssign)({},o,{}),l=(0,r.deepAssign)({},o,(0,r.superStyleProps)(i.DEFAULT_HANDLE_CFG,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),u=.01,c=(0,r.classNames)({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");},"522a998f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Identity",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("9d4f096a"),a=n("6506d72a"),o=n("90abb703");class s extends i.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:a.wilkinsonExtended};}map(e){return(0,o.isValid)(e)?e:this.options.unknown;}invert(e){return this.map(e);}clone(){return new s(this.options);}getTicks(){let{domain:e,tickCount:t,tickMethod:n}=this.options,[i,a]=e;return(0,r.isNumber)(i)&&(0,r.isNumber)(a)?n(i,a,t):[];}}},"526d1d3a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Base",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");class i{constructor(e){this.options=(0,r.deepMix)({},this.getDefaultOptions()),this.update(e);}getOptions(){return this.options;}update(e={}){this.options=(0,r.deepMix)({},this.options,e),this.rescale(e);}rescale(e){}}},"527010ac":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Triangle",{enumerable:!0,get:function(){return c;}});var r=n("abe9d8d6"),i=n("95550d14"),a=n("8a0aecd6"),o=n("966f7de2"),s=n("9da99c33"),l=n("cdd49f4a"),u=n("90e17978");class c extends u.Polygon{constructor(e){super((0,l.mergeOptions)({style:c.defaultStyleProps},e));}getPoints(e){let{direction:t}=e,[n,r]=this.getSize(e);return(0,o.getTrianglePoints)(n,r,t);}getPortXY(e,t){let{direction:n}=e,{placement:r="top"}=t,i=this.getShape("key").getLocalBounds(),[a,s]=this.getSize(e),l=(0,o.getTrianglePorts)(a,s,n);return(0,o.getPortXYByPlacement)(i,r,l,!1);}getIconStyle(e){let{icon:t,iconText:n,iconSrc:o,direction:l}=e;if(!1===t||(0,r.isEmpty)(n||o))return!1;let u=(0,s.subStyleProps)(this.getGraphicStyle(e),"icon"),c=this.getShape("key").getLocalBounds(),[d,h]=(0,a.getTriangleCenter)(c,l),f=2*(0,a.getIncircleRadius)(c,l)*i.ICON_SIZE_RATIO;return Object.assign({x:d,y:h,width:f,height:f},u);}}c.defaultStyleProps={size:40,direction:"up"};},"52931b1b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"keyframeInterpolate",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("b20c224c");function a(e,t,n,a){if(!a)return e.attr("__keyframe_data__",n),null;var o=a.duration,s=(0,i.interpolate)(t,n),l=Array(Math.ceil(+(void 0===o?0:o)/16)).fill(0).map(function(e,t,n){return{__keyframe_data__:s(t/(n.length-1))};});return e.animate(l,(0,r.__assign)({fill:"both"},a));}},"52a9f3ff":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"registerBuiltInExtensions",{enumerable:!0,get:function(){return a;}});var r=n("38871e26"),i=n("f8c84dba");function a(){Object.entries(i.BUILT_IN_EXTENSIONS).forEach(([e,t])=>{Object.entries(t).forEach(([t,n])=>{(0,r.register)(e,t,n);});});}},"530fd5f7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DisplayObject",{enumerable:!0,get:function(){return r.DisplayObject;}});var r=n("f7bb74fc");},"5385f695":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"MapNodeSize",{enumerable:!0,get:function(){return d;}});var r=n("abe9d8d6"),i=n("c3a91540"),a=n("81401a10"),o=n("28792030"),s=n("baa0815f"),l=n("db863a29"),u=n("eb4593bd"),c=n("fba51a74");class d extends u.BaseTransform{constructor(e,t){super(e,(0,r.deepMix)({},d.defaultOptions,t)),this.assignSizeByCentrality=(e,t,n,r,i,a)=>{let o=[t,n],l=[r[0],i[0]],u=[r[1],i[1]],c=[r[2],i[2]],d=(e,t)=>{if("function"==typeof a)return a(e,o,t);switch(a){case"linear":return(0,s.linear)(e,o,t);case"log":return(0,s.log)(e,o,t);case"pow":return(0,s.pow)(e,o,t,2);case"sqrt":return(0,s.sqrt)(e,o,t);default:return t[0];}};return[d(e,l),d(e,u),d(e,c)];};}beforeDraw(e){let{model:t}=this.context,n=t.getNodeData(),i=(0,l.parseSize)(this.options.maxSize),o=(0,l.parseSize)(this.options.minSize),s=this.getCentralities(this.options.centrality),u=s.size>0?Math.max(...s.values()):0,d=s.size>0?Math.min(...s.values()):0;return n.forEach(t=>{var n;let l=this.assignSizeByCentrality(s.get((0,a.idOf)(t))||0,d,u,o,i,this.options.scale),h=null===(n=this.context.element)||void 0===n?void 0:n.getElement((0,a.idOf)(t)),f={size:l};this.assignLabelStyle(f,l,t,h),h&&(0,c.isStyleEqual)(f,h.attributes)||(0,c.reassignTo)(e,h?"update":"add","node",(0,r.deepMix)(t,{style:f}),!0);}),e;}assignLabelStyle(e,t,n,i){var a;let s=i?i.config.style:null===(a=this.context.element)||void 0===a?void 0:a.getElementComputedStyle("node",n);if(Object.assign(e,(0,r.pick)(s,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){let n=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:n,labelLineHeight:n+(0,o.getVerticalPadding)(e.labelPadding)});}return e;}getLabelSizeByNodeSize(e,t,n){let r=Math.min(...e)/2,[i,a]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,t];return Math.min(a,Math.max(r,i));}getCentralities(e){let{model:t}=this.context,n=t.getData();if("function"==typeof e)return e(n);let r=t.getRelatedEdgesData.bind(t);return(0,i.getNodeCentralities)(n,r,e);}}d.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};},54522439:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Ribbon",{enumerable:!0,get:function(){return v;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("c086f503"),s=n("01a29d03"),l=n("51bc7eb7"),u=n("b81750fa"),c=n("dbd5a5c2"),d=n("7000340e"),h=(0,s.classNames)({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function f(e){var t=e.orientation,n=e.size,r=e.length;return(0,c.ifHorizontal)(t,[r,n],[n,r]);}function p(e){var t=e.type,n=(0,r.__read)(f(e),2),i=n[0],a=n[1];return"size"===t?[["M",0,a],["L",0+i,0],["L",0+i,a],["Z"]]:[["M",0,a],["L",0,0],["L",0+i,0],["L",0+i,a],["Z"]];}var v=function(e){function t(t){return e.call(this,t,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,t){var n,o,v,g,m,y,b,E,x,k,S,T,M,w,N;(function(e,t){var n=(0,s.subStyleProps)(t,"track"),i=t.classNamePrefix,a=(0,u.getLegendClassName)(h.track.name,l.CLASSNAME_SUFFIX_MAP.track,i);e.maybeAppendByClassName(h.track,"path").attr("className",a).styles((0,r.__assign)({d:p(t)},n));})((0,s.select)(t).maybeAppendByClassName(h.trackGroup,"g"),e),n=(0,s.select)(t).maybeAppendByClassName(h.selectionGroup,"g"),o=e,k=(0,s.subStyleProps)(o,"selection"),S=(g=o.orientation,m=o.color,y=o.block,b=o.partition,E=(v=(0,a.isFunction)(m)?Array(20).fill(0).map(function(e,t,n){return m(t/(n.length-1));}):m).length,x=v.map(function(e){return(0,i.parseColor)(e).toString();}),E?1===E?x[0]:y?(0,d.getBlockColor)(b,x,g):x.reduce(function(e,t,n){return e+" ".concat(n/(E-1),":").concat(t);},"l(".concat((0,c.ifHorizontal)(g,"0","270"),")")):""),T=o.classNamePrefix,M=(0,u.getLegendClassName)(h.selection.name,l.CLASSNAME_SUFFIX_MAP.selection,T),N=(w=n.maybeAppendByClassName(h.selection,"path").attr("className",M).styles((0,r.__assign)({d:p(o),fill:S},k))).maybeAppendByClassName(h.clipPath,"path").styles({d:function(e){var t=e.orientation,n=e.range;if(!n)return[];var i=(0,r.__read)(f(e),2),a=i[0],o=i[1],s=(0,r.__read)(n,2),l=s[0],u=s[1],d=(0,c.ifHorizontal)(t,l*a,0),h=(0,c.ifHorizontal)(t,0,l*o),p=(0,c.ifHorizontal)(t,u*a,a),v=(0,c.ifHorizontal)(t,o,u*o);return[["M",d,h],["L",d,v],["L",p,v],["L",p,h],["Z"]];}(o)}).node(),w.style("clipPath",N);},t;}(o.Component);},"54bb3a1e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"OrganizationChart",{enumerable:!0,get:function(){return l;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("aeeab442"),s=n("af537705");let l=(0,r.forwardRef)(({children:e,...t},n)=>{let l=(0,r.useMemo)(()=>{let{direction:e="vertical",labelField:n,...r}=t;return(0,o.mergeOptions)(a.COMMON_OPTIONS,s.DEFAULT_OPTIONS,(0,s.getOrganizationChartOptions)({direction:e,labelField:n}),r);},[t]);return r.default.createElement(i.BaseGraph,{...l,ref:n},e);});},"55aa4bfa":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ElementController",{enumerable:!0,get:function(){return S;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("95550d14"),s=n("d1f78d64"),l=n("bfa6e8c6"),u=n("fc95c318"),c=n("f20c9f5f"),d=n("bd7a65f9"),h=n("966f7de2"),f=n("0299759a"),p=n("81401a10"),v=n("49bbc4a4"),g=n("2a08964b"),m=n("ec6e52f6"),y=n("cdd49f4a"),b=n("215c6f85"),E=n("71473486"),x=n("6f097fb0"),k=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class S{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e;}init(){this.initContainer();}initContainer(){if(!this.container||this.container.destroyed){let{canvas:e}=this.context;this.container=e.appendChild(new r.Group({className:"elements"}));}}emit(e,t){t.silence||(0,f.emit)(this.context.graph,e);}forEachElementData(e){o.ELEMENT_TYPES.forEach(t=>{let n=this.context.model.getElementsDataByType(t);e(t,n);});}getElementType(e,t){var n;let{options:r,graph:i}=this.context,a=(0,d.isOverridable)(t)&&(null===(n=r[e])||void 0===n?void 0:n.type)||t.type;return a?"string"==typeof a?a:a.call(i,t):"edge"===e?"line":"circle";}getTheme(e){return(0,b.themeOf)(this.context.options)[e]||{};}getThemeStyle(e){return this.getTheme(e).style||{};}getThemeStateStyle(e,t){let{state:n={}}=this.getTheme(e);return Object.assign({},...t.map(e=>n[e]||{}));}computePaletteStyle(){let{options:e}=this.context;this.paletteStyle={},this.forEachElementData((t,n)=>{var r,i;let a=Object.assign({},(0,v.parsePalette)(null===(r=this.getTheme(t))||void 0===r?void 0:r.palette),(0,v.parsePalette)(null===(i=e[t])||void 0===i?void 0:i.palette));(null==a?void 0:a.field)&&Object.assign(this.paletteStyle,(0,v.assignColorByPalette)(n,a));});}getPaletteStyle(e,t){let n=this.paletteStyle[t];return n?"edge"===e?{stroke:n}:{fill:n}:{};}computeElementDefaultStyle(e,t){var n;let{options:r}=this.context,i=(null===(n=r[e])||void 0===n?void 0:n.style)||{};"transform"in i&&Array.isArray(i.transform)&&(i.transform=[...i.transform]),this.defaultStyle[(0,p.idOf)(t.datum)]=(0,y.computeElementCallbackStyle)(i,t);}computeElementsDefaultStyle(e){let{graph:t}=this.context;this.forEachElementData((n,r)=>{let i=r.length;for(let a=0;a<i;a++){let i=r[a];(void 0===e||e.includes((0,p.idOf)(i)))&&this.computeElementDefaultStyle(n,{datum:i,graph:t});}});}getDefaultStyle(e){return this.defaultStyle[e]||{};}getElementState(e){try{let{model:t}=this.context;return t.getElementState(e);}catch(e){return[];}}getElementStateStyle(e,t,n){var r,i;let{options:a}=this.context,o=(null===(i=null===(r=a[e])||void 0===r?void 0:r.state)||void 0===i?void 0:i[t])||{};return(0,y.computeElementCallbackStyle)(o,n);}computeElementStatesStyle(e,t,n){this.stateStyle[(0,p.idOf)(n.datum)]=Object.assign({},...t.map(t=>this.getElementStateStyle(e,t,n)));}computeElementsStatesStyle(e){let{graph:t}=this.context;this.forEachElementData((n,r)=>{let i=r.length;for(let a=0;a<i;a++){let i=r[a];if(void 0===e||e.includes((0,p.idOf)(i))){let e=this.getElementState((0,p.idOf)(i));this.computeElementStatesStyle(n,e,{datum:i,graph:t});}}});}getStateStyle(e){return this.stateStyle[e]||{};}computeStyle(e,t){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t));}getElement(e){return this.elementMap[e];}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e]);}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[(0,p.idOf)(e)]);}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e]);}getElementComputedStyle(e,t){let n=(0,p.idOf)(t),r=this.getThemeStyle(e),i=this.getPaletteStyle(e,n),a=t.style||{},o=this.getDefaultStyle(n),s=this.getThemeStateStyle(e,this.getElementState(n)),l=this.getStateStyle(n),u=(0,d.isOverridable)(t)?Object.assign({},r,i,a,o,s,l):Object.assign({},a);if("combo"===e){let e=this.context.model.getChildrenData(n),t=u.collapsed?[]:e.map(p.idOf).filter(e=>this.getElement(e));Object.assign(u,{childrenNode:t,childrenData:e});}return u;}getDrawData(e){this.init();let t=this.computeChangesAndDrawData(e);if(!t)return null;let{type:n="draw",stage:r=n}=e;return this.markDestroyElement(t.drawData),this.computeStyle(r),{type:n,stage:r,data:t};}draw(e={animation:!0}){let t=this.getDrawData(e);if(!t)return;let{data:{drawData:{add:n,update:r,remove:i}}}=t;return this.destroyElements(i,e),this.createElements(n,e),this.updateElements(r,e),this.setAnimationTask(e,t);}preLayoutDraw(){return k(this,arguments,void 0,function*(e={animation:!0}){var t,n;let r=this.getDrawData(e);if(!r)return;let{data:{drawData:i}}=r;yield null===(n=null===(t=this.context.layout)||void 0===t?void 0:t.preLayout)||void 0===n?void 0:n.call(t,i);let{add:a,update:o,remove:s}=i;return this.destroyElements(s,e),this.createElements(a,e),this.updateElements(o,e),this.setAnimationTask(e,r);});}setAnimationTask(e,t){let{animation:n,silence:r}=e,{data:{dataChanges:i,drawData:o},stage:s,type:l}=t;return this.context.animation.animate(n,r?{}:{before:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.BEFORE_DRAW,{dataChanges:i,animation:n,stage:s,render:"render"===l}),e),beforeAnimate:t=>this.emit(new f.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.DRAW,t,o),e),afterAnimate:t=>this.emit(new f.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.DRAW,t,o),e),after:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.AFTER_DRAW,{dataChanges:i,animation:n,stage:s,render:"render"===l,firstRender:!1===this.context.graph.rendered}),e)});}computeChangesAndDrawData(e){let{model:t}=this.context,n=t.getChanges(),r=(0,u.reduceDataChanges)(n);if(0===r.length)return null;let{NodeAdded:a=[],NodeUpdated:o=[],NodeRemoved:s=[],EdgeAdded:l=[],EdgeUpdated:c=[],EdgeRemoved:d=[],ComboAdded:h=[],ComboUpdated:f=[],ComboRemoved:v=[]}=(0,i.groupBy)(r,e=>e.type),g=(e,t)=>{let n=[];return e.forEach(e=>{let r=(0,p.idOf)(e.value);this.getElement(r)?n.push(e):t.push(e);}),n;},m=g(o,a),y=g(c,l),b=g(f,h),E=e=>new Map(e.map(e=>{let t=e.value;return[(0,p.idOf)(t),t];})),x={add:{nodes:E(a),edges:E(l),combos:E(h)},update:{nodes:E(m),edges:E(y),combos:E(b)},remove:{nodes:E(s),edges:E(d),combos:E(v)}},k=this.transformData(x,e);return t.clearChanges(),{dataChanges:n,drawData:k};}transformData(e,t){return Object.values(this.context.transform.getTransformInstance()).reduce((e,n)=>n.beforeDraw(e,t),e);}createElement(e,t,n){var r;let i=(0,p.idOf)(t);if(this.getElement(i))return;let o=this.getElementType(e,t),l=this.getElementComputedStyle(e,t),u=(0,s.getExtension)(e,o);if(!u)return m.print.warn(`The element ${o} of ${e} is not registered.`);this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.BEFORE_ELEMENT_CREATE,e,t),n);let c=this.container.appendChild(new u({id:i,context:this.context,style:l}));this.shapeTypeMap[i]=o,this.elementMap[i]=c;let{stage:d="enter"}=n;null===(r=this.context.animation)||void 0===r||r.add({element:c,elementType:e,stage:d,originalStyle:Object.assign({},c.attributes),updatedStyle:l},{after:()=>{var r;this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.AFTER_ELEMENT_CREATE,e,t),n),null===(r=c.onCreate)||void 0===r||r.call(c);}});}createElements(e,t){let{nodes:n,edges:r,combos:i}=e;[["node",n],["combo",i],["edge",r]].forEach(([e,n])=>{n.forEach(n=>this.createElement(e,n,t));});}getUpdateStageStyle(e,t,n){let{stage:r="update"}=n;if("translate"===r){if("node"!==e&&"combo"!==e)return{};{let{style:{x:e=0,y:n=0,z:r=0}={}}=t;return{x:e,y:n,z:r};}}return this.getElementComputedStyle(e,t);}updateElement(e,t,n){var r;let i=(0,p.idOf)(t),{stage:o="update"}=n,s=this.getElement(i);if(!s)return()=>null;this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.BEFORE_ELEMENT_UPDATE,e,t),n);let u=this.getElementType(e,t),c=this.getUpdateStageStyle(e,t,n);this.shapeTypeMap[i]!==u&&(s.destroy(),delete this.shapeTypeMap[i],delete this.elementMap[i],this.createElement(e,t,{animation:!1,silence:!0}));let d="visibility"!==o?o:"hidden"===c.visibility?"hide":"show";"hide"===d&&delete c.visibility,null===(r=this.context.animation)||void 0===r||r.add({element:s,elementType:e,stage:d,originalStyle:Object.assign({},s.attributes),updatedStyle:c},{before:()=>{let e=this.elementMap[i];"collapse"!==o&&(0,h.updateStyle)(e,c),"visibility"===o&&((0,l.hasCachedStyle)(e,"opacity")||(0,l.cacheStyle)(e,"opacity"),this.visibilityCache.set(e,"show"===d?"visible":"hidden"),"show"===d&&(0,x.setVisibility)(e,"visible"));},after:()=>{var r;let s=this.elementMap[i];"collapse"===o&&(0,h.updateStyle)(s,c),"hide"===d&&(0,x.setVisibility)(s,this.visibilityCache.get(s)),this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.AFTER_ELEMENT_UPDATE,e,t),n),null===(r=s.onUpdate)||void 0===r||r.call(s);}});}updateElements(e,t){let{nodes:n,edges:r,combos:i}=e;[["node",n],["combo",i],["edge",r]].forEach(([e,n])=>{n.forEach(n=>this.updateElement(e,n,t));});}markDestroyElement(e){Object.values(e.remove).forEach(e=>{e.forEach(e=>{let t=(0,p.idOf)(e),n=this.getElement(t);n&&(0,h.markToBeDestroyed)(n);});});}destroyElement(e,t,n){var r;let{stage:i="exit"}=n,o=(0,p.idOf)(t),s=this.elementMap[o];if(!s)return()=>null;this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.BEFORE_ELEMENT_DESTROY,e,t),n),null===(r=this.context.animation)||void 0===r||r.add({element:s,elementType:e,stage:i,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var r;this.clearElement(o),s.destroy(),null===(r=s.onDestroy)||void 0===r||r.call(s),this.emit(new f.ElementLifeCycleEvent(a.GraphEvent.AFTER_ELEMENT_DESTROY,e,t),n);}});}destroyElements(e,t){let{nodes:n,edges:r,combos:i}=e;[["combo",i],["edge",r],["node",n]].forEach(([e,n])=>{n.forEach(n=>this.destroyElement(e,n,t));});}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e];}alignLayoutResultToElement(e,t){var n,r;let i=null===(n=e.nodes)||void 0===n?void 0:n.find(e=>(0,p.idOf)(e)===t);if(i){let n=(0,g.positionOf)(this.context.model.getNodeLikeDatum(t)),a=(0,g.positionOf)(i),o=(0,E.subtract)(n,a);null===(r=e.nodes)||void 0===r||r.forEach(e=>{var t,n,r;(null===(t=e.style)||void 0===t?void 0:t.x)&&(e.style.x+=o[0]),(null===(n=e.style)||void 0===n?void 0:n.y)&&(e.style.y+=o[1]),(null===(r=e.style)||void 0===r?void 0:r.z)&&(e.style.z+=o[2]||0);});}}syncLayoutResult(e,t){return k(this,void 0,void 0,function*(){let{layout:n,model:r}=this.context;if(!n)return;let i=this.context.options.layout,a=yield n.simulate(i?Array.isArray(i)?i.map(e=>Object.assign(Object.assign({},e),{preLayout:!0})):Object.assign(Object.assign({},i),{preLayout:!0}):void 0);t&&this.alignLayoutResultToElement(a,e),r.updateData(a);});}collapseNode(e,t){return k(this,void 0,void 0,function*(){var n;let{animation:r,align:i}=t;yield this.syncLayoutResult(e,i);let o=this.computeChangesAndDrawData({stage:"collapse",animation:r});if(!o)return;let{drawData:s}=o,{add:l,remove:u,update:c}=s;this.markDestroyElement(s);let d={animation:r,stage:"collapse",data:s};this.destroyElements(u,d),this.createElements(l,d),this.updateElements(c,d),yield null===(n=this.context.animation.animate(r,{beforeAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.COLLAPSE,e,s),d),afterAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.COLLAPSE,e,s),d)},{collapse:{target:e,descendants:Array.from(u.nodes).map(([,e])=>(0,p.idOf)(e)),position:(0,g.positionOf)(c.nodes.get(e))}}))||void 0===n?void 0:n.finished;});}expandNode(e,t){return k(this,void 0,void 0,function*(){var n;let{model:r}=this.context,{animation:i,align:o}=t,s=(0,g.positionOf)(r.getNodeData([e])[0]);yield this.syncLayoutResult(e,o);let l=this.computeChangesAndDrawData({stage:"expand",animation:i});if(this.createElements(l.drawData.add,{animation:!1,stage:"expand",target:e}),this.context.animation.clear(),this.computeStyle("expand"),!l)return;let{drawData:u}=l,{update:c,add:d}=u,h={animation:i,stage:"expand",data:u};d.edges.forEach(e=>c.edges.set((0,p.idOf)(e),e)),d.nodes.forEach(e=>c.nodes.set((0,p.idOf)(e),e)),this.updateElements(c,h),yield null===(n=this.context.animation.animate(i,{beforeAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.EXPAND,e,u),h),afterAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.EXPAND,e,u),h)},{expand:{target:e,descendants:Array.from(d.nodes).map(([,e])=>(0,p.idOf)(e)),position:s}}))||void 0===n?void 0:n.finished;});}collapseCombo(e,t){return k(this,void 0,void 0,function*(){var n;let{model:r,element:i}=this.context;if(r.getAncestorsData(e,a.COMBO_KEY).some(e=>(0,c.isCollapsed)(e)))return;let o=i.getElement(e),s=o.getComboPosition(Object.assign(Object.assign({},o.attributes),{collapsed:!0})),l=this.computeChangesAndDrawData({stage:"collapse",animation:t});if(!l)return;let{dataChanges:u,drawData:d}=l;this.markDestroyElement(d);let{update:h,remove:v}=d,g={animation:t,stage:"collapse",data:d};this.destroyElements(v,g),this.updateElements(h,g);let m=e=>Array.from(e).map(([,e])=>(0,p.idOf)(e));yield null===(n=this.context.animation.animate(t,{before:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.BEFORE_DRAW,{dataChanges:u,animation:t}),g),beforeAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.COLLAPSE,e,d),g),afterAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.COLLAPSE,e,d),g),after:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.AFTER_DRAW,{dataChanges:u,animation:t}),g)},{collapse:{target:e,descendants:[...m(v.nodes),...m(v.combos)],position:s}}))||void 0===n?void 0:n.finished;});}expandCombo(e,t){return k(this,void 0,void 0,function*(){var n;let{model:r}=this.context,i=(0,g.positionOf)(r.getComboData([e])[0]);this.computeStyle("expand");let o=this.computeChangesAndDrawData({stage:"expand",animation:t});if(!o)return;let{dataChanges:s,drawData:l}=o,{add:u,update:c}=l,d={animation:t,stage:"expand",data:l,target:e};this.createElements(u,d),this.updateElements(c,d);let h=e=>Array.from(e).map(([,e])=>(0,p.idOf)(e));yield null===(n=this.context.animation.animate(t,{before:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.BEFORE_DRAW,{dataChanges:s,animation:t}),d),beforeAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.BEFORE_ANIMATE,a.AnimationType.EXPAND,e,l),d),afterAnimate:e=>this.emit(new f.AnimateEvent(a.GraphEvent.AFTER_ANIMATE,a.AnimationType.EXPAND,e,l),d),after:()=>this.emit(new f.GraphLifeCycleEvent(a.GraphEvent.AFTER_DRAW,{dataChanges:s,animation:t}),d)},{expand:{target:e,descendants:[...h(u.nodes),...h(u.combos)],position:i}}))||void 0===n?void 0:n.finished;});}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={};}destroy(){this.clear(),this.container.destroy(),this.context={};}}},"55be970f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Threshold",{enumerable:!0,get:function(){return a;}});var r=n("9d4f096a"),i=n("90abb703");class a extends r.Base{getDefaultOptions(){return{domain:[.5],range:[0,1]};}constructor(e){super(e);}map(e){if(!(0,i.isValid)(e))return this.options.unknown;let t=(0,i.bisect)(this.thresholds,e,0,this.n);return this.options.range[t];}invert(e){let{range:t}=this.options,n=t.indexOf(e),r=this.thresholds;return[r[n-1],r[n]];}clone(){return new a(this.options);}rescale(){let{domain:e,range:t}=this.options;this.n=Math.min(e.length,t.length-1),this.thresholds=e;}}},"55c1756e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("f2c9e894"),t),r._(n("a56aaf9d"),t),n("b7402dd3");},"5735746e":function(e,t,n){"use strict";function r(e,t,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!r&&e===t||!!i&&e===n||e>t&&e<n;}n.d(t,"__esModule",{value:!0}),n.d(t,"inRange",{enumerable:!0,get:function(){return r;}});},58263682:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Toolbar",{enumerable:!0,get:function(){return s;}});var r=n("0d562788"),i=n("82c10466"),a=n("b96c9b15"),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class s extends r.BasePlugin{constructor(e,t){super(e,Object.assign({},s.defaultOptions,t)),this.$element=(0,i.createPluginContainer)("toolbar",!1),this.onToolbarItemClick=e=>{let{onClick:t}=this.options;if(e.target instanceof Element&&e.target.className.includes("g6-toolbar-item")){let n=e.target.getAttribute("value");null==t||t(n,e.target);}};let n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),(0,i.insertDOM)("g6-toolbar-css","style",{},a.TOOLBAR_CSS,document.head),(0,i.insertDOM)("g6-toolbar-svgicon","div",{display:"none"},a.BUILD_IN_SVG_ICON),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(t);}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return o(this,void 0,void 0,function*(){t.update.call(this,e);let{className:n,position:r,style:i}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,i,(0,a.parsePositionToStyle)(r)),this.$element.innerHTML=yield this.getDOMContent();});}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy();}getDOMContent(){return o(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(e=>{var t;return`
          <div class="g6-toolbar-item" value="${e.value}" title="${null!==(t=e.title)&&void 0!==t?t:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${e.id}"></use>
            </svg>
          </div>`;}).join("");});}}s.defaultOptions={position:"top-left"};},"586bdc57":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"HoverActivate",{enumerable:!0,get:function(){return c;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("95550d14"),o=n("966f7de2"),s=n("81401a10"),l=n("10ef3afb"),u=n("32576f8a");class c extends u.BaseBehavior{constructor(e,t){super(e,Object.assign({},c.defaultOptions,t)),this.isFrozen=!1,this.toggleFrozen=e=>{this.isFrozen="dragstart"===e.type;},this.hoverElement=e=>{if(!this.validate(e))return;let t=e.type===i.CommonEvent.POINTER_ENTER;this.updateElementsState(e,t);let{onHover:n,onHoverEnd:r}=this.options;t?null==n||n(e):null==r||r(e);},this.updateElementsState=(e,t)=>{if(!this.options.state&&!this.options.inactiveState)return;let{graph:n}=this.context,{state:r,animation:i,inactiveState:a}=this.options,o=this.getActiveIds(e),l={};if(r&&Object.assign(l,this.getElementsState(o,r,t)),a){let e=(0,s.idsOf)(n.getData(),!0).filter(e=>!o.includes(e));Object.assign(l,this.getElementsState(e,a,t));}n.setElementState(l,i);},this.getElementsState=(e,t,n)=>{let{graph:r}=this.context,i={};return e.forEach(e=>{let a=r.getElementState(e);n?i[e]=a.includes(t)?a:[...a,t]:i[e]=a.filter(e=>e!==t);}),i;},this.bindEvents();}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),a.ELEMENT_TYPES.forEach(t=>{e.on(`${t}:${i.CommonEvent.POINTER_ENTER}`,this.hoverElement),e.on(`${t}:${i.CommonEvent.POINTER_LEAVE}`,this.hoverElement);});let t=this.context.canvas.document;t.addEventListener(`${i.CommonEvent.DRAG_START}`,this.toggleFrozen),t.addEventListener(`${i.CommonEvent.DRAG_END}`,this.toggleFrozen);}getActiveIds(e){let{graph:t}=this.context,{degree:n,direction:r}=this.options,i=e.target.id;return n?(0,l.getElementNthDegreeIds)(t,e.targetType,i,"function"==typeof n?n(e):n,r):[i];}validate(e){if(this.destroyed||this.isFrozen||(0,o.isToBeDestroyed)(e.target)||this.context.graph.isCollapsingExpanding)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}unbindEvents(){let{graph:e}=this.context;a.ELEMENT_TYPES.forEach(t=>{e.off(`${t}:${i.CommonEvent.POINTER_ENTER}`,this.hoverElement),e.off(`${t}:${i.CommonEvent.POINTER_LEAVE}`,this.hoverElement);});let t=this.context.canvas.document;t.removeEventListener(`${i.CommonEvent.DRAG_START}`,this.toggleFrozen),t.removeEventListener(`${i.CommonEvent.DRAG_END}`,this.toggleFrozen);}destroy(){this.unbindEvents(),super.destroy();}}c.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};},"5a01f209":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"OrganizationChartNode",{enumerable:!0,get:function(){return l;}});var r=n("777fffbe"),i=n("852bbaa9"),a=r._(n("3e6b097d")),o=i._(n("247081c8"));let s=o.default.div`
  height: inherit;
  width: inherit;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  border: none;
  background-color: #fff;
  box-sizing: content-box;

  ${e=>e.$isActive&&(0,o.css)`
      transform: translate(-3px, -3px);
      border: 2px solid #1783ff;
    `}

  .org-chart-node-line {
    width: 100%;
    height: 6px;
    background-color: ${e=>e.$color};
    border-radius: 8px 8px 0 0;
  }

  .org-chart-node-content {
    height: calc(100% - 6px);
    margin: 0 16px 3px;
    display: flex;
    align-items: center;

    &-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 16px;
      background-color: ${e=>e.$color};
      font-weight: 600;
      font-size: 18px;
      text-align: center;
      line-height: 40px;
      color: #fff;
    }

    &-detail {
      width: calc(100% - 56px);
    }

    &-name {
      color: #242424;
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    &-post {
      color: #616161;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,l=e=>{let{name:t,position:n,status:r="online",isActive:i,className:o,style:l}=e;return a.default.createElement(s,{$color:{online:"#1783FF",busy:"#00C9C9",offline:"#F08F56"}[r],$isActive:i,className:o,style:l},a.default.createElement("div",{className:"org-chart-node-line"}),a.default.createElement("div",{className:"org-chart-node-content"},a.default.createElement("div",{className:"org-chart-node-content-avatar"},t.slice(0,1)),a.default.createElement("div",{className:"org-chart-node-content-detail"},a.default.createElement("div",{className:"org-chart-node-content-name"},t),n&&a.default.createElement("div",{className:"org-chart-node-content-post"},n))));};},"5a28242b":function(e,t,n){"use strict";function r(e,t){var n=new Map;return e.forEach(function(e){var r=t(e);n.has(r)||n.set(r,[]),n.get(r).push(e);}),n;}n.d(t,"__esModule",{value:!0}),n.d(t,"group",{enumerable:!0,get:function(){return r;}});},"5af5778c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Select",{enumerable:!0,get:function(){return c;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("c086f503"),o=n("9225b8d3"),s=n("01a29d03"),l=n("38242230"),u=n("75e2eb53"),c=function(e){function t(n){var r,i,a=e.call(this,(0,l.deepAssign)({},t.defaultOptions,n))||this;a.currentValue=null===(r=t.defaultOptions.style)||void 0===r?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new o.Rect({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new o.Rect({className:"dropdown"}));var s=a.style.defaultValue;return s&&(null===(i=a.style.options)||void 0===i?void 0:i.some(function(e){return e.value===s;}))&&(a.currentValue=s),a;}return(0,r.__extends)(t,e),t.prototype.setValue=function(e){this.currentValue=e,this.render();},t.prototype.getValue=function(){return this.currentValue;},Object.defineProperty(t.prototype,"dropdownPadding",{get:function(){return(0,s.parseSeriesAttr)(this.style.dropdownPadding);},enumerable:!1,configurable:!0}),t.prototype.renderSelect=function(){var e,t=this,n=this.style,i=n.x,a=n.y,o=n.width,l=n.height,u=n.bordered,c=n.showDropdownIcon,d=(0,s.subStyleProps)(this.attributes,"select"),h=(0,s.subStyleProps)(this.attributes,"placeholder");this.select.attr((0,r.__assign)((0,r.__assign)({x:i,y:a,width:o,height:l},d),{fill:"#fff",strokeWidth:u?1:0}));var f=this.dropdownPadding;c&&(0,s.select)(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(i+o-10-f[1]-f[3],", ").concat(a+l/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var p=null===(e=this.style.options)||void 0===e?void 0:e.find(function(e){return e.value===t.currentValue;}),v=(0,r.__assign)({x:i+f[3]},h);(0,s.select)(this.select).selectAll(".placeholder").data(p?[]:[1]).join(function(e){return e.append("text").attr("className","placeholder").styles(v).style("y",function(){return a+(l-this.getBBox().height)/2;});},function(e){return e.styles(v);},function(e){return e.remove();});var g=(0,s.subStyleProps)(this.attributes,"optionLabel"),m=(0,r.__assign)({x:i+f[3]},g);(0,s.select)(this.select).selectAll(".value").data(p?[p]:[]).join(function(e){return e.append(function(e){return(0,s.renderExtDo)(e.label);}).attr("className","value").styles(m).style("y",function(){return a+(l-this.getBBox().height)/2;});},function(e){return e.styles(m);},function(e){return e.remove();});},t.prototype.renderDropdown=function(){var e,t,n=this,a=this.style,o=a.x,l=a.y,c=a.width,d=a.height,h=a.options,f=a.onSelect,p=a.open,v=(0,s.subStyleProps)(this.attributes,"dropdown"),g=(0,s.subStyleProps)(this.attributes,"option"),m=this.dropdownPadding;(0,s.select)(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(h,function(e){return e.value;}).join(function(e){return e.append(function(e){return new u.Option({className:"dropdown-item",style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},e),g),{width:c-m[1]-m[3],selected:e.value===n.currentValue,onClick:function(e,t,r){n.setValue(e),null==f||f(e,t,r),n.dispatchEvent(new i.CustomEvent("change",{detail:{value:e,option:t,item:r}})),(0,s.hide)(n.dropdown);}})});}).each(function(e,t){var n,r=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce(function(e,n,r){return r<t&&(e+=n.getBBox().height),e;},0);this.attr("transform","translate(".concat(m[3],", ").concat(m[0]+r,")"));});},function(e){return e.update(function(e){return{selected:e.value===n.currentValue};});},function(e){return e.remove();});var y=null===(t=null===(e=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===e?void 0:e[0])||void 0===t?void 0:t.getBBox(),b=v.spacing;this.dropdown.attr((0,r.__assign)({transform:"translate(".concat(o,", ").concat(l+d+b,")"),width:y.width+m[1]+m[3],height:y.height+m[0]+m[2]},v)),p||(0,s.hide)(this.dropdown);},t.prototype.render=function(){this.renderSelect(),this.renderDropdown();},t.prototype.bindEvents=function(){var e=this;this.addEventListener("click",function(e){e.stopPropagation();}),this.select.addEventListener("click",function(){"visible"===e.dropdown.style.visibility?(0,s.hide)(e.dropdown):(0,s.show)(e.dropdown);}),this.addEventListener("pointerenter",function(){e.isPointerInSelect=!0;}),this.addEventListener("pointerleave",function(){e.isPointerInSelect=!1;}),null==document||document.addEventListener("click",function(){e.isPointerInSelect||(0,s.hide)(e.dropdown);});},t.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"\u8BF7\u9009\u62E9",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},t;}(a.Component);},"5b11de40":function(e,t,n){"use strict";function r(e,t,n){return e>=t&&e<=n;}n.d(t,"__esModule",{value:!0}),n.d(t,"isBetween",{enumerable:!0,get:function(){return r;}});},"5bb5ae54":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Dendrogram",{enumerable:!0,get:function(){return u;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("66366487"),s=n("aeeab442"),l=n("5da70c54");let u=(0,r.forwardRef)(({children:e,...t},n)=>{let u=(0,r.useMemo)(()=>{let{data:e,defaultExpandLevel:n,direction:r="horizontal",compact:i=!1,...u}=t;return(0,s.mergeOptions)(a.COMMON_OPTIONS,l.DEFAULT_OPTIONS,{data:(0,o.formatTreeData)(e,n)},(0,l.getDendrogramOptions)({direction:r,compact:i}),u);},[t]);return r.default.createElement(i.BaseGraph,{...u,ref:n},e);});},"5bd9ffd4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Background",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("0d562788"),a=n("82c10466"),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class s extends i.BasePlugin{constructor(e,t){super(e,Object.assign({},s.defaultOptions,t)),this.$element=(0,a.createPluginContainer)("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(t);}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return o(this,void 0,void 0,function*(){t.update.call(this,e),Object.assign(this.$element.style,(0,r.omit)(this.options,["key","type"]));});}destroy(){super.destroy(),this.$element.remove();}}s.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};},"5c987f9e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"parseMarker",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e){var t="default";if((0,r.isObject)(e)&&e instanceof Image)t="image";else if((0,r.isFunction)(e))t="symbol";else if((0,r.isString)(e)){var n=RegExp("data:(image|text)");t=e.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?"url":"symbol";}return t;}},"5ccee541":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Background:function(){return r.Background;},BasePlugin:function(){return i.BasePlugin;},BubbleSets:function(){return a.BubbleSets;},CameraSetting:function(){return o.CameraSetting;},Contextmenu:function(){return s.Contextmenu;},EdgeBundling:function(){return l.EdgeBundling;},EdgeFilterLens:function(){return u.EdgeFilterLens;},Fisheye:function(){return c.Fisheye;},Fullscreen:function(){return d.Fullscreen;},GridLine:function(){return h.GridLine;},History:function(){return f.History;},Hull:function(){return p.Hull;},Legend:function(){return v.Legend;},Minimap:function(){return g.Minimap;},Snapline:function(){return m.Snapline;},Timebar:function(){return y.Timebar;},Title:function(){return b.Title;},Toolbar:function(){return E.Toolbar;},Tooltip:function(){return x.Tooltip;},Watermark:function(){return k.Watermark;}});var r=n("5bd9ffd4"),i=n("0d562788"),a=n("bdd59e95"),o=n("3a39b5a7"),s=n("80a1fe75"),l=n("4707dbcb"),u=n("cc282246"),c=n("5e725722"),d=n("0eaf27f7"),h=n("c01f850d"),f=n("c311f013"),p=n("0db9d1b4"),v=n("9b965f0a"),g=n("4f74f79a"),m=n("fa4c5941"),y=n("8b7eda9b"),b=n("27349b1b"),E=n("58263682"),x=n("b70c264d"),k=n("ebc02449");},"5da70c54":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return i;},getDendrogramOptions:function(){return a;}});var r=n("c5eb7168");let i={node:{type:"circle",style:{labelText:e=>e.id}}},a=({direction:e,compact:t})=>{let n=e=>(0,r.isEmpty)(e.children),i=t?"compact-box":"dendrogram";return"vertical"===e?{node:{style:{labelBackground:!0,labelPlacement:"right",labelTransform:e=>n(e)?"rotate(90deg) translate(18px)":"translate(18px)",ports:[{placement:"top"},{placement:"bottom"}]}},edge:{type:"cubic-vertical"},layout:{type:i,direction:"TB",nodeSep:40,rankSep:140,getVGap:()=>80,getHGap:()=>20}}:"horizontal"===e?{node:{style:{labelBackground:!0,labelPlacement:e=>n(e)?"right":"left",ports:[{placement:"left"},{placement:"right"}]}},edge:{type:"cubic-horizontal"},layout:{type:i,direction:"LR",nodeSep:40,rankSep:200,getVGap:()=>5,getHGap:()=>100}}:{node:{style:{labelBackground:!0}},edge:{type:"cubic-radial"},layout:{type:i,direction:"RL",radial:!0,nodeSep:40,rankSep:200,getVGap:()=>30,getHGap:()=>60},transforms:e=>[...e,"place-radial-labels"]};};},"5e725722":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Fisheye",{enumerable:!0,get:function(){return f;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("8754ee1a"),o=n("4eb3f949"),s=n("81401a10"),l=n("8bdd800c"),u=n("2a08964b"),c=n("71473486"),d=n("0d562788");let h={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12};class f extends d.BasePlugin{constructor(e,t){super(e,Object.assign({},f.defaultOptions,t)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=e=>{if("drag"===this.options.trigger&&this.isLensOn)return;let t=(0,l.parsePoint)(e.canvas);this.onMagnify(t);},this.onMagnify=e=>{e.some(isNaN)||(this.renderLens(e),this.renderFocusElements());},this.renderLens=e=>{let t=Object.assign({},h,this.options.style);this.isLensOn||(this.lens=new a.Circle({style:t}),this.canvas.appendChild(this.lens)),Object.assign(t,(0,l.toPointObject)(e),{size:2*this.r,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(t);},this.getDPercent=()=>{let{minD:e,maxD:t}=this.options,n=Math.round((this.d-e)/(t-e)*100);return`${n}%`;},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;let{graph:e}=this.context,t=this.lens.getCenter(),n=(this.d+1)*this.r,i=new Map,a=new Map;e.getNodeData().forEach(o=>{let d=(0,u.positionOf)(o),h=(0,c.distance)(d,t);if(h>this.r)return;let f=n*h/(this.d*h+this.r),[p,v]=d,[g,m]=t,y=(0,s.idOf)(o),b=this.getNodeStyle(o),E=(0,r.pick)(e.getElementRenderStyle(y),Object.keys(b));i.set(y,Object.assign(Object.assign({},(0,l.toPointObject)([g+(p-g)/h*f,m+(v-m)/h*f])),b)),a.set(y,Object.assign(Object.assign({},(0,l.toPointObject)(d)),E));}),this.updateStyle(i,a);},this.getNodeStyle=e=>{let{nodeStyle:t}=this.options;return"function"==typeof t?t(e):t;},this.updateStyle=(e,t)=>{let{graph:n,element:r}=this.context,{enter:i,exit:a,keep:l}=(0,o.arrayDiff)(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(e.keys()),e=>e),u=new Set,c=(e,t)=>{let i=r.getElement(e);null==i||i.update(t),n.getRelatedEdgesData(e).forEach(e=>{u.add((0,s.idOf)(e));});};[...i,...l].forEach(t=>{c(t,e.get(t));}),a.forEach(e=>{c(e,this.prevOriginStyleMap.get(e)),this.prevOriginStyleMap.delete(e);}),u.forEach(e=>{let t=r.getElement(e);null==t||t.update({});}),this.prevMagnifiedStyleMap=e,t.forEach((e,t)=>{this.prevOriginStyleMap.has(t)||this.prevOriginStyleMap.set(t,e);});},this.isWheelValid=e=>{if(this.options.preventDefault&&e.preventDefault(),!this.isLensOn)return!1;let{clientX:t,clientY:n}=e,r=this.context.graph.getCanvasByClient([t,n]),i=this.lens.getCenter();return!((0,c.distance)(r,i)>this.r);},this.scaleR=e=>{let{maxR:t,minR:n}=this.options,r=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(n||0,Math.min(t||r,this.r*(e?1/.95:.95)));},this.scaleD=e=>{let{maxD:t,minD:n}=this.options,r=e?this.d+.1:this.d-.1;this.d=Math.max(n,Math.min(t,r));},this.scaleRByWheel=e=>{if(!this.isWheelValid(e))return;let{deltaX:t,deltaY:n}=e;this.scaleR(t+n>0);let r=this.lens.getCenter();this.onMagnify(r);},this.scaleDByWheel=e=>{if(!this.isWheelValid(e))return;let{deltaX:t,deltaY:n}=e;this.scaleD(t+n>0);let r=this.lens.getCenter();this.onMagnify(r);},this.isDragValid=e=>{if(this.options.preventDefault&&e.preventDefault(),!this.isLensOn)return!1;let t=(0,l.parsePoint)(e.canvas),n=this.lens.getCenter();return!((0,c.distance)(t,n)>this.r);},this.isLensDragging=!1,this.onDragStart=e=>{this.isDragValid(e)&&(this.isLensDragging=!0);},this.onDrag=e=>{if(!this.isLensDragging)return;let t=(0,l.parsePoint)(e.canvas);this.onMagnify(t);},this.onDragEnd=()=>{this.isLensDragging=!1;},this.scaleRByDrag=e=>{if(!this.isLensDragging)return;let{dx:t,dy:n}=e;this.scaleR(t-n>0);let r=this.lens.getCenter();this.onMagnify(r);},this.scaleDByDrag=e=>{if(!this.isLensDragging)return;let{dx:t,dy:n}=e;this.scaleD(t-n>0);let r=this.lens.getCenter();this.onMagnify(r);},this.bindEvents();}get canvas(){return this.context.canvas.getLayer("transient");}get isLensOn(){return this.lens&&!this.lens.destroyed;}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}bindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r,scaleDBy:a}=this.options,o=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.addEventListener(i.CommonEvent.CLICK,this.onCreateFisheye),"pointermove"===n&&o.addEventListener(i.CommonEvent.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===r||"drag"===a){o.addEventListener(i.CommonEvent.DRAG_START,this.onDragStart),o.addEventListener(i.CommonEvent.DRAG_END,this.onDragEnd);let e="drag"===n?this.onDrag:"drag"===r?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(i.CommonEvent.DRAG,e);}if("wheel"===r||"wheel"===a){let t="wheel"===r?this.scaleRByWheel:this.scaleDByWheel;null===(e=this.graphDom)||void 0===e||e.addEventListener(i.CommonEvent.WHEEL,t,{passive:!1});}}unbindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:r,scaleDBy:a}=this.options,o=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.removeEventListener(i.CommonEvent.CLICK,this.onCreateFisheye),"pointermove"===n&&o.removeEventListener(i.CommonEvent.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===r||"drag"===a){o.removeEventListener(i.CommonEvent.DRAG_START,this.onDragStart),o.removeEventListener(i.CommonEvent.DRAG_END,this.onDragEnd);let e="drag"===n?this.onDrag:"drag"===r?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(i.CommonEvent.DRAG,e);}if("wheel"===r||"wheel"===a){let t="wheel"===r?this.scaleRByWheel:this.scaleDByWheel;null===(e=this.graphDom)||void 0===e||e.removeEventListener(i.CommonEvent.WHEEL,t);}}update(e){var t,n;this.unbindEvents(),super.update(e),this.r=null!==(t=e.r)&&void 0!==t?t:this.r,this.d=null!==(n=e.d)&&void 0!==n?n:this.d,this.bindEvents();}destroy(){var e;this.unbindEvents(),this.isLensOn&&(null===(e=this.lens)||void 0===e||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy();}}f.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};},"5ed3382d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"FlowDirectionGraph",{enumerable:!0,get:function(){return l;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("aeeab442"),s=n("25d8992f");let l=(0,r.forwardRef)(({children:e,...t},n)=>{let{labelField:l,...u}=t,c=(0,r.useMemo)(()=>(0,o.mergeOptions)(a.COMMON_OPTIONS,s.DEFAULT_OPTIONS,(0,s.getFlowDirectionGraphOptions)({labelField:l}),u),[t]);return r.default.createElement(i.BaseGraph,{...c,ref:n},e);});},"5fcfeb55":function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e};}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.");}function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)o.push(r.value);}catch(e){i={error:e};}finally{try{r&&!r.done&&(n=a.return)&&n.call(a);}finally{if(i)throw i.error;}}return o;}function r(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t));}function i(e){return s(e,"Function");}var a,o={}.toString,s=function(e,t){return o.call(e)==="[object "+t+"]";},l=function(e){return Array.isArray?Array.isArray(e):s(e,"Array");},u=function(e){if("object"!=typeof e||null===e||!s(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t;},c=Object.values?function(e){return Object.values(e);}:function(e){var t,n=[],r=function(t,r){i(e)&&"prototype"===r||n.push(t);};if(e){if(l(e))for(var a=0,o=e.length;a<o&&!1!==r(e[a],a);a++);else if(t=typeof e,null!==e&&"object"==t||"function"==t){for(var s in e)if(e.hasOwnProperty(s)&&!1===r(e[s],s))break;}}return n;};function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)!function e(t,n,r,i){for(var a in r=r||0,i=i||5,n){var o;n.hasOwnProperty(a)&&(null!==(o=n[a])&&u(o)?(u(t[a])||(t[a]={}),r<i?e(t[a],o,r+1,i):t[a]=n[a]):l(o)?(t[a]=[],t[a]=t[a].concat(o)):void 0!==o&&(t[a]=o));}}(e,t[r]);return e;}function h(e){return e;}!function(e,t){var n;if(i(e))return(n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a,o=t?t.apply(this,r):r[0],s=n.cache;return s.has(o)?s.get(o):(a=e.apply(this,r),s.set(o,a),a);}).cache=new Map;throw TypeError("Expected a function");}(function(e,t){var n=(t=void 0===t?{}:t).fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,t=t.fontVariant;return(f=f||document.createElement("canvas").getContext("2d")).font=[a,t,i,n+"px",r].join(" "),f.measureText(s(e,"String")?e:"").width;},function(e,t){return(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r;})([e],c(t=void 0===t?{}:t)).join("");});var f,p="undefined"!=typeof Float32Array?Float32Array:Array;function v(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e;}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e);});var g=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],t=t[8],d=n[0],h=n[1],f=n[2],p=n[3],v=n[4],g=n[5],m=n[6],y=n[7],n=n[8];return e[0]=d*r+h*o+f*u,e[1]=d*i+h*s+f*c,e[2]=d*a+h*l+f*t,e[3]=p*r+v*o+g*u,e[4]=p*i+v*s+g*c,e[5]=p*a+v*l+g*t,e[6]=m*r+y*o+n*u,e[7]=m*i+y*s+n*c,e[8]=m*a+y*l+n*t,e;};function m(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e;}var y=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],v=t[12],g=t[13],m=t[14],t=t[15],y=n[0],b=n[1],E=n[2],x=n[3];return e[0]=y*r+b*s+E*d+x*v,e[1]=y*i+b*l+E*h+x*g,e[2]=y*a+b*u+E*f+x*m,e[3]=y*o+b*c+E*p+x*t,y=n[4],b=n[5],E=n[6],x=n[7],e[4]=y*r+b*s+E*d+x*v,e[5]=y*i+b*l+E*h+x*g,e[6]=y*a+b*u+E*f+x*m,e[7]=y*o+b*c+E*p+x*t,y=n[8],b=n[9],E=n[10],x=n[11],e[8]=y*r+b*s+E*d+x*v,e[9]=y*i+b*l+E*h+x*g,e[10]=y*a+b*u+E*f+x*m,e[11]=y*o+b*c+E*p+x*t,y=n[12],b=n[13],E=n[14],x=n[15],e[12]=y*r+b*s+E*d+x*v,e[13]=y*i+b*l+E*h+x*g,e[14]=y*a+b*u+E*f+x*m,e[15]=y*o+b*c+E*p+x*t,e;};function b(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e?t.reduce(function(e,t){return function(n){return t(e(n));};},e):h;}function E(e){return e instanceof Float32Array||e instanceof Array;}function x(e,t,n){for(;e<t;)e+=2*Math.PI;for(;n<e;)e-=2*Math.PI;return e;}function k(e,t,r,i,a){var o=(e=n(e,2))[0],e=e[1],s=v();return o=[o,e],(e=s)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=o[0],e[7]=o[1],e[8]=1,e;}function S(e,...t){return t.reduce((e,t)=>n=>e(t(n)),e);}function T(e,t){return t-e?n=>(n-e)/(t-e):e=>.5;}L=new p(3),p!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L=new p(4),p!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0);let M=Math.sqrt(50),w=Math.sqrt(10),N=Math.sqrt(2);function C(e,t,n){return e=Math.floor(Math.log(t=(t-e)/Math.max(0,n))/Math.LN10),n=t/10**e,0<=e?(n>=M?10:n>=w?5:n>=N?2:1)*10**e:-(10**-e)/(n>=M?10:n>=w?5:n>=N?2:1);}let _=(e,t,n=5)=>{let r=0,i=(e=[e,t]).length-1,a=e[r],o=e[i],s;return o<a&&([a,o]=[o,a],[r,i]=[i,r]),0<(s=C(a,o,n))?s=C(a=Math.floor(a/s)*s,o=Math.ceil(o/s)*s,n):s<0&&(s=C(a=Math.ceil(a*s)/s,o=Math.floor(o*s)/s,n)),0<s?(e[r]=Math.floor(a/s)*s,e[i]=Math.ceil(o/s)*s):s<0&&(e[r]=Math.ceil(a*s)/s,e[i]=Math.floor(o*s)/s),e;};function P(e){return null!=e&&!Number.isNaN(e);}function A(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();var[e]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e));},n.prototype.initRange=function(){var t=this.options.interpolator;this.options.range=e(t);},n.prototype.composeOutput=function(e,n){var{domain:r,interpolator:i,round:a}=this.getOptions(),r=t(r.map(e)),a=a?e=>s(e=i(e),"Number")?Math.round(e):e:i;this.output=S(a,r,n,e);},n.prototype.invert=void 0;};}var O,L={exports:{}},R={exports:{}},D=Array.prototype.concat,I=Array.prototype.slice,B=R.exports=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];!(!i||"string"==typeof i)&&(i instanceof Array||Array.isArray(i)||0<=i.length&&(i.splice instanceof Function||Object.getOwnPropertyDescriptor(i,i.length-1)&&"String"!==i.constructor.name))?t=D.call(t,I.call(i)):t.push(i);}return t;},F=(B.wrap=function(e){return function(){return e(B(arguments));};},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),G=R.exports,z=Object.hasOwnProperty,V=Object.create(null);for(O in F)z.call(F,O)&&(V[F[O]]=O);var j=L.exports={to:{},get:{}};function U(e,t,n){return Math.min(Math.max(t,e),n);}function H(e){return(e=Math.round(e).toString(16).toUpperCase()).length<2?"0"+e:e;}j.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=j.get.hsl(e),n="hsl";break;case"hwb":t=j.get.hwb(e),n="hwb";break;default:t=j.get.rgb(e),n="rgb";}return t?{model:n,value:t}:null;},j.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,2+a),16);}r&&(i[3]=parseInt(r,16)/255);}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=parseInt(r+r,16)/255);}else{if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:z.call(F,t[1])?((i=F[t[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));}t[4]&&(t[5]?i[3]=.01*parseFloat(t[4]):i[3]=parseFloat(t[4]));}for(n=0;n<3;n++)i[n]=U(i[n],0,255);return i[3]=U(i[3],0,1),i;},j.get.hsl=function(e){var t;return(e=e&&e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(t=parseFloat(e[4]),[(parseFloat(e[1])%360+360)%360,U(parseFloat(e[2]),0,100),U(parseFloat(e[3]),0,100),U(isNaN(t)?1:t,0,1)]):null;},j.get.hwb=function(e){var t;return(e=e&&e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(t=parseFloat(e[4]),[(parseFloat(e[1])%360+360)%360,U(parseFloat(e[2]),0,100),U(parseFloat(e[3]),0,100),U(isNaN(t)?1:t,0,1)]):null;},j.to.hex=function(){var e=G(arguments);return"#"+H(e[0])+H(e[1])+H(e[2])+(e[3]<1?H(Math.round(255*e[3])):"");},j.to.rgb=function(){var e=G(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")";},j.to.rgb.percent=function(){var e=G(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")";},j.to.hsl=function(){var e=G(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")";},j.to.hwb=function(){var e=G(arguments),t="";return 4<=e.length&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")";},j.to.keyword=function(e){return V[e.slice(0,3)];};var W=L.exports;function Y(e,t,n){let r=n;return r<0&&(r+=1),1<r&&--r,r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e;}function q(e){var t,n,r,e=W.get(e);return e?({model:e,value:t}=e,"rgb"===e?t:"hsl"===e?(t=(e=t)[0]/360,n=e[1]/100,r=e[2]/100,e=e[3],0==n?[255*r,255*r,255*r,e]:[255*Y(n=2*r-(r=r<.5?r*(1+n):r+n-r*n),r,t+1/3),255*Y(n,r,t),255*Y(n,r,t-1/3),e]):null):null;}let X=(e,t)=>n=>e*(1-n)+t*n,$=(e,t)=>{if("number"==typeof e&&"number"==typeof t)return X(e,t);if("string"!=typeof e||"string"!=typeof t)return()=>e;{let n=q(e),r=q(t);return null===n||null===r?n?()=>e:()=>t:e=>{var t=[,,,,];for(let o=0;o<4;o+=1){var i=n[o],a=r[o];t[o]=i*(1-e)+a*e;}var[o,s,l,u]=t;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${u})`;};}},K=(e,t)=>{let n=X(e,t);return e=>Math.round(n(e));};function Z({map:e,initKey:t},n){return t=t(n),e.has(t)?e.get(t):n;}function Q(e){return"object"==typeof e?e.valueOf():e;}class J extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=Q,null!==e)for(var[t,n]of e)this.set(t,n);}get(e){return super.get(Z({map:this.map,initKey:this.initKey},e));}has(e){return super.has(Z({map:this.map,initKey:this.initKey},e));}set(e,t){var n,r;return super.set(([{map:e,initKey:n},r]=[{map:this.map,initKey:this.initKey},e],n=n(r),e.has(n)?e.get(n):(e.set(n,r),r)),t);}delete(e){var t,n;return super.delete(([{map:e,initKey:t},n]=[{map:this.map,initKey:this.initKey},e],t=t(n),e.has(t)&&(n=e.get(t),e.delete(t)),n));}}class ee{constructor(e){this.options=d({},this.getDefaultOptions()),this.update(e);}getOptions(){return this.options;}update(e={}){this.options=d({},this.options,e),this.rescale(e);}rescale(e){}}let et=Symbol("defaultUnknown");function en(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r);}function er(e){var{value:e,from:t,to:n,mapper:r,notFoundReturn:i}=e;let a=r.get(e);if(void 0===a){if(i!==et)return i;a=t.push(e)-1,r.set(e,a);}return n[a%n.length];}function ei(e){return e instanceof Date?e=>""+e:"object"==typeof e?e=>JSON.stringify(e):e=>e;}class ea extends ee{getDefaultOptions(){return{domain:[],range:[],unknown:et};}constructor(e){super(e);}map(e){return 0===this.domainIndexMap.size&&en(this.domainIndexMap,this.getDomain(),this.domainKey),er({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(e){return 0===this.rangeIndexMap.size&&en(this.rangeIndexMap,this.getRange(),this.rangeKey),er({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(e){var[t]=this.options.domain,[n]=this.options.range;this.domainKey=ei(t),this.rangeKey=ei(n),this.rangeIndexMap?(e&&!e.range||this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map);}clone(){return new ea(this.options);}getRange(){return this.options.range;}getDomain(){var e,t;return this.sortedDomain||({domain:e,compare:t}=this.options,this.sortedDomain=t?[...e].sort(t):e),this.sortedDomain;}}class eo extends ea{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:et,flex:[]};}constructor(e){super(e);}clone(){return new eo(this.options);}getStep(e){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===e?Array.from(this.valueStep.values())[0]:this.valueStep.get(e);}getBandWidth(e){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===e?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e);}getRange(){return this.adjustedRange;}getPaddingInner(){var{padding:e,paddingInner:t}=this.options;return 0<e?e:t;}getPaddingOuter(){var{padding:e,paddingOuter:t}=this.options;return 0<e?e:t;}rescale(){super.rescale();var{align:e,domain:t,range:n,round:r,flex:i}=this.options,{adjustedRange:e,valueBandWidth:n,valueStep:r}=function(e){var t=e.domain;if(0===(t=t.length))return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!(null==(n=e.flex)||!n.length))return function(e){let{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=e;var l=t.length,u=0<(u=(e=l)-(c=a).length)?[...c,...Array(u).fill(1)]:u<0?c.slice(0,e):c,[e,c]=n,c=c-e,d=c/(2/l*r+1-1/l*i);let h=d*i/l;d-=l*h;let f=function(e){let t=Math.min(...e);return e.map(e=>e/t);}(u),p=d/f.reduce((e,t)=>e+t);var u=new J(t.map((e,t)=>(t=f[t]*p,[e,o?Math.floor(t):t]))),v=new J(t.map((e,t)=>(t=f[t]*p+h,[e,o?Math.floor(t):t]))),d=Array.from(v.values()).reduce((e,t)=>e+t),e=e+(c-(d-d/l*i))*s;let g=o?Math.round(e):e;var m=Array(l);for(let e=0;e<l;e+=1){m[e]=Math.round(1e12*(y=g))/1e12;var y=t[e];g+=v.get(y);}return{valueBandWidth:u,valueStep:v,adjustedRange:m};}(e);var{range:n,paddingOuter:e,paddingInner:r,round:i,align:a}=e;let o,s,l=n[0];return o=(n=n[1]-l)/Math.max(1,2*e+(t-r)),i&&(o=Math.floor(o)),l+=(n-o*(t-r))*a,s=o*(1-r),i&&(l=Math.round(l),s=Math.round(s)),e=Array(t).fill(0).map((e,t)=>l+t*o),{valueStep:o,valueBandWidth:s,adjustedRange:e};}({align:e,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=r,this.valueBandWidth=n,this.adjustedRange=e;}}let es=(e,t,n)=>{let r,i,a=e,o=t;if(a===o&&0<n)return[a];let s=C(a,o,n);if(0===s||!Number.isFinite(s))return[];if(0<s){a=Math.ceil(a/s),i=Array(r=Math.ceil((o=Math.floor(o/s))-a+1));for(let e=0;e<r;e+=1)i[e]=(a+e)*s;}else{a=Math.ceil(a*(s=-s)),i=Array(r=Math.ceil((o=Math.floor(o*s))-a+1));for(let e=0;e<r;e+=1)i[e]=(a+e)/s;}return i;},el=(e,t,n)=>{let r;var[e,i]=e,[t,a]=t;return S(e<i?(r=T(e,i),n(t,a)):(r=T(i,e),n(a,t)),r);},eu=(e,t,n)=>{let r=Math.min(e.length,t.length)-1,i=Array(r),a=Array(r);var o=e[0]>e[r],s=o?[...e].reverse():e,l=o?[...t].reverse():t;for(let e=0;e<r;e+=1)i[e]=T(s[e],s[e+1]),a[e]=n(l[e],l[e+1]);return t=>{var n=function(e,t,n,r,i){let a=1,o=r||e.length;for(var s=e=>e;a<o;){var l=Math.floor((a+o)/2);s(e[l])>t?o=l:a=l+1;}return a;}(e,t,0,r)-1,o=i[n];return S(a[n],o)(t);};},ec=(e,t,n,r)=>(2<Math.min(e.length,t.length)?eu:el)(e,t,r?K:n);class ed extends ee{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:X,tickCount:5};}map(e){return P(e)?this.output(e):this.options.unknown;}invert(e){return P(e)?this.input(e):this.options.unknown;}nice(){var e,t,n,r;this.options.nice&&([e,t,n,...r]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(e,t,n,...r));}getTicks(){var e=this.options.tickMethod,[t,n,r,...i]=this.getTickMethodOptions();return e(t,n,r,...i);}getTickMethodOptions(){var{domain:e,tickCount:t}=this.options;return[e[0],e[e.length-1],t];}chooseNice(){return _;}rescale(){this.nice();var[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t));}chooseClamp(e){var{clamp:t,range:n}=this.options,e=this.options.domain.map(e),n=Math.min(e.length,n.length);if(t){t=e[0];let r=(e=e[n-1])<t?e:t,i=e<t?t:e;return e=>Math.min(Math.max(r,e),i);}return h;}composeOutput(e,t){var{domain:n,range:r,round:i,interpolate:a}=this.options,n=ec(n.map(e),r,a,i);this.output=S(n,t,e);}composeInput(e,t,n){var{domain:r,range:i}=this.options,i=ec(i,r.map(e),X);this.input=S(t,n,i);}}class eh extends ed{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:$,tickMethod:es,tickCount:5};}chooseTransforms(){return[h,h];}clone(){return new eh(this.options);}}class ef extends eo{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:et,paddingInner:1,paddingOuter:0};}constructor(e){super(e);}getPaddingInner(){return 1;}clone(){return new ef(this.options);}update(e){super.update(e);}getPaddingOuter(){return this.options.padding;}}function ep(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n;}var ev,R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=["January","February","March","April","May","June","July","August","September","October","November","December"],eg=ep(L,3);!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i,a=t[r];for(i in a)e[i]=a[i];}}({},{dayNamesShort:ep(R,3),dayNames:R,monthNamesShort:eg,monthNames:L,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][3<e%10?0:(e-e%10!=10?1:0)*e%10];}});let em=ev=class extends eh{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:h,tickMethod:es,tickCount:5};}constructor(e){super(e);}clone(){return new ev(this.options);}};em=ev=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(a<3?i(o):3<a?i(t,n,o):i(t,n))||o);return 3<a&&o&&Object.defineProperty(t,n,o),o;}([A(function(e){return[e(0),e(1)];},e=>{var[e,t]=e;return S(X(0,1),T(e,t));})],em);let ey=a=class extends eh{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:h,tickMethod:es,tickCount:5};}constructor(e){super(e);}clone(){return new a(this.options);}};function eb(e,t,r,i,a){var o=new eh({range:[t,t+i]}),s=new eh({range:[r,r+a]});return{transform:function(e){var e=n(e,2),t=e[0],e=e[1];return[o.map(t),s.map(e)];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1];return[o.invert(t),s.invert(e)];}};}function eE(e,t,r,i,a){return(0,n(e,1)[0])(t,r,i,a);}function ex(e,t,r,i,a){return n(e,1)[0];}function ek(e,t,r,i,a){var o=(e=n(e,4))[0],s=e[1],l=e[2],e=e[3],u=new eh({range:[l,e]}),c=new eh({range:[o,s]}),d=1<(l=a/i)?1:l,h=1<l?1/l:1;return{transform:function(e){var e=n(e,2),t=e[0],e=e[1],t=c.map(t),e=u.map(e);return[e*Math.cos(t)*d*.5+.5,e*Math.sin(t)*h*.5+.5];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1],t=2*(t-.5)/d,e=2*(e-.5)/h,r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),e=x(Math.atan2(e,t),o,s);return[c.invert(e),u.invert(r)];}};}function eS(e,t,r,i,a){return{transform:function(e){var e=n(e,2),t=e[0];return[e[1],t];},untransform:function(e){var e=n(e,2),t=e[0];return[e[1],t];}};}function eT(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return eP.apply(void 0,r([[-1,-1]],n(t),!1));}function eM(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return eP.apply(void 0,r([[-1,1]],n(t),!1));}function ew(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return eP.apply(void 0,r([[1,-1]],n(t),!1));}function eN(e,t,r,i,a){var o,e=n(e,1)[0],s=v();return o=Math.sin(e),e=Math.cos(e),s[0]=e,s[1]=o,s[2]=0,s[3]=-o,s[4]=e,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s;}function eC(e,t,r,i,a){var o=(e=n(e,4))[0],s=e[1],l=e[2],u=(e[3]-l)/(+s/(2*Math.PI)+1),c=u/(2*Math.PI),d=new eh({range:[l,l+.99*u]}),h=new eh({range:[o,s]}),f=1<(e=a/i)?1:e,p=1<e?1/e:1;return{transform:function(e){var e=n(e,2),t=e[0],e=e[1],t=h.map(t),e=d.map(e);return[Math.cos(t)*(c*t+e)*f*.5+.5,Math.sin(t)*(c*t+e)*p*.5+.5];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1],t=2*(t-.5)/f,e=2*(e-.5)/p,r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),e=x(Math.atan2(e,t)+Math.floor(r/u)*Math.PI*2,o,s),t=r-c*e;return[h.invert(e),d.invert(t)];}};}function e_(e,t,r,i,a){var o=(e=n(e,4))[0],s=e[1],l=e[2],e=e[3],u=new eh({range:[l,e]});return{transform:function(e){for(var t=[],n=e.length,r=new ef({domain:Array(n).fill(0).map(function(e,t){return t;}),range:[o,s]}),i=0;i<n;i++){var a=e[i],l=r.map(i),a=u.map(a);t.push(l,a);}return t;},untransform:function(e){for(var t=[],n=0;n<e.length;n+=2){var r=e[n+1];t.push(u.invert(r));}return t;}};}ey=a=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(a<3?i(o):3<a?i(t,n,o):i(t,n))||o);return 3<a&&o&&Object.defineProperty(t,n,o),o;}([A(function(e){return[e(0),e(.5),e(1)];},e=>{let[t,n,r]=e,i=S(X(0,.5),T(t,n)),a=S(X(.5,1),T(n,r));return e=>(t>r?e<n?a:i:e<n?i:a)(e);})],ey);var eP=function(e,t,r,i,a){var e=n(e,2),o=e[0],e=e[1],s=v();return o=[o,e],(e=s)[0]=o[0],e[1]=0,e[2]=0,e[3]=0,e[4]=o[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e;};function eA(e){return 1/Math.tan(e);}function eO(e,t,r,i,a){var o=eA(n(e,1)[0]);return{transform:function(e){var e=n(e,2),t=e[0],e=e[1];return[t+e*o,e];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1];return[t-e*o,e];}};}function eL(e,t,r,i,a){var o=eA(n(e,1)[0]);return{transform:function(e){var e=n(e,2),t=e[0];return[t,e[1]+t*o];},untransform:function(e){var e=n(e,2),t=e[0];return[t,e[1]-t*o];}};}function eR(e,t,n,r,i){var a=e<t,i=(a?t-r:i-t)||i-r,r=a?-1:1;return r*i*(n+1)/(n+i/((e-t)*r))+t;}function eD(e,t,n,r,i){var a=e<t,i=(a?t-r:i-t)||i-r;return i/(i*(n+1)/(e-t)-n*(a?-1:1))+t;}function eI(e,t,n){return n?new eh({range:[0,1],domain:[0,t]}).map(e):e;}function eB(e,t,r,i,a){var o=(e=n(e,3))[0],s=e[1],e=e[2],l=eI(o,i,void 0!==e&&e);return{transform:function(e){var e=n(e,2),t=e[0],e=e[1];return[eR(t,l,s,0,1),e];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1];return[eD(t,l,s,0,1),e];}};}function eF(e,t,r,i,a){var o=(e=n(e,3))[0],s=e[1],e=e[2],l=eI(o,a,void 0!==e&&e);return{transform:function(e){return[(e=n(e,2))[0],eR(e[1],l,s,0,1)];},untransform:function(e){return[(e=n(e,2))[0],eD(e[1],l,s,0,1)];}};}function eG(e,t,r,i,a){var o=(e=n(e,5))[0],s=e[1],l=e[2],u=e[3],e=e[4],c=eI(o,i,e=void 0!==e&&e),d=eI(s,a,e);return{transform:function(e){var e=n(e,2),t=e[0],e=e[1];return[eR(t,c,l,0,1),eR(e,d,u,0,1)];},untransform:function(e){var e=n(e,2),t=e[0],e=e[1];return[eD(t,c,l,0,1),eD(e,d,u,0,1)];}};}function ez(e,t,r,i,a){var o=(e=n(e,5))[0],s=e[1],l=e[2],u=e[3],e=void 0!==(e=e[4])&&e,c=new eh({range:[0,i]}),d=new eh({range:[0,a]}),h=e?o:c.map(o),f=e?s:d.map(s);return{transform:function(e){var e=n(e,2),t=e[0],e=e[1],r=c.map(t)-h,i=d.map(e)-f,a=Math.sqrt(r*r+i*i);return l<a?[t,e]:(a=h+(t=eR(a,0,u,0,l))*Math.cos(e=Math.atan2(i,r)),i=f+t*Math.sin(e),[c.invert(a),d.invert(i)]);},untransform:function(e){var e=n(e,2),t=e[0],e=e[1],r=c.map(t)-h,i=d.map(e)-f,a=Math.sqrt(r*r+i*i);return l<a?[t,e]:(a=h+(t=eD(a,0,u,0,l))*Math.cos(e=Math.atan2(i,r)),i=f+t*Math.sin(e),[c.invert(a),d.invert(i)]);}};}function eV(e,t,r,i,a,o,s){var l=new eh({range:[t,t+a]}),u=new eh({range:[r,r+o]}),c=new eh({range:[i,i+s]});return{transform:function(e){var e=n(e,3),t=e[0],r=e[1],e=e[2];return[l.map(t),u.map(r),c.map(e)];},untransform:function(e){var e=n(e,3),t=e[0],r=e[1],e=e[2];return[l.invert(t),u.invert(r),c.invert(e)];}};}function ej(e,t,r,i,a,o,s){var l,u=(e=n(e,3))[0],c=e[1],e=e[2];return l=m(),u=[u,c,e],l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=u[0],l[13]=u[1],l[14]=u[2],l[15]=1,l;}function eU(e,t,r,i,a,o,s){return{transform:function(e){var e=n(e,3),t=e[0];return[e[1],t,e[2]];},untransform:function(e){var e=n(e,3),t=e[0];return[e[1],t,e[2]];}};}function eH(e,t,r,i,a,o,s){var l,u=(e=n(e,3))[0],c=e[1],e=e[2];return l=m(),u=[u,c,e],l[0]=u[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=u[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=u[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l;}function eW(e){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:eb,translate:k,custom:eE,matrix:ex,polar:ek,transpose:eS,scale:eP,"shear.x":eO,"shear.y":eL,reflect:eT,"reflect.x":eM,"reflect.y":ew,rotate:eN,helix:eC,parallel:e_,fisheye:eG,"fisheye.x":eB,"fisheye.y":eF,"fisheye.circular":ez},this.update(e);}function eY(e){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:eV,translate3D:ej,scale3D:eH,transpose3D:eU},this.update(e);}eW.prototype.update=function(e){this.options=d({},this.options,e),this.recoordinate();},eW.prototype.clone=function(){return new eW(this.options);},eW.prototype.getOptions=function(){return this.options;},eW.prototype.clear=function(){this.update({transformations:[]});},eW.prototype.getSize=function(){var e=this.options;return[e.width,e.height];},eW.prototype.getCenter=function(){var e=this.options,t=e.x,n=e.y;return[(2*t+e.width)/2,(2*n+e.height)/2];},eW.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.options.transformations;return this.update({transformations:r(r([],n(i),!1),[r([],n(e),!1)],!1)}),this;},eW.prototype.map=function(e){return this.output(e);},eW.prototype.invert=function(e){return this.input(e);},eW.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0);},eW.prototype.compose=function(e){function i(e,t){c.push((t=void 0===t||t)?function(t){for(var i=[],a=0;a<t.length-1;a+=2){var o=[t[a],t[a+1]],o=e(o);i.push.apply(i,r([],n(o),!1));}return i;}:e);}var a,o,s=(e=void 0!==e&&e)?r([],n(this.options.transformations),!1).reverse():this.options.transformations,l=e?function(e){return e.untransform;}:function(e){return e.transform;},u=[],c=[];try{for(var d=t(s),f=d.next();!f.done;f=d.next()){var p,v,g,m,y,x,k=n(f.value),S=k[0],T=k.slice(1),M=this.transformers[S];M&&(v=(p=this.options).x,g=p.y,m=p.width,y=p.height,E(x=M(r([],n(T),!1),v,g,m,y))?u.push(x):(u.length&&(i(this.createMatrixTransform(u,e)),u.splice(0,u.length)),i(l(x)||h,"parallel"!==S)));}}catch(e){a={error:e};}finally{try{f&&!f.done&&(o=d.return)&&o.call(d);}finally{if(a)throw a.error;}}return u.length&&i(this.createMatrixTransform(u,e)),b.apply(void 0,r([],n(c),!1));},eW.prototype.createMatrixTransform=function(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,m=v();return t&&e.reverse(),e.forEach(function(e){return g(m,m,e);}),t&&(t=e=m,(f=new p(9))[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=t[3],f[4]=t[4],f[5]=t[5],f[6]=t[6],f[7]=t[7],f[8]=t[8],f=(t=f)[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],h=f*(u=(t=t[8])*a-o*l)+n*(c=-t*i+o*s)+r*(d=l*i-a*s))&&(e[0]=u*(h=1/h),e[1]=(-t*n+r*l)*h,e[2]=(o*n-r*a)*h,e[3]=c*h,e[4]=(t*f-r*s)*h,e[5]=(-o*f+r*i)*h,e[6]=d*h,e[7]=(-l*f+n*s)*h,e[8]=(a*f-n*i)*h),function(e){var t,n,r,i,e=[e[0],e[1],1];return r=(n=t=e)[0],i=n[1],n=n[2],t[0]=r*m[0]+i*m[3]+n*m[6],t[1]=r*m[1]+i*m[4]+n*m[7],t[2]=r*m[2]+i*m[5]+n*m[8],[e[0],e[1]];};},R=eW,eY.prototype.update=function(e){this.options=d({},this.options,e),this.recoordinate();},eY.prototype.clone=function(){return new eY(this.options);},eY.prototype.getOptions=function(){return this.options;},eY.prototype.clear=function(){this.update({transformations:[]});},eY.prototype.getSize=function(){var e=this.options;return[e.width,e.height,e.depth];},eY.prototype.getCenter=function(){var e=this.options,t=e.x,n=e.y,r=e.z;return[(2*t+e.width)/2,(2*n+e.height)/2,(2*r+e.depth)/2];},eY.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.options.transformations;return this.update({transformations:r(r([],n(i),!1),[r([],n(e),!1)],!1)}),this;},eY.prototype.map=function(e){return this.output(e);},eY.prototype.invert=function(e){return this.input(e);},eY.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0);},eY.prototype.compose=function(e){function i(e,t){c.push((t=void 0===t||t)?function(t){for(var i=[],a=0;a<t.length-1;a+=3){var o=[t[a],t[a+1],t[a+2]],o=e(o);i.push.apply(i,r([],n(o),!1));}return i;}:e);}var a,o,s=(e=void 0!==e&&e)?r([],n(this.options.transformations),!1).reverse():this.options.transformations,l=e?function(e){return e.untransform;}:function(e){return e.transform;},u=[],c=[];try{for(var d=t(s),f=d.next();!f.done;f=d.next()){var p,v,g,m,y,x,k,S,T=n(f.value),M=T[0],w=T.slice(1),N=this.transformers[M];N&&(v=(p=this.options).x,g=p.y,m=p.z,y=p.width,x=p.height,k=p.depth,E(S=N(r([],n(w),!1),v,g,m,y,x,k))?u.push(S):(u.length&&(i(this.createMatrixTransform(u,e)),u.splice(0,u.length)),i(l(S)||h,!0)));}}catch(e){a={error:e};}finally{try{f&&!f.done&&(o=d.return)&&o.call(d);}finally{if(a)throw a.error;}}return u.length&&i(this.createMatrixTransform(u,e)),b.apply(void 0,r([],n(c),!1));},eY.prototype.createMatrixTransform=function(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,v,g,b,E,x,k,S,T,M,w,N,C,_,P,A,O,L=m();return t&&e.reverse(),e.forEach(function(e){return y(L,L,e);}),t&&(t=e=L,(O=new p(16))[0]=t[0],O[1]=t[1],O[2]=t[2],O[3]=t[3],O[4]=t[4],O[5]=t[5],O[6]=t[6],O[7]=t[7],O[8]=t[8],O[9]=t[9],O[10]=t[10],O[11]=t[11],O[12]=t[12],O[13]=t[13],O[14]=t[14],O[15]=t[15],O=(t=O)[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11],f=t[12],v=t[13],g=t[14],t=t[15],A=(b=O*o-n*a)*(P=d*t-h*g)-(E=O*s-r*a)*(_=c*t-h*v)+(x=O*l-i*a)*(C=c*g-d*v)+(k=n*s-r*o)*(N=u*t-h*f)-(S=n*l-i*o)*(w=u*g-d*f)+(T=r*l-i*s)*(M=u*v-c*f))&&(e[0]=(o*P-s*_+l*C)*(A=1/A),e[1]=(r*_-n*P-i*C)*A,e[2]=(v*T-g*S+t*k)*A,e[3]=(d*S-c*T-h*k)*A,e[4]=(s*N-a*P-l*w)*A,e[5]=(O*P-r*N+i*w)*A,e[6]=(g*x-f*T-t*E)*A,e[7]=(u*T-d*x+h*E)*A,e[8]=(a*_-o*N+l*M)*A,e[9]=(n*N-O*_-i*M)*A,e[10]=(f*S-v*x+t*b)*A,e[11]=(c*x-u*S-h*b)*A,e[12]=(o*w-a*C-s*M)*A,e[13]=(O*C-n*w+r*M)*A,e[14]=(v*E-f*k-g*b)*A,e[15]=(u*k-c*E+d*b)*A),function(e){var t,n,r,i,a,e=[e[0],e[1],e[2],1];return r=(n=t=e)[0],i=n[1],a=n[2],n=n[3],t[0]=L[0]*r+L[4]*i+L[8]*a+L[12]*n,t[1]=L[1]*r+L[5]*i+L[9]*a+L[13]*n,t[2]=L[2]*r+L[6]*i+L[10]*a+L[14]*n,t[3]=L[3]*r+L[7]*i+L[11]*a+L[15]*n,[e[0],e[1],e[2]];};},eg=eY,e.Coordinate=R,e.Coordinate3D=eg,Object.defineProperty(e,"__esModule",{value:!0});},"object"==typeof t&&void 0!==e?i(t):"function"==typeof define&&define.amd?define(["exports"],i):i((r="undefined"!=typeof globalThis?globalThis:r||self).Coordinate={});},"612d2a0d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return s;}});var r=n("18f14020"),i=n("01a29d03"),a=n("9e868a30"),o=n("16bb9463");function s(e,t,n,s,l){var u,c,d,h=t.maxLines,f=void 0===h?3:h,p=t.recoverWhenFailed,v=t.margin,g=void 0===v?[0,0,0,0]:v,m=(0,i.getCallbackValue)(null!==(d=t.wordWrapWidth)&&void 0!==d?d:50,[l]),y=e.map(function(e){return e.attr("maxLines")||1;}),b=Math.min.apply(Math,(0,r.__spreadArray)([],(0,r.__read)(y),!1)),E=function(){return(0,o.boundTest)(e,n,g).length<1;},x=(u=n.type,c=n.labelDirection,"linear"===u&&(0,a.isAxisHorizontal)(n)?"negative"===c?"bottom":"top":"middle"),k=function(t){return e.forEach(function(e,n){var r=Array.isArray(t)?t[n]:t;s.wrap(e,m,r,x);});};if(!(b>f)){if("linear"===n.type&&(0,a.isAxisHorizontal)(n)){if(k(f),E())return;}else for(var S=b;S<=f;S++)if(k(S),E())return;(void 0===p||p)&&k(y);}}},"616d27f2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Rect",{enumerable:!0,get:function(){return o;}});var r=n("a566da36"),i=n("95550d14"),a=n("ec2f02a5");class o extends a.BaseNode{constructor(e){super(e);}getKeyStyle(e){let[t,n]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:t,height:n,x:-t/2,y:-n/2});}getIconStyle(e){let t=super.getIconStyle(e),{width:n,height:r}=this.getShape("key").attributes;return!!t&&Object.assign({width:n*i.ICON_SIZE_RATIO,height:r*i.ICON_SIZE_RATIO},t);}drawKeyShape(e,t){return this.upsert("key",r.Rect,this.getKeyStyle(e),t);}}},"61beb903":function(e,t,n){"use strict";function r(e){let t=[],n=e=>{(null==e?void 0:e.children.length)&&e.children.forEach(e=>{t.push(e),n(e);});};return n(e),t;}function i(e){let t=[],n=e.parentNode;for(;n;)t.push(n),n=n.parentNode;return t;}n.d(t,"__esModule",{value:!0}),n.e(t,{getAncestorShapes:function(){return i;},getDescendantShapes:function(){return r;}});},"62c607b3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Backward:function(){return f;},ChartType:function(){return N;},Forward:function(){return p;},PlayPause:function(){return M;},Reset:function(){return h;},SelectionType:function(){return w;},SpeedSelect:function(){return S;},Split:function(){return k;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("c086f503"),o=n("9225b8d3"),s=n("01a29d03"),l=n("c69adf7a"),u=n("a6c281dd"),c=function(e){function t(n){var r=e.call(this,(0,s.deepAssign)({},{style:{backgroundOpacity:t.backgroundOpacities.default}},t.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new o.Rect({})),r.icon=r.appendChild(new o.Group({})),r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"BaseIcon";},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return(0,s.parseSeriesAttr)(this.attributes.size/5);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconSize",{get:function(){var e=this.attributes.size,t=(0,r.__read)(this.padding,4),n=t[0],i=t[1],a=t[2];return Math.max(e-Math.max(t[3]+i,n+a),2*this.lineWidth+1);},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,i=e.size,a=i/2,o=(0,s.subStyleProps)(this.attributes,"background");this.background.attr((0,r.__assign)({x:t-a,y:n-a,width:i,height:i},o));},t.prototype.showIndicator=function(){if(this.label){var e=this.attributes.size,t=this.background.getBBox(),n=t.x,r=t.y;this.indicator.update({x:n+e/2,y:r-5,labelText:this.label,visibility:"visible"});}},t.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"});},t.prototype.connectedCallback=function(){e.prototype.connectedCallback.call(this);var t,n=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y,o=null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new l.Indicator({style:{x:i+n/2,y:a-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})));},t.prototype.disconnectedCallback=function(){this.indicator.destroy();},t.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground();},t.prototype.bindEvents=function(){var e=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){null==n||n(e);}),this.showBackground){var r=function(){return e.background.attr({opacity:t.backgroundOpacities.default});};this.addEventListener("pointerenter",function(){e.background.attr({opacity:t.backgroundOpacities.hover}),e.showIndicator();}),this.addEventListener("pointerleave",function(){r(),e.hideIndicator();}),this.addEventListener("pointerdown",function(){e.background.attr({opacity:t.backgroundOpacities.active});}),this.addEventListener("pointerup",function(){r();});}},t.tag="IconBase",t.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},t.backgroundOpacities={default:0,hover:.8,active:1},t;}(a.Component),d=function(e,t){return void 0===t&&(t="#565758"),new o.Path({style:{fill:t,d:"M ".concat(e,",").concat(e," L -").concat(e,",0 L ").concat(e,",-").concat(e," Z"),transformOrigin:"center"}});},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),t.prototype.arcPath=function(e,t,n){var i=(0,r.__read)([n,n],2),a=i[0],o=i[1],s=function(r){return[e+n*Math.cos(r),t+n*Math.sin(r)];},l=(0,r.__read)(s(-5/4*Math.PI),2),u=l[0],c=l[1],d=(0,r.__read)(s(1/4*Math.PI),2),h=d[0],f=d[1];return"M".concat(u,",").concat(c,",A").concat(a,",").concat(o,",0,1,1,").concat(h,",").concat(f);},Object.defineProperty(t.prototype,"label",{get:function(){return"\u91CD\u7F6E";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;(0,s.select)(this.icon).maybeAppend(".reset","path").styles({stroke:r,lineWidth:a,d:this.arcPath(t,n,i/2-a),markerStart:d(a+.5,r)});},t;}(c),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5FEB\u9000";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/1.7320508075688772;(0,s.select)(this.icon).maybeAppend(".backward","polygon").styles({points:[[t,n],[t,n-o],[t-a,n],[t,n+o],[t,n],[t+a,n-o],[t+a,n+o],[t,n]],fill:r});},t;}(c),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5FEB\u8FDB";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/1.7320508075688772;(0,s.select)(this.icon).maybeAppend(".forward","polygon").styles({points:[[t,n],[t,n-o],[t+a,n],[t,n+o],[t,n],[t-a,n-o],[t-a,n+o],[t,n]],fill:r});},t;}(c),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u64AD\u653E";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3*1.3856406460551018;(0,s.select)(this.icon).maybeAppend(".play","polygon").styles({points:[[t+a,n],[t-a/2,n-i/2*.8],[t-a/2,n+i/2*.8],[t+a,n]],fill:r});},t;}(c),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6682\u505C";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3;(0,s.select)(this.icon).maybeAppend(".pause","polygon").styles({points:[[t-a,n-i/2],[t-a,n+i/2],[t-a/2,n+i/2],[t-a/2,n-i/2],[t-a,n-i/2],[t+a/2,n-i/2],[t+a/2,n+i/2],[t+a,n+i/2],[t+a,n-i/2]],fill:r});},t;}(c),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u8303\u56F4\u65F6\u95F4";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;(0,s.select)(this.icon).maybeAppend(".left-line","line").styles({x1:t-i/2,y1:n-i/2,x2:t-i/2,y2:n+i/2,stroke:r,lineWidth:a}),(0,s.select)(this.icon).maybeAppend(".right-line","line").styles({x1:t+i/2,y1:n-i/2,x2:t+i/2,y2:n+i/2,stroke:r,lineWidth:a}),(0,s.select)(this.icon).maybeAppend(".left-arrow","line").styles({x1:t,y1:n,x2:t-i/2+2*a,y2:n,stroke:r,lineWidth:a,markerEnd:d(2*a,r)}),(0,s.select)(this.icon).maybeAppend(".right-arrow","line").styles({x1:t,y1:n,x2:t+i/2-2*a,y2:n,stroke:r,lineWidth:a,markerEnd:d(2*a,r)});},t;}(c),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5355\u4E00\u65F6\u95F4";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;(0,s.select)(this.icon).maybeAppend(".line","line").styles({x1:t,y1:n-i/2,x2:t,y2:n+i/2,stroke:r,lineWidth:a}),(0,s.select)(this.icon).maybeAppend(".left-arrow","line").styles({x1:t-i/2-2*a,y1:n,x2:t-2*a,y2:n,stroke:r,lineWidth:a,markerEnd:d(2*a,r)}),(0,s.select)(this.icon).maybeAppend(".right-arrow","line").styles({x1:t+i/2+2*a,y1:n,x2:t+2*a,y2:n,stroke:r,lineWidth:a,markerEnd:d(2*a,r)});},t;}(c),b=function(e){return[[-e/2,-e/2],[-e/2,e/2],[e/2,e/2]];},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6298\u7EBF\u56FE";},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,i=e.color,a=this.iconSize,o=this.lineWidth,l=(a-2*o-o)/4,u=(a-2*o-o)/2,c=(0,r.__read)([t-a/2+o,n+a/2-2*o],2),d=c[0],h=c[1];(0,s.select)(this.icon).maybeAppend(".coordinate","polyline").styles({points:b(a).map(function(e){var i=(0,r.__read)(e,2);return[i[0]+t,i[1]+n];}),stroke:i,lineWidth:o}),(0,s.select)(this.icon).maybeAppend(".line","polyline").styles({points:[[d,h],[d+l,h-u],[d+2*l,h],[d+4*l,h-2*u]],stroke:i,lineWidth:o});},t;}(c),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6761\u5F62\u56FE";},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return[1,4,2,4,3];},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.data,t=this.attributes,n=t.x,i=t.y,a=t.color,o=this.iconSize,l=this.lineWidth,u=(o-l)/e.length,c=(o-2*l)/4,d=(0,r.__read)([n-o/2+2*l,i+o/2-l],2),h=d[0],f=d[1];(0,s.select)(this.icon).maybeAppend(".coordinate","polyline").styles({points:b(o).map(function(e){var t=(0,r.__read)(e,2);return[t[0]+n,t[1]+i];}),stroke:a,lineWidth:l}),(0,s.select)(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(e,t){return{value:e,index:t};})).join(function(e){return e.append("line").attr("className","column").style("x1",function(e){return h+u*e.index;}).style("y1",f).style("x2",function(e){return h+u*e.index;}).style("y2",function(e){return f-c*e.value;}).styles({y1:f,stroke:a,lineWidth:l});});},t;}(c),k=function(e){function t(t){var n=e.call(this,(0,s.deepAssign)({},{style:{color:"#d8d9d9"}},t))||this;return n.showBackground=!1,n;}return(0,r.__extends)(t,e),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;(0,s.select)(this.icon).maybeAppend(".split","line").styles({x1:t,y1:n-i/2,x2:t,y2:n+i/2,stroke:r,lineWidth:a});},t;}(c),S=function(e){function t(){var t=e.apply(this,(0,r.__spreadArray)([],(0,r.__read)(arguments),!1))||this;return t.showBackground=!1,t;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return(0,s.parseSeriesAttr)(0);},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.iconSize,t=this.attributes,n=t.x,a=t.y,o=t.speed,l=(0,i.omit)(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),c=(0,i.clamp)(e,20,1/0),d=(0,r.__assign)((0,r.__assign)({},l),{x:n-c/2,y:a-10,width:c,height:20,defaultValue:void 0===o?1:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:e/5,placeholderFontSize:e/2,optionPadding:0,optionLabelFontSize:e/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});(0,s.select)(this.icon).maybeAppend(".speed",function(){return new u.Select({style:d});}).attr("className","speed").each(function(){this.update(d);});},t.tag="SpeedSelect",t;}(c),T=function(e){function t(t){var n=e.call(this,t)||this;return n.icon=n.appendChild(new o.Group({})),n.currentType=n.attributes.type,n;}return(0,r.__extends)(t,e),t.prototype.getType=function(){return this.currentType;},t.prototype.render=function(){var e=this,t=this.attributes,n=(t.onChange,(0,r.__rest)(t,["onChange"]));(0,s.select)(this.icon).selectAll(".icon").data([this.currentType]).join(function(t){return t.append(function(t){var n,i=null===(n=e.toggles.find(function(e){return(0,r.__read)(e,1)[0]===t;}))||void 0===n?void 0:n[1];if(!i)throw Error("Invalid type: ".concat(t));return new i({});}).attr("className","icon").styles(n,!1).update({});},function(e){return e.styles({restStyles:n}).update({});},function(e){return e.remove();});},t.prototype.bindEvents=function(){var e=this,t=this.attributes.onChange;this.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var i=(e.toggles.findIndex(function(t){return(0,r.__read)(t,1)[0]===e.currentType;})+1)%e.toggles.length,a=e.toggles[i][0];null==t||t(e.currentType),e.currentType=a,e.render();});},t.tag="ToggleIcon",t;}(a.Component),M=function(e){function t(t){var n=e.call(this,(0,s.deepAssign)({},{style:{type:"play"}},t))||this;return n.toggles=[["play",v],["pause",g]],n;}return(0,r.__extends)(t,e),t;}(T),w=function(e){function t(t){var n=e.call(this,(0,s.deepAssign)({},{style:{type:"range"}},t))||this;return n.toggles=[["range",m],["value",y]],n;}return(0,r.__extends)(t,e),t;}(T),N=function(e){function t(t){var n=e.call(this,(0,s.deepAssign)({},{style:{type:"column"}},t))||this;return n.toggles=[["line",E],["column",x]],n;}return(0,r.__extends)(t,e),t;}(T);},"62f6eb3c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{utcDay:function(){return l;},utcHour:function(){return s;},utcIntervalMap:function(){return h;},utcMillisecond:function(){return i;},utcMinute:function(){return o;},utcMonth:function(){return u;},utcSecond:function(){return a;},utcWeek:function(){return c;},utcYear:function(){return d;}});var r=n("9c971d62");let i=(0,r.createInterval)(1,e=>e,(e,t=1)=>{e.setTime(+e+t);},e=>e.getTime()),a=(0,r.createInterval)(r.DURATION_SECOND,e=>{e.setUTCMilliseconds(0);},(e,t=1)=>{e.setTime(+e+r.DURATION_SECOND*t);},e=>e.getUTCSeconds()),o=(0,r.createInterval)(r.DURATION_MINUTE,e=>{e.setUTCSeconds(0,0);},(e,t=1)=>{e.setTime(+e+r.DURATION_MINUTE*t);},e=>e.getUTCMinutes()),s=(0,r.createInterval)(r.DURATION_HOUR,e=>{e.setUTCMinutes(0,0,0);},(e,t=1)=>{e.setTime(+e+r.DURATION_HOUR*t);},e=>e.getUTCHours()),l=(0,r.createInterval)(r.DURATION_DAY,e=>{e.setUTCHours(0,0,0,0);},(e,t=1)=>{e.setTime(+e+r.DURATION_DAY*t);},e=>e.getUTCDate()-1),u=(0,r.createInterval)(r.DURATION_MONTH,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0);},(e,t=1)=>{let n=e.getUTCMonth();e.setUTCMonth(n+t);},e=>e.getUTCMonth()),c=(0,r.createInterval)(r.DURATION_WEEK,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0);},(e,t=1)=>{e.setTime(+e+r.DURATION_WEEK*t);},e=>{let t=u.floor(e);return Math.floor((+new Date(+e)-+t)/r.DURATION_WEEK);}),d=(0,r.createInterval)(r.DURATION_YEAR,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);},(e,t=1)=>{let n=e.getUTCFullYear();e.setUTCFullYear(n+t);},e=>e.getUTCFullYear()),h={millisecond:i,second:a,minute:o,hour:s,day:l,week:c,month:u,year:d};},"6329a0e2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"parseSeriesAttr",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e){if((0,r.isNumber)(e))return[e,e,e,e];if((0,r.isArray)(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e;}return[0,0,0,0];}},"63963aeb":function(e,t,n){"use strict";function r(e){return`
    <ul class="g6-contextmenu-ul">
      ${e.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `;}n.d(t,"__esModule",{value:!0}),n.e(t,{CONTEXTMENU_CSS:function(){return i;},getContentFromItems:function(){return r;}});let i=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;},"643d93c4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Constant",{enumerable:!0,get:function(){return o;}});var r=n("abe9d8d6"),i=n("4f434d3c"),a=n("9d4f096a");class o extends a.Base{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:i.d3Ticks};}map(e){let[t]=this.options.range;return void 0!==t?t:this.options.unknown;}invert(e){let[t]=this.options.range;return e===t&&void 0!==t?this.options.domain:[];}getTicks(){let{tickMethod:e,domain:t,tickCount:n}=this.options,[i,a]=t;return(0,r.isNumber)(i)&&(0,r.isNumber)(a)?e(i,a,n):[];}clone(){return new o(this.options);}}},"6506d72a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_Q:function(){return a;},wilkinsonExtended:function(){return s;}});var r=n("abe9d8d6"),i=n("eea2fa15");let a=[1,5,2,2.5,4,3],o=100*Number.EPSILON,s=(e,t,n=5,s=!0,l=a,u=[.25,.2,.5,.05])=>{let c=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!c)return[];if(t-e<1e-15||1===c)return[e];let d={score:-2,lmin:0,lmax:0,lstep:0},h=1;for(;h<1/0;){for(let n=0;n<l.length;n+=1){let i=l[n],a=function(e,t,n){let i=(0,r.size)(t);return 1-(0,r.indexOf)(t,e)/(i-1)-n+1;}(i,l,h);if(u[0]*a+u[1]+u[2]+u[3]<d.score){h=1/0;break;}let p=2;for(;p<1/0;){var f;let n=(f=p)>=c?2-(f-1)/(c-1):1;if(u[0]*a+u[1]+u[2]*n+u[3]<d.score)break;let v=Math.ceil(Math.log10((t-e)/(p+1)/h/i));for(;v<1/0;){let f=h*i*10**v,g=function(e,t,n){let r=t-e;return n>r?1-((n-r)/2)**2/(.1*r)**2:1;}(e,t,f*(p-1));if(u[0]*a+u[1]*g+u[2]*n+u[3]<d.score)break;let m=Math.floor(t/f)*h-(p-1)*h,y=Math.ceil(e/f)*h;if(m<=y){let n=y-m;for(let a=0;a<=n;a+=1){let n=f/h*(m+a),v=n+f*(p-1),g=function(e,t,n,i,a,s){let l=(0,r.size)(t),u=(0,r.indexOf)(t,e),c=0,d=(i%s+s)%s;return(d<o||s-d<o)&&i<=0&&a>=0&&(c=1),1-u/(l-1)-n+c;}(i,l,h,n,v,f),y=1-.5*((t-v)**2+(e-n)**2)/(.1*(t-e))**2,b=function(e,t,n,r,i,a){let o=(e-1)/(a-i),s=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o);}(p,c,e,t,n,v),E=u[0]*g+u[1]*y+u[2]*b+1*u[3];E>d.score&&(!s||n<=e&&v>=t)&&(d.lmin=n,d.lmax=v,d.lstep=f,d.score=E);}}v+=1;}p+=1;}}h+=1;}let p=(0,i.prettyNumber)(d.lmax),v=(0,i.prettyNumber)(d.lmin),g=(0,i.prettyNumber)(d.lstep),m=Math.floor(Math.round((p-v)/g*1e12)/1e12)+1,y=Array(m);y[0]=(0,i.prettyNumber)(v);for(let e=1;e<m;e+=1)y[e]=(0,i.prettyNumber)(y[e-1]+g);return y;};},"65216f3f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseElement",{enumerable:!0,get:function(){return i;}});var r=n("988eb09c");class i extends r.BaseShape{get context(){return this.config.context;}get parsedAttributes(){return this.attributes;}onframe(){}animate(e,t){let n=super.animate(e,t);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n;}}},66366487:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{formatTreeData:function(){return c;},getNeighborNodeIds:function(){return i;},graphData2TreeData:function(){return l;},isGraphData:function(){return s;},isTreeData:function(){return o;},treeData2GraphData:function(){return u;}});var r=n("38871e26");let i=(e,t,n)=>{let r=(n=!1)=>{let[r,i]=n?["target","source"]:["source","target"];return t.filter(t=>t[r]===e).map(e=>e[i]);};return"out"===n?r():"in"===n?r(!0):r().concat(r(!0));},a={nodes:[],edges:[]};function o(e){if("object"!=typeof e||null===e||!("id"in e))return!1;if("children"in e){if(!Array.isArray(e.children))return!1;for(let t of e.children)if(!o(t))return!1;}return!0;}function s(e){if("object"!=typeof e||null===e||!Object.keys(e).every(e=>["nodes","edges","combos"].includes(e)))return!1;let{nodes:t=[],edges:n=[],combos:r=[]}=e;if(!Array.isArray(t)||!Array.isArray(n)||!Array.isArray(r))return!1;let i=new Set(t.map(e=>e.id));return!!(t.every(e=>"object"==typeof e&&null!==e&&"id"in e)&&n.every(e=>i.has(e.source)&&i.has(e.target)));}function l(e){if(!s(e))return;let{nodes:t=[],edges:n=[]}=e,r=Object.fromEntries(t.map(e=>[e.id,e])),i=Object.fromEntries(t.map(e=>[e.id,0])),a=Object.fromEntries(t.map(e=>[e.id,[]]));for(let{source:e,target:t}of n)a[e].push(t),i[t]=(i[t]||0)+1;let o=Object.entries(i).filter(([e,t])=>0===t).map(([e])=>e);if(1!==o.length)return;let l=e=>({...r[e],children:a[e].map(l)});return l(o[0]);}function u(e,t){return o(e)?(0,r.treeToGraphData)(e,{getNodeData:(e,n)=>{if(e.depth=n,e.style||(e.style={}),t&&(e.style.collapsed=n>=t),!e.children)return e;let{children:r,...i}=e;return{...i,children:r.map(e=>e.id)};}}):a;}function c(e,t){if(!e)return a;let n=s(e)?l(e):e;return n?u(n,t):a;}},"66eb3e12":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CLASSNAME_SUFFIX_MAP",{enumerable:!0,get:function(){return r;}});var r={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",ribbon:"ribbon",track:"track",selection:"selection",handle:"handle",handleMarker:"handle-marker",handleLabel:"handle-label",indicator:"indicator",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"};},"67f73c59":function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"CanvasEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).CLICK="canvas:click",i.DBLCLICK="canvas:dblclick",i.POINTER_OVER="canvas:pointerover",i.POINTER_LEAVE="canvas:pointerleave",i.POINTER_ENTER="canvas:pointerenter",i.POINTER_MOVE="canvas:pointermove",i.POINTER_OUT="canvas:pointerout",i.POINTER_DOWN="canvas:pointerdown",i.POINTER_UP="canvas:pointerup",i.CONTEXT_MENU="canvas:contextmenu",i.DRAG_START="canvas:dragstart",i.DRAG="canvas:drag",i.DRAG_END="canvas:dragend",i.DRAG_ENTER="canvas:dragenter",i.DRAG_OVER="canvas:dragover",i.DRAG_LEAVE="canvas:dragleave",i.DROP="canvas:drop",i.WHEEL="canvas:wheel";},"67fd20c3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Band",{enumerable:!0,get:function(){return a;}});var r=n("89123580"),i=n("b5560c11");class a extends i.Ordinal{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:i.defaultUnknown,flex:[]};}constructor(e){super(e);}clone(){return new a(this.options);}getStep(e){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===e?Array.from(this.valueStep.values())[0]:this.valueStep.get(e);}getBandWidth(e){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===e?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e);}getRange(){return this.adjustedRange;}getPaddingInner(){let{padding:e,paddingInner:t}=this.options;return e>0?e:t;}getPaddingOuter(){let{padding:e,paddingOuter:t}=this.options;return e>0?e:t;}rescale(){super.rescale();let{align:e,domain:t,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=function(e){var t;let n,i;let{domain:a}=e,o=a.length;if(0===o)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(t=e.flex)||void 0===t?void 0:t.length)return function(e){let{domain:t,range:n,paddingOuter:i,paddingInner:a,flex:o,round:s,align:l}=e,u=t.length,c=function(e,t){let n=t-e.length;return n>0?[...e,...Array(n).fill(1)]:n<0?e.slice(0,t):e;}(o,u),[d,h]=n,f=h-d,p=f/(2/u*i+1-1/u*a),v=p*a/u,g=p-u*v,m=function(e){let t=Math.min(...e);return e.map(e=>e/t);}(c),y=g/m.reduce((e,t)=>e+t),b=new r.InternMap(t.map((e,t)=>{let n=m[t]*y;return[e,s?Math.floor(n):n];})),E=new r.InternMap(t.map((e,t)=>{let n=m[t]*y+v;return[e,s?Math.floor(n):n];})),x=Array.from(E.values()).reduce((e,t)=>e+t),k=d+(f-(x-x/u*a))*l,S=s?Math.round(k):k,T=Array(u);for(let e=0;e<u;e+=1){T[e]=Math.round(1e12*S)/1e12;let n=t[e];S+=E.get(n);}return{valueBandWidth:b,valueStep:E,adjustedRange:T};}(e);let{range:s,paddingOuter:l,paddingInner:u,round:c,align:d}=e,h=s[0],f=s[1]-h;n=f/Math.max(1,2*l+(o-u)),c&&(n=Math.floor(n)),h+=(f-n*(o-u))*d,i=n*(1-u),c&&(h=Math.round(h),i=Math.round(i));let p=Array(o).fill(0).map((e,t)=>h+t*n);return{valueStep:n,valueBandWidth:i,adjustedRange:p};}({align:e,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o;}}},"686a7098":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{REQUIRED_TRANSFORMS:function(){return i;},TransformController:function(){return a;}});var r=n("c23b41b5");let i=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class a extends r.ExtensionController{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[]);}getTransforms(){}setTransforms(e){this.setExtensions([...i.slice(0,i.length-1),...e,i[i.length-1]]);}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap;}}},"6910032c":function(e,t,n){"use strict";var r=Math.log(2),i=e.exports,a=n("ab4b4a00");function o(e){return 1-Math.abs(e);}e.exports.getUnifiedMinMax=function(e,t){return i.getUnifiedMinMaxMulti([e],t);},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,r=!1,i=a.isNumber(t.width)?t.width:2,o=a.isNumber(t.size)?t.size:50,s=a.isNumber(t.min)?t.min:(n=!0,a.findMinMulti(e)),l=a.isNumber(t.max)?t.max:(r=!0,a.findMaxMulti(e)),u=(l-s)/(o-1);return n&&(s-=2*i*u),r&&(l+=2*i*u),{min:s,max:l};},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var n=a.isNumber(t.size)?t.size:50,r=a.isNumber(t.width)?t.width:2,s=i.getUnifiedMinMax(e,{size:n,width:r,min:t.min,max:t.max}),l=s.min,u=s.max-l,c=u/(n-1);if(0===u)return[{x:l,y:1}];for(var d=[],h=0;h<n;h++)d.push({x:l+h*c,y:0});var f=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n;}(o,r),p=f[r],v=f[r-1]-f[r-2],g=0;e.forEach(function(e){var t=Math.floor((e-l)/c);if(!(t+r<0)&&!(t-r>=d.length)){var n=Math.max(t-r,0),i=Math.min(t+r,d.length-1),o=n-(t-r),s=t+r-i,u=p/(p-(f[-r-1+o]||0)-(f[-r-1+s]||0));o>0&&(g+=u*(o-1)*v);var h=Math.max(0,t-r+1);a.inside(0,d.length-1,h)&&(d[h].y+=1*u*v),a.inside(0,d.length-1,t+1)&&(d[t+1].y-=2*u*v),a.inside(0,d.length-1,i+1)&&(d[i+1].y+=1*u*v);}});var m=g,y=0,b=0;return d.forEach(function(e){y+=e.y,m+=y,e.y=m,b+=m;}),b>0&&d.forEach(function(e){e.y/=b;}),d;},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach(function(e){t+=e.x*e.y;}),t;}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x;}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var t=0;return e.forEach(function(e){var n=Math.log(e.y);isFinite(n)&&(t+=e.y*n);}),Math.pow(2,t=-t/r);}};},"695f0234":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3LogNice",{enumerable:!0,get:function(){return i;}});var r=n("d10fccfd");let i=(e,t,n,i)=>{let a=e<0,o=(0,r.logs)(i,a),s=(0,r.pows)(i,a),l=e>t,u=[s(Math.floor(o(l?t:e))),s(Math.ceil(o(l?e:t)))];return l?u.reverse():u;};},"69927a8c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Graph",{enumerable:!0,get:function(){return N;}});var r=n("777fffbe")._(n("fcd40416")),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("f20c9f5f"),s=n("69a1d517"),l=n("a2c47206"),u=n("0299759a"),c=n("81401a10"),d=n("d5a5db80"),h=n("ec6e52f6"),f=n("71473486"),p=n("e00150b4"),v=n("4664c89b"),g=n("f3755373"),m=n("0a5b044f"),y=n("6dc96f78"),b=n("3c9838c6"),E=n("55aa4bfa"),x=n("7af73409"),k=n("a3d8a00c"),S=n("f5cbb4c0"),T=n("686a7098"),M=n("004f5ceb"),w=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class N extends r.default{constructor(e){var t;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new b.DataController},this.isCollapsingExpanding=!1,this.onResize=(0,i.debounce)(()=>{this.resize();},300),this._setOptions(Object.assign({},N.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&(null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"resize",this.onResize));}getOptions(){return this.options;}setOptions(e){this._setOptions(e,!1);}_setOptions(e,t){if(this.updateCanvas(e),Object.assign(this.options,(0,k.inferOptions)(e)),t){let{data:t}=e;t&&this.addData(t);return;}let{behaviors:n,combo:r,data:i,edge:a,layout:o,node:s,plugins:l,theme:u,transforms:c}=e;n&&this.setBehaviors(n),i&&this.setData(i),s&&this.setNode(s),a&&this.setEdge(a),r&&this.setCombo(r),o&&this.setLayout(o),u&&this.setTheme(u),l&&this.setPlugins(l),c&&this.setTransforms(c);}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0];}setSize(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t);}setZoomRange(e){this.options.zoomRange=e;}getZoomRange(){return this.options.zoomRange;}setNode(e){this.options.node=e,this.context.model.refreshData();}setEdge(e){this.options.edge=e,this.context.model.refreshData();}setCombo(e){this.options.combo=e,this.context.model.refreshData();}getTheme(){return this.options.theme;}setTheme(e){this.options.theme=(0,i.isFunction)(e)?e(this.getTheme()):e;}setLayout(e){this.options.layout=(0,i.isFunction)(e)?e(this.getLayout()):e;}getLayout(){return this.options.layout;}setBehaviors(e){var t;this.options.behaviors=(0,i.isFunction)(e)?e(this.getBehaviors()):e,null===(t=this.context.behavior)||void 0===t||t.setBehaviors(this.options.behaviors);}updateBehavior(e){this.setBehaviors(t=>t.map(t=>"object"==typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t));}getBehaviors(){return this.options.behaviors||[];}setPlugins(e){var t;this.options.plugins=(0,i.isFunction)(e)?e(this.getPlugins()):e,null===(t=this.context.plugin)||void 0===t||t.setPlugins(this.options.plugins);}updatePlugin(e){this.setPlugins(t=>t.map(t=>"object"==typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t));}getPlugins(){return this.options.plugins||[];}getPluginInstance(e){return this.context.plugin.getPluginInstance(e);}setTransforms(e){var t;this.options.transforms=(0,i.isFunction)(e)?e(this.getTransforms()):e,null===(t=this.context.transform)||void 0===t||t.setTransforms(this.options.transforms);}updateTransform(e){this.setTransforms(t=>t.map(t=>"object"==typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t)),this.context.model.refreshData();}getTransforms(){return this.options.transforms||[];}getData(){return this.context.model.getData();}hasNode(e){return this.context.model.hasNode(e);}hasEdge(e){return this.context.model.hasEdge(e);}hasCombo(e){return this.context.model.hasCombo(e);}getElementData(e){return Array.isArray(e)?e.map(e=>this.context.model.getElementDataById(e)):this.context.model.getElementDataById(e);}getNodeData(e){return void 0===e?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e);}getEdgeData(e){return void 0===e?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e);}getComboData(e){return void 0===e?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e);}setData(e){this.context.model.setData((0,i.isFunction)(e)?e(this.getData()):e);}addData(e){this.context.model.addData((0,i.isFunction)(e)?e(this.getData()):e);}addNodeData(e){this.context.model.addNodeData((0,i.isFunction)(e)?e(this.getNodeData()):e);}addEdgeData(e){this.context.model.addEdgeData((0,i.isFunction)(e)?e(this.getEdgeData()):e);}addComboData(e){this.context.model.addComboData((0,i.isFunction)(e)?e(this.getComboData()):e);}addChildrenData(e,t){this.context.model.addChildrenData(e,t);}updateData(e){this.context.model.updateData((0,i.isFunction)(e)?e(this.getData()):e);}updateNodeData(e){this.context.model.updateNodeData((0,i.isFunction)(e)?e(this.getNodeData()):e);}updateEdgeData(e){this.context.model.updateEdgeData((0,i.isFunction)(e)?e(this.getEdgeData()):e);}updateComboData(e){this.context.model.updateComboData((0,i.isFunction)(e)?e(this.getComboData()):e);}removeData(e){this.context.model.removeData((0,i.isFunction)(e)?e(this.getData()):e);}removeNodeData(e){this.context.model.removeNodeData((0,i.isFunction)(e)?e(this.getNodeData()):e);}removeEdgeData(e){this.context.model.removeEdgeData((0,i.isFunction)(e)?e(this.getEdgeData()):e);}removeComboData(e){this.context.model.removeComboData((0,i.isFunction)(e)?e(this.getComboData()):e);}getElementType(e){return this.context.model.getElementType(e);}getRelatedEdgesData(e,t="both"){return this.context.model.getRelatedEdgesData(e,t);}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e);}getAncestorsData(e,t){return this.context.model.getAncestorsData(e,t);}getParentData(e,t){return this.context.model.getParentData(e,t);}getChildrenData(e){return this.context.model.getChildrenData(e);}getDescendantsData(e){return this.context.model.getDescendantsData(e);}getElementDataByState(e,t){return this.context.model.getElementDataByState(e,t);}initCanvas(){return w(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;let{container:t="container",width:n,height:r,renderer:o,cursor:l,background:u,canvas:c,devicePixelRatio:d=null!==(e=globalThis.devicePixelRatio)&&void 0!==e?e:1}=this.options;if(t instanceof y.Canvas)this.context.canvas=t,l&&t.setCursor(l),o&&t.setRenderer(o),yield t.ready;else{let e=(0,i.isString)(t)?document.getElementById(t):t,h=(0,s.sizeOf)(e);this.emit(a.GraphEvent.BEFORE_CANVAS_INIT,{container:e,width:n,height:r});let f=Object.assign(Object.assign({},c),{container:e,width:n||h[0],height:r||h[1],background:u,renderer:o,cursor:l,devicePixelRatio:d}),p=new y.Canvas(f);this.context.canvas=p,yield p.ready,this.emit(a.GraphEvent.AFTER_CANVAS_INIT,{canvas:p});}});}updateCanvas(e){var t,n;let{renderer:r,cursor:o,height:s,width:l}=e,u=this.context.canvas;u&&(r&&(this.emit(a.GraphEvent.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),u.setRenderer(r),this.emit(a.GraphEvent.AFTER_RENDERER_CHANGE,{renderer:r})),o&&u.setCursor(o),((0,i.isNumber)(l)||(0,i.isNumber)(s))&&this.setSize(null!==(t=null!=l?l:this.options.width)&&void 0!==t?t:0,null!==(n=null!=s?s:this.options.height)&&void 0!==n?n:0));}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new g.BatchController(this.context)),this.context.plugin||(this.context.plugin=new S.PluginController(this.context)),this.context.viewport||(this.context.viewport=new M.ViewportController(this.context)),this.context.transform||(this.context.transform=new T.TransformController(this.context)),this.context.element||(this.context.element=new E.ElementController(this.context)),this.context.animation||(this.context.animation=new v.Animation(this.context)),this.context.layout||(this.context.layout=new x.LayoutController(this.context)),this.context.behavior||(this.context.behavior=new m.BehaviorController(this.context));}prepare(){return w(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error((0,h.format)("The graph instance has been destroyed"));return;}yield this.initCanvas(),this.initRuntime();});}render(){return w(this,void 0,void 0,function*(){if(yield this.prepare(),(0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.BEFORE_RENDER)),this.options.layout){if(!this.rendered&&(0,d.isPreLayout)(this.options.layout)){let e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([null==e?void 0:e.finished,this.autoFit()]);}else{let e=this.context.element.draw({type:"render"});yield Promise.all([null==e?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit();}}else{let e=this.context.element.draw({type:"render"});yield Promise.all([null==e?void 0:e.finished,this.autoFit()]);}this.rendered=!0,(0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.AFTER_RENDER));});}draw(){return w(this,void 0,void 0,function*(){var e;yield this.prepare(),yield null===(e=this.context.element.draw())||void 0===e?void 0:e.finished;});}layout(e){return w(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e);});}stopLayout(){this.context.layout.stopLayout();}clear(){return w(this,void 0,void 0,function*(){let{model:e,element:t}=this.context;e.setData({}),e.clearChanges(),null==t||t.clear();});}destroy(){var e;(0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.BEFORE_DESTROY));let{layout:t,animation:n,element:r,model:i,canvas:o,behavior:s,plugin:l}=this.context;null==l||l.destroy(),null==s||s.destroy(),null==t||t.destroy(),null==n||n.destroy(),null==r||r.destroy(),i.destroy(),null==o||o.destroy(),this.options={},this.context={},this.off(),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,(0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.AFTER_DESTROY));}getCanvas(){return this.context.canvas;}resize(e,t){var n;let r=(0,s.sizeOf)(null===(n=this.context.canvas)||void 0===n?void 0:n.getContainer()),o=[e||r[0],t||r[1]];if(!this.context.canvas)return;let l=this.context.canvas.getSize();(0,i.isEqual)(o,l)||((0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.BEFORE_SIZE_CHANGE,{size:o})),this.context.canvas.resize(...o),(0,u.emit)(this,new u.GraphLifeCycleEvent(a.GraphEvent.AFTER_SIZE_CHANGE,{size:o})));}fitView(e,t){return w(this,void 0,void 0,function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.fitView(e,t);});}fitCenter(e){return w(this,void 0,void 0,function*(){var t;yield null===(t=this.context.viewport)||void 0===t?void 0:t.fitCenter({animation:e});});}autoFit(){return w(this,void 0,void 0,function*(){let{autoFit:e}=this.context.options;if(e){if((0,i.isString)(e))"view"===e?yield this.fitView():"center"===e&&(yield this.fitCenter());else{let{type:t,animation:n}=e;"view"===t?yield this.fitView(e.options,n):"center"===t&&(yield this.fitCenter(n));}}});}focusElement(e,t){return w(this,void 0,void 0,function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.focusElements(Array.isArray(e)?e:[e],{animation:t});});}zoomBy(e,t,n){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:n},t);});}zoomTo(e,t,n){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:n},t);});}getZoom(){return this.context.viewport.getZoom();}rotateBy(e,t,n){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:n},t);});}rotateTo(e,t,n){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:n},t);});}getRotation(){return this.context.viewport.getRotation();}translateBy(e,t){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},t);});}translateTo(e,t){return w(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},t);});}getPosition(){return(0,f.subtract)([0,0],this.getCanvasByViewport([0,0]));}translateElementBy(e,t){return w(this,arguments,void 0,function*(e,t,n=!0){var r;let[a,o]=(0,i.isObject)(e)?[e,null==t||t]:[{[e]:t},n];Object.entries(a).forEach(([e,t])=>this.context.model.translateNodeLikeBy(e,t)),yield null===(r=this.context.element.draw({animation:o,stage:"translate"}))||void 0===r?void 0:r.finished;});}translateElementTo(e,t){return w(this,arguments,void 0,function*(e,t,n=!0){var r;let[a,o]=(0,i.isObject)(e)?[e,null==t||t]:[{[e]:t},n];Object.entries(a).forEach(([e,t])=>this.context.model.translateNodeLikeTo(e,t)),yield null===(r=this.context.element.draw({animation:o,stage:"translate"}))||void 0===r?void 0:r.finished;});}getElementPosition(e){return this.context.model.getElementPosition(e);}getElementRenderStyle(e){return(0,i.omit)(this.context.element.getElement(e).attributes,["context"]);}setElementVisibility(e,t){return w(this,arguments,void 0,function*(e,t,n=!0){var r;let[a,o]=(0,i.isObject)(e)?[e,null==t||t]:[{[e]:t},n],s={nodes:[],edges:[],combos:[]};Object.entries(a).forEach(([e,t])=>{let n=this.getElementType(e);s[`${n}s`].push({id:e,style:{visibility:t}});});let{model:l,element:u}=this.context;l.preventUpdateNodeLikeHierarchy(()=>{l.updateData(s);}),yield null===(r=u.draw({animation:o,stage:"visibility"}))||void 0===r?void 0:r.finished;});}showElement(e,t){return w(this,void 0,void 0,function*(){let n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(e=>[e,"visible"])),t);});}hideElement(e,t){return w(this,void 0,void 0,function*(){let n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(e=>[e,"hidden"])),t);});}getElementVisibility(e){var t,n;let r=this.context.element.getElement(e);return null!==(n=null===(t=null==r?void 0:r.style)||void 0===t?void 0:t.visibility)&&void 0!==n?n:"visible";}setElementZIndex(e,t){return w(this,void 0,void 0,function*(){var n;let r={nodes:[],edges:[],combos:[]};Object.entries((0,i.isObject)(e)?e:{[e]:t}).forEach(([e,t])=>{let n=this.getElementType(e);r[`${n}s`].push({id:e,style:{zIndex:t}});});let{model:a,element:o}=this.context;a.preventUpdateNodeLikeHierarchy(()=>a.updateData(r)),yield null===(n=o.draw({animation:!1,stage:"zIndex"}))||void 0===n?void 0:n.finished;});}frontElement(e){return w(this,void 0,void 0,function*(){let t=Array.isArray(e)?e:[e],{model:n}=this.context,r={};t.map(e=>{let t=n.getFrontZIndex(e);if("combo"===n.getElementType(e)){let i=n.getAncestorsData(e,a.COMBO_KEY).at(-1)||this.getComboData(e),o=[i,...n.getDescendantsData((0,c.idOf)(i))],s=t-(0,p.getZIndexOf)(i);o.forEach(e=>{r[(0,c.idOf)(e)]=this.getElementZIndex((0,c.idOf)(e))+s;});let{internal:u}=(0,l.getSubgraphRelatedEdges)(o.map(c.idOf),e=>n.getRelatedEdgesData(e));u.forEach(e=>{let t=(0,c.idOf)(e);r[t]=this.getElementZIndex(t)+s;});}else r[e]=t;}),yield this.setElementZIndex(r);});}getElementZIndex(e){return(0,p.getZIndexOf)(this.context.model.getElementDataById(e));}setElementState(e,t){return w(this,arguments,void 0,function*(e,t,n=!0){var r;let[a,o]=(0,i.isObject)(e)?[e,null==t||t]:[{[e]:t},n],s=e=>e?Array.isArray(e)?e:[e]:[],l={nodes:[],edges:[],combos:[]};Object.entries(a).forEach(([e,t])=>{let n=this.getElementType(e);l[`${n}s`].push({id:e,states:s(t)});}),this.updateData(l),yield null===(r=this.context.element.draw({animation:o,stage:"state"}))||void 0===r?void 0:r.finished;});}getElementState(e){return this.context.model.getElementState(e);}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds();}collapseElement(e){return w(this,arguments,void 0,function*(e,t=!0){let{model:n,element:r}=this.context;if((0,o.isCollapsed)(n.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;"boolean"==typeof t&&(t={animation:t,align:!1});let i=n.getElementType(e);yield this.frontElement(e),this.isCollapsingExpanding=!0,n.updateData("node"===i?{nodes:[{id:e,style:{collapsed:!0}}]}:{combos:[{id:e,style:{collapsed:!0}}]}),"node"===i?yield r.collapseNode(e,t):"combo"===i&&(yield r.collapseCombo(e,!!t.animation)),this.isCollapsingExpanding=!1;});}expandElement(e){return w(this,arguments,void 0,function*(e,t=!0){let{model:n,element:r}=this.context;if(!(0,o.isCollapsed)(n.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;"boolean"==typeof t&&(t={animation:t,align:!1});let i=n.getElementType(e);this.isCollapsingExpanding=!0,n.updateData("node"===i?{nodes:[{id:e,style:{collapsed:!1}}]}:{combos:[{id:e,style:{collapsed:!1}}]}),"node"===i?yield r.expandNode(e,t):"combo"===i&&(yield r.expandCombo(e,!!t.animation)),this.isCollapsingExpanding=!1;});}setElementCollapsibility(e,t){let n=this.getElementType(e);"node"===n?this.updateNodeData([{id:e,style:{collapsed:t}}]):"combo"===n&&this.updateComboData([{id:e,style:{collapsed:t}}]);}toDataURL(){return w(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e);});}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e);}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e);}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e);}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e);}getViewportCenter(){return this.context.viewport.getViewportCenter();}getCanvasCenter(){return this.context.viewport.getCanvasCenter();}on(e,t,n){return super.on(e,t,n);}once(e,t){return super.once(e,t);}off(e,t){return super.off(e,t);}}N.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};},"69a1d517":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"sizeOf",{enumerable:!0,get:function(){return a;}});var r=n("abe9d8d6");let i=e=>e?parseInt(e):0;function a(e){if(!e)return[0,0];let t=640,n=480,[a,o]=function(e){let t=getComputedStyle(e),n=e.clientWidth||i(t.width),r=e.clientHeight||i(t.height);return[n-(i(t.paddingLeft)+i(t.paddingRight)),r-(i(t.paddingTop)+i(t.paddingBottom))];}(e);return t=a||t,n=o||n,[Math.max((0,r.isNumber)(t)?t:1,1),Math.max((0,r.isNumber)(n)?n:1,1)];}},"69e6ac99":function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"EdgeEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).CLICK="edge:click",i.DBLCLICK="edge:dblclick",i.POINTER_OVER="edge:pointerover",i.POINTER_LEAVE="edge:pointerleave",i.POINTER_ENTER="edge:pointerenter",i.POINTER_MOVE="edge:pointermove",i.POINTER_OUT="edge:pointerout",i.POINTER_DOWN="edge:pointerdown",i.POINTER_UP="edge:pointerup",i.CONTEXT_MENU="edge:contextmenu",i.DRAG_ENTER="edge:dragenter",i.DRAG_OVER="edge:dragover",i.DRAG_LEAVE="edge:dragleave",i.DROP="edge:drop";},"6a10edb6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{hide:function(){return a;},show:function(){return i;},visibility:function(){return o;}});var r=n("d2c4aca4");function i(e){o(e,!0);}function a(e){o(e,!1);}function o(e,t){var n=t?"visible":"hidden";(0,r.traverse)(e,function(e){e.attr("visibility",n);});}},"6b0531cc":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("0e41ef48"),t),r._(n("075e742d"),t),r._(n("0989fbc2"),t),r._(n("9e11f2c1"),t),r._(n("c3c0b51a"),t);},"6b44cd45":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("3376c710"),t),r._(n("01a29d03"),t);},"6bc9d096":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ArrangeEdgeZIndex:function(){return r.ArrangeEdgeZIndex;},AssignColorByBranch:function(){return i.AssignColorByBranch;},CollapseExpandReactNode:function(){return a.CollapseExpandReactNode;},MapEdgeLineWidth:function(){return o.MapEdgeLineWidth;},TranslateReactNodeOrigin:function(){return s.TranslateReactNodeOrigin;}});var r=n("ec4cc423"),i=n("28c22ab1"),a=n("6f4bec2f"),o=n("0c1957bf"),s=n("7ee75eb3");},"6bff9c72":function(e,t,n){"use strict";var r,i,a=n("852bbaa9")._;n.d(t,"__esModule",{value:!0}),n.d(t,"render",{enumerable:!0,get:function(){return d;}});var o=n("852bbaa9")._(n("3e6b097d")),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},l=this&&this.__generator||function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1];},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this;}),o;function s(s){return function(l){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue;}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break;}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break;}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break;}i[2]&&a.ops.pop(),a.trys.pop();continue;}s=t.call(e,a);}catch(e){s=[6,e],r=0;}finally{n=i=0;}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0};}([s,l]);};}},u="__rc_react_root__",c=!1;function d(e,t){return s(this,void 0,void 0,function(){return l(this,function(d){switch(d.label){case 0:return[4,function(){return s(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:if(c)return[2];c=!0,t.label=1;case 1:if(t.trys.push([1,6,,7]),!(parseInt((o.version||"").split(".")[0],10)>=18))return[3,3];return[4,Promise.all([n.ensure("4c800fdf")]).then(n.dr(a,n.bind(n,"4c800fdf")))];case 2:return r=t.sent().createRoot,[3,5];case 3:return[4,Promise.all([n.ensure("26d5522d")]).then(n.dr(a,n.bind(n,"26d5522d")))];case 4:i=(e=t.sent()).render,e.unmountComponentAtNode,t.label=5;case 5:return[3,7];case 6:return console.warn("[react-render] Failed to load ReactDOM API:",t.sent()),[3,7];case 7:return[2];}});});}()];case 1:return(d.sent(),r)?(t[u]||(t[u]=r(t)),t[u].render(e)):!function(e,t){if(!i)throw Error("ReactDOM.render not available");i(e,t);}(e,t),[2];}});});}},"6c1b3ec8":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"HoverActivateChain",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.HoverActivate{getActiveIds(e){let{model:t,graph:n}=this.context,r=e.target.id,i=n.getElementType(r),a=[r];if("edge"===i){let e=t.getEdgeDatum(r);this.collectChainNodes(e.source,"in",a),this.collectChainNodes(e.target,"out",a);}else"node"===i&&this.collectChainNodes(r,"both",a);return n.frontElement(a),a;}collectChainNodes(e,t,n){let{model:i}=this.context;i.getRelatedEdgesData(e,t).forEach(e=>{n.includes((0,r.idOf)(e))||n.push((0,r.idOf)(e)),n.includes(e.source)||(n.push(e.source),this.collectChainNodes(e.source,"in",n)),n.includes(e.target)||(n.push(e.target),this.collectChainNodes(e.target,"out",n));});}}},"6c8609ef":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ErrorBoundary",{enumerable:!0,get:function(){return o;}});var r,i=n("852bbaa9")._(n("3e6b097d")),a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);})(e,t);},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e;}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n);}),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return"function"==typeof n?n(e):n||i.default.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",e.message);},t;}return a(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e};},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null;},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):i.default.createElement(i.Fragment,null,this.props.children);},t;}(i.default.Component);},"6d675f9a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"hull",{enumerable:!0,get:function(){return c;}});var r=n("064434f0"),i=n("976e6f7d"),a=n("b60caef5"),o=n("3a145a5a");function s(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);}function l(e,t,n){let r=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]];return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(s(e,t)*s(e,n));}function u(e,t){for(let n=0;n<t.length-1;n++){let r=[t[n],t[n+1]];if((e[0][0]!==r[0][0]||e[0][1]!==r[0][1])&&(e[0][0]!==r[1][0]||e[0][1]!==r[1][1])&&(0,o.segmentsIntersect)(e[0],e[1],r[0],r[1]))return!0;}return!1;}function c(e,t,n){let o=function(e){let t=[e[0]],n=e[0];for(let r=1;r<e.length;r++){let i=e[r];(n[0]!==i[0]||n[1]!==i[1])&&t.push(i),n=i;}return t;}(r.formatUtil.toXy(e,n).sort(function(e,t){return e[0]-t[0]||e[1]-t[1];}));if(o.length<4){let e=o.concat([o[0]]);return n?r.formatUtil.fromXy(e,n):e;}let c=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let a=e.length-1;a>=0;a--)e[a][0]<t&&(t=e[a][0]),e[a][1]<n&&(n=e[a][1]),e[a][0]>r&&(r=e[a][0]),e[a][1]>i&&(i=e[a][1]);return[r-t,i-n];}(o),f=[c[0]*h,c[1]*h],p=(0,a.monotoneConvexHull2D)(o).reverse().map(e=>o[e]);p.push(p[0]);let v=o.filter(function(e){return 0>p.indexOf(e);}),g=Math.ceil(1/(o.length/(c[0]*c[1]))),m=function e(t,n,r,i,a){let o=!1;for(let e=0;e<t.length-1;e++){let c,h,f;let p=[t[e],t[e+1]],v=p[0][0]+","+p[0][1]+","+p[1][0]+","+p[1][1];if(s(p[0],p[1])<n||a.has(v))continue;let g=0,m=[Math.min(p[0][0],p[1][0]),Math.min(p[0][1],p[1][1]),Math.max(p[0][0],p[1][0]),Math.max(p[0][1],p[1][1])];do c=(m=i.extendBbox(m,g))[2]-m[0],h=m[3]-m[1],f=function(e,t,n){let r=null,i=d,a=d,o,s;for(let c=0;c<t.length;c++)o=l(e[0],e[1],t[c]),s=l(e[1],e[0],t[c]),o>i&&s>a&&!u([e[0],t[c]],n)&&!u([e[1],t[c]],n)&&(i=o,a=s,r=t[c]);return r;}(p,i.rangePoints(m),t),g++;while(null===f&&(r[0]>c||r[1]>h))c>=r[0]&&h>=r[1]&&a.add(v),null!==f&&(t.splice(e+1,0,f),i.removePoint(f),o=!0);}return o?e(t,n,r,i,a):t;}(p,Math.pow(t||20,2),f,(0,i.grid)(v,g),new Set);return n?r.formatUtil.fromXy(m,n):m;}let d=Math.cos(90/(180/Math.PI)),h=.6;},"6d758b89":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"HTML",{enumerable:!0,get:function(){return r.HTML;}});var r=n("f7bb74fc");},"6dc96f78":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Canvas",{enumerable:!0,get:function(){return f;}});var r=n("a566da36"),i=n("0c02ee7e"),a=n("8c02e8bf"),o=n("abe9d8d6"),s=n("8a0aecd6"),l=n("8bdd800c"),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let d=["main"],h=["background","main","label","transient"];class f{getConfig(){return this.config;}getLayer(e="main"){return this.extends.layers[e]||this.getLayers().main;}getLayers(){return this.extends.layers;}getRenderer(e){return this.extends.renderers[e];}getCamera(e="main"){return this.getLayer(e).getCamera();}getRoot(e="main"){return this.getLayer(e).getRoot();}getContextService(e="main"){return this.getLayer(e).getContextService();}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e);}get document(){return this.getLayer().document;}get context(){return this.getLayer().context;}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);let t=this.config,{renderer:n,background:i,cursor:a,enableMultiLayer:o}=t,s=c(t,["renderer","background","cursor","enableMultiLayer"]),l=o?h:d,u=p(n,l),f=Object.fromEntries(l.map(e=>{let t=new r.Canvas(Object.assign(Object.assign({},s),{supportsMutipleCanvasesInOneContainer:o,renderer:u[e],background:o?"background"===e?i:void 0:i}));return[e,t];}));v(f),this.extends={config:this.config,renderer:n,renderers:u,layers:f};}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready));}resize(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach(n=>{let r=n.getCamera(),i=r.getPosition(),a=r.getFocalPoint();n.resize(e,t),r.setPosition(i),r.setFocalPoint(a);});}getBounds(e){return(0,s.getCombinedBBox)(Object.values(this.getLayers()).map(t=>e?t.getRoot().childNodes.find(t=>t.classList.includes(e)):t.getRoot()).filter(e=>(null==e?void 0:e.childNodes.length)>0).map(e=>e.getBounds()));}getContainer(){let e=this.extends.config.container;return"string"==typeof e?document.getElementById(e):e;}getSize(){return[this.extends.config.width||0,this.extends.config.height||0];}appendChild(e,t){var n;let r=(null===(n=e.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(r).appendChild(e,t);}setRenderer(e){if(e===this.extends.renderer)return;let t=p(e,this.config.enableMultiLayer?h:d);this.extends.renderers=t,Object.entries(t).forEach(([e,t])=>this.getLayer(e).setRenderer(t)),v(this.getLayers());}getCanvasByViewport(e){return(0,l.parsePoint)(this.getLayer().viewport2Canvas((0,l.toPointObject)(e)));}getViewportByCanvas(e){return(0,l.parsePoint)(this.getLayer().canvas2Viewport((0,l.toPointObject)(e)));}getViewportByClient(e){return(0,l.parsePoint)(this.getLayer().client2Viewport((0,l.toPointObject)(e)));}getClientByViewport(e){return(0,l.parsePoint)(this.getLayer().viewport2Client((0,l.toPointObject)(e)));}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e));}getCanvasByClient(e){let t=this.getLayer(),n=t.client2Viewport((0,l.toPointObject)(e));return(0,l.parsePoint)(t.viewport2Canvas(n));}toDataURL(){return u(this,arguments,void 0,function*(e={}){let t=globalThis.devicePixelRatio||1,{mode:n="viewport"}=e,a=c(e,["mode"]),[l,d,h,f]=[0,0,0,0];if("viewport"===n)[h,f]=this.getSize();else if("overall"===n){let e=this.getBounds(),t=(0,s.getBBoxSize)(e);[l,d]=e.min,[h,f]=t;}let p=(0,o.createDOM)('<div id="virtual-image"></div>'),v=new r.Canvas({width:h,height:f,renderer:new i.Renderer,devicePixelRatio:t,container:p,background:this.extends.config.background});yield v.ready,v.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),v.appendChild(this.getRoot().cloneNode(!0));let g=this.getLayer("label").getRoot().cloneNode(!0),m=v.viewport2Canvas({x:0,y:0}),y=this.getCanvasByViewport([0,0]);g.translate([y[0]-m.x,y[1]-m.y]),g.scale(1/this.getCamera().getZoom()),v.appendChild(g),v.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));let b=this.getCamera(),E=v.getCamera();if("viewport"===n)E.setZoom(b.getZoom()),E.setPosition(b.getPosition()),E.setFocalPoint(b.getFocalPoint());else if("overall"===n){let[e,t,n]=E.getPosition(),[r,i,a]=E.getFocalPoint();E.setPosition([e+l,t+d,n]),E.setFocalPoint([r+l,i+d,a]);}let x=v.getContextService();return new Promise(e=>{v.addEventListener(r.CanvasEvent.RERENDER,()=>u(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,300)),e((yield x.toDataURL(a)));}));});});}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy();});}}function p(e,t){return Object.fromEntries(t.map(t=>{let n=(null==e?void 0:e(t))||new i.Renderer;return n instanceof i.Renderer&&n.setConfig({enableDirtyRectangleRendering:!1}),"main"===t?n.registerPlugin(new a.Plugin({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[t,n];}));}function v(e){Object.entries(e).forEach(([e,t])=>{let n=t.getContextService().getDomElement();(null==n?void 0:n.style)&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,"main"!==e&&(n.style.pointerEvents="none")),(null==n?void 0:n.parentElement)&&(n.parentElement.style.display="grid",n.parentElement.style.isolation="isolate");});}},"6f097fb0":function(e,t,n){"use strict";function r(e,t,n){let r=e=>{(!n||n(e))&&(e.style.visibility=t);};e.forEach(e=>{r(e);});}n.d(t,"__esModule",{value:!0}),n.d(t,"setVisibility",{enumerable:!0,get:function(){return r;}});},"6f4bec2f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CollapseExpandReactNode",{enumerable:!0,get:function(){return d;}});var r=n("777fffbe"),i=n("38871e26"),a=n("c5eb7168"),o=r._(n("3e6b097d")),s=n("02c619b4"),l=n("de433e3a"),u=n("66366487");let{PlusMinusIcon:c}=s.CollapseExpandIcon;class d extends i.BaseTransform{static defaultOptions={enable:!0,trigger:"icon",direction:"out",iconRender:e=>o.default.createElement(c,{isCollapsed:e}),iconPlacement:"bottom",iconOffsetX:0,iconOffsetY:0,iconClassName:"",iconStyle:{},refreshLayout:!1};constructor(e,t){super(e,Object.assign({},d.defaultOptions,t));}afterLayout(){let{graph:e,element:t,model:n}=this.context,{nodes:r=[],edges:s=[]}=e.getData(),{enable:c,...d}=this.options;r.forEach(e=>{let t=(0,i.idOf)(e);if(e.children&&e.children.length>0)return;let r=(0,u.getNeighborNodeIds)(t,s,this.options.direction);0!==r.length&&n.updateNodeData([{id:t,children:r}]);});let h=e.getOptions().node;if((0,a.has)(h,"style.component")){let t=(0,a.get)(h,"style.component");(0,a.set)(h,"style.component",n=>{if(!("function"==typeof c?c(n):c))return t.call(e,n);let r=(0,l.withCollapsibleNode)(t);return o.default.createElement(r,{data:n,graph:e,...d});});}e.setNode(h),e.draw();}}},"6f503a08":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Graphin",{enumerable:!0,get:function(){return c;}});var r=n("777fffbe"),i=n("852bbaa9")._(n("3e6b097d")),a=n("1a081974"),o=r._(n("a0b011ba")),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e;}).apply(this,arguments);},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;},u=(0,i.forwardRef)(function(e,t){var n=e.style,r=e.children,u=l(e,["style","children"]),c=(0,o.default)(u),d=c.graph,h=c.containerRef,f=c.isReady;(0,i.useImperativeHandle)(t,function(){return d;},[d]);var p=s({height:"inherit",position:"relative"},n);return r?i.default.createElement(a.GraphinContext.Provider,{value:{graph:d,isReady:f}},i.default.createElement("div",{ref:h,style:p},f&&r)):i.default.createElement("div",{ref:h,style:p});}),c=(0,i.memo)(u);},"6fd77dfd":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"HoverActivateNeighbors",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.HoverActivate{getActiveIds(e){let{model:t,graph:n}=this.context,i=e.target.id,a=n.getElementType(i),o=[i];if("edge"===a){let e=t.getEdgeDatum(i);o.push(e.source,e.target);}else"node"===a&&o.push(...t.getRelatedEdgesData(i).map(r.idOf));return n.frontElement(o),o;}}},"7000340e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getBlockColor:function(){return i;},getNextTickValue:function(){return a;}});var r=n("18f14020");function i(e,t,n){var r=Array.from(t),i=e.length;return Array(i).fill(0).reduce(function(t,n,a){var o=r[a%r.length];return t+" ".concat(e[a],":").concat(o).concat(a<i-1?" ".concat(e[a+1],":").concat(o):"");},"l(".concat("horizontal"===n?"0":"270",")"));}function a(e,t){var n=(0,r.__read)(function(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i];}return[t,t];}(e,t),2),i=n[0],a=n[1];return{tick:t>(i+a)/2?a:i,range:[i,a]};}},"708b49e9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"FixElementSize",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("81401a10"),o=n("61beb903"),s=n("32576f8a"),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class u extends s.BaseBehavior{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.isZoomEvent=e=>!!(e.data&&"scale"in e.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=e=>l(this,void 0,void 0,function*(){if(!this.validate(e))return;let{graph:t}=this.context,{state:n,nodeFilter:r,edgeFilter:i,comboFilter:a}=this.options,o=(n?t.getElementDataByState("node",n):t.getNodeData()).filter(r),s=(n?t.getElementDataByState("edge",n):t.getEdgeData()).filter(i),l=(n?t.getElementDataByState("combo",n):t.getComboData()).filter(a),u=this.isZoomEvent(e)?this.zoom=Math.max(.01,Math.min(e.data.scale,10)):this.zoom,c=[...o,...l];c.length>0&&c.forEach(e=>this.fixNodeLike(e,u)),this.updateRelatedEdges(),s.length>0&&s.forEach(e=>this.fixEdge(e,u));}),this.cachedStyles=new Map,this.getOriginalFieldValue=(e,t,n)=>{var r;let i=this.cachedStyles.get(e)||[],a=(null===(r=i.find(e=>e.shape===t))||void 0===r?void 0:r.style)||{};return n in a||(a[n]=t.attributes[n],this.cachedStyles.set(e,[...i.filter(e=>e.shape!==t),{shape:t,style:a}])),a[n];},this.scaleEntireElement=(e,t,n)=>{t.setLocalScale(1/n);let r=this.cachedStyles.get(e)||[];r.push({shape:t}),this.cachedStyles.set(e,r);},this.scaleSpecificShapes=(e,t,n)=>{let i=(0,o.getDescendantShapes)(e);(Array.isArray(n)?n:[n]).forEach(n=>{let{shape:a,fields:o}=n,s="function"==typeof a?a(i):e.getShape(a);if(s){if(!o){this.scaleEntireElement(e.id,s,t);return;}o.forEach(n=>{let i=this.getOriginalFieldValue(e.id,s,n);(0,r.isNumber)(i)&&(s.style[n]=i/t);});}});},this.skipIfExceedViewport=e=>{let{viewport:t}=this.context;return!(null==t?void 0:t.isInViewport(e.getRenderBounds(),!1,30));},this.fixNodeLike=(e,t)=>{let n=(0,a.idOf)(e),{element:r,model:i}=this.context,o=r.getElement(n);if(!o||this.skipIfExceedViewport(o))return;i.getRelatedEdgesData(n).forEach(e=>this.relatedEdgeToUpdate.add((0,a.idOf)(e)));let s=this.options[o.type];if(!s){this.scaleEntireElement(n,o,t);return;}this.scaleSpecificShapes(o,t,s);},this.fixEdge=(e,t)=>{let n=(0,a.idOf)(e),r=this.context.element.getElement(n);if(!r||this.skipIfExceedViewport(r))return;let i=this.options.edge;if(!i){r.style.transformOrigin="center",this.scaleEntireElement(n,r,t);return;}this.scaleSpecificShapes(r,t,i);},this.updateRelatedEdges=()=>{let{element:e}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(t=>{let n=e.getElement(t);null==n||n.update({});}),this.relatedEdgeToUpdate.clear();},this.resetTransform=e=>l(this,void 0,void 0,function*(){var t;null!==(t=e.data)&&void 0!==t&&t.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}));}),this.bindEvents();}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(e=>{e.forEach(({shape:e,style:t})=>{if((0,r.isEmpty)(t))e.setLocalScale(1);else{if(this.options.state)return;Object.entries(t).forEach(([t,n])=>e.style[t]=n);}});});let{graph:e,element:t}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(t=>t&&"node"===e.getElementType(t));if(n.length>0){let r=new Set;n.forEach(t=>{e.getRelatedEdgesData(t).forEach(e=>r.add((0,a.idOf)(e)));}),r.forEach(e=>{let n=null==t?void 0:t.getElement(e);null==n||n.update({});});}}}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.AFTER_DRAW,this.resetTransform),e.on(i.GraphEvent.AFTER_TRANSFORM,this.fixElementSize);}unbindEvents(){let{graph:e}=this.context;e.off(i.GraphEvent.AFTER_DRAW,this.resetTransform),e.off(i.GraphEvent.AFTER_TRANSFORM,this.fixElementSize);}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}destroy(){this.unbindEvents(),super.destroy();}}u.defaultOptions={enable:e=>e.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};},"70a1457a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Ellipse",{enumerable:!0,get:function(){return l;}});var r=n("a566da36"),i=n("95550d14"),a=n("8bdd800c"),o=n("cdd49f4a"),s=n("ec2f02a5");class l extends s.BaseNode{constructor(e){super((0,o.mergeOptions)({style:l.defaultStyleProps},e));}drawKeyShape(e,t){return this.upsert("key",r.Ellipse,this.getKeyStyle(e),t);}getKeyStyle(e){let t=super.getKeyStyle(e),[n,r]=this.getSize(e);return Object.assign(Object.assign({},t),{rx:n/2,ry:r/2});}getIconStyle(e){let t=super.getIconStyle(e),{rx:n,ry:r}=this.getShape("key").attributes,a=2*Math.min(+n,+r)*i.ICON_SIZE_RATIO;return!!t&&Object.assign({width:a,height:a},t);}getIntersectPoint(e,t=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(e,n,t);}}l.defaultStyleProps={size:[45,35]};},71473486:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{add:function(){return a;},angle:function(){return v;},cross:function(){return c;},distance:function(){return h;},divide:function(){return l;},dot:function(){return u;},manhattanDistance:function(){return f;},mod:function(){return m;},multiply:function(){return s;},normalize:function(){return p;},perpendicular:function(){return g;},rad:function(){return E;},rotate:function(){return x;},scale:function(){return d;},subtract:function(){return o;},toVector2:function(){return y;},toVector3:function(){return b;}});var r=n("bb430c3e");let i=[0,0,0];function a(e,t){return e.map((e,n)=>e+t[n]);}function o(e,t){return e.map((e,n)=>e-t[n]);}function s(e,t){return"number"==typeof t?e.map(e=>e*t):e.map((e,n)=>e*t[n]);}function l(e,t){return"number"==typeof t?e.map(e=>e/t):e.map((e,n)=>e/t[n]);}function u(e,t){return e.reduce((e,n,r)=>e+n*t[r],0);}function c(e,t){let n=b(e),r=b(t);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]];}function d(e,t){return e.map(e=>e*t);}function h(e,t){return Math.sqrt(e.reduce((e,n,r)=>e+Math.pow(n-t[r]||0,2),0));}function f(e,t){return e.reduce((e,n,r)=>e+Math.abs(n-t[r]),0);}function p(e){let t=e.reduce((e,t)=>e+Math.pow(t,2),0);return e.map(e=>e/Math.sqrt(t));}function v(e,t,n=!1){let r=e[0]*t[1]-e[1]*t[0],a=Math.acos(s(e,t).reduce((e,t)=>e+t,0)/(h(e,i)*h(t,i)));return n&&r<0&&(a=2*Math.PI-a),a;}function g(e,t=!0){return t?[-e[1],e[0]]:[e[1],-e[0]];}function m(e,t){return e.map(e=>e%t);}function y(e){return[e[0],e[1]];}function b(e){return(0,r.isVector2)(e)?[e[0],e[1],0]:e;}function E(e){let[t,n]=e;return t||n?Math.atan2(n,t):0;}function x(e,t){let[n,r]=e;if(t%360==0)return[n,r];let i=t*Math.PI/180,a=Math.cos(i),o=Math.sin(i);return[n*a-r*o,n*o+r*a];}},"72b8e67b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Layout",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("9225b8d3"),o=n("01a29d03"),s=n("cbbb1352"),l=n("6329a0e2"),u=function(e){function t(t){var n=e.call(this,t)||this;n.layoutEvents=[i.ElementEvent.BOUNDS_CHANGED,i.ElementEvent.INSERTED,i.ElementEvent.REMOVED],n.$margin=(0,l.parseSeriesAttr)(0),n.$padding=(0,l.parseSeriesAttr)(0);var r=t.style||{},a=r.margin,o=r.padding;return n.margin=void 0===a?0:a,n.padding=void 0===o?0:o,n.isMutationObserved=!0,n.bindEvents(),n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin;},set:function(e){this.$margin=(0,l.parseSeriesAttr)(e);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding;},set:function(e){this.$padding=(0,l.parseSeriesAttr)(e);},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var e=this.attributes,t=e.x,n=e.y,i=e.width,a=e.height,s=(0,r.__read)(this.$margin,4),l=s[0],u=s[1],c=s[2],d=s[3];return new o.BBox((void 0===t?0:t)-d,(void 0===n?0:n)-l,i+d+u,a+l+c);},t.prototype.appendChild=function(t,n){return t.isMutationObserved=!0,e.prototype.appendChild.call(this,t,n),t;},t.prototype.getAvailableSpace=function(){var e=this.attributes,t=e.width,n=e.height,i=(0,r.__read)(this.$padding,4),a=i[0],s=i[1],l=i[2],u=i[3],c=(0,r.__read)(this.$margin,4),d=c[0],h=c[3];return new o.BBox(u+h,a+d,t-u-s,n-a-l);},t.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some(function(e){return!e.isConnected;}))try{var e=this.attributes,t=e.x,n=e.y;this.style.transform="translate(".concat(t,", ").concat(n,")");var r=(0,s.calcLayout)(this.getAvailableSpace(),this.children.map(function(e){return e.getBBox();}),this.attributes);this.children.forEach(function(e,t){var n=r[t],i=n.x,a=n.y;e.style.transform="translate(".concat(i,", ").concat(a,")");});}catch(e){}},t.prototype.bindEvents=function(){var e=this;this.layoutEvents.forEach(function(t){e.addEventListener(t,function(t){t.target&&(t.target.isMutationObserved=!0,e.layout());});});},t.prototype.attributeChangedCallback=function(e,t,n){"margin"===e?this.margin=n:"padding"===e&&(this.padding=n),this.layout();},t;}(a.Group);},"72e66713":function(e,t,n){"use strict";function r(e,t){let n=t<e?t:e,r=e>t?e:t;return e=>Math.min(Math.max(n,e),r);}n.d(t,"__esModule",{value:!0}),n.d(t,"createClamp",{enumerable:!0,get:function(){return r;}});},"730f5624":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IndentedEdge",{enumerable:!0,get:function(){return r.IndentedEdge;}});var r=n("788d4e3c");},"73c47a5d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{applyToText:function(){return u;},getFont:function(){return s;},measureTextWidth:function(){return o;},textOf:function(){return l;}});var r,i,a=n("f7bb74fc"),o=(0,n("abe9d8d6").memoize)(function(e,t){var n=t.fontSize,o=t.fontFamily,s=t.fontWeight,l=t.fontStyle,u=t.fontVariant;return i?i(e,n):(r||(r=a.runtime.offscreenCanvasCreator.getOrCreateContext(void 0)),r.font=[l,u,s,"".concat(n,"px"),o].join(" "),r.measureText(e).width);},function(e,t){return[e,Object.values(t||s(e)).join()].join("");},4096),s=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,a=e.style.fontSize;return{fontSize:a="object"==typeof a?a.value:a,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i};};function l(e){return"text"===e.nodeName?e:"g"===e.nodeName&&1===e.children.length&&"text"===e.children[0].nodeName?e.children[0]:null;}function u(e,t){var n=l(e);n&&n.attr(t);}},"7426bc92":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("16bb9463");function a(e,t,n,a){var o,s,l=t.optionalAngles,u=t.margin,c=t.recoverWhenFailed,d=e.map(function(e){return e.getLocalEulerAngles();}),h=function(t){return e.forEach(function(e,n){var r=Array.isArray(t)?t[n]:t;a.rotate(e,+r);});};try{for(var f=(0,r.__values)(void 0===l?[0,45,90]:l),p=f.next();!p.done;p=f.next()){var v=p.value;if(h(v),(0,i.boundTest)(e,n,u).length<1)return;}}catch(e){o={error:e};}finally{try{p&&!p.done&&(s=f.return)&&s.call(f);}finally{if(o)throw o.error;}}(void 0===c||c)&&h(d);}},74355096:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getNodeSide:function(){return a;},getRelativeSide:function(){return i;}});var r=n("38871e26");let i=(0,n("c5eb7168").memoize)((e,t)=>{if(!t)return"center";let n=(0,r.positionOf)(e)[0];return(0,r.positionOf)(t)[0]>n?"left":"right";},(e,t)=>t?[(0,r.positionOf)(e),(0,r.positionOf)(t)].flat().join("-"):"center"),a=(e,t)=>{let n=e.getParentData((0,r.idOf)(t),"tree");return i(t,n);};},74892272:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Polygon",{enumerable:!0,get:function(){return r.Polygon;}});var r=n("f7bb74fc");},"74c76ae2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("0c04709d"),t);},"751c3a20":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseCombo",{enumerable:!0,get:function(){return m;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("8a0aecd6"),o=n("81401a10"),s=n("28792030"),l=n("2a08964b"),u=n("9da99c33"),c=n("db863a29"),d=n("cdd49f4a"),h=n("71473486"),f=n("cfda2b31"),p=n("988eb09c"),v=n("133675a0"),g=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class m extends f.BaseNode{constructor(e){super((0,d.mergeOptions)({style:m.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes);}getKeySize(e){let{collapsed:t,childrenNode:n=[]}=e;return 0===n.length?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e);}getEmptyKeySize(e){let{padding:t,collapsedSize:n}=e,[r,i,a,o]=(0,s.parsePadding)(t);return(0,h.add)((0,c.parseSize)(n),[o+i,r+a,0]);}getCollapsedKeySize(e){return(0,c.parseSize)(e.collapsedSize);}getExpandedKeySize(e){let t=this.getContentBBox(e);return[(0,a.getBBoxWidth)(t),(0,a.getBBoxHeight)(t),0];}getContentBBox(e){let{childrenNode:t=[],padding:n}=e,i=t.map(e=>this.context.element.getElement(e)).filter(Boolean);if(0===i.length){let t=new r.AABB,{x:n=0,y:i=0,size:a}=e,[o,s]=(0,c.parseSize)(a);return t.setMinMax([n-o/2,i-s/2,0],[n+o/2,i+s/2,0]),t;}let o=(0,a.getCombinedBBox)(i.map(e=>e.getBounds()));return n?(0,a.getExpandedBBox)(o,n):o;}drawCollapsedMarkerShape(e,t){let n=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",p.Icon,n,t),(0,v.connectImage)(this);}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;let t=(0,u.subStyleProps)(this.getGraphicStyle(e),"collapsedMarker"),{type:n}=t,r=g(t,["type"]),i=this.getShape("key"),[a,o]=(0,l.getXYByPlacement)(i.getLocalBounds(),"center"),s=Object.assign(Object.assign({},r),{x:a,y:o});return n&&Object.assign(s,{text:this.getCollapsedMarkerText(n,e)}),s;}getCollapsedMarkerText(e,t){let{childrenData:n=[]}=t,{model:r}=this.context;return"descendant-count"===e?r.getDescendantsData(this.id).length.toString():"child-count"===e?n.length.toString():"node-count"===e?r.getDescendantsData(this.id).filter(e=>"node"===r.getElementType((0,o.idOf)(e))).length.toString():(0,i.isFunction)(e)?e(n):"";}getComboPosition(e){let{x:t=0,y:n=0,collapsed:r,childrenData:i=[]}=e;if(0===i.length)return[+t,+n,0];if(r){let{model:e}=this.context,r=e.getDescendantsData(this.id).filter(t=>!e.isCombo((0,o.idOf)(t)));if(r.length>0&&r.some(l.hasPosition)){let e=r.reduce((e,t)=>(0,h.add)(e,(0,l.positionOf)(t)),[0,0,0]);return(0,h.divide)(e,r.length);}return[+t,+n,0];}return this.getContentBBox(e).center;}getComboStyle(e){let[t,n]=this.getComboPosition(e);return{x:t,y:n,transform:[["translate",t,n]]};}updateComboPosition(e){let t=this.getComboStyle(e);Object.assign(this.style,t);let{x:n,y:r}=t;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),(0,v.dispatchPositionChange)(this);}render(e,t=this){super.render(e,t),this.drawCollapsedMarkerShape(e,t);}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes);}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this);}animate(e,t){let n=super.animate(this.attributes.collapsed?e:e.map(e=>{var{x:t,y:n,z:r,transform:i}=e;return g(e,["x","y","z","transform"]);}),t);return n?new Proxy(n,{set:(e,t,n)=>("currentTime"===t&&Promise.resolve().then(()=>this.onframe()),Reflect.set(e,t,n))}):n;}}m.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};},"753b8411":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Circle",{enumerable:!0,get:function(){return r.Circle;}});var r=n("f7bb74fc");},"756fcc0b":function(e,t,n){"use strict";function r(e){var t,n,r,i=e||1;function a(e,a){++t>i&&(r=n,o(1),++t),n[e]=a;}function o(e){t=0,n=Object.create(null),e||(r=Object.create(null));}return o(),{clear:o,has:function(e){return void 0!==n[e]||void 0!==r[e];},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(a(e,t),t):void 0;},set:function(e,t){void 0!==n[e]?n[e]=t:a(e,t);}};}n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return r;}});},"758f7ec5":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"PlaceRadialLabels",{enumerable:!0,get:function(){return u;}});var r=n("a566da36"),i=n("81401a10"),a=n("2a08964b"),o=n("db863a29"),s=n("71473486"),l=n("eb4593bd");class u extends l.BaseTransform{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t));}get ref(){return this.context.model.getRootsData()[0];}afterLayout(){var e;let t=(0,a.positionOf)(this.ref),{graph:n,model:l}=this.context;null===(e=l.getData().nodes)||void 0===e||e.forEach(e=>{var u;if((0,i.idOf)(e)===(0,i.idOf)(this.ref))return;let c=(0,s.rad)((0,s.subtract)((0,a.positionOf)(e),t)),d=Math.abs(c)>Math.PI/2,h=!e.children||0===e.children.length,f=(0,i.idOf)(e),p=null===(u=this.context.element)||void 0===u?void 0:u.getElement(f);if(!p||!p.isVisible())return;let v=(h?1:-1)*((0,o.parseSize)(n.getElementRenderStyle(f).size)[0]/2+this.options.offset),g=[["translate",v*Math.cos(c),v*Math.sin(c)],["rotate",d?(0,r.rad2deg)(c)+180:(0,r.rad2deg)(c)]];l.updateNodeData([{id:(0,i.idOf)(e),style:{labelTextAlign:d===h?"right":"left",labelTextBaseline:"middle",labelTransform:g}}]);}),n.draw();}}u.defaultOptions={offset:5};},"75c1a80f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseGraph",{enumerable:!0,get:function(){return l;}});var r=n("852bbaa9"),i=n("8011b6f5"),a=n("95fe0007"),o=n("c5eb7168"),s=r._(n("3e6b097d"));let l=(0,s.forwardRef)(({children:e,...t},n)=>{let{containerStyle:r,className:l,onInit:u,onReady:c,onDestroy:d,errorTemplate:h,loading:f,loadingTemplate:p,...v}=t,g=(0,s.useRef)(null);return(0,s.useImperativeHandle)(n,()=>g.current),s.default.createElement(i.ErrorBoundary,{errorTemplate:h},f&&s.default.createElement(i.ChartLoading,{loadingTemplate:p}),!(0,o.isEmpty)(v.data)&&s.default.createElement(a.Graphin,{ref:e=>{g.current=e;},className:l,style:r,options:v,onInit:u,onReady:c,onDestroy:d},e));});},"75e2eb53":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Option",{enumerable:!0,get:function(){return l;}});var r=n("18f14020"),i=n("c086f503"),a=n("9225b8d3"),o=n("01a29d03"),s=n("38242230"),l=function(e){function t(n){var r=e.call(this,(0,s.deepAssign)({},t.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new a.Rect({})),r.label=r.background.appendChild(new a.Group({})),r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return(0,o.parseSeriesAttr)(this.style.padding);},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(){var e=this.style,t=e.label,n=e.value,r=(0,o.subStyleProps)(this.attributes,"label");(0,o.select)(this.label).maybeAppend(".label",function(){return(0,o.renderExtDo)(t);}).attr("className","label").styles(r),this.label.attr("__data__",n);},t.prototype.renderBackground=function(){var e=this.label.getBBox(),t=(0,r.__read)(this.padding,4),n=t[0],i=t[1],a=t[2],s=t[3],l=e.width,u=e.height,c=u+n+a,d=(0,o.subStyleProps)(this.attributes,"background"),h=this.style,f=h.width,p=h.height,v=h.selected;this.background.attr((0,r.__assign)((0,r.__assign)({},d),{width:Math.max(l+s+i,void 0===f?0:f),height:Math.max(c,void 0===p?0:p),fill:v?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(s,", ").concat((c-u)/2,")")});},t.prototype.render=function(){this.renderLabel(),this.renderBackground();},t.prototype.bindEvents=function(){var e=this;this.addEventListener("pointerenter",function(){e.style.selected||e.background.attr("fill",e.hoverColor);}),this.addEventListener("pointerleave",function(){e.style.selected||e.background.attr("fill",e.style.backgroundFill);});var t=this;this.addEventListener("click",function(){var n=e.style,r=n.label,i=n.value,a=n.onClick;null==a||a(i,{label:r,value:i},t);});},t.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},t;}(i.Component);},"75f3951e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"catmullRom2Bezier",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("4359a82a");function a(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var a,o,s,l=!!t,u=[],c=0,d=e.length;c<d;c+=2)u.push([e[c],e[c+1]]);for(var h=function(e,t,n,a){var o,s,l,u,c,d,h=[],f=!!a,p=[1/0,1/0],v=[-1/0,-1/0];if(f){p=(o=(0,r.__read)(a,2))[0],v=o[1];for(var g=0,m=e.length;g<m;g+=1){var y=e[g];p=(0,i.min)(p,y),v=(0,i.max)(v,y);}}for(var g=0,b=e.length;g<b;g+=1){var y=e[g];if(0!==g||n){if(g!==b-1||n){s=e[[g?g-1:b-1,g-1][n?0:1]],l=e[n?(g+1)%b:g+1];var E=[0,0];E=(0,i.sub)(l,s),E=(0,i.scale)(E,.4);var x=(0,i.distance)(y,s),k=(0,i.distance)(y,l),S=x+k;0!==S&&(x/=S,k/=S);var T=(0,i.scale)(E,-x),M=(0,i.scale)(E,k);c=(0,i.add)(y,T),u=(0,i.add)(y,M),u=(0,i.min)(u,(0,i.max)(l,y)),u=(0,i.max)(u,(0,i.min)(l,y)),T=(0,i.sub)(u,y),T=(0,i.scale)(T,-x/k),c=(0,i.add)(y,T),c=(0,i.min)(c,(0,i.max)(s,y)),c=(0,i.max)(c,(0,i.min)(s,y)),M=(0,i.sub)(y,c),M=(0,i.scale)(M,k/x),u=(0,i.add)(y,M),f&&(c=(0,i.max)(c,p),c=(0,i.min)(c,v),u=(0,i.max)(u,p),u=(0,i.min)(u,v)),h.push(d),h.push(c),d=u;}else c=y,h.push(d),h.push(c);}else d=y;}return n&&h.push(h.shift()),h;}(u,0,l,n),f=u.length,p=[],c=0;c<f-1;c+=1)a=h[2*c],o=h[2*c+1],s=u[c+1],p.push(["C",a[0],a[1],o[0],o[1],s[0],s[1]]);return l&&(a=h[f],o=h[f+1],s=(0,r.__read)(u,1)[0],p.push(["C",a[0],a[1],o[0],o[1],s[0],s[1]])),p;}},"76cbbee7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ArrowCountIcon:function(){return r.ArrowCountIcon;},PlusMinusIcon:function(){return i.PlusMinusIcon;}});var r=n("098733a7"),i=n("e695f7e6");},77581958:function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n=!1);var r=e.getBBox(),i=t/Math.max(r.width,r.height);return n&&(e.style.transform="scale(".concat(i,")")),i;}n.d(t,"__esModule",{value:!0}),n.d(t,"scaleToPixel",{enumerable:!0,get:function(){return r;}});},"788d4e3c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IndentedEdge",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.Polyline{getControlPoints(e){let[t,n]=this.getEndpoints(e,!1),[r]=t,[,i]=n;return[[r,i]];}}},"79e82817":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Layout",{enumerable:!0,get:function(){return r.Layout;}});var r=n("72b8e67b");},"7a3afe31":function(e,t,n){"use strict";function r(e,t,n,r,i){return(void 0===r&&(r=!0),void 0===i&&(i=function(e){e.node().removeChildren();}),e)?n(t):(r&&i(t),null);}n.d(t,"__esModule",{value:!0}),n.d(t,"ifShow",{enumerable:!0,get:function(){return r;}});},"7a48cea7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Star",{enumerable:!0,get:function(){return o;}});var r=n("95550d14"),i=n("966f7de2"),a=n("90e17978");class o extends a.Polygon{constructor(e){super(e);}getInnerR(e){return e.innerR||3*this.getOuterR(e)/8;}getOuterR(e){return Math.min(...this.getSize(e))/2;}getPoints(e){return(0,i.getStarPoints)(this.getOuterR(e),this.getInnerR(e));}getIconStyle(e){let t=super.getIconStyle(e),n=2*this.getInnerR(e)*r.ICON_SIZE_RATIO;return!!t&&Object.assign({width:n,height:n},t);}getPortXY(e,t){let{placement:n="top"}=t,r=this.getShape("key").getLocalBounds(),a=(0,i.getStarPorts)(this.getOuterR(e),this.getInnerR(e));return(0,i.getPortXYByPlacement)(r,n,a,!1);}}},"7af73409":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"LayoutController",{enumerable:!0,get:function(){return E;}});var r=n("440e77c8"),i=n("c7d04fb1"),a=n("abe9d8d6"),o=n("6b0531cc"),s=n("8a0441b2"),l=n("d1f78d64"),u=n("00d6b05d"),c=n("f20c9f5f"),d=n("966f7de2"),h=n("0299759a"),f=n("aa8f6430"),p=n("81401a10"),v=n("d5a5db80"),g=n("ec6e52f6"),m=n("d88e9b7d"),y=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},b=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class E{get presetOptions(){return{animation:!!(0,u.getAnimationOptions)(this.context.options,!0)};}get options(){let{options:e}=this.context;return e.layout;}constructor(e){this.instances=[],this.context=e;}getLayoutInstance(){return this.instances;}preLayout(e){return y(this,void 0,void 0,function*(){var t,n,r,i;let{graph:a,model:s}=this.context,{add:l}=e;(0,h.emit)(a,new h.GraphLifeCycleEvent(o.GraphEvent.BEFORE_LAYOUT,{type:"pre"}));let u=yield null===(t=this.context.layout)||void 0===t?void 0:t.simulate();null===(n=null==u?void 0:u.nodes)||void 0===n||n.forEach(e=>{let t=(0,p.idOf)(e),n=l.nodes.get(t);s.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style);}),null===(r=null==u?void 0:u.edges)||void 0===r||r.forEach(e=>{let t=(0,p.idOf)(e),n=l.edges.get(t);s.syncEdgeDatum(e),n&&Object.assign(n.style,e.style);}),null===(i=null==u?void 0:u.combos)||void 0===i||i.forEach(e=>{let t=(0,p.idOf)(e),n=l.combos.get(t);s.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style);}),(0,h.emit)(a,new h.GraphLifeCycleEvent(o.GraphEvent.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e);});}postLayout(){return y(this,arguments,void 0,function*(e=this.options){if(!e)return;let t=Array.isArray(e)?e:[e],{graph:n}=this.context;(0,h.emit)(n,new h.GraphLifeCycleEvent(o.GraphEvent.BEFORE_LAYOUT,{type:"post"}));for(let e=0;e<t.length;e++){let r=t[e],i=this.getLayoutData(r),a=Object.assign(Object.assign({},this.presetOptions),r);(0,h.emit)(n,new h.GraphLifeCycleEvent(o.GraphEvent.BEFORE_STAGE_LAYOUT,{options:a,index:e}));let s=yield this.stepLayout(i,a,e);(0,h.emit)(n,new h.GraphLifeCycleEvent(o.GraphEvent.AFTER_STAGE_LAYOUT,{options:a,index:e})),r.animation||this.updateElementPosition(s,!1);}(0,h.emit)(n,new h.GraphLifeCycleEvent(o.GraphEvent.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post");});}transformDataAfterLayout(e,t){Object.values(this.context.transform.getTransformInstance()).forEach(n=>n.afterLayout(e,t));}simulate(){return y(this,arguments,void 0,function*(e=this.options){if(!e)return{};let t=Array.isArray(e)?e:[e],n={};for(let e=0;e<t.length;e++){let r=t[e],i=this.getLayoutData(r);n=yield this.stepLayout(i,Object.assign(Object.assign(Object.assign({},this.presetOptions),r),{animation:!1}),e);}return n;});}stepLayout(e,t,n){return y(this,void 0,void 0,function*(){return(0,v.isTreeLayout)(t)?yield this.treeLayout(e,t,n):yield this.graphLayout(e,t,n);});}graphLayout(e,t,n){return y(this,void 0,void 0,function*(){let{animation:r,enableWorker:a,iterations:o=300}=t,s=this.initGraphLayout(t);if(!s)return{};if(this.instances[n]=s,this.instance=s,a)return this.supervisor=new i.Supervisor(s.graphData2LayoutModel(e),s.instance,{iterations:o}),(0,v.layoutMapping2GraphData)((yield this.supervisor.execute()));if((0,i.isLayoutWithIterations)(s))return r?yield s.execute(e,{onTick:e=>{this.updateElementPosition(e,!1);}}):(s.execute(e),s.stop(),s.tick(o));let l=yield s.execute(e);if(r){let e=this.updateElementPosition(l,r);yield null==e?void 0:e.finished;}return l;});}treeLayout(e,t,n){return y(this,void 0,void 0,function*(){let{type:n,animation:i}=t,a=(0,l.getExtension)("layout",n);if(!a)return{};let{nodes:s=[],edges:u=[]}=e,c=new r.Graph({nodes:s.map(e=>({id:(0,p.idOf)(e),data:e.data||{}})),edges:u.map(e=>({id:(0,p.idOf)(e),source:e.source,target:e.target,data:e.data||{}}))});(0,f.createTreeStructure)(c);let d={nodes:[],edges:[]},h={nodes:[],edges:[]};c.getRoots(o.TREE_KEY).forEach(e=>{(0,m.dfs)(e,e=>{e.children=c.getSuccessors(e.id);},e=>c.getSuccessors(e.id),"TB");let n=a(e,t),{x:r,y:i,z:o=0}=n;(0,m.dfs)(n,e=>{let{id:t,x:n,y:a,z:s=0}=e;d.nodes.push({id:t,style:{x:r,y:i,z:o}}),h.nodes.push({id:t,style:{x:n,y:a,z:s}});},e=>e.children,"TB");});let v=this.inferTreeLayoutOffset(h);if(x(h,v),i){x(d,v),this.updateElementPosition(d,!1);let e=this.updateElementPosition(h,i);yield null==e?void 0:e.finished;}return h;});}inferTreeLayoutOffset(e){var t;let[n,r]=[1/0,-1/0],[i,a]=[1/0,-1/0];null===(t=e.nodes)||void 0===t||t.forEach(e=>{let{x:t=0,y:o=0}=e.style||{};n=Math.min(n,t),r=Math.max(r,t),i=Math.min(i,o),a=Math.max(a,o);});let{canvas:o}=this.context,s=o.getSize(),[l,u]=o.getCanvasByViewport([0,0]),[c,d]=o.getCanvasByViewport(s);return n>=l&&r<=c&&i>=u&&a<=d?[0,0]:[(l+c)/2-(n+r)/2,(u+d)/2-(i+a)/2];}stopLayout(){this.instance&&(0,i.isLayoutWithIterations)(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0);}getLayoutData(e){let{nodeFilter:t=()=>!0,comboFilter:n=()=>!0,preLayout:r=!1,isLayoutInvisibleNodes:i=!1}=e,{nodes:a,edges:s,combos:l}=this.context.model.getData(),{element:u,model:h}=this.context,f=e=>u.getElement(e),v=r?e=>{var n;return!(!i&&((null===(n=e.style)||void 0===n?void 0:n.visibility)==="hidden"||h.getAncestorsData(e.id,o.TREE_KEY).some(c.isCollapsed)||h.getAncestorsData(e.id,o.COMBO_KEY).some(c.isCollapsed)))&&t(e);}:e=>{let n=f((0,p.idOf)(e));return!(!n||(0,d.isToBeDestroyed)(n))&&t(e);},g=a.filter(v),m=l.filter(n),y=new Map(g.map(e=>[(0,p.idOf)(e),e]));return m.forEach(e=>y.set((0,p.idOf)(e),e)),{nodes:g,edges:s.filter(({source:e,target:t})=>y.has(e)&&y.has(t)),combos:m};}initGraphLayout(e){var t;let{element:n,viewport:r}=this.context,{type:i,enableWorker:o,animation:u,iterations:c}=e,d=b(e,["type","enableWorker","animation","iterations"]),[h,f]=r.getCanvasSize(),p=null!==(t=null==e?void 0:e.nodeSize)&&void 0!==t?t:e=>{let t=null==n?void 0:n.getElement(e.id);return t?t.attributes.size:null==n?void 0:n.getElementComputedStyle("node",e).size;},m=(0,l.getExtension)("layout",i);if(!m)return g.print.warn(`The layout of ${i} is not registered.`);let y=new(Object.getPrototypeOf(m.prototype)===s.BaseLayout.prototype?m:(0,v.layoutAdapter)(m,this.context))(this.context),E={nodeSize:p,width:h,height:f,center:[h/2,f/2]};switch(y.id){case"d3-force":case"d3-force-3d":Object.assign(E,{center:{x:h/2,y:f/2,z:0}});}return(0,a.deepMix)(y.options,E,d),y;}updateElementPosition(e,t){let{model:n,element:r}=this.context;return r?(n.updateData(e),r.draw({animation:t,silence:!0})):null;}destroy(){var e;this.stopLayout(),this.context={},null===(e=this.supervisor)||void 0===e||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0;}}let x=(e,t)=>{var n;let[r,i]=t;null===(n=e.nodes)||void 0===n||n.forEach(e=>{if(e.style){let{x:t=0,y:n=0}=e.style;e.style.x=t+r,e.style.y=n+i;}else e.style={x:r,y:i};});};},"7c1f9bc2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"FlowGraph",{enumerable:!0,get:function(){return l;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("aeeab442"),s=n("3ef355b1");let l=(0,r.forwardRef)(({children:e,...t},n)=>{let l=(0,r.useMemo)(()=>{let{direction:e="horizontal",labelField:n,...r}=t;return(0,o.mergeOptions)(a.COMMON_OPTIONS,s.DEFAULT_OPTIONS,(0,s.getFlowGraphOptions)({direction:e,labelField:n}),r);},[t]);return r.default.createElement(i.BaseGraph,{...l,ref:n},e);});},"7d264fff":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Ellipse",{enumerable:!0,get:function(){return r.Ellipse;}});var r=n("f7bb74fc");},"7e456020":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Tooltip",{enumerable:!0,get:function(){return l;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("c086f503"),o=n("01a29d03"),s=n("447ad7b5"),l=function(e){function t(t){var n,r,i=this,a=null===(r=null===(n=t.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,o=(0,s.getClassNames)(a);return(i=e.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:(0,s.getDefaultTooltipStyle)(a)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element;},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element;},Object.defineProperty(t.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,t=e.data,n=e.template;return t.map(function(e,t){var a=e.name,o=e.color,s=e.index,l=(0,r.__rest)(e,["name","color","index"]),u=(0,r.__assign)({name:void 0===a?"":a,color:void 0===o?"black":o,index:null!=s?s:t},l);return(0,i.createDOM)((0,i.substitute)(n.item,u));});},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){this.renderHTMLTooltipElement(),this.updatePosition();},t.prototype.destroy=function(){var t;null===(t=this.element)||void 0===t||t.remove(),e.prototype.destroy.call(this);},t.prototype.show=function(e,t){var n=this;if(void 0!==e&&void 0!==t){var r="hidden"===this.element.style.visibility,i=function(){n.attributes.x=null!=e?e:n.attributes.x,n.attributes.y=null!=t?t:n.attributes.y,n.updatePosition();};r?this.closeTransition(i):i();}this.element.style.visibility="visible";},t.prototype.hide=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.attributes.enterable&&this.isCursorEntered(e,t)||(this.element.style.visibility="hidden");},t.prototype.initShape=function(){var e=this.attributes.template;this.element=(0,i.createDOM)(e.container),this.id&&this.element.setAttribute("id",this.id);},t.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&("string"==typeof e?this.element.innerHTML=e:(0,o.replaceChildren)(this.element,e));}},t.prototype.renderHTMLTooltipElement=function(){var e,t,n=this.attributes,r=n.template,i=n.title,a=n.enterable,l=n.style,u=n.content,c=(0,s.getClassNames)(r.prefixCls),d=this.element;if(this.element.style.pointerEvents=a?"auto":"none",u)this.renderCustomContent();else{i?(d.innerHTML=r.title,d.getElementsByClassName(c.TITLE)[0].innerHTML=i):null===(t=null===(e=d.getElementsByClassName(c.TITLE))||void 0===e?void 0:e[0])||void 0===t||t.remove();var h=this.HTMLTooltipItemsElements,f=document.createElement("ul");f.className=c.LIST,(0,o.replaceChildren)(f,h);var p=this.element.querySelector(".".concat(c.LIST));p?p.replaceWith(f):d.appendChild(f);}(0,o.applyStyleSheet)(d,l);},t.prototype.getRelativeOffsetFromCursor=function(e){var t=this.attributes,n=t.position,i=t.offset,a=(e||n).split("-"),o={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},s=this.elementSize,l=s.width,u=s.height,c=[-l/2,-u/2];return a.forEach(function(e){var t=(0,r.__read)(c,2),n=t[0],a=t[1],s=(0,r.__read)(o[e],2),d=s[0],h=s[1];c=[n+(l/2+i[0])*d,a+(u/2+i[1])*h];}),c;},t.prototype.setOffsetPosition=function(e){var t=(0,r.__read)(e,2),n=t[0],i=t[1],a=this.attributes,o=a.x,s=a.y,l=a.container,u=l.x,c=l.y;this.element.style.left="".concat(+(void 0===o?0:o)+u+n,"px"),this.element.style.top="".concat(+(void 0===s?0:s)+c+i,"px");},t.prototype.updatePosition=function(){var e=this.attributes.showDelay,t=Date.now();this.timestamp>0&&t-this.timestamp<(void 0===e?60:e)||(this.timestamp=t,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())));},t.prototype.autoPosition=function(e){var t=(0,r.__read)(e,2),n=t[0],i=t[1],a=this.attributes,o=a.x,s=a.y,l=a.bounding,u=a.position;if(!l)return[n,i];var c=this.element,d=c.offsetWidth,h=c.offsetHeight,f=(0,r.__read)([+o+n,+s+i],2),p=f[0],v=f[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},m=l.x,y=l.y,b={left:p<m,right:p+d>m+l.width,top:v<y,bottom:v+h>y+l.height},E=[];u.split("-").forEach(function(e){b[e]?E.push(g[e]):E.push(e);});var x=E.join("-");return this.getRelativeOffsetFromCursor(x);},t.prototype.isCursorEntered=function(e,t){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,s=n.height;return new o.BBox(r,i,a,s).isPointIn(e,t);}return!1;},t.prototype.closeTransition=function(e){var t=this,n=this.element.style.transition;this.element.style.transition="none",e(),setTimeout(function(){t.element.style.transition=n;},10);},t.tag="tooltip",t;}(a.Component);},"7ed4a1e7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseLayout",{enumerable:!0,get:function(){return r;}});class r{constructor(e,t){this.context=e,this.options=t||{};}}},"7ee75eb3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"TranslateReactNodeOrigin",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.BaseTransform{beforeDraw(e){let{graph:t,element:n}=this.context,{add:{nodes:i},update:{nodes:a}}=e;return[...i.values(),...a.values()].forEach(e=>{n.computeElementDefaultStyle("node",{graph:t,datum:e});let i=n.getDefaultStyle(e.id),[a,o]=(0,r.parseSize)(i.size);e.style||(e.style={}),e.style.dx=-a/2,e.style.dy=-o/2;}),e;}}},"7f47860b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Poptip",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("c086f503"),o=n("01a29d03"),s=n("0ed6ab13"),l=n("8b3de171"),u=function(e){function t(n){var r=e.call(this,(0,i.deepMix)({style:{id:s.POPTIP_ID}},t.defaultOptions,n))||this;return r.visibility="visible",r.map=new Map,r.domStyles="",r.initShape(),r.render(r.attributes,r),r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"visible",{get:function(){return"visible"===this.visibility;},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){this.visibility=this.style.visibility,this.updatePoptipElement();},t.prototype.update=function(e){this.attr((0,i.deepMix)({},this.style,e)),this.render(this.attributes,this);},t.prototype.bind=function(e,t){var n=this;if(e){var a=this.style.text,o=function(o){var s=e,u=n.style,c=a;if(t){var d="function"==typeof t?t.call(null,o):t,h=d.html,f=d.target,p=(0,r.__rest)(d,["html","target"]);u=(0,i.assign)({},n.style,p),(f||!1===f)&&(s=f),"string"==typeof h&&(c=h);}var v=u.position,g=u.arrowPointAtCenter,m=u.follow,y=u.offset;if(s){var b=o.clientX,E=o.clientY,x=(0,r.__read)((0,l.getPositionXY)(b,E,s,v,g,m),2),k=x[0],S=x[1];n.showTip(k,S,{text:c,position:v,offset:y});}else n.hideTip();},s=function(){n.hideTip();};e.addEventListener("mousemove",o),e.addEventListener("mouseleave",s),this.map.set(e,[o,s]);}},t.prototype.unbind=function(e){if(this.map.has(e)){var t=(0,r.__read)(this.map.get(e)||[],2),n=t[0],i=t[1];n&&e.removeEventListener("mousemove",n),i&&e.removeEventListener("mouseleave",i),this.map.delete(e);}},t.prototype.clear=function(){this.container.innerHTML="";},t.prototype.destroy=function(){var t,n=this;(0,r.__spreadArray)([],(0,r.__read)(this.map.keys()),!1).forEach(function(e){return n.unbind(e);}),null===(t=this.container)||void 0===t||t.remove(),e.prototype.destroy.call(this);},t.prototype.showTip=function(e,t,n){var r=(0,i.get)(n,"text");if((!r||"string"==typeof r)&&(this.applyStyles(),e&&t&&n)){var a=n.offset,o=n.position;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(e,t,a),"string"==typeof r){var l=this.container.querySelector(".".concat(s.CLASS_NAME.TEXT));l&&(l.innerHTML=r);}this.visibility="visible",this.container.style.visibility="visible";}},t.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden";},t.prototype.getContainer=function(){return this.container;},t.prototype.getClassName=function(){var e=this.style.containerClassName;return"".concat(s.CLASS_NAME.CONTAINER).concat(e?" ".concat(e):"");},t.prototype.initShape=function(){var e=this,t=this.style.id;this.container=(0,l.getSingleTonElement)(t),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return e.showTip();}),this.container.addEventListener("mouseleave",function(){return e.hideTip();});},t.prototype.updatePoptipElement=function(){var e=this.container;this.clear();var t=this.style,n=t.id,r=t.template,a=t.text;this.container.setAttribute("id",n),this.container.className=this.getClassName();var o='<span class="'.concat(s.CLASS_NAME.ARROW,'"></span>');e.innerHTML=o,(0,i.isString)(r)?e.innerHTML+=r:r&&(0,i.isElement)(r)&&e.appendChild(r),a&&(e.getElementsByClassName(s.CLASS_NAME.TEXT)[0].textContent=a),this.applyStyles(),this.container.style.visibility=this.visibility;},t.prototype.applyStyles=function(){var e=Object.entries((0,o.deepAssign)({},s.POPTIP_STYLE,this.style.domStyles)).reduce(function(e,t){var n=(0,r.__read)(t,2),i=n[0],a=Object.entries(n[1]).reduce(function(e,t){var n=(0,r.__read)(t,2),i=n[0],a=n[1];return"".concat(e).concat(i,": ").concat(a,";");},"");return"".concat(e).concat(i,"{").concat(a,"}");},"");if(this.domStyles!==e){this.domStyles=e;var t=this.container.querySelector("style");t&&this.container.removeChild(t),(t=document.createElement("style")).innerHTML=e,this.container.appendChild(t);}},t.prototype.setOffsetPosition=function(e,t,n){void 0===n&&(n=this.style.offset);var i=(0,r.__read)(n,2),a=i[0],o=i[1];this.container.style.left="".concat(e+(void 0===a?0:a),"px"),this.container.style.top="".concat(t+(void 0===o?0:o),"px");},t.tag="poptip",t.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:s.POPTIP_STYLE,template:'<div class="'.concat(s.CLASS_NAME.TEXT,'"></div>')}},t;}(a.Component);},"7f9242cd":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ArrangeDrawOrder:function(){return r.ArrangeDrawOrder;},BaseTransform:function(){return i.BaseTransform;},CollapseExpandCombo:function(){return a.CollapseExpandCombo;},CollapseExpandNode:function(){return o.CollapseExpandNode;},GetEdgeActualEnds:function(){return s.GetEdgeActualEnds;},MapNodeSize:function(){return l.MapNodeSize;},PlaceRadialLabels:function(){return u.PlaceRadialLabels;},ProcessParallelEdges:function(){return c.ProcessParallelEdges;},UpdateRelatedEdge:function(){return d.UpdateRelatedEdge;}});var r=n("06c9e148"),i=n("eb4593bd"),a=n("444b815c"),o=n("c43476b3"),s=n("deb7ab63"),l=n("5385f695"),u=n("758f7ec5"),c=n("c7141940"),d=n("90bb0ebe");},"8011b6f5":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{measureTextHeight:function(){return i.measureTextHeight;},measureTextWidth:function(){return i.measureTextWidth;}});var r=n("d1751d7c");r._(n("cc7a743a"),t),r._(n("22f2a901"),t);var i=n("29b470de");},"80a1fe75":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Contextmenu",{enumerable:!0,get:function(){return s;}});var r=n("0d562788"),i=n("82c10466"),a=n("63963aeb"),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class s extends r.BasePlugin{constructor(e,t){super(e,Object.assign({},s.defaultOptions,t)),this.targetElement=null,this.onTriggerEvent=e=>{var t;null===(t=e.preventDefault)||void 0===t||t.call(e),this.show(e);},this.onMenuItemClick=e=>{let{onClick:t,trigger:n}=this.options;if(e.target instanceof HTMLElement&&e.target.className.includes("g6-contextmenu-li")){let n=e.target.getAttribute("value");null==t||t(n,e.target,this.targetElement),this.hide();}"click"!==n&&this.hide();},this.initElement(),this.update(t);}initElement(){this.$element=(0,i.createPluginContainer)("contextmenu",!1,{zIndex:"99"});let{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),(0,i.insertDOM)("g6-contextmenu-css","style",{},a.CONTEXTMENU_CSS,document.head);}show(e){return o(this,void 0,void 0,function*(){let{enable:t,offset:n}=this.options;if("function"==typeof t&&!t(e)||!t){this.hide();return;}let r=yield this.getDOMContent(e);r instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(r)):this.$element.innerHTML=r;let i=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-i.left+n[0]}px`,this.$element.style.top=`${e.client.y-i.top+n[1]}px`,this.$element.style.display="block",this.targetElement=e.target;});}hide(){this.$element.style.display="none",this.targetElement=null;}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove();}getDOMContent(e){return o(this,void 0,void 0,function*(){let{getContent:t,getItems:n}=this.options;return n?(0,a.getContentFromItems)((yield n(e))):yield t(e);});}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.on(`canvas:${t}`,this.onTriggerEvent),e.on(`node:${t}`,this.onTriggerEvent),e.on(`edge:${t}`,this.onTriggerEvent),e.on(`combo:${t}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick);}unbindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.off(`canvas:${t}`,this.onTriggerEvent),e.off(`node:${t}`,this.onTriggerEvent),e.off(`edge:${t}`,this.onTriggerEvent),e.off(`combo:${t}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick);}}s.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};},"81401a10":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{idOf:function(){return i;},idsOf:function(){return o;},parentIdOf:function(){return a;}});var r=n("ec6e52f6");function i(e){if(void 0!==e.id)return e.id;if(void 0!==e.source&&void 0!==e.target)return`${e.source}-${e.target}`;throw Error((0,r.format)("The datum does not have available id."));}function a(e){return e.combo;}function o(e,t){let n={nodes:(e.nodes||[]).map(i),edges:(e.edges||[]).map(i),combos:(e.combos||[]).map(i)};return t?Object.values(n).flat():n;}},82714042:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ReactNode",{enumerable:!0,get:function(){return r.ReactNode;}});var r=n("340b05e9");n("855ee20a");},"82c10466":function(e,t,n){"use strict";function r(e,t=!0,n){let i=document.createElement("div");return i.setAttribute("class",`g6-${e}`),Object.assign(i.style,{position:"absolute",display:"block"}),t&&Object.assign(i.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(i.style,n),i;}function i(e,t="div",n={},r="",a=document.body){let o=document.getElementById(e);o&&o.remove();let s=document.createElement(t);return s.innerHTML=r,s.id=e,Object.assign(s.style,n),a.appendChild(s),s;}n.d(t,"__esModule",{value:!0}),n.e(t,{createPluginContainer:function(){return r;},insertDOM:function(){return i;}});},"82f544b2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CLASSNAME_SUFFIX_MAP",{enumerable:!0,get:function(){return r;}});var r={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"};},"82f69751":function(e,t,n){"use strict";var r,i,a,o,s,l;function u(e,t,n,r,i,a){let o=n-e,s=r-t,l=i-e,u=a-t,c=l*o+u*s,d=0;d=c<=0?0:(c=(l=o-l)*o+(u=s-u)*s)<=0?0:c*c/(o*o+s*s);let h=l*l+u*u-d;return h<0?0:h;}function c(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r);}function d(e){let t=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),r=Math.min(e.y1,e.y2),i=Math.max(e.y1,e.y2);return{x:t,y:r,x2:n,y2:i,width:n-t,height:i-r};}n.d(t,"__esModule",{value:!0}),n.e(t,{BubbleSets:function(){return L;},Line:function(){return h;},Rectangle:function(){return y;},default:function(){return L;},defaultOptions:function(){return P;}});class h{constructor(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r;}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2;}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2);}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`;}static from(e){return new h(e.x1,e.y1,e.x2,e.y2);}cuts(e,t){return this.y1!==this.y2&&(!(t<this.y1)||!(t<=this.y2))&&(!(t>this.y1)||!(t>=this.y2))&&(!(e>this.x1)||!(e>=this.x2))&&(e<this.x1&&e<=this.x2||e<=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1));}distSquare(e,t){return u(this.x1,this.y1,this.x2,this.y2,e,t);}ptClose(e,t,n){if(this.x1<this.x2){if(e<this.x1-n||e>this.x2+n)return!1;}else if(e<this.x2-n||e>this.x1+n)return!1;if(this.y1<this.y2){if(t<this.y1-n||t>this.y2+n)return!1;}else if(t<this.y2-n||t>this.y1+n)return!1;return!0;}}(o=r||(r={}))[o.POINT=1]="POINT",o[o.PARALLEL=2]="PARALLEL",o[o.COINCIDENT=3]="COINCIDENT",o[o.NONE=4]="NONE";class f{constructor(e,t=0,n=0){this.state=e,this.x=t,this.y=n;}}function p(e,t){let n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),i=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){let t=n/a,o=i/a;return 0<=t&&t<=1&&0<=o&&o<=1?new f(r.POINT,e.x1+t*(e.x2-e.x1),e.y1+t*(e.y2-e.y1)):new f(r.NONE);}return new f(0===n||0===i?r.COINCIDENT:r.PARALLEL);}function v(e,t){let n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){let e=n/i,t=r/i;if(0<=e&&e<=1&&0<=t&&t<=1)return e;}return Number.POSITIVE_INFINITY;}function g(e,t,n){let r=new Set;return e.width<=0?(r.add(i.LEFT),r.add(i.RIGHT)):t<e.x?r.add(i.LEFT):t>e.x+e.width&&r.add(i.RIGHT),e.height<=0?(r.add(i.TOP),r.add(i.BOTTOM)):n<e.y?r.add(i.TOP):n>e.y+e.height&&r.add(i.BOTTOM),r;}function m(e,t){let n=t.x1,r=t.y1,a=t.x2,o=t.y2,s=Array.from(g(e,a,o));if(0===s.length)return!0;let l=g(e,n,r);for(;0!==l.size;){for(let e of s)if(l.has(e))return!1;if(l.has(i.RIGHT)||l.has(i.LEFT)){let t=e.x;l.has(i.RIGHT)&&(t+=e.width),r+=(t-n)*(o-r)/(a-n),n=t;}else{let t=e.y;l.has(i.BOTTOM)&&(t+=e.height),n+=(t-r)*(a-n)/(o-r),r=t;}l=g(e,n,r);}return!0;}(s=i||(i={}))[s.LEFT=0]="LEFT",s[s.TOP=1]="TOP",s[s.RIGHT=2]="RIGHT",s[s.BOTTOM=3]="BOTTOM";class y{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r;}get x2(){return this.x+this.width;}get y2(){return this.y+this.height;}get cx(){return this.x+this.width/2;}get cy(){return this.y+this.height/2;}get radius(){return Math.max(this.width,this.height)/2;}static from(e){return new y(e.x,e.y,e.width,e.height);}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height;}clone(){return new y(this.x,this.y,this.width,this.height);}add(e){let t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x+e.width),i=Math.max(this.y2,e.y+e.height);this.x=t,this.y=n,this.width=r-t,this.height=i-n;}addPoint(e){let t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x),i=Math.max(this.y2,e.y);this.x=t,this.y=n,this.width=r-t,this.height=i-n;}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`;}draw(e){e.rect(this.x,this.y,this.width,this.height);}containsPt(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2;}get area(){return this.width*this.height;}intersects(e){return!(this.area<=0)&&!(e.width<=0)&&!(e.height<=0)&&e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2;}distSquare(e,t){if(this.containsPt(e,t))return 0;let n=g(this,e,t);return n.has(i.TOP)?n.has(i.LEFT)?c(e,t,this.x,this.y):n.has(i.RIGHT)?c(e,t,this.x2,this.y):(this.y-t)*(this.y-t):n.has(i.BOTTOM)?n.has(i.LEFT)?c(e,t,this.x,this.y2):n.has(i.RIGHT)?c(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):n.has(i.LEFT)?(this.x-e)*(this.x-e):n.has(i.RIGHT)?(e-this.x2)*(e-this.x2):0;}}class b{constructor(e,t,n){this.cx=e,this.cy=t,this.radius=n;}get x(){return this.cx-this.radius;}get x2(){return this.cx+this.radius;}get width(){return 2*this.radius;}get y(){return this.cy-this.radius;}get y2(){return this.cy+this.radius;}get height(){return 2*this.radius;}static from(e){return new b(e.cx,e.cy,e.radius);}containsPt(e,t){return c(this.cx,this.cy,e,t)<this.radius*this.radius;}distSquare(e,t){let n=c(this.cx,this.cy,e,t);if(n<this.radius*this.radius)return 0;let r=Math.sqrt(n)-this.radius;return r*r;}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI);}}class E{constructor(e,t=0,n=0,r=0,i=0,a=10,o=10,s=new Float32Array(Math.max(0,a*o)).fill(0)){this.pixelGroup=e,this.i=t,this.j=n,this.pixelX=r,this.pixelY=i,this.width=a,this.height=o,this.area=s;}createSub(e,t){return new E(this.pixelGroup,e.x,e.y,t.x,t.y,e.width,e.height);}static fromPixelRegion(e,t){return new E(t,0,0,e.x,e.y,Math.ceil(e.width/t),Math.ceil(e.height/t));}copy(e,t){return new E(this.pixelGroup,this.scaleX(t.x),this.scaleY(t.y),t.x,t.y,e.width,e.height,e.area);}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e;}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e;}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup));}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup));}scale(e){let t=this.scaleX(e.x),n=this.scaleY(e.y);return new y(t,n,this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup))-t,this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup))-n);}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX);}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY);}addPadding(e,t){let n=Math.ceil(t/this.pixelGroup),r=this.boundX(e.x-n),i=this.boundY(e.y-n);return new y(r,i,this.boundX(e.x2+n)-r,this.boundY(e.y2+n)-i);}get(e,t){return e<0||t<0||e>=this.width||t>=this.height?Number.NaN:this.area[e+t*this.width];}inc(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=n);}set(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=n);}incArea(e,t){if(e.width<=0||e.height<=0||0===t)return;let n=this.width,r=e.width,i=Math.max(0,e.i),a=Math.max(0,e.j),o=Math.min(e.i+e.width,n),s=Math.min(e.j+e.height,this.height);if(!(s<=0)&&!(o<=0)&&!(i>=n)&&!(s>=this.height))for(let l=a;l<s;l++){let a=(l-e.j)*r,s=l*n;for(let n=i;n<o;n++){let r=e.area[n-e.i+a];0!==r&&(this.area[n+s]+=t*r);}}}fill(e){this.area.fill(e);}fillArea(e,t){let n=e.x+e.y*this.width;for(let r=0;r<e.height;r++){let i=n+r*this.width;this.area.fill(t,i,i+e.width);}}fillHorizontalLine(e,t,n,r){let i=e+t*this.width;this.area.fill(r,i,i+n);}fillVerticalLine(e,t,n,r){let i=e+t*this.width;for(let e=0;e<n;e++)this.area[i+e*this.width]=r;}clear(){this.area.fill(0);}toString(){let e="";for(let t=0;t<this.height;t++){let n=t*this.width;for(let t=0;t<this.width;t++)e+=this.area[n+t].toFixed(1).padStart(6)+" ";e+="\n";}return e;}draw(e,t=!0){if(this.width<=0||this.height<=0)return;e.save(),t&&e.translate(this.pixelX,this.pixelY);let n=this.area.reduce((e,t)=>Math.min(e,t),Number.POSITIVE_INFINITY),r=this.area.reduce((e,t)=>Math.max(e,t),Number.NEGATIVE_INFINITY),i=e=>(e-n)/(r-n);e.scale(this.pixelGroup,this.pixelGroup);for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++){let r=this.area[t+n*this.width];e.fillStyle=`rgba(0, 0, 0, ${i(r)})`,e.fillRect(t,n,1,1);}e.restore();}drawThreshold(e,t,n=!0){if(!(this.width<=0)&&!(this.height<=0)){e.save(),n&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++){let i=this.area[n+r*this.width];e.fillStyle=i>t?"black":"white",e.fillRect(n,r,1,1);}e.restore();}}}function x(e,t){let n=e=>({x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t});return Array.isArray(e)?e.map(n):n(e);}function k(e,t,n){return S(Object.assign(d(e),{distSquare:(t,n)=>u(e.x1,e.y1,e.x2,e.y2,t,n)}),t,n);}function S(e,t,n){let r=x(e,n),i=t.scale(r),a=t.createSub(i,r);return function(e,t,n,r){let i=n*n;for(let a=0;a<e.height;a++)for(let o=0;o<e.width;o++){let s=r(t.invertScaleX(e.i+o),t.invertScaleY(e.j+a));if(0===s){e.set(o,a,i);continue;}if(s<i){let t=n-Math.sqrt(s);e.set(o,a,t*t);}}}(a,t,n,(t,n)=>e.distSquare(t,n)),a;}function T(e,t){return t.some(t=>t.containsPt(e.x,e.y));}function M(e,t){return t.some(t=>{var n,r,i,a;return n=t.x1,r=t.y1,1e-6>c(n,r,e.x,e.y)||(i=t.x2,a=t.y2,1e-6>c(i,a,e.x,e.y));});}function w(e,t){let n=Number.POSITIVE_INFINITY,r=null;for(let i of e){if(!m(i,t))continue;let e=function(e,t){let n=Number.POSITIVE_INFINITY,r=0;function i(e,i,a,o){let s=v(t,new h(e,i,a,o));(s=Math.abs(s-.5))>=0&&s<=1&&(r++,s<n&&(n=s));}return(i(e.x,e.y,e.x2,e.y),i(e.x,e.y,e.x,e.y2),r>1)?n:(i(e.x,e.y2,e.x2,e.y2),r>1)?n:(i(e.x2,e.y,e.x2,e.y2),0===r)?-1:n;}(i,t);e>=0&&e<n&&(r=i,n=e);}return r;}function N(e,t,n,i){let a=n.top,o=n.left,s=n.bottom,l=n.right;if(i){if(o.state===r.POINT){if(a.state===r.POINT)return{x:e.x-t,y:e.y-t};if(s.state===r.POINT)return{x:e.x-t,y:e.y2+t};let n=e.width*e.height;return e.width*((o.y-e.y+(l.y-e.y))*.5)<.5*n?o.y>l.y?{x:e.x-t,y:e.y-t}:{x:e.x2+t,y:e.y-t}:o.y<l.y?{x:e.x-t,y:e.y2+t}:{x:e.x2+t,y:e.y2+t};}if(l.state===r.POINT){if(a.state===r.POINT)return{x:e.x2+t,y:e.y-t};if(s.state===r.POINT)return{x:e.x2+t,y:e.y2+t};}let n=e.height*e.width;return e.height*((a.x-e.x+(l.x-e.x))*.5)<.5*n?a.x>s.x?{x:e.x-t,y:e.y-t}:{x:e.x-t,y:e.y2+t}:a.x<s.x?{x:e.x2+t,y:e.y-t}:{x:e.x2+t,y:e.y2+t};}if(o.state===r.POINT){if(a.state===r.POINT)return{x:e.x2+t,y:e.y2+t};if(s.state===r.POINT)return{x:e.x2+t,y:e.y-t};let n=e.height*e.width;return e.width*((o.y-e.y+(l.y-e.y))*.5)<.5*n?o.y>l.y?{x:e.x2+t,y:e.y2+t}:{x:e.x-t,y:e.y2+t}:o.y<l.y?{x:e.x2+t,y:e.y-t}:{x:e.x-t,y:e.y-t};}if(l.state===r.POINT){if(a.state===r.POINT)return{x:e.x-t,y:e.y2+t};if(s.state===r.POINT)return{x:e.x-t,y:e.y-t};}let u=e.height*e.width;return e.height*((a.x-e.x+(l.x-e.x))*.5)<.5*u?a.x>s.x?{x:e.x2+t,y:e.y2+t}:{x:e.x2+t,y:e.y-t}:a.x<s.x?{x:e.x-t,y:e.y2+t}:{x:e.x-t,y:e.y-t};}class C{constructor(e=[],t=!0){this.points=e,this.closed=t;}get(e){let t=this.points.length;return e<0?this.closed?this.get(e+t):this.points[0]:e>=t?this.closed?this.get(e-t):this.points[t-1]:this.points[e];}get length(){return this.points.length;}toString(e=1/0){let t=this.points;if(0===t.length)return"";let n="function"==typeof e?e:function(e){if(!Number.isFinite(e))return e=>e;if(0===e)return Math.round;let t=Math.pow(10,e);return e=>Math.round(e*t)/t;}(e),r="M";for(let e of t)r+=`${n(e.x)},${n(e.y)} L`;return r=r.slice(0,-1),this.closed&&(r+=" Z"),r;}draw(e){let t=this.points;if(0!==t.length){for(let n of(e.beginPath(),e.moveTo(t[0].x,t[0].y),t))e.lineTo(n.x,n.y);this.closed&&e.closePath();}}sample(e){return(function(e=8){return t=>{let n=e,r=t.length;if(n>1)for(r=Math.floor(t.length/n);r<3&&n>1;)n-=1,r=Math.floor(t.length/n);let i=[];for(let e=0,a=0;a<r;a++,e+=n)i.push(t.get(e));return new C(i);};})(e)(this);}simplify(e){return(function(e=0){return t=>{if(e<0||t.length<3)return t;let n=[],r=0,i=e*e;for(;r<t.length;){let e=r+1;for(;function(e,t,n,r){if(!(e.closed?n<e.length:n<e.length-1))return!1;let i=e.get(t),a=e.get(n+1);for(let o=t+1;o<=n;o++){let t=e.get(o);if(u(i.x,i.y,a.x,a.y,t.x,t.y)>r)return!1;}return!0;}(t,r,e,i);)e++;n.push(t.get(r)),r=e;}return new C(n);};})(e)(this);}bSplines(e){return(function(e=6){function t(e,t,n){let r=0,i=0;for(let a=-2;a<=1;a++){let o=e.get(t+a),s=function(e,t){switch(e){case -2:return(((-t+3)*t-3)*t+1)/6;case -1:return((3*t-6)*t*t+4)/6;case 0:return(((-3*t+3)*t+3)*t+1)/6;case 1:return t*t*t/6;default:throw Error("unknown error");}}(a,n);r+=s*o.x,i+=s*o.y;}return{x:r,y:i};}return n=>{if(n.length<3)return n;let r=[],i=n.closed,a=n.length+3-1+(i?0:2);r.push(t(n,2-(i?0:2),0));for(let o=2-(i?0:2);o<a;o++)for(let i=1;i<=e;i++)r.push(t(n,o,i/e));return new C(r);};})(e)(this);}apply(e){return e(this);}containsElements(e){let t=function(e){if(0===e.length)return null;let t=e[0],n=new y(t.x,t.y,0,0);for(let t of e)n.addPoint(t);return n;}(this.points);return!!t&&e.every(e=>t.containsPt(e.cx,e.cy)&&this.withinArea(e.cx,e.cy));}withinArea(e,t){if(0===this.length)return!1;let n=0,r=this.points[0],i=new h(r.x,r.y,r.x,r.y);for(let r=1;r<this.points.length;r++){let a=this.points[r];i.x1=i.x2,i.y1=i.y2,i.x2=a.x,i.y2=a.y,i.cuts(e,t)&&n++;}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(e,t)&&n++,n%2==1;}}class _{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e;}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e;}contains(e){return this.set.has(`${e.x}x${e.y}`);}isFirst(e){if(0===this.count)return!1;let t=this.arr[0];return null!=t&&t.x===e.x&&t.y===e.y;}path(){return new C(this.arr.slice(0,this.count));}clear(){this.set.clear(),this.count=0;}get(e){return this.arr[e];}get length(){return this.count;}}let P={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function A(e){return null!=e&&"number"==typeof e.radius;}function O(e,t){return A(e)===A(t)&&(A(e)?e.cx===t.cx&&e.cy===t.cy&&e.radius===t.radius:e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height);}(l=a||(a={}))[l.MEMBERS=0]="MEMBERS",l[l.NON_MEMBERS=1]="NON_MEMBERS",l[l.EDGES=2]="EDGES";class L{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new y(0,0,0,0),this.potentialArea=new E(1,0,0,0,0,0,0),this.o=Object.assign({},P,e);}pushMember(...e){if(0!==e.length)for(let t of(this.dirty.add(a.MEMBERS),e))this.members.push({raw:t,obj:A(t)?b.from(t):y.from(t),area:null});}removeMember(e){let t=this.members.findIndex(t=>O(t.raw,e));return!(t<0)&&(this.members.splice(t,1),this.dirty.add(a.MEMBERS),!0);}removeNonMember(e){let t=this.nonMembers.findIndex(t=>O(t.raw,e));return!(t<0)&&(this.nonMembers.splice(t,1),this.dirty.add(a.NON_MEMBERS),!0);}removeEdge(e){let t=this.edges.findIndex(t=>t.obj.equals(e));return!(t<0)&&(this.edges.splice(t,1),this.dirty.add(a.NON_MEMBERS),!0);}pushNonMember(...e){if(0!==e.length)for(let t of(this.dirty.add(a.NON_MEMBERS),e))this.nonMembers.push({raw:t,obj:A(t)?b.from(t):y.from(t),area:null});}pushEdge(...e){if(0!==e.length)for(let t of(this.dirty.add(a.EDGES),e))this.edges.push({raw:t,obj:h.from(t),area:null});}update(){let e=this.dirty.has(a.MEMBERS),t=this.dirty.has(a.NON_MEMBERS),n=this.dirty.has(a.EDGES);this.dirty.clear();let i=this.members.map(e=>e.obj);if(this.o.virtualEdges&&(e||t)){let e=function(e,t,n,i){if(0===e.length)return[];let a=function(e){if(e.length<2)return e;let t=0,n=0;return e.forEach(e=>{t+=e.cx,n+=e.cy;}),t/=e.length,n/=e.length,e.map(e=>{let r=t-e.cx,i=n-e.cy;return[e,r*r+i*i];}).sort((e,t)=>e[1]-t[1]).map(e=>e[0]);}(e);return a.map((e,o)=>(function(e,t,n,i,a){let o;let s={x:t.cx,y:t.cy},l=(o=Number.POSITIVE_INFINITY,n.reduce((t,n)=>{var r;let i=c(s.x,s.y,n.cx,n.cy);if(i>o)return t;let a=(r=new h(s.x,s.y,n.cx,n.cy),e.reduce((e,t)=>m(t,r)&&function(e,t){function n(e,n,r,i){let a=v(t,new h(e,n,r,i));return(a=Math.abs(a-.5))>=0&&a<=1?1:0;}let r=n(e.x,e.y,e.x2,e.y);return!!((r+=n(e.x,e.y,e.x,e.y2))>1||(r+=n(e.x,e.y2,e.x2,e.y2))>1)||(r+=n(e.x2,e.y,e.x2,e.y2))>0;}(t,r)?e+1:e,0));return i*(a+1)*(a+1)<o&&(t=n,o=i*(a+1)*(a+1)),t;},null));return null==l?[]:function(e,t){let n=[];for(;e.length>0;){let r=e.pop();if(0===e.length){n.push(r);break;}let i=e.pop(),a=new h(r.x1,r.y1,i.x2,i.y2);w(t,a)?(n.push(r),e.push(i)):e.push(a);}return n;}(function(e,t,n,i){let a=[],o=[];o.push(e);let s=!0;for(let e=0;e<n&&s;e++)for(s=!1;!s&&o.length>0;){let e=o.pop(),n=w(t,e),l=n?function(e,t){let n=0,i=p(e,new h(t.x,t.y,t.x2,t.y));n+=i.state===r.POINT?1:0;let a=p(e,new h(t.x,t.y,t.x,t.y2));n+=a.state===r.POINT?1:0;let o=p(e,new h(t.x,t.y2,t.x2,t.y2));n+=o.state===r.POINT?1:0;let s=p(e,new h(t.x2,t.y,t.x2,t.y2));return n+=s.state===r.POINT?1:0,{top:i,left:a,bottom:o,right:s,count:n};}(e,n):null;if(!n||!l||2!==l.count){s||a.push(e);continue;}let u=i,c=N(n,u,l,!0),d=M(c,o)||M(c,a),f=T(c,t);for(;!d&&f&&u>=1;)u/=1.5,d=M(c=N(n,u,l,!0),o)||M(c,a),f=T(c,t);if(!c||d||f||(o.push(new h(e.x1,e.y1,c.x,c.y)),o.push(new h(c.x,c.y,e.x2,e.y2)),s=!0),s)continue;let v=M(c=N(n,u=i,l,!1),o)||M(c,a);for(f=T(c,t);!v&&f&&u>=1;)u/=1.5,v=M(c=N(n,u,l,!1),o)||M(c,a),f=T(c,t);c&&!v&&(o.push(new h(e.x1,e.y1,c.x,c.y)),o.push(new h(c.x,c.y,e.x2,e.y2)),s=!0),s||a.push(e);}for(;o.length>0;)a.push(o.pop());return a;}(new h(s.x,s.y,l.cx,l.cy),e,i,a),e);})(t,e,a.slice(0,o),n,i)).flat();}(i,this.nonMembers.map(e=>e.obj),this.o.maxRoutingIterations,this.o.morphBuffer),t=new Map(this.virtualEdges.map(e=>[e.obj.toString(),e.area]));this.virtualEdges=e.map(e=>{var n;return{raw:e,obj:e,area:null!==(n=t.get(e.toString()))&&void 0!==n?n:null};}),n=!0;}let o=!1;if(e||n){let e=function(e,t){if(0===e.length)return new y(0,0,0,0);let n=y.from(e[0]);for(let t of e)n.add(t);for(let e of t)n.add(d(e));return n;}(i,this.virtualEdges.concat(this.edges).map(e=>e.obj)),t=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,n=y.from(x(e,t));n.equals(this.activeRegion)||(o=!0,this.activeRegion=n);}if(o){let e=Math.ceil(this.activeRegion.width/this.o.pixelGroup),t=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=E.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(e=>e.area=null),this.nonMembers.forEach(e=>e.area=null),this.edges.forEach(e=>e.area=null),this.virtualEdges.forEach(e=>e.area=null)):(e!==this.potentialArea.width||t!==this.potentialArea.height)&&(this.potentialArea=E.fromPixelRegion(this.activeRegion,this.o.pixelGroup));}let s=new Map,l=e=>{if(e.area){let t=`${e.obj.width}x${e.obj.height}x${e.obj instanceof y?"R":"C"}`;s.set(t,e.area);}},u=e=>{if(e.area)return;let t=`${e.obj.width}x${e.obj.height}x${e.obj instanceof y?"R":"C"}`;if(s.has(t)){let n=s.get(t);e.area=this.potentialArea.copy(n,{x:e.obj.x-this.o.nodeR1,y:e.obj.y-this.o.nodeR1});return;}let n=e.obj instanceof y?function(e,t,n){let r=t.scale(e),i=t.addPadding(r,n),a=t.createSub(i,{x:e.x-n,y:e.y-n}),o=r.x-i.x,s=r.y-i.y,l=i.x2-r.x2,u=i.y2-r.y2,c=i.width-o-l,d=i.height-s-u,h=n*n;a.fillArea({x:o,y:s,width:c+1,height:d+1},h);let f=[0],p=Math.max(s,o,l,u);{let i=t.invertScaleX(r.x+r.width/2);for(let a=1;a<p;a++){let o=t.invertScaleY(r.y-a),s=e.distSquare(i,o);if(s<h){let e=n-Math.sqrt(s);f.push(e*e);}else break;}}let v=[],g=Math.max(o,l),m=Math.max(s,l);for(let i=1;i<g;i++){let a=t.invertScaleX(r.x-i),o=[];for(let i=1;i<m;i++){let s=t.invertScaleY(r.y-i),l=e.distSquare(a,s);if(l<h){let e=n-Math.sqrt(l);o.push(e*e);}else o.push(0);}v.push(o);}for(let e=1;e<Math.min(s,f.length);e++){let t=f[e];a.fillHorizontalLine(o,s-e,c+1,t);}for(let e=1;e<Math.min(u,f.length);e++){let t=f[e];a.fillHorizontalLine(o,s+d+e,c+1,t);}for(let e=1;e<Math.min(o,f.length);e++){let t=f[e];a.fillVerticalLine(o-e,s,d+1,t);}for(let e=1;e<Math.min(u,f.length);e++){let t=f[e];a.fillVerticalLine(o+c+e,s,d+1,t);}for(let e=1;e<o;e++){let t=v[e-1],n=o-e;for(let e=1;e<s;e++)a.set(n,s-e,t[e-1]);for(let e=1;e<u;e++)a.set(n,s+d+e,t[e-1]);}for(let e=1;e<l;e++){let t=v[e-1],n=o+c+e;for(let e=1;e<s;e++)a.set(n,s-e,t[e-1]);for(let e=1;e<u;e++)a.set(n,s+d+e,t[e-1]);}return a;}(e.obj,this.potentialArea,this.o.nodeR1):S(e.obj,this.potentialArea,this.o.nodeR1);e.area=n,s.set(t,n);};this.members.forEach(l),this.nonMembers.forEach(l),this.members.forEach(u),this.nonMembers.forEach(e=>{this.activeRegion.intersects(e.obj)?u(e):e.area=null;}),this.edges.forEach(e=>{e.area||(e.area=k(e.obj,this.potentialArea,this.o.edgeR1));}),this.virtualEdges.forEach(e=>{e.area||(e.area=k(e.obj,this.potentialArea,this.o.edgeR1));});}drawMembers(e){for(let t of this.members)t.obj.draw(e);}drawNonMembers(e){for(let t of this.nonMembers)t.obj.draw(e);}drawEdges(e){for(let t of this.edges)t.obj.draw(e);}drawPotentialArea(e,t=!0){this.potentialArea.draw(e,t);}compute(){if(0===this.members.length)return new C([]);this.dirty.size>0&&this.update();let{o:e,potentialArea:t}=this,n=this.members.map(e=>e.area),r=this.virtualEdges.concat(this.edges).map(e=>e.area),i=this.nonMembers.filter(e=>null!=e.area).map(e=>e.area),a=this.members.map(e=>e.obj);return function(e,t,n,r,i,a={}){let o=Object.assign({},P,a),s=o.threshold,l=o.memberInfluenceFactor,u=o.edgeInfluenceFactor,c=o.nonMemberInfluenceFactor,d=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),h=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);for(let a=0;a<o.maxMarchingIterations;a++){if(e.clear(),0!==l){let n=l/d;for(let r of t)e.incArea(r,n);}if(0!==u){let t=u/h;for(let r of n)e.incArea(r,t);}if(0!==c){let t=c/d;for(let n of r)e.incArea(n,t);}let f=function(e,t){let n=new _((Math.floor(e.width)+Math.floor(e.height))*2);function r(n,r,i,a){let o=e.get(n,r);return Number.isNaN(o)?Number.NaN:o>t?i+a:i;}function i(e,t){let n=0;return(n=r(e,t,0,1),n=r(e+1,t,n,2),n=r(e,t+1,n,4),Number.isNaN(n=r(e+1,t+1,n,8)))?-1:n;}let a=1;for(let r=0;r<e.width;r++)for(let o=0;o<e.height;o++){if(e.get(r,o)<=t)continue;let s=i(r,o);if(!(s<0)&&15!==s&&function(t,r){let o=t,s=r,l=e.invertScaleX(o),u=e.invertScaleY(s);for(let t=0;t<e.width*e.height;t++){let t={x:l,y:u};if(n.contains(t)){if(n.isFirst(t))break;}else n.add(t);let r=i(o,s);switch(r){case -1:return!0;case 0:case 3:case 2:case 7:a=2;break;case 12:case 14:case 4:a=3;break;case 6:a=0===a?3:2;break;case 1:case 13:case 5:a=0;break;case 9:a=2===a?0:1;break;case 10:case 8:case 11:a=1;break;default:return console.warn("Marching squares invalid state: "+r),!0;}switch(a){case 0:s--,u-=e.pixelGroup;break;case 1:s++,u+=e.pixelGroup;break;case 3:o--,l-=e.pixelGroup;break;case 2:o++,l+=e.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+r),!0;}}return!0;}(r,o))return n.path();}return null;}(e,s);if(f&&i(f))return f;if(s*=.95,a<=.5*o.maxMarchingIterations)l*=1.2,u*=1.2;else if(0!==c&&r.length>0)c*=.8;else break;}return new C([]);}(t,n,r,i,e=>e.containsElements(a),e);}}},"83ea9a35":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Diamond",{enumerable:!0,get:function(){return a;}});var r=n("966f7de2"),i=n("90e17978");class a extends i.Polygon{constructor(e){super(e);}getPoints(e){let[t,n]=this.getSize(e);return(0,r.getDiamondPoints)(t,n);}}},"83eb9ab3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"wrapIt",{enumerable:!0,get:function(){return i;}});var r=n("73c47a5d");function i(e,t,n,i){void 0===n&&(n=2),void 0===i&&(i="top"),(0,r.applyToText)(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:i});}},"83fd8d4e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Band",{enumerable:!0,get:function(){return a;}});var r=n("90abb703"),i=n("3e76858e");class a extends i.Ordinal{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:i.defaultUnknown,flex:[]};}constructor(e){super(e);}clone(){return new a(this.options);}getStep(e){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===e?Array.from(this.valueStep.values())[0]:this.valueStep.get(e);}getBandWidth(e){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===e?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e);}getRange(){return this.adjustedRange;}getPaddingInner(){let{padding:e,paddingInner:t}=this.options;return e>0?e:t;}getPaddingOuter(){let{padding:e,paddingOuter:t}=this.options;return e>0?e:t;}rescale(){super.rescale();let{align:e,domain:t,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=function(e){var t;let n,i;let{domain:a}=e,o=a.length;if(0===o)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(t=e.flex)||void 0===t?void 0:t.length)return function(e){let{domain:t,range:n,paddingOuter:i,paddingInner:a,flex:o,round:s,align:l}=e,u=t.length,c=function(e,t){let n=t-e.length;return n>0?[...e,...Array(n).fill(1)]:n<0?e.slice(0,t):e;}(o,u),[d,h]=n,f=h-d,p=f/(2/u*i+1-1/u*a),v=p*a/u,g=p-u*v,m=function(e){let t=e.reduce((e,t)=>Math.min(e,t),1/0);return t===1/0?[]:e.map(e=>e/t);}(c),y=g/m.reduce((e,t)=>e+t),b=new r.InternMap(t.map((e,t)=>{let n=m[t]*y;return[e,s?Math.floor(n):n];})),E=new r.InternMap(t.map((e,t)=>{let n=m[t]*y+v;return[e,s?Math.floor(n):n];})),x=Array.from(E.values()).reduce((e,t)=>e+t),k=d+(f-(x-x/u*a))*l,S=s?Math.round(k):k,T=Array(u);for(let e=0;e<u;e+=1){T[e]=Math.round(1e12*S)/1e12;let n=t[e];S+=E.get(n);}return{valueBandWidth:b,valueStep:E,adjustedRange:T};}(e);let{range:s,paddingOuter:l,paddingInner:u,round:c,align:d}=e,h=s[0],f=s[1]-h;n=f/Math.max(1,2*l+(o-u)),c&&(n=Math.floor(n)),h+=(f-n*(o-u))*d,i=n*(1-u),c&&(h=Math.round(h),i=Math.round(i));let p=Array(o).fill(0).map((e,t)=>h+t*n);return{valueStep:n,valueBandWidth:i,adjustedRange:p};}({align:e,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o;}}},"855ee20a":function(e,t,n){"use strict";let r;var i=n("852bbaa9")._;n.d(t,"__esModule",{value:!0}),n.e(t,{render:function(){return u;},unmount:function(){return c;}});var a=n("852bbaa9")._(n("26d5522d")),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};let{version:s}=a,l=()=>(r||(r=Number((s||"").split(".")[0])>=18?Promise.all([n.ensure("35bca993")]).then(n.dr(i,n.bind(n,"35bca993"))):Promise.all([n.ensure("5a92602a")]).then(n.dr(i,n.bind(n,"5a92602a")))),r);function u(e,t){return o(this,void 0,void 0,function*(){let{render:n}=yield l();return n(e,t);});}function c(e){return o(this,void 0,void 0,function*(){let{unmount:t}=yield l();return t(e);});}},"8754ee1a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("fc97b607"),t),r._(n("3a060085"),t),r._(n("cfda2b31"),t);},"88a1608c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Image",{enumerable:!0,get:function(){return h;}});var r=n("a566da36"),i=n("95550d14"),a=n("9da99c33"),o=n("cdd49f4a"),s=n("71473486"),l=n("988eb09c"),u=n("133675a0"),c=n("ec2f02a5"),d=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class h extends c.BaseNode{constructor(e){super((0,o.mergeOptions)({style:h.defaultStyleProps},e));}getKeyStyle(e){let[t,n]=this.getSize(e),r=super.getKeyStyle(e),{fillOpacity:i,opacity:a=i}=r;return Object.assign(Object.assign({opacity:a},d(r,["fillOpacity","opacity"])),{width:t,height:n,x:-t/2,y:-n/2});}getBounds(){return this.getShape("key").getBounds();}getHaloStyle(e){if(!1===e.halo)return!1;let t=this.getShape("key").attributes,{fill:n,stroke:r}=t;d(t,["fill","stroke"]);let i=(0,a.subStyleProps)(this.getGraphicStyle(e),"halo"),o=Number(i.lineWidth),[l,u]=(0,s.add)(this.getSize(e),[o,o]),{lineWidth:c}=i;return Object.assign(Object.assign({},i),{fill:"transparent",lineWidth:c/2,width:l-c/2,height:u-c/2,x:-(l-c/2)/2,y:-(u-c/2)/2});}getIconStyle(e){let t=super.getIconStyle(e),[n,r]=this.getSize(e);return!!t&&Object.assign({width:n*i.ICON_SIZE_RATIO,height:r*i.ICON_SIZE_RATIO},t);}drawKeyShape(e,t){let n=this.upsert("key",l.Image,this.getKeyStyle(e),t);return(0,u.connectImage)(this),n;}drawHaloShape(e,t){this.upsert("halo",r.Rect,this.getHaloStyle(e),t);}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&(0,u.dispatchPositionChange)(this);}}h.defaultStyleProps={size:32};},"88b6fb7f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CategoryItem",{enumerable:!0,get:function(){return p;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("e6d068ba"),s=n("c086f503"),l=n("01a29d03"),u=n("7f47860b"),c=n("b81750fa"),d=n("51bc7eb7"),h=(0,l.classNames)({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),f={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}},p=function(e){function t(t,n){var r=e.call(this,t,{span:[1,1],marker:function(){return new i.Circle({style:{r:6}});},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return r.keyFields={},r.keyFields=n||{},r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return!!e&&("string"==typeof e||"number"==typeof e?""!==e:"function"==typeof e||""!==e.attr("text"));},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var e=this.labelGroup,t=this.valueGroup,n=this.attributes,r=n.markerSize,i=n.focus,a=n.focusMarkerSize,o=e.node().getBBox(),s=o.width,l=o.height,u=t.node().getBBox();return{markerWidth:r,labelWidth:s,valueWidth:u.width,focusWidth:i?null!=a?a:12:0,height:Math.max(r,l,u.height)};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var t=(0,r.__read)((0,l.parseSeriesAttr)(e),2),n=t[0],i=t[1],a=this.showValue?i:0,o=n+a;return[n/o,a/o];},enumerable:!1,configurable:!0}),t.prototype.setAttribute=function(t,n){e.prototype.setAttribute.call(this,t,n);},Object.defineProperty(t.prototype,"shape",{get:function(){var e,t=this.attributes,n=t.markerSize,i=t.width,a=this.actualSpace,o=a.markerWidth,s=a.focusWidth,l=a.height,u=this.actualSpace,c=u.labelWidth,d=u.valueWidth,h=(0,r.__read)(this.spacing,3),f=h[0],p=h[1],v=h[2];if(i){var g=i-n-f-p-s-v,m=(0,r.__read)(this.span,2),y=m[0],b=m[1];c=(e=(0,r.__read)([y*g,b*g],2))[0],d=e[1];}return{width:o+c+d+f+p+s+v,height:l,markerWidth:o,labelWidth:c,valueWidth:d,focusWidth:s};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var e=this.attributes,t=e.spacing,n=e.focus;if(!t)return[0,0,0];var i=(0,r.__read)((0,l.parseSeriesAttr)(t),3),a=i[0],o=i[1],s=i[2];return[a,this.showValue?o:0,n?s:0];},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var e=this.shape,t=e.markerWidth,n=e.labelWidth,i=e.valueWidth,a=e.focusWidth,o=e.width,s=e.height,l=(0,r.__read)(this.spacing,3),u=l[0],c=l[1];return{height:s,width:o,markerWidth:t,labelWidth:n,valueWidth:i,focusWidth:a,position:[t/2,t+u,t+n+u+c,t+n+i+u+c+l[2]+a/2]};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var e,t=(e=this.markerGroup.node().querySelector(h.marker.class))?e.style:{},n=this.attributes,r=n.markerSize,i=n.markerStrokeWidth,a=void 0===i?t.strokeWidth:i,o=n.markerLineWidth,s=void 0===o?t.lineWidth:o,l=n.markerStroke,u=void 0===l?t.stroke:l,c=+(a||s||(u?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox();return(1-c/Math.max(d.width,d.height))*r;},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(e){var t=this,n=this.attributes,i=n.marker,a=n.classNamePrefix,s=(0,l.subStyleProps)(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(h.markerGroup,"g").style("zIndex",0),(0,l.ifShow)(!!i,this.markerGroup,function(){var e,n=t.markerGroup.node(),u=null===(e=n.childNodes)||void 0===e?void 0:e[0],f=(0,c.getLegendClassName)(h.marker.name,d.CLASSNAME_SUFFIX_MAP.marker,a),p="string"==typeof i?new o.Marker({style:{symbol:i},className:f}):i();if(u){if(p.nodeName===u.nodeName)u instanceof o.Marker?u.update((0,r.__assign)((0,r.__assign)({},s),{symbol:i})):((0,l.copyAttributes)(u,p),(0,l.select)(u).styles(s));else{if(u.remove(),!(p instanceof o.Marker)){var v=(0,c.getLegendClassName)(h.marker.name,d.CLASSNAME_SUFFIX_MAP.marker,a);p.className=v;}(0,l.select)(p).styles(s),n.appendChild(p);}}else{if(!(p instanceof o.Marker)){var g=(0,c.getLegendClassName)(h.marker.name,d.CLASSNAME_SUFFIX_MAP.marker,a);p.className=g,(0,l.select)(p).styles(s);}n.appendChild(p);}t.markerGroup.node().scale(1/t.markerGroup.node().getScale()[0]);var m=(0,l.scaleToPixel)(t.markerGroup.node(),t.scaleSize,!0);t.markerGroup.node().style._transform="scale(".concat(m,")");});},t.prototype.renderLabel=function(e){var t=(0,l.subStyleProps)(this.attributes,"label"),n=t.text,i=(0,r.__rest)(t,["text"]),a=this.attributes.classNamePrefix;this.labelGroup=e.maybeAppendByClassName(h.labelGroup,"g").style("zIndex",0);var o=(0,c.getLegendClassName)(h.label.name,d.CLASSNAME_SUFFIX_MAP.label,a),s=this.labelGroup.maybeAppendByClassName(h.label,function(){return(0,l.renderExtDo)(n);});s.node().setAttribute("class",o),s.styles(i);},t.prototype.renderValue=function(e){var t=this,n=(0,l.subStyleProps)(this.attributes,"value"),i=n.text,a=(0,r.__rest)(n,["text"]),o=this.attributes.classNamePrefix;this.valueGroup=e.maybeAppendByClassName(h.valueGroup,"g").style("zIndex",0),(0,l.ifShow)(this.showValue,this.valueGroup,function(){var e=(0,c.getLegendClassName)(h.value.name,d.CLASSNAME_SUFFIX_MAP.value,o),n=t.valueGroup.maybeAppendByClassName(h.value,function(){return(0,l.renderExtDo)(i);});n.node().setAttribute("class",e),n.styles(a);});},t.prototype.createPoptip=function(){var e=this.attributes.poptip||{},t=(e.render,(0,r.__rest)(e,["render"])),n=new u.Poptip({style:(0,l.deepAssign)(f,t)});return this.poptipGroup=n,n;},t.prototype.bindPoptip=function(e){var t=this,n=this.attributes.poptip;n&&(this.poptipGroup||this.createPoptip()).bind(e,function(){var e=t.attributes,i=e.labelText,a=e.valueText,o=e.markerFill,s="string"==typeof i?i:null==i?void 0:i.attr("text"),l="string"==typeof a?a:null==a?void 0:a.attr("text");if("function"==typeof n.render)return{html:n.render((0,r.__assign)((0,r.__assign)({},t.keyFields),{label:s,value:l,color:o}))};var u="";return("string"==typeof s||"number"==typeof s)&&(u+='<div class="component-poptip-label">'.concat(s,"</div>")),("string"==typeof l||"number"==typeof l)&&(u+='<div class="component-poptip-value">'.concat(l,"</div>")),{html:u};});},t.prototype.renderFocus=function(e){var t=this,n=this.attributes,s=n.focus,u=n.focusMarkerSize,f=n.classNamePrefix,p={x:0,y:0,size:u,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};(0,a.isUndefined)(s)||(this.focusGroup=e.maybeAppendByClassName(h.focusGroup,"g").style("zIndex",0),(0,l.ifShow)(s,this.focusGroup,function(){var n=(0,c.getLegendClassName)(h.focus.name,d.CLASSNAME_SUFFIX_MAP.focusIcon,f),a=new o.Marker({style:(0,r.__assign)((0,r.__assign)({},p),{symbol:"focus"}),className:n}),s=new i.Circle({style:{r:p.size/2,fill:"transparent"}}),l=t.focusGroup.node();l.appendChild(s),l.appendChild(a),a.update({opacity:0}),e.node().addEventListener("pointerenter",function(){a.update({opacity:1});}),e.node().addEventListener("pointerleave",function(){a.update({opacity:0});});}));},t.prototype.renderPoptip=function(e){var t=this;this.attributes.poptip&&[e.maybeAppendByClassName(h.value,"g").node(),e.maybeAppendByClassName(h.label,"g").node()].forEach(function(e){e&&t.bindPoptip(e);});},t.prototype.renderBackground=function(e){var t=this.shape,n=t.width,i=t.height,a=(0,l.subStyleProps)(this.attributes,"background");this.background=e.maybeAppendByClassName(h.backgroundGroup,"g").style("zIndex",-1);var o=this.background.maybeAppendByClassName(h.background,"rect");o.styles((0,r.__assign)({width:n,height:i},a));var s=this.attributes.classNamePrefix,u=void 0===s?"":s;if(u){var f=(0,c.getLegendClassName)(h.background.name,d.CLASSNAME_SUFFIX_MAP.background,u);o.node().setAttribute("class",f);}},t.prototype.adjustLayout=function(){var e=this.layout,t=e.labelWidth,n=e.valueWidth,i=e.height,a=(0,r.__read)(e.position,4),o=a[0],s=a[1],u=a[2],c=a[3],d=i/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(d,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(s,", ").concat(d,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(c,", ").concat(d,")")}),(0,l.ellipsisIt)(this.labelGroup.select(h.label.class).node(),Math.ceil(t)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(u,", ").concat(d,")")}),(0,l.ellipsisIt)(this.valueGroup.select(h.value.class).node(),Math.ceil(n)));},t.prototype.render=function(e,t){var n=(0,l.select)(t),r=e.x,i=e.y;n.styles({transform:"translate(".concat(void 0===r?0:r,", ").concat(void 0===i?0:i,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.renderPoptip(n),this.renderFocus(n),this.adjustLayout();},t;}(s.Component);},89123580:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{InternMap:function(){return d.InternMap;},bisect:function(){return o.bisect;},compose:function(){return r.compose;},createClamp:function(){return a.createClamp;},createInterpolateNumber:function(){return c.createInterpolateNumber;},createInterpolateRound:function(){return c.createInterpolateRound;},createInterpolateValue:function(){return c.createInterpolateValue;},createNormalize:function(){return i.createNormalize;},d3LinearNice:function(){return s.d3LinearNice;},isValid:function(){return l.isValid;},tickIncrement:function(){return u.tickIncrement;}});var r=n("0fa07cf0"),i=n("038c70b1"),a=n("feabec46"),o=n("dff91bc3"),s=n("de23250b"),l=n("ba7a8f29"),u=n("e314a3ad"),c=n("4ac88e9f"),d=n("feb9c353");},"8941b7ac":function(e,t,n){"use strict";function r(e,t,n=!1){n||e.sort((e,t)=>e-t);let i=[];for(let n=1;n<t;n+=1)i.push(function(e,t){let n=e.length;if(!n)return;if(n<2)return e[n-1];let r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i);}(e,n/t));return i;}n.d(t,"__esModule",{value:!0}),n.d(t,"createQuartile",{enumerable:!0,get:function(){return r;}});},"8a0441b2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AntVDagreLayout:function(){return i.AntVDagreLayout;},BaseLayout:function(){return a.BaseLayout;},CircularLayout:function(){return i.CircularLayout;},ComboCombinedLayout:function(){return i.ComboCombinedLayout;},ConcentricLayout:function(){return i.ConcentricLayout;},D3ForceLayout:function(){return i.D3ForceLayout;},DagreLayout:function(){return i.DagreLayout;},FishboneLayout:function(){return o.FishboneLayout;},ForceAtlas2Layout:function(){return i.ForceAtlas2Layout;},ForceLayout:function(){return i.ForceLayout;},FruchtermanLayout:function(){return i.FruchtermanLayout;},GridLayout:function(){return i.GridLayout;},MDSLayout:function(){return i.MDSLayout;},RadialLayout:function(){return i.RadialLayout;},RandomLayout:function(){return i.RandomLayout;},SnakeLayout:function(){return s.SnakeLayout;},compactBox:function(){return r.compactBox;},dendrogram:function(){return r.dendrogram;},indented:function(){return r.indented;},mindmap:function(){return r.mindmap;}});var r=n("48da3fcf"),i=n("c7d04fb1"),a=n("7ed4a1e7"),o=n("0b1a7e58"),s=n("ffeef936");},"8a0aecd6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getBBoxHeight:function(){return u;},getBBoxSegments:function(){return T;},getBBoxSize:function(){return c;},getBBoxWidth:function(){return l;},getCombinedBBox:function(){return p;},getExpandedBBox:function(){return f;},getIncircleRadius:function(){return S;},getNearestBoundaryPoint:function(){return x;},getNearestBoundarySide:function(){return E;},getNodeBBox:function(){return d;},getPointBBox:function(){return h;},getTriangleCenter:function(){return k;},isBBoxInside:function(){return v;},isPointBBoxCenter:function(){return b;},isPointInBBox:function(){return g;},isPointOnBBoxBoundary:function(){return m;},isPointOutsideBBox:function(){return y;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("bb430c3e"),o=n("5b11de40"),s=n("28792030");function l(e){return e.max[0]-e.min[0];}function u(e){return e.max[1]-e.min[1];}function c(e){return[l(e),u(e)];}function d(e,t){let n=(0,a.isPoint)(e)?h(e):e.getShape("key").getBounds();return t?f(n,t):n;}function h(e){let[t,n,i=0]=e,a=new r.AABB;return a.setMinMax([t,n,i],[t,n,i]),a;}function f(e,t){let[n,i,a,o]=(0,s.parsePadding)(t),[l,u,c]=e.min,[d,h,f]=e.max,p=new r.AABB;return p.setMinMax([l-o,u-n,c],[d+i,h+a,f]),p;}function p(e){if(0===e.length)return new r.AABB;if(1===e.length)return e[0];let t=new r.AABB;t.setMinMax(e[0].min,e[0].max);for(let n=1;n<e.length;n++){let r=e[n];t.setMinMax([Math.min(t.min[0],r.min[0]),Math.min(t.min[1],r.min[1]),Math.min(t.min[2],r.min[2])],[Math.max(t.max[0],r.max[0]),Math.max(t.max[1],r.max[1]),Math.max(t.max[2],r.max[2])]);}return t;}function v(e,t){let[n,r]=e.min,[i,a]=e.max,[o,s]=t.min,[l,u]=t.max;return n>=o&&i<=l&&r>=s&&a<=u;}function g(e,t){return(0,o.isBetween)(e[0],t.min[0],t.max[0])&&(0,o.isBetween)(e[1],t.min[1],t.max[1]);}function m(e,t,n=!1){let{min:[r,i],max:[a,s]}=t,l=(e[1]===i||e[1]===s)&&(n||(0,o.isBetween)(e[0],r,a)),u=(e[0]===r||e[0]===a)&&(n||(0,o.isBetween)(e[1],i,s));return l||u;}function y(e,t){return!g(e,t);}function b(e,t){let{center:n}=t;return e[0]===n[0]&&e[1]===n[1];}function E(e,t){let[n,r]=e,[i,a]=t.min,[o,s]=t.max,l=n-i,u=o-n,c=r-a,d=s-r,h=Math.min(l,u,c,d);return h===l?"left":h===u?"right":h===c?"top":h===d?"bottom":"left";}function x(e,t){let n=(0,i.clone)(e);if(g(e,t))switch(E(e,t)){case"left":n[0]=t.min[0];break;case"right":n[0]=t.max[0];break;case"top":n[1]=t.min[1];break;case"bottom":n[1]=t.max[1];}else{let[r,i]=e,[a,s]=t.min,[l,u]=t.max;n[0]=(0,o.isBetween)(r,a,l)?r:r<a?a:l,n[1]=(0,o.isBetween)(i,s,u)?i:i<s?s:u;}return n;}function k(e,t){let{center:n}=e,[r,i]=c(e);return["up"===t||"down"===t?n[0]:"right"===t?n[0]-r/6:n[0]+r/6,"left"===t||"right"===t?n[1]:"down"===t?n[1]-i/6:n[1]+i/6];}function S(e,t){let[n,r]=c(e);return[n,r]="up"===t||"down"===t?[n,r]:[r,n],(Math.pow(r,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(r,2))-n/2,2))/(2*r);}function T(e){let{min:[t,n],max:[r,i]}=e,a=[t,i],o=[r,i],s=[r,n],l=[t,n];return[[a,o],[o,s],[s,l],[l,a]];}},"8b3de171":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getPositionXY:function(){return i;},getSingleTonElement:function(){return s;}});var r=this;function i(e,t,n,r,i,a){if(void 0===i&&(i=!1),void 0===a&&(a=!1),a)return[e,t];var o=n.getBoundingClientRect(),s=o.x,l=o.y,u=o.width,c=o.height;switch(r){case"top":return i?[s+u/2,l]:[e,l];case"left":return i?[s,l+c/2]:[s,t];case"bottom":return i?[s+u/2,l+c]:[e,l+c];case"right":return i?[s+u,l+c/2]:[s+u,t];case"top-right":case"right-top":return[s+u,l];case"left-bottom":case"bottom-left":return[s,l+c];case"right-bottom":case"bottom-right":return[s+u,l+c];default:return[s,l];}}var a=function(e){var t;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t||(t=e.apply(r,n)),t;};};function o(e){var t=e&&document.getElementById(e);return t||((t=document.createElement("div")).setAttribute("id",e),document.body.appendChild(t)),t;}function s(e){return a(o)(e);}},"8b7eda9b":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Timebar",{enumerable:!0,get:function(){return h;}});var r=n("6b44cd45"),i=n("abe9d8d6"),a=n("81401a10"),o=n("28792030"),s=n("0d562788"),l=n("98176abe"),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let d=["timestamp","time","date","datetime"];class h extends s.BasePlugin{get padding(){return(0,o.parsePadding)(this.options.padding);}constructor(e,t){super(e,Object.assign({},h.defaultOptions,t)),this.backup(),this.upsertTimebar();}play(){var e;null===(e=this.timebar)||void 0===e||e.play();}pause(){var e;null===(e=this.timebar)||void 0===e||e.pause();}forward(){var e;null===(e=this.timebar)||void 0===e||e.forward();}backward(){var e;null===(e=this.timebar)||void 0===e||e.backward();}reset(){var e;null===(e=this.timebar)||void 0===e||e.reset();}update(e){super.update(e),this.backup(),this.upsertTimebar();}backup(){this.originalData=f(this.context.graph.getData());}upsertTimebar(){let{canvas:e}=this.context,t=this.options,{onChange:n,timebarType:a,data:o,x:s,y:l,width:u,height:d,mode:h}=t,f=c(t,["onChange","timebarType","data","x","y","width","height","mode"]),p=e.getSize(),[v]=this.padding;this.upsertCanvas().ready.then(()=>{var e;let t=Object.assign(Object.assign({x:p[0]/2-u/2,y:v,onChange:e=>{let t=((0,i.isArray)(e)?e:[e,e]).map(e=>(0,i.isDate)(e)?e.getTime():e);"modify"===this.options.mode?this.filterElements(t):this.hiddenElements(t),null==n||n(t);}},f),{data:o.map(e=>(0,i.isNumber)(e)?{time:e,value:0}:e),width:u,height:d,type:a});this.timebar?this.timebar.update(t):(this.timebar=new r.Timebar({style:t}),null===(e=this.canvas)||void 0===e||e.appendChild(this.timebar));});}upsertCanvas(){if(this.canvas)return this.canvas;let{className:e,height:t,position:n}=this.options,r=this.context.canvas,[i]=r.getSize(),[a,,o]=this.padding,[s,u]=(0,l.createPluginCanvas)({width:i,height:t+a+o,graphCanvas:r,className:"timebar",placement:n});return this.container=s,e&&s.classList.add(e),this.canvas=u,this.canvas;}filterElements(e){return u(this,void 0,void 0,function*(){var t;if(!this.originalData)return;let{elementTypes:n,getTime:r}=this.options,{graph:i,element:o}=this.context,s=f(this.originalData);n.forEach(t=>{let n=`${t}s`;s[n]=(this.originalData[n]||[]).filter(t=>!!p(r(t),e));});let l=[...s.nodes,...s.combos].map(e=>(0,a.idOf)(e));s.edges=s.edges.filter(e=>{let t=e.source,n=e.target;return l.includes(t)&&l.includes(n);}),i.setData(s),yield null===(t=o.draw({animation:!1,silence:!0}))||void 0===t?void 0:t.finished;});}hiddenElements(e){let{graph:t}=this.context,{elementTypes:n,getTime:r}=this.options,i=[],o=[];n.forEach(t=>{var n;let s=`${t}s`;((null===(n=this.originalData)||void 0===n?void 0:n[s])||[]).forEach(t=>{let n=(0,a.idOf)(t);p(r(t),e)?o.push(n):i.push(n);});}),t.hideElement(i,!1),t.showElement(o,!1);}destroy(){var e,t,n;let{graph:r}=this.context;this.originalData&&r.setData(Object.assign({},this.originalData)),null===(e=this.timebar)||void 0===e||e.destroy(),null===(t=this.canvas)||void 0===t||t.destroy(),null===(n=this.container)||void 0===n||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy();}}h.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:e=>v(e,d,void 0),loop:!1};let f=e=>{let{nodes:t=[],edges:n=[],combos:r=[]}=e;return{nodes:[...t],edges:[...n],combos:[...r]};},p=(e,t)=>{if((0,i.isNumber)(t))return e===t;let[n,r]=t;return e>=n&&e<=r;},v=(e,t,n)=>{var r;for(let n=0;n<t.length;n++){let i=t[n],a=null===(r=e.data)||void 0===r?void 0:r[i];if(a)return a;}return n;};},"8bdd800c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{centerOf:function(){return M;},findNearestLine:function(){return k;},findNearestPointOnLine:function(){return T;},findNearestPoints:function(){return x;},getBoundingPoints:function(){return N;},getDistanceToLine:function(){return S;},getEllipseIntersectPoint:function(){return E;},getPolygonIntersectPoint:function(){return m;},getRectIntersectPoint:function(){return b;},getSymmetricPoint:function(){return g;},isCollinear:function(){return v;},isHorizontal:function(){return h;},isOrthogonal:function(){return p;},isPointInPolygon:function(){return y;},isVertical:function(){return f;},moveTo:function(){return d;},parsePoint:function(){return l;},round:function(){return c;},sortByClockwise:function(){return w;},toPointObject:function(){return u;}});var r=n("abe9d8d6"),i=n("8a0aecd6"),a=n("bf1fd347"),o=n("2a08964b"),s=n("71473486");function l(e){var t;return[e.x,e.y,null!==(t=e.z)&&void 0!==t?t:0];}function u(e){var t;return{x:e[0],y:e[1],z:null!==(t=e[2])&&void 0!==t?t:0};}function c(e,t=0){return e.map(e=>parseFloat(e.toFixed(t)));}function d(e,t,n,i=!1){if((0,r.isEqual)(e,t))return e;let a=i?(0,s.subtract)(e,t):(0,s.subtract)(t,e),o=(0,s.normalize)(a),l=[o[0]*n,o[1]*n];return(0,s.add)((0,s.toVector2)(e),l);}function h(e,t){return e[1]===t[1];}function f(e,t){return e[0]===t[0];}function p(e,t){return h(e,t)||f(e,t);}function v(e,t,n){return(0,a.isLinesParallel)([e,t],[t,n]);}function g(e,t){return[2*t[0]-e[0],2*t[1]-e[1]];}function m(e,t,n,r=!0,i=!1){for(let o=0;o<n.length;o++){let l=n[o],u=n[(o+1)%n.length];r&&(l=(0,s.add)(t,l),u=(0,s.add)(t,u));let c=i?g(e,t):e,d=(0,a.getLinesIntersection)([t,c],[l,u]);if(d)return{point:d,line:[l,u]};}return{point:t,line:void 0};}function y(e,t,n,r){let i=e[0],a=e[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);let s=r-n;for(let e=0,r=s-1;e<s;r=e++){let s=t[e+n][0],l=t[e+n][1],u=t[r+n][0],c=t[r+n][1];l>a!=c>a&&i<(u-s)*(a-l)/(c-l)+s&&(o=!o);}return o;}function b(e,t,n=!1){return m(e,(0,o.getXYByPlacement)(t,"center"),[(0,o.getXYByPlacement)(t,"left-top"),(0,o.getXYByPlacement)(t,"right-top"),(0,o.getXYByPlacement)(t,"right-bottom"),(0,o.getXYByPlacement)(t,"left-bottom")],!1,n).point;}function E(e,t,n=!1){let r=t.center,a=n?g(e,r):e,o=(0,s.subtract)(a,t.center),l=Math.atan2(o[1],o[0]);if(isNaN(l))return r;let u=(0,i.getBBoxWidth)(t)/2,c=(0,i.getBBoxHeight)(t)/2;return[r[0]+u*Math.cos(l),r[1]+c*Math.sin(l)];}function x(e,t){let n=1/0,r=[e[0],t[0]];return e.forEach(e=>{t.forEach(t=>{let i=(0,s.distance)(e,t);i<n&&(n=i,r=[e,t]);});}),r;}function k(e,t){let n=1/0,r=[[0,0],[0,0]];return t.forEach(t=>{let i=S(e,t);i<n&&(n=i,r=t);}),r;}function S(e,t){let n=T(e,t);return(0,s.distance)(e,n);}function T(e,t){let[n,r]=t[0],[i,a]=t[1],[o,s]=e,l=i-n,u=a-r;if(0===l&&0===u)return[n,r];let c=((o-n)*l+(s-r)*u)/(l*l+u*u);return c>1?c=1:c<0&&(c=0),[n+c*l,r+c*u];}function M(e){let t=e.reduce((e,t)=>(0,s.add)(e,t),[0,0]);return(0,s.divide)(t,e.length);}function w(e,t=!0){let n=M(e);return e.sort(([e,r],[i,a])=>{let o=Math.atan2(r-n[1],e-n[0]),s=Math.atan2(a-n[1],i-n[0]);return t?s-o:o-s;});}function N(e,t){return[e,[e[0],t[1]],t,[t[0],e[1]]];}},"8c6d1586":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ScrollCanvas",{enumerable:!0,get:function(){return d;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("8a0aecd6"),o=n("28792030"),s=n("db1e79e1"),l=n("71473486"),u=n("32576f8a"),c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class d extends u.BaseBehavior{constructor(e,t){super(e,Object.assign({},d.defaultOptions,t)),this.onWheel=e=>c(this,void 0,void 0,function*(){this.options.preventDefault&&e.preventDefault();let t=e.deltaX,n=e.deltaY;yield this.scroll([-t,-n],e);}),this.shortcut=new s.Shortcut(e.graph),this.bindEvents();}update(e){super.update(e),this.bindEvents();}bindEvents(){var e,t;let{trigger:n}=this.options;if(this.shortcut.unbindAll(),(0,r.isObject)(n)){null===(e=this.graphDom)||void 0===e||e.removeEventListener(i.CommonEvent.WHEEL,this.onWheel);let{up:t=[],down:r=[],left:a=[],right:o=[]}=n;this.shortcut.bind(t,e=>this.scroll([0,-10],e)),this.shortcut.bind(r,e=>this.scroll([0,10],e)),this.shortcut.bind(a,e=>this.scroll([-10,0],e)),this.shortcut.bind(o,e=>this.scroll([10,0],e));}else null===(t=this.graphDom)||void 0===t||t.addEventListener(i.CommonEvent.WHEEL,this.onWheel,{passive:!1});}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}formatDisplacement(e){let{sensitivity:t}=this.options;return e=(0,l.multiply)(e,t),e=this.clampByDirection(e),e=this.clampByRange(e);}clampByDirection([e,t]){let{direction:n}=this.options;return"x"===n?t=0:"y"===n&&(e=0),[e,t];}clampByRange([e,t]){let{viewport:n,canvas:r}=this.context,[i,s]=r.getSize(),[u,c,d,h]=(0,o.parsePadding)(this.options.range),f=(0,a.getExpandedBBox)((0,a.getPointBBox)(n.getCanvasCenter()),[s*u,i*c,s*d,i*h]),p=(0,l.subtract)(n.getViewportCenter(),[e,t,0]);if(!(0,a.isPointInBBox)(p,f)){let{min:[n,r],max:[i,a]}=f;(p[0]<n&&e>0||p[0]>i&&e<0)&&(e=0),(p[1]<r&&t>0||p[1]>a&&t<0)&&(t=0);}return[e,t];}scroll(e,t){return c(this,void 0,void 0,function*(){if(!this.validate(t))return;let{onFinish:n}=this.options,r=this.context.graph,i=this.formatDisplacement(e);yield r.translateBy(i,!1),null==n||n();});}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}destroy(){var e;this.shortcut.destroy(),null===(e=this.graphDom)||void 0===e||e.removeEventListener(i.CommonEvent.WHEEL,this.onWheel),super.destroy();}}d.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};},"8c74f1a4":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ZoomCanvas",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("8bdd800c"),o=n("db1e79e1"),s=n("32576f8a"),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class u extends s.BaseBehavior{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.zoom=(e,t,n)=>l(this,void 0,void 0,function*(){if(!this.validate(t))return;let{graph:i}=this.context,o=this.options.origin;!o&&"viewport"in t&&(o=(0,a.parsePoint)(t.viewport));let{sensitivity:s,onFinish:l}=this.options,u=1+(0,r.clamp)(e,-50,50)*s/100,c=i.getZoom();yield i.zoomTo(c*u,n,o),null==l||l();}),this.onReset=()=>l(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation);}),this.preventDefault=e=>{this.options.preventDefault&&e.preventDefault();},this.shortcut=new o.Shortcut(e.graph),this.bindEvents();}update(e){super.update(e),this.bindEvents();}bindEvents(){let{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e)){if(e.includes(i.CommonEvent.PINCH))this.shortcut.bind([i.CommonEvent.PINCH],e=>{this.zoom(e.scale,e,!1);});else{let t=this.context.canvas.getContainer();null==t||t.addEventListener(i.CommonEvent.WHEEL,this.preventDefault),this.shortcut.bind([...e,i.CommonEvent.WHEEL],e=>{let{deltaX:t,deltaY:n}=e;this.zoom(-(null!=n?n:t),e,!1);});}}if("object"==typeof e){let{zoomIn:t=[],zoomOut:n=[],reset:r=[]}=e;this.shortcut.bind(t,e=>this.zoom(10,e,this.options.animation)),this.shortcut.bind(n,e=>this.zoom(-10,e,this.options.animation)),this.shortcut.bind(r,this.onReset);}}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}destroy(){var e;this.shortcut.destroy(),null===(e=this.context.canvas.getContainer())||void 0===e||e.removeEventListener(i.CommonEvent.WHEEL,this.preventDefault),super.destroy();}}u.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};},"8ccf9dd6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ErrorBoundary",{enumerable:!0,get:function(){return o;}});var r,i=n("852bbaa9")._(n("3e6b097d")),a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);})(e,t);},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e;}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n);}),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(e){var n=t.props.errorTemplate;return"function"==typeof n?n(e):n||i.default.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",e.message);},t;}return a(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e};},t.getDerivedStateFromProps=function(e,t){return t.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null;},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):i.default.createElement(i.Fragment,null,this.props.children);},t;}(i.default.Component);},"8cfad0d0":function(e,t,n){"use strict";function r(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1);}function i(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1);}function a(e,t){return"".concat(t).concat(r(e));}function o(e,t,n){void 0===n&&(n=!0);var r,a=t||(null===(r=e.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",o=e.replace(new RegExp("^(".concat(a,")")),"");return n?i(o):o;}n.d(t,"__esModule",{value:!0}),n.e(t,{addPrefix:function(){return a;},removePrefix:function(){return o;},toLowercaseFirstLetter:function(){return i;},toUppercaseFirstLetter:function(){return r;}});},"8d5f4e75":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Lines",{enumerable:!0,get:function(){return s;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("9225b8d3"),o=n("01a29d03"),s=function(e){function t(t){var n=this,o=t.style,s=(0,r.__rest)(t,["style"]);return(n=e.call(this,(0,i.deepMix)({},{type:"lines"},(0,r.__assign)({style:o},s)))||this).linesGroup=n.appendChild(new a.Group),n.areasGroup=n.appendChild(new a.Group),n.render(),n;}return(0,r.__extends)(t,e),t.prototype.render=function(){var e=this.attributes,t=e.lines,n=e.areas,r=e.x,i=e.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),t&&this.renderLines(t),n&&this.renderAreas(n);},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren();},t.prototype.update=function(e){this.attr((0,o.deepAssign)({},this.attributes,e)),this.render();},t.prototype.renderLines=function(e){(0,o.select)(this.linesGroup).selectAll(".line").data(e).join(function(e){return e.append("path").attr("className","line").each(function(e){this.attr(e);});},function(e){return e.each(function(e){this.attr(e);});},function(e){return e.remove();});},t.prototype.renderAreas=function(e){(0,o.select)(this.linesGroup).selectAll(".area").data(e).join(function(e){return e.append("path").attr("className","area").each(function(e){this.attr(e);});},function(e){return e.each(function(e){this.style(e);});},function(e){return e.remove();});},t;}(a.DisplayObject);},"8e8f4f74":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AnimateEvent:function(){return a;},BaseEvent:function(){return r;},ElementLifeCycleEvent:function(){return o;},GraphLifeCycleEvent:function(){return i;},ViewportEvent:function(){return s;}});class r{constructor(e){this.type=e;}}class i extends r{constructor(e,t){super(e),this.data=t;}}class a extends r{constructor(e,t,n,r){super(e),this.animationType=t,this.animation=n,this.data=r;}}class o extends r{constructor(e,t,n){super(e),this.elementType=t,this.data=n;}}class s extends r{constructor(e,t){super(e),this.data=t;}}},"8eaa2cc4":function(e,t,n){"use strict";function r(e,t,n){let r=e*t,i=134217729*e,a=i-(i-e),o=e-a,s=134217729*t,l=s-(s-t),u=t-l,c=o*u-(r-a*l-o*l-a*u);return n?(n[0]=c,n[1]=r,n):[c,r];}n.d(t,"__esModule",{value:!0}),n.d(t,"twoProduct",{enumerable:!0,get:function(){return r;}});},"8eccb805":function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"CommonEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).CLICK="click",i.DBLCLICK="dblclick",i.POINTER_OVER="pointerover",i.POINTER_LEAVE="pointerleave",i.POINTER_ENTER="pointerenter",i.POINTER_MOVE="pointermove",i.POINTER_OUT="pointerout",i.POINTER_DOWN="pointerdown",i.POINTER_UP="pointerup",i.CONTEXT_MENU="contextmenu",i.DRAG_START="dragstart",i.DRAG="drag",i.DRAG_END="dragend",i.DRAG_ENTER="dragenter",i.DRAG_OVER="dragover",i.DRAG_LEAVE="dragleave",i.DROP="drop",i.KEY_DOWN="keydown",i.KEY_UP="keyup",i.WHEEL="wheel",i.PINCH="pinch";},90579130:function(e,t,n){"use strict";function r(e){var t;return(null===(t=e[0])||void 0===t?void 0:t.map(function(t,n){return e.map(function(e){return e[n];});}))||[];}n.d(t,"__esModule",{value:!0}),n.d(t,"transpose",{enumerable:!0,get:function(){return r;}});},"905895f2":function(e,t,n){"use strict";function r(e,t=!0){let n=[];return e.forEach((e,t)=>{n.push([0===t?"M":"L",...e]);}),t&&n.push(["Z"]),n;}n.d(t,"__esModule",{value:!0}),n.e(t,{getClosedSpline:function(){return s;},parsePath:function(){return a;},pathToPoints:function(){return o;},pointsToPath:function(){return r;}});let i={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function a(e){let t=e.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],r="",a={};for(;t.length>0;){let e=t.shift();e in i?r=e:t.unshift(e),a={type:r},i[r].forEach(n=>{e=t.shift(),a[n]=e;}),"M"===r?r="L":"m"===r&&(r="l");let[o,...s]=Object.values(a);n.push([o,...s.map(Number)]);}return n;}function o(e){let t=[];return("string"==typeof e?a(e):e).forEach(e=>{let n=e[0];if("Z"===n){t.push(t[0]);return;}if("A"!==n)for(let n=1;n<e.length;n+=2)t.push([e[n],e[n+1],0]);else{let n=e.length;t.push([e[n-2],e[n-1],0]);}}),t;}let s=e=>{if(e.length<2)return[["M",0,0],["L",0,0]];let t=e[0],n=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(i,r),e.push(t,n);let a=[["M",r[0],r[1]]];for(let t=1;t<e.length-2;t+=1){let[n,r]=e[t-1],[i,o]=e[t],[s,l]=e[t+1],[u,c]=t!==e.length-2?e[t+2]:[s,l],d=i+(s-n)/6,h=o+(l-r)/6,f=s-(u-i)/6,p=l-(c-o)/6;a.push(["C",d,h,f,p,s,l]);}return a;};},"90abb703":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{InternMap:function(){return y.InternMap;},bisect:function(){return o.bisect;},chooseNiceTimeMask:function(){return m.chooseNiceTimeMask;},compose:function(){return r.compose;},createClamp:function(){return a.createClamp;},createInterpolateNumber:function(){return p.createInterpolateNumber;},createInterpolateRound:function(){return p.createInterpolateRound;},createInterpolateValue:function(){return p.createInterpolateValue;},createNormalize:function(){return i.createNormalize;},d3LinearNice:function(){return s.d3LinearNice;},d3TimeNice:function(){return l.d3TimeNice;},findTickInterval:function(){return h.findTickInterval;},interpolatize:function(){return f.interpolatize;},isValid:function(){return u.isValid;},localIntervalMap:function(){return v.localIntervalMap;},logs:function(){return c.logs;},pows:function(){return c.pows;},tickIncrement:function(){return d.tickIncrement;},utcIntervalMap:function(){return g.utcIntervalMap;}});var r=n("4e815d37"),i=n("22d76f01"),a=n("72e66713"),o=n("e71f3dfd"),s=n("fb09bcee"),l=n("9aad35e9"),u=n("341f4ae3"),c=n("d10fccfd"),d=n("a4a27411"),h=n("b6da631d"),f=n("adea5865"),p=n("eae16085"),v=n("9c971d62"),g=n("62f6eb3c"),m=n("03dd02f8"),y=n("4be70f65");},"90bb0ebe":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"UpdateRelatedEdge",{enumerable:!0,get:function(){return a;}});var r=n("81401a10"),i=n("eb4593bd");class a extends i.BaseTransform{beforeDraw(e,t){let{stage:n}=t;if("visibility"===n)return e;let{model:i}=this.context,{update:{nodes:a,edges:o,combos:s}}=e,l=(e,t)=>{i.getRelatedEdgesData(t).forEach(e=>!o.has((0,r.idOf)(e))&&o.set((0,r.idOf)(e),e));};return a.forEach(l),s.forEach(l),e;}}},"90e17978":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Polygon",{enumerable:!0,get:function(){return o;}});var r=n("a566da36"),i=n("8bdd800c"),a=n("ec2f02a5");class o extends a.BaseNode{constructor(e){super(e);}get parsedAttributes(){return this.attributes;}drawKeyShape(e,t){return this.upsert("key",r.Polygon,this.getKeyStyle(e),t);}getKeyStyle(e){return Object.assign(Object.assign({},super.getKeyStyle(e)),{points:this.getPoints(e)});}getIntersectPoint(e,t=!1){var n,r;let{points:a}=this.getShape("key").attributes,o=[+((null===(n=this.attributes)||void 0===n?void 0:n.x)||0),+((null===(r=this.attributes)||void 0===r?void 0:r.y)||0)];return(0,i.getPolygonIntersectPoint)(e,o,a,!0,t).point;}}},91053888:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getBoxedTextNodeStyle:function(){return o;},getLinearTextNodeStyle:function(){return a;}});var r=n("c5eb7168"),i=n("e50a16b8");let a=(0,r.memoize)((e,t,n,r=0)=>{let a={fontWeight:0===r?600:400,fontSize:0===r?24:16},o=(0,i.measureTextSize)(e,0===r?[64,30]:[12,12],a,t,n);return{font:a,size:o};}),o=(0,r.memoize)((e,t,n,r=0)=>{let a={fontWeight:0===r||1===r?600:400,fontSize:0===r?24:16},o=(0,i.measureTextSize)(e,0===r?[64,30]:[36,24],a,t,n);return{font:a,size:o};});},"91e44670":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Polyline",{enumerable:!0,get:function(){return c;}});var r=n("8a0aecd6"),i=n("a2c47206"),a=n("9da99c33"),o=n("367c3e1e"),s=n("fe00eb83"),l=n("cdd49f4a"),u=n("177711d9");class c extends u.BaseEdge{constructor(e){super((0,l.mergeOptions)({style:c.defaultStyleProps},e));}getControlPoints(e){let{router:t}=e,{sourceNode:n,targetNode:r}=this,[i,a]=this.getEndpoints(e,!1),l=[];if(t){if("shortest-path"===t.type){let u=this.context.element.getNodes();(l=(0,s.aStarSearch)(n,r,u,t)).length||(l=(0,o.orth)(i,a,n,r,e.controlPoints,{padding:t.offset}));}else"orth"===t.type&&(l=(0,o.orth)(i,a,n,r,e.controlPoints,t));}else l=e.controlPoints;return l;}getPoints(e){let t=this.getControlPoints(e),[n,r]=this.getEndpoints(e,!0,t);return[n,...t,r];}getKeyPath(e){let t=this.getPoints(e);return(0,i.getPolylinePath)(t,e.radius);}getLoopPath(e){let{sourcePort:t,targetPort:n,radius:o}=e,s=this.sourceNode,l=(0,r.getNodeBBox)(s),u=Math.max((0,r.getBBoxWidth)(l),(0,r.getBBoxHeight)(l))/4,{placement:c,clockwise:d,dist:h=u}=(0,a.subStyleProps)(this.getGraphicStyle(e),"loop");return(0,i.getPolylineLoopPath)(s,o,c,d,h,t,n);}}c.defaultStyleProps={radius:0,controlPoints:[],router:!1};},"9225b8d3":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("753b8411"),t),r._(n("47cc8d53"),t),r._(n("530fd5f7"),t),r._(n("7d264fff"),t),r._(n("1af423ec"),t),r._(n("6d758b89"),t),r._(n("cd3e27e8"),t),r._(n("efced6b1"),t),r._(n("dac7208b"),t),r._(n("74892272"),t),r._(n("e17abe05"),t),r._(n("1ccb7cfc"),t),r._(n("b5264332"),t);},"924ca9a1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Quantize",{enumerable:!0,get:function(){return o;}});var r=n("55be970f"),i=n("6506d72a"),a=n("90abb703");class o extends r.Threshold{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:i.wilkinsonExtended};}constructor(e){super(e);}nice(){let{nice:e}=this.options;if(e){let[e,t,n]=this.getTickMethodOptions();this.options.domain=(0,a.d3LinearNice)(e,t,n);}}getTicks(){let{tickMethod:e}=this.options,[t,n,r]=this.getTickMethodOptions();return e(t,n,r);}getTickMethodOptions(){let{domain:e,tickCount:t}=this.options;return[e[0],e[e.length-1],t];}rescale(){this.nice();let{range:e,domain:t}=this.options,[n,r]=t;this.n=e.length-1,this.thresholds=Array(this.n);for(let e=0;e<this.n;e+=1)this.thresholds[e]=((e+1)*r-(e-this.n)*n)/(this.n+1);}invert(e){let[t,n]=super.invert(e),[r,i]=this.options.domain;return void 0===t&&void 0===n?[t,n]:[t||r,n||i];}getThresholds(){return this.thresholds;}clone(){return new o(this.options);}}},"9279af14":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("dba8fc9a"),t);},"93aaeb3c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"TextNode",{enumerable:!0,get:function(){return c;}});var r=n("777fffbe"),i=n("852bbaa9"),a=n("8011b6f5"),o=r._(n("3e6b097d")),s=i._(n("247081c8")),l=n("a0cde663");let u=s.default.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow-wrap: anywhere;
  line-height: 1.5em;
  text-align: center;
  height: inherit;
  width: inherit;
  box-sizing: content-box;
  font-size: 14px;

  ${({$type:e,$color:t,$borderWidth:n})=>{switch(e){case"normal":return`
          color: ${t};
        `;case"filled":return(0,s.css)`
          color: #fff;
          background-color: ${t};
          border-radius: 8px;
        `;case"outlined":return(0,s.css)`
          height: calc(100% - 2 * ${n}px);
          width: calc(100% - 2 * ${n}px);
          color: ${t};
          background-color: #fff;
          border: ${n}px solid ${t};
          border-radius: 8px;
        `;case"underlined":return(0,s.css)`
          height: calc(100% - ${n}px / 2);
          width: inherit;
          border-bottom: ${n}px solid ${t};
          background-color: #fff;
          color: ${t};
        `;}}}

  ${({$isActive:e,$isSelected:t,$borderWidth:n,$color:r})=>(e||t)&&(0,s.css)`
      height: calc(100% - 2 * ${n}px);
      width: calc(100% - 2 * ${n}px);
      border: ${n}px solid ${(0,l.darkenHexColor)(r,100)};
      ${t&&`box-shadow: 0 0 0 2px ${(0,l.hexToRgba)(r,.1)};`}
    `}
`,c=e=>{let{className:t,style:n={},type:r="normal",text:i="",font:s,color:l="#1783ff",borderWidth:c=3,maxWidth:d=1/0,isActive:h=!1,isSelected:f=!1}=e,p=(0,a.measureTextWidth)(i,s)>d;return o.default.createElement(u,{$type:r,$color:l,$borderWidth:c,$isActive:h,$isSelected:f,className:`text-node text-node-${r} ${t||""}`,style:{...n,...s}},o.default.createElement("div",{style:p?{width:"calc(100% - 12px)"}:{}},i));};},"93db2ea5":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"NetworkGraph",{enumerable:!0,get:function(){return l;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("aeeab442"),s=n("092d36bb");let l=(0,r.forwardRef)(({children:e,...t},n)=>{let l=(0,r.useMemo)(()=>(0,o.mergeOptions)(a.COMMON_OPTIONS,s.DEFAULT_OPTIONS,t),[t]);return r.default.createElement(i.BaseGraph,{...l,ref:n},e);});},"93ff44d0":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return d;}});var r=n("fce32b31"),i=n("3a369f8c"),a=n("d7bc52f9"),o=n("8eaa2cc4");function s(e){return(3===e?function(e,t,n,r){return function(n,i,a){let o=r(e(e(t(i[1],a[0]),t(-a[1],i[0])),e(t(n[1],i[0]),t(-i[1],n[0]))),e(t(n[1],a[0]),t(-a[1],n[0])));return o[o.length-1];};}:4===e?function(e,t,n,r){return function(i,a,o,s){let l=r(e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2])))),e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2])))));return l[l.length-1];};}:function(e,t,n,r){return function(i,a,o,s,l){let u=r(e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),a[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-o[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),s[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-l[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-a[3])))),e(e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),s[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-l[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),i[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-a[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-s[3]))))),e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3])),e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3]))),e(e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),i[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),-a[3])),e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-l[3])))));return u[u.length-1];};})(a.linearExpansionSum,o.twoProduct,r.scaleLinearExpansion,i.robustSubtract);}let l=s(3),u=s(4),c=[function(){return 0;},function(){return 0;},function(e,t){return t[0]-e[0];},function(e,t,n){let r;let i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a;}else{if(!(i<0)||a>=0)return o;r=-(i+a);}let s=33306690738754716e-32*r;return o>=s||o<=-s?o:l(e,t,n);},function(e,t,n,r){let i=e[0]-r[0],a=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],c=n[1]-r[1],d=e[2]-r[2],h=t[2]-r[2],f=n[2]-r[2],p=a*c,v=o*l,g=o*s,m=i*c,y=i*l,b=a*s,E=d*(p-v)+h*(g-m)+f*(y-b),x=7771561172376103e-31*((Math.abs(p)+Math.abs(v))*Math.abs(d)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(b))*Math.abs(f));return E>x||-E>x?E:u(e,t,n,r);}];var d=function(){for(;c.length<=5;)c.push(s(c.length));let e=function(e,t,n,r,i,a,o){return function(...t){switch(t.length){case 0:case 1:return 0;case 2:return r(t[0],t[1]);case 3:return i(t[0],t[1],t[2]);case 4:return a(t[0],t[1],t[2],t[3]);case 5:return o(t[0],t[1],t[2],t[3],t[4]);}return e(t);};}(void 0,0,...c);for(let t=0;t<=5;++t)e[t]=c[t];return e;}();},"94534a11":function(e,t,n){"use strict";let r;n.d(t,"__esModule",{value:!0}),n.e(t,{getImageWatermark:function(){return s;},getTextWatermark:function(){return o;}});var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};function a(e,t){return r||(r=document.createElement("canvas")),r.width=e,r.height=t,r.getContext("2d").clearRect(0,0,e,t),r;}function o(e,t,n,r){return i(this,void 0,void 0,function*(){let i=a(e,t),o=i.getContext("2d"),{rotate:s,opacity:l,textFill:u,textFontSize:c,textFontFamily:d,textFontVariant:h,textFontWeight:f,textAlign:p,textBaseline:v}=r;return o.textAlign=p,o.textBaseline=v,o.translate(e/2,t/2),o.font=`${c}px ${d} ${h} ${f}`,s&&o.rotate(s),l&&(o.globalAlpha=l),u&&(o.fillStyle=u,o.fillText(`${n}`,0,0)),i.toDataURL();});}function s(e,t,n,r){return i(this,void 0,void 0,function*(){let i=a(e,t),o=i.getContext("2d"),{rotate:s,opacity:l}=r;s&&o.rotate(s),l&&(o.globalAlpha=l);let u=new Image;return u.crossOrigin="anonymous",u.src=n,new Promise(n=>{u.onload=function(){let r=e>u.width?(e-u.width)/2:0,a=t>u.height?(t-u.height)/2:0;o.drawImage(u,0,0,u.width,u.height,r,a,e-2*r,t-2*a),n(i.toDataURL());};});});}},94538737:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{renderExtDo:function(){return o;},renderHtmlExtDo:function(){return s;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("9225b8d3");function o(e){return"function"==typeof e?e():(0,i.isString)(e)||(0,i.isNumber)(e)?new a.Text({style:{text:String(e)}}):e;}function s(e,t){return"function"==typeof e?e():(0,i.isString)(e)||(0,i.isNumber)(e)?new a.HTML({style:(0,r.__assign)((0,r.__assign)({pointerEvents:"auto"},t),{innerHTML:e})}):e;}},"95550d14":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ELEMENT_TYPES:function(){return i;},ICON_SIZE_RATIO:function(){return r;}});let r=.8,i=["node","edge","combo"];},"955c2878":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Category:function(){return r.Category;},Continuous:function(){return i.Continuous;}});var r=n("1b50313f"),i=n("fdbbfe44");},"95ad441e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"RectCombo",{enumerable:!0,get:function(){return o;}});var r=n("a566da36"),i=n("9da99c33"),a=n("751c3a20");class o extends a.BaseCombo{constructor(e){super(e);}drawKeyShape(e,t){return this.upsert("key",r.Rect,this.getKeyStyle(e),t);}getKeyStyle(e){let t=super.getKeyStyle(e),[n,r]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},t),e.collapsed&&(0,i.subStyleProps)(t,"collapsed")),{width:n,height:r,x:-n/2,y:-r/2});}}},"95d68719":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"renderTitle",{enumerable:!0,get:function(){return c;}});var r=n("18f14020"),i=n("f457f3e3"),a=n("01a29d03"),o=n("cd5371db"),s=n("d5e231fc"),l=n("82f544b2");function u(e,t,n,s,l){var u=(0,a.subStyleProps)(s,"title"),c=(0,r.__read)((0,a.splitStyle)(u),2),d=c[0],h=c[1],f=h.transform,p=h.transformOrigin,v=(0,r.__rest)(h,["transform","transformOrigin"]);t.styles(v);var g=f||function(e,t,n){var r=2*e.getGeometryBounds().halfExtents[1];if("vertical"===t){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")");}return"";}(e.node(),d.direction,d.position);e.styles((0,r.__assign)((0,r.__assign)({},d),{transformOrigin:p})),(0,a.percentTransform)(e.node(),g);var m=function(e,t,n){var i=n.titlePosition,o=void 0===i?"lb":i,s=n.titleSpacing,l=(0,a.parsePosition)(o),u=e.node().getLocalBounds(),c=(0,r.__read)(u.min,2),d=c[0],h=c[1],f=(0,r.__read)(u.halfExtents,2),p=f[0],v=f[1],g=(0,r.__read)(t.node().getLocalBounds().halfExtents,2),m=g[0],y=g[1],b=(0,r.__read)([d+p,h+v],2),E=b[0],x=b[1],k=(0,r.__read)((0,a.parseSeriesAttr)(s),4),S=k[0],T=k[1],M=k[2],w=k[3];if(["start","end"].includes(o)&&"linear"===n.type){var N=n.startPos,C=n.endPos,_=(0,r.__read)("start"===o?[N,C]:[C,N],2),P=_[0],A=_[1],O=(0,a.normalize)([-A[0]+P[0],-A[1]+P[1]]),L=(0,r.__read)((0,a.scale)(O,S),2),R=L[0],D=L[1];return{x:P[0]+R,y:P[1]+D};}return l.includes("t")&&(x-=v+y+S),l.includes("r")&&(E+=p+m+T),l.includes("l")&&(E-=p+m+w),l.includes("b")&&(x+=v+y+M),{x:E,y:x};}((0,a.select)(n._offscreen||n.querySelector(o.CLASS_NAMES.mainGroup.class)),t,s),y=m.x,b=m.y;return(0,i.transition)(t.node(),{transform:"translate(".concat(y,", ").concat(b,")")},l);}function c(e,t,n,r){var i=n.titleText,c=n.classNamePrefix;return e.selectAll(o.CLASS_NAMES.title.class).data([{title:i}].filter(function(e){return!!e.title;}),function(e,t){return e.title;}).join(function(d){var h=d.append(function(){return(0,a.renderExtDo)(i);}).attr("className",o.CLASS_NAMES.title.name).transition(function(){return u((0,a.select)(this),e,t,n,r.enter);});return(0,s.applyClassName)(h,o.CLASS_NAMES.title,l.CLASSNAME_SUFFIX_MAP.title,c),h;},function(i){return i.transition(function(){return u((0,a.select)(this),e,t,n,r.update);});},function(e){return e.remove();}).transitions();}},"95fe0007":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Graphin",{enumerable:!0,get:function(){return r.Graphin;}}),n("1a081974");var r=n("6f503a08");},96029596:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"FocusElement",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("95550d14"),o=n("db1e79e1"),s=n("32576f8a"),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class u extends s.BaseBehavior{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.focus=e=>l(this,void 0,void 0,function*(){if(!this.validate(e))return;let{graph:t}=this.context;yield t.focusElement(e.target.id,this.options.animation);}),this.shortcut=new o.Shortcut(e.graph),this.bindEvents();}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),a.ELEMENT_TYPES.forEach(t=>{e.on(`${t}:${i.CommonEvent.CLICK}`,this.focus);});}validate(e){if(this.destroyed||!this.isKeydown())return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}isKeydown(){let{trigger:e}=this.options;return null==e||!e.length||this.shortcut.match(e);}unbindEvents(){let{graph:e}=this.context;a.ELEMENT_TYPES.forEach(t=>{e.off(`${t}:${i.CommonEvent.CLICK}`,this.focus);});}destroy(){this.unbindEvents(),this.shortcut.destroy(),super.destroy();}}u.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0,trigger:[]};},"9644f472":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Label",{enumerable:!0,get:function(){return u;}});var r=n("a566da36"),i=n("28792030"),a=n("9da99c33"),o=n("cdd49f4a"),s=n("04a20e6f"),l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class u extends s.BaseShape{constructor(e){super((0,o.mergeOptions)({style:u.defaultStyleProps},e));}isTextStyle(e){return(0,a.startsWith)(e,"label");}isBackgroundStyle(e){return(0,a.startsWith)(e,"background");}getTextStyle(e){let t=this.getGraphicStyle(e),{padding:n}=t,r=l(t,["padding"]);return(0,a.omitStyleProps)(r,"background");}getBackgroundStyle(e){if(!1===e.background)return!1;let t=this.getGraphicStyle(e),{wordWrap:n,wordWrapWidth:r,padding:o}=t,s=(0,a.subStyleProps)(t,"background"),{min:[l,u],center:[c,d],halfExtents:[h,f]}=this.shapeMap.text.getGeometryBounds(),[p,v,g,m]=(0,i.parsePadding)(o),y=2*h+m+v,{width:b,height:E}=s;b&&E?Object.assign(s,{x:c-Number(b)/2,y:d-Number(E)/2}):Object.assign(s,{x:l-m,y:u-p,width:n?Math.min(y,r+m+v):y,height:2*f+p+g});let{radius:x}=s;if("string"==typeof x&&x.endsWith("%")){let e=Number(x.replace("%",""))/100;s.radius=Math.min(+s.width,+s.height)*e;}return s;}render(e=this.parsedAttributes,t=this){this.upsert("text",r.Text,this.getTextStyle(e),t),this.upsert("background",r.Rect,this.getBackgroundStyle(e),t);}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds();}}u.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};},"966f7de2":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{findPort:function(){return x;},findPorts:function(){return E;},getAllPorts:function(){return m;},getConnectionPoint:function(){return k;},getDiamondPoints:function(){return P;},getHexagonPoints:function(){return R;},getNodeConnectionPoint:function(){return T;},getPortConnectionPoint:function(){return S;},getPortPosition:function(){return b;},getPortXYByPlacement:function(){return g;},getStarPoints:function(){return w;},getStarPorts:function(){return N;},getTextStyleByPlacement:function(){return M;},getTrianglePoints:function(){return C;},getTrianglePorts:function(){return _;},isCombo:function(){return h;},isEdge:function(){return d;},isElement:function(){return f;},isNode:function(){return c;},isSameNode:function(){return p;},isSimplePort:function(){return y;},isToBeDestroyed:function(){return I;},isVisible:function(){return A;},markToBeDestroyed:function(){return D;},setAttributes:function(){return O;},updateStyle:function(){return L;}});var r=n("abe9d8d6"),i=n("8754ee1a"),a=n("8a0aecd6"),o=n("bb430c3e"),s=n("8bdd800c"),l=n("2a08964b"),u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function c(e){return e instanceof i.BaseNode&&"node"===e.type;}function d(e){return e instanceof i.BaseEdge;}function h(e){return e instanceof i.BaseCombo;}function f(e){return c(e)||d(e)||h(e);}function p(e,t){return!!e&&!!t&&e===t;}let v={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function g(e,t,n=v,i=!0){let o=[.5,.5],s=(0,r.isString)(t)?(0,r.get)(n,t.toLocaleLowerCase(),o):t;if(!i&&(0,r.isString)(t))return s;let[l,u]=s||o;return[e.min[0]+(0,a.getBBoxWidth)(e)*l,e.min[1]+(0,a.getBBoxHeight)(e)*u];}function m(e){if(!e)return{};let t=e.getPorts();return(e.attributes.ports||[]).forEach((n,r)=>{var i;let{key:a,placement:o}=n;y(n)&&(t[i=a||r]||(t[i]=(0,l.getXYByPlacement)(e.getShape("key").getBounds(),o)));}),t;}function y(e){let{r:t}=e;return!t||0===Number(t);}function b(e){return(0,o.isPoint)(e)?e:e.getPosition();}function E(e,t,n,r){return[x(e,t,n,r),x(t,e,r,n)];}function x(e,t,n,r){let i=m(e);if(n)return i[n];let a=Object.values(i);if(0===a.length)return;let o=a.map(e=>b(e)),l=function(e,t){let n=m(e);if(t)return[b(n[t])];let r=Object.values(n);return r.length>0?r.map(e=>b(e)):[e.getCenter()];}(t,r),[u]=(0,s.findNearestPoints)(o,l);return a.find(e=>b(e)===u);}function k(e,t){return h(e)||c(e)?T(e,t):S(e,t);}function S(e,t){if(!e||!t)return[0,0,0];if((0,o.isPoint)(e))return e;if(e.attributes.linkToCenter)return e.getPosition();let n=(0,o.isPoint)(t)?t:c(t)?t.getCenter():t.getPosition();return(0,s.getEllipseIntersectPoint)(n,e.getBounds());}function T(e,t){if(!e||!t)return[0,0,0];let n=(0,o.isPoint)(t)?t:c(t)?t.getCenter():t.getPosition();return e.getIntersectPoint(n)||e.getCenter();}function M(e,t="bottom",n=0,r=0,i=!1){let a=t.split("-"),[o,s]=(0,l.getXYByPlacement)(e,t),[u,c]=i?["bottom","top"]:["top","bottom"];return{transform:[["translate",o+n,s+r]],textBaseline:a.includes("top")?c:a.includes("bottom")?u:"middle",textAlign:a.includes("left")?"right":a.includes("right")?"left":"center"};}function w(e,t){return[[0,-e],[t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)],[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[0,t],[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[-t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[-t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)]];}function N(e,t){let n={};return n.top=[0,-e],n.left=[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n["left-bottom"]=[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.bottom=[0,t],n["right-bottom"]=[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.right=n.default=[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n;}function C(e,t,n){let r=t/2,i=e/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up;}function _(e,t,n){let r=t/2,i=e/2,a={};return"down"===n?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):"left"===n?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):"right"===n?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a;}function P(e,t){return[[0,-t/2],[e/2,0],[0,t/2],[-e/2,0]];}function A(e){return"hidden"!==(0,r.get)(e,["style","visibility"]);}function O(e,t){let{zIndex:n,transform:i,transformOrigin:a,visibility:o,cursor:s,clipPath:l,component:c}=t,d=u(t,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(e.attributes,d),i&&e.setAttribute("transform",i),(0,r.isNumber)(n)&&e.setAttribute("zIndex",n),a&&e.setAttribute("transformOrigin",a),o&&e.setAttribute("visibility",o),s&&e.setAttribute("cursor",s),l&&e.setAttribute("clipPath",l),c&&e.setAttribute("component",c);}function L(e,t){"update"in e?e.update(t):e.attr(t);}function R(e){return[[0,e],[e*Math.sqrt(3)/2,e/2],[e*Math.sqrt(3)/2,-e/2],[0,-e],[-e*Math.sqrt(3)/2,-e/2],[-e*Math.sqrt(3)/2,e/2]];}function D(e){(0,r.set)(e,"__to_be_destroyed__",!0);}function I(e){return(0,r.get)(e,"__to_be_destroyed__",!1);}},"96f7a373":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("e58591b4"),t);},"970f6e03":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ChartLoading",{enumerable:!0,get:function(){return a;}});var r=n("777fffbe")._(n("3e6b097d")),i=function(e){if("undefined"==typeof document)return"loading";var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  ",n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n);},a=function(e){var t=e.loadingTemplate,n=e.theme,a=r.default.useRef(null);return r.default.useEffect(function(){!t&&a.current&&i(a.current);},[]),r.default.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===(void 0===n?"light":n)?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},t||r.default.createElement("div",{ref:a}));};},"976e6f7d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Grid:function(){return r;},grid:function(){return i;}});class r{constructor(e,t){for(let n of(this._cells=[],this._cellSize=t,this._reverseCellSize=1/t,e)){let e=this.coordToCellNum(n[0]),t=this.coordToCellNum(n[1]);this._cells[e]||(this._cells[e]=[]),this._cells[e][t]||(this._cells[e][t]=[]),this._cells[e][t].push(n);}}cellPoints(e,t){var n;return(null===(n=this._cells[e])||void 0===n?void 0:n[t])||[];}rangePoints(e){let t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),r=this.coordToCellNum(e[2]),i=this.coordToCellNum(e[3]),a=[];for(let e=t;e<=r;e++)for(let t=n;t<=i;t++)for(let n of this.cellPoints(e,t))a.push(n);return a;}removePoint(e){let t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),r=this._cells[t][n],i=r.findIndex(([t,n])=>t===e[0]&&n===e[1]);return i>-1&&r.splice(i,1),r;}trunc(e){return Math.trunc(e);}coordToCellNum(e){return this.trunc(e*this._reverseCellSize);}extendBbox(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize];}}function i(e,t){return new r(e,t);}},97770451:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ReactNode",{enumerable:!0,get:function(){return r.ReactNode;}});var r=n("82714042");},"98176abe":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"createPluginCanvas",{enumerable:!0,get:function(){return s;}});var r=n("a566da36"),i=n("0c02ee7e"),a=n("b625de69"),o=n("82c10466");function s(e){let{width:t,height:n,renderer:s}=e,l=function(e){var t;let{container:n,className:r,graphCanvas:i}=e;if(n)return"string"==typeof n?document.getElementById(n):n;let s=(0,o.createPluginContainer)(r,!1),{width:l,height:u,containerStyle:c}=e,[d,h]=function(e){let{width:t,height:n,placement:r,graphCanvas:i}=e,[o,s]=i.getSize(),[l,u]=(0,a.parsePlacement)(r);return[l*(o-t),u*(s-n)];}(e);return Object.assign(s.style,Object.assign({position:"absolute",left:d+"px",top:h+"px",width:l+"px",height:u+"px"},c)),null===(t=i.getContainer())||void 0===t||t.appendChild(s),s;}(e),u=new r.Canvas({width:t,height:n,container:l,renderer:s||new i.Renderer});return[l,u];}},"984ad0be":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return l;}});var r=n("18f14020"),i=n("01a29d03"),a=n("9e868a30"),o=n("16bb9463"),s={parity:function(e,t){var n=t.seq,r=void 0===n?2:n;return e.filter(function(e,t){return!(t%r)||((0,i.hide)(e),!1);});}};function l(e,t,n,l){var u,c,d=e.length,h=t.keepHeader,f=t.keepTail;if(!(d<=1)&&(2!==d||!h||!f)){var p=s.parity,v=function(e){return e.forEach(l.show),e;},g=2,m=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,r.__spreadArray)([1],(0,r.__read)(e.map(function(e){return e.getBBox().width;})),!1));if("linear"===n.type&&((0,a.isAxisHorizontal)(n)||(0,a.isAxisVertical)(n))){var E=(0,i.getLocalBBox)(e[0]).left,x=Math.abs((0,i.getLocalBBox)(e[d-1]).right-E)||1;g=Math.max(Math.floor(d*b/x),g);}for(h&&(u=m.splice(0,1)[0]),f&&(c=m.splice(-1,1)[0],m.reverse()),v(m);g<e.length&&(0,o.boundTest)((c?(0,r.__spreadArray)((0,r.__spreadArray)([c],(0,r.__read)(y),!1),[u],!1):(0,r.__spreadArray)([u],(0,r.__read)(y),!1)).filter(i.defined),n,null==t?void 0:t.margin).length;){if(c&&!u&&g%2==0){var k=m.splice(0,1);k.forEach(l.hide);}else if(c&&u){var k=m.splice(0,1);k.forEach(l.hide);}y=p(v(m),{seq:g}),g++;}}}},"988eb09c":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Badge:function(){return r.Badge;},BaseShape:function(){return i.BaseShape;},Contour:function(){return a.Contour;},Icon:function(){return o.Icon;},Image:function(){return s.Image;},Label:function(){return l.Label;}});var r=n("07d25c97"),i=n("04a20e6f"),a=n("3fa947ae"),o=n("3d432940"),s=n("133675a0"),l=n("9644f472");},"989f6435":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"string2rbg",{enumerable:!0,get:function(){return a;}});var r=n("777fffbe")._(n("20b1bab9"));function i(e,t,n){let r=n;return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e;}function a(e){let t=r.default.get(e);if(!t)return null;let{model:n,value:a}=t;return"rgb"===n?a:"hsl"===n?function(e){let t=e[0]/360,n=e[1]/100,r=e[2]/100,a=e[3];if(0===n)return[255*r,255*r,255*r,a];let o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;return[255*i(s,o,t+1/3),255*i(s,o,t),255*i(s,o,t-1/3),a];}(a):null;}},"9aad35e9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3TimeNice",{enumerable:!0,get:function(){return i;}});var r=n("b6da631d");let i=(e,t,n,i,a)=>{let o=e>t,s=o?t:e,l=o?e:t,[u,c]=(0,r.findTickInterval)(s,l,n,i,a),d=[u.floor(s,c),u.ceil(l,c)];return o?d.reverse():d;};},"9b91cc25":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Axis",{enumerable:!0,get:function(){return r.Axis;}});var r=n("2125b09b");},"9b965f0a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Legend",{enumerable:!0,get:function(){return u;}});var r=n("6b44cd45"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("0d562788"),s=n("98176abe"),l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class u extends o.BasePlugin{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{let{graph:e}=this.context;e.on(a.GraphEvent.AFTER_DRAW,this.createElement);},this.changeState=(e,t)=>{let{graph:n}=this.context,{typePrefix:r}=this,a=(0,i.get)(e,[r,"id"]),o=(0,i.get)(e,[r,"style","labelText"]),[s]=a.split("__"),l=this.fieldMap[s].get(o)||[];n.setElementState(Object.fromEntries(null==l?void 0:l.map(e=>[e,t])));},this.click=e=>{if("hover"===this.options.trigger)return;let t=(0,i.get)(e,[this.typePrefix,"id"]);this.selectedItems.includes(t)?(this.selectedItems=this.selectedItems.filter(e=>e!==t),this.changeState(e,[])):(this.selectedItems.push(t),this.changeState(e,"selected"));},this.mouseleave=e=>{"click"!==this.options.trigger&&(this.selectedItems=[],this.changeState(e,[]));},this.mouseenter=e=>{if("click"===this.options.trigger)return;let t=(0,i.get)(e,[this.typePrefix,"id"]);this.selectedItems.includes(t)?this.selectedItems=this.selectedItems.filter(e=>e!==t):(this.selectedItems.push(t),this.changeState(e,"active"));},this.setFieldMap=(e,t,n)=>{if(!e)return;let r=this.fieldMap[n];if(r){if(r.has(e)){let n=r.get(e);n&&(n.push(t),r.set(e,n));}else r.set(e,[t]);}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(e,t)=>{if(!e)return[];let{model:n,element:r}=this.context,{nodes:a,edges:o,combos:s}=n.getData(),l={},u=t=>(0,i.isFunction)(e)?e(t):e,c={node:"circle",edge:"line",combo:"rect"},d={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},h=(e,t)=>null==r?void 0:r.getElementComputedStyle(e,t),f=(e,t)=>{e.forEach(e=>{let{id:n}=e,a=(0,i.get)(e,["data",u(e)]),o=(null==r?void 0:r.getElementType(t,e))||"circle",s=h(t,e),f=("edge"===t?null==s?void 0:s.stroke:null==s?void 0:s.fill)||"#1783ff";n&&a&&a.replace(/\s+/g,"")&&(this.setFieldMap(a,n,t),l[a]||(l[a]={id:`${t}__${n}`,label:a,marker:d[o]||c[t],elementType:t,lineWidth:1,stroke:f,fill:f}));});};switch(t){case"node":f(a,"node");break;case"edge":f(o,"edge");break;case"combo":f(s,"combo");break;default:return[];}return Object.values(l);},this.createElement=()=>{if(this.draw){this.updateElement();return;}let e=this.options,{width:t,height:n,nodeField:i,edgeField:a,comboField:o,trigger:s,position:u,container:c,containerStyle:d,className:h}=e,f=l(e,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),p=this.getMarkerData(i,"node"),v=this.getMarkerData(a,"edge"),g=Object.assign({width:t,height:n,data:[...p,...this.getMarkerData(o,"combo"),...v],itemMarkerLineWidth:({lineWidth:e})=>e,itemMarker:({marker:e})=>e,itemMarkerStroke:({stroke:e})=>e,itemMarkerFill:({fill:e})=>e,gridCol:p.length},f,this.getEvents()),m=new r.Category({className:"legend",style:g});this.category=m,this.upsertCanvas().appendChild(m),this.draw=!0;},this.bindEvents();}update(e){super.update(e),this.clear(),this.createElement();}clear(){var e,t;null===(e=this.canvas)||void 0===e||e.destroy(),null===(t=this.container)||void 0===t||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1;}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5});}upsertCanvas(){if(this.canvas)return this.canvas;let e=this.context.canvas,[t,n]=e.getSize(),{width:r=t,height:i=n,position:a,container:o,containerStyle:l,className:u}=this.options,[c,d]=(0,s.createPluginCanvas)({width:r,height:i,graphCanvas:e,container:o,containerStyle:l,placement:a,className:"legend"});return this.container=c,u&&c.classList.add(u),this.canvas=d,this.canvas;}destroy(){this.clear(),this.context.graph.off(a.GraphEvent.AFTER_DRAW,this.createElement),super.destroy();}}u.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};},"9c40fbca":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"format",{enumerable:!0,get:function(){return v;}});var r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i=/\[([^]*?)\]/gm;function a(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n;}var o=function(e){return function(t,n){var r=n[e].map(function(e){return e.toLowerCase();}).indexOf(t.toLowerCase());return r>-1?r:null;};};function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var a in i)e[a]=i[a];}return e;}var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"],c=a(u,3),d=s({},{dayNamesShort:a(l,3),dayNames:l,monthNamesShort:c,monthNames:u,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10];}}),h=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e;},f={D:function(e){return String(e.getDate());},DD:function(e){return h(e.getDate());},Do:function(e,t){return t.DoFn(e.getDate());},d:function(e){return String(e.getDay());},dd:function(e){return h(e.getDay());},ddd:function(e,t){return t.dayNamesShort[e.getDay()];},dddd:function(e,t){return t.dayNames[e.getDay()];},M:function(e){return String(e.getMonth()+1);},MM:function(e){return h(e.getMonth()+1);},MMM:function(e,t){return t.monthNamesShort[e.getMonth()];},MMMM:function(e,t){return t.monthNames[e.getMonth()];},YY:function(e){return h(String(e.getFullYear()),4).substr(2);},YYYY:function(e){return h(e.getFullYear(),4);},h:function(e){return String(e.getHours()%12||12);},hh:function(e){return h(e.getHours()%12||12);},H:function(e){return String(e.getHours());},HH:function(e){return h(e.getHours());},m:function(e){return String(e.getMinutes());},mm:function(e){return h(e.getMinutes());},s:function(e){return String(e.getSeconds());},ss:function(e){return h(e.getSeconds());},S:function(e){return String(Math.round(e.getMilliseconds()/100));},SS:function(e){return h(Math.round(e.getMilliseconds()/10),2);},SSS:function(e){return h(e.getMilliseconds(),3);},a:function(e,t){return 12>e.getHours()?t.amPm[0]:t.amPm[1];},A:function(e,t){return 12>e.getHours()?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase();},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+h(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4);},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+h(Math.floor(Math.abs(t)/60),2)+":"+h(Math.abs(t)%60,2);}};o("monthNamesShort"),o("monthNames");var p={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},v=function(e,t,n){if(void 0===t&&(t=p.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw Error("Invalid Date pass to format");t=p[t]||t;var a=[];t=t.replace(i,function(e,t){return a.push(t),"@@@";});var o=s(s({},d),n);return(t=t.replace(r,function(t){return f[t](e,o);})).replace(/@@@/g,function(){return a.shift();});};},"9c971d62":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DURATION_DAY:function(){return o;},DURATION_HOUR:function(){return a;},DURATION_MINUTE:function(){return i;},DURATION_MONTH:function(){return l;},DURATION_SECOND:function(){return r;},DURATION_WEEK:function(){return s;},DURATION_YEAR:function(){return u;},createInterval:function(){return c;},day:function(){return v;},hour:function(){return p;},localIntervalMap:function(){return b;},millisecond:function(){return d;},minute:function(){return f;},month:function(){return g;},second:function(){return h;},week:function(){return m;},year:function(){return y;}});let r=1e3,i=6e4,a=36e5,o=864e5,s=6048e5,l=2592e6,u=31536e6;function c(e,t,n,r){let i=(e,t)=>{let i=e=>r(e)%t==0,a=t;for(;a&&!i(e);)n(e,-1),a-=1;return e;},a=(e,n)=>{n&&i(e,n),t(e);},o=(e,t)=>{let r=new Date(+e-1);return a(r,t),n(r,t),a(r),r;};return{ceil:o,floor:(e,t)=>{let n=new Date(+e);return a(n,t),n;},range:(e,t,r,i)=>{let s=[],l=Math.floor(r),u=i?o(e,r):o(e);for(;u<t;n(u,l),a(u))s.push(new Date(+u));return s;},duration:e};}let d=c(1,e=>e,(e,t=1)=>{e.setTime(+e+t);},e=>e.getTime()),h=c(r,e=>{e.setMilliseconds(0);},(e,t=1)=>{e.setTime(+e+r*t);},e=>e.getSeconds()),f=c(i,e=>{e.setSeconds(0,0);},(e,t=1)=>{e.setTime(+e+i*t);},e=>e.getMinutes()),p=c(a,e=>{e.setMinutes(0,0,0);},(e,t=1)=>{e.setTime(+e+a*t);},e=>e.getHours()),v=c(o,e=>{e.setHours(0,0,0,0);},(e,t=1)=>{e.setTime(+e+o*t);},e=>e.getDate()-1),g=c(l,e=>{e.setDate(1),e.setHours(0,0,0,0);},(e,t=1)=>{let n=e.getMonth();e.setMonth(n+t);},e=>e.getMonth()),m=c(s,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0);},(e,t=1)=>{e.setDate(e.getDate()+7*t);},e=>{let t=g.floor(e);return Math.floor((+new Date(+e)-+t)/s);}),y=c(u,e=>{e.setMonth(0,1),e.setHours(0,0,0,0);},(e,t=1)=>{let n=e.getFullYear();e.setFullYear(n+t);},e=>e.getFullYear()),b={millisecond:d,second:h,minute:f,hour:p,day:v,week:m,month:g,year:y};},"9cec50bb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{HoverActivateChain:function(){return r.HoverActivateChain;},HoverActivateNeighbors:function(){return i.HoverActivateNeighbors;}});var r=n("6c1b3ec8"),i=n("6fd77dfd");},"9d4f096a":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Base",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");class i{transformBreaks(e){return e;}constructor(e){var t;this.options=(0,r.deepMix)({},this.getDefaultOptions()),this.update((null===(t=null==e?void 0:e.breaks)||void 0===t?void 0:t.length)?this.transformBreaks(e):e);}getOptions(){return this.options;}update(e={}){let t=e.breaks?this.transformBreaks(e):e;this.options=(0,r.deepMix)({},this.options,t),this.rescale(t);}rescale(e){}}},"9da99c33":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{addPrefix:function(){return a;},omitStyleProps:function(){return u;},removePrefix:function(){return o;},startsWith:function(){return i;},subObject:function(){return l;},subStyleProps:function(){return s;}});var r=n("abe9d8d6");function i(e,t){if(!e.startsWith(t))return!1;let n=e[t.length];return n>="A"&&n<="Z";}function a(e,t){return`${t}${(0,r.upperFirst)(e)}`;}function o(e,t,n=!0){if(!t||!i(e,t))return e;let a=e.slice(t.length);return n?(0,r.lowerFirst)(a):a;}function s(e,t){let n=Object.entries(e).reduce((e,[n,r])=>("className"===n||"class"===n||i(n,t)&&Object.assign(e,{[o(n,t)]:r}),e),{});if("opacity"in e){let r=a("opacity",t),i=e.opacity;r in e?Object.assign(n,{opacity:i*e[r]}):Object.assign(n,{opacity:i});}return n;}function l(e,t){let n=t.length;return Object.keys(e).reduce((r,i)=>(i.startsWith(t)&&(r[i.slice(n)]=e[i]),r),{});}function u(e,t){let n="string"==typeof t?[t]:t,r={};return Object.keys(e).forEach(t=>{n.find(e=>t.startsWith(e))||(r[t]=e[t]);}),r;}},"9e11f2c1":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{COMBO_KEY:function(){return r;},TREE_KEY:function(){return i;}});let r="combo",i="tree";},"9e3736cb":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Controller",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("c086f503"),a=n("9225b8d3"),o=n("01a29d03"),s=n("62c607b3"),l={reset:s.Reset,speed:s.SpeedSelect,backward:s.Backward,playPause:s.PlayPause,forward:s.Forward,selectionType:s.SelectionType,chartType:s.ChartType,split:s.Split},u=function(e){function t(n){var r=e.call(this,(0,o.deepAssign)({},t.defaultOptions,n))||this;return r.background=r.appendChild(new a.Rect({})),r.functions=r.appendChild(new a.Group({})),r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return(0,o.parseSeriesAttr)(this.attributes.padding);},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.style,t=e.x,n=e.y,i=e.width,a=e.height,s=(0,o.subStyleProps)(this.attributes,"background");this.background.attr((0,r.__assign)({x:t,y:n,width:i,height:a},s));},t.prototype.renderFunctions=function(){var e,t=this,n=this.attributes,i=n.functions,a=n.iconSize,o=n.iconSpacing,u=n.x,c=n.y,d=n.width,h=n.height,f=n.align,p=(0,r.__read)(this.padding,4),v=p[1],g=p[3],m=i.reduce(function(e,t){return e.length&&t.length?e.concat.apply(e,(0,r.__spreadArray)(["split"],(0,r.__read)(t),!1)):e.concat.apply(e,(0,r.__spreadArray)([],(0,r.__read)(t),!1));},[]),y=m.length*(a+o)-o,b={left:g+a/2,center:(d-y)/2+a/2,right:d-y-g-v+a/2}[f]||0;null===(e=this.speedSelect)||void 0===e||e.destroy(),this.functions.removeChildren(),m.forEach(function(e,n){var i,d=l[e],f={x:u+n*(a+o)+b,y:c+h/2,size:a};if(d===s.SpeedSelect?(f.speed=t.attributes.speed,f.onSelect=function(n){return t.handleFunctionChange(e,{value:n});}):[s.PlayPause,s.SelectionType,s.ChartType].includes(d)?(f.onChange=function(n){return t.handleFunctionChange(e,{value:n});},d===s.PlayPause&&(f.type="play"===t.attributes.state?"pause":"play"),d===s.SelectionType&&(f.type="range"===t.attributes.selectionType?"value":"range"),d===s.ChartType&&(f.type="line"===t.attributes.chartType?"column":"line")):f.onClick=function(){return t.handleFunctionChange(e,{value:e});},d===s.SpeedSelect){var p=null===(i=t.ownerDocument)||void 0===i?void 0:i.defaultView;p&&(t.speedSelect=new d({style:(0,r.__assign)((0,r.__assign)({},f),{zIndex:100})}),p.appendChild(t.speedSelect));}else t.functions.appendChild(new d({style:f}));});},t.prototype.disconnectedCallback=function(){var t;e.prototype.disconnectedCallback.call(this),null===(t=this.speedSelect)||void 0===t||t.destroy();},t.prototype.render=function(){this.renderBackground(),this.renderFunctions();},t.prototype.handleFunctionChange=function(e,t){var n=this.attributes.onChange;null==n||n(e,t);},t.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},t;}(i.Component);},"9e868a30":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getArcValuePos:function(){return h;},getLinearValuePos:function(){return d;},getValuePos:function(){return f;},isAxisHorizontal:function(){return p;},isAxisVertical:function(){return v;},renderAxisLine:function(){return y;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("f457f3e3"),o=n("01a29d03"),s=n("cd5371db"),l=n("bcf4e626"),u=n("d5e231fc"),c=n("82f544b2");function d(e,t){var n=(0,r.__read)(t.startPos,2),i=n[0],a=n[1],o=(0,r.__read)(t.endPos,2),s=o[0],l=o[1],u=(0,r.__read)([s-i,l-a],2);return[i+u[0]*e,a+u[1]*e];}function h(e,t){var n=t.radius,i=(0,r.__read)(t.center,2),a=i[0],s=i[1],u=(0,o.degToRad)((0,l.getLineAngle)(e,t));return[a+n*Math.cos(u),s+n*Math.sin(u)];}function f(e,t){return"linear"===t.type?d(e,t):h(e,t);}function p(e){return 0===(0,l.getLineTangentVector)(0,e)[1];}function v(e){return 0===(0,l.getLineTangentVector)(0,e)[0];}function g(e,t,n,i,a){var s=t-e,l=(0,r.__read)([a,a],2),u=l[0],c=l[1],d=(0,r.__read)([(0,o.degToRad)(e),(0,o.degToRad)(t)],2),h=d[0],f=d[1],p=function(e){return[n+a*Math.cos(e),i+a*Math.sin(e)];},v=(0,r.__read)(p(h),2),g=v[0],m=v[1],y=(0,r.__read)(p(f),2),b=y[0],E=y[1];if(t-e==360){var x=(0,r.__read)(p((f+h)/2),2);return[["M",g,m],["A",u,c,0,1,0,x[0],x[1]],["A",u,c,0,1,0,b,E]];}return"M".concat(g,",").concat(m,",A").concat(u,",").concat(c,",0,").concat(s>180?1:0,",").concat(e>t?0:1,",").concat(b,",").concat(E);}function m(e){var t=(0,r.__read)(e,2),n=(0,r.__read)(t[0],2),i=n[0],a=n[1],o=(0,r.__read)(t[1],2);return{x1:i,y1:a,x2:o[0],y2:o[1]};}function y(e,t,n){var l,d,h,f,p,v,y,b=t.type,E=(0,o.subStyleProps)(t,"line");return"linear"===b?y=function(e,t,n,i){var o,l,d,h,f,p,v,g,y,b,E,x,k,S,T,M,w,N,C=t.showTrunc,_=t.startPos,P=t.endPos,A=t.truncRange,O=t.lineExtension,L=t.classNamePrefix,R=(0,r.__read)([_,P],2),D=(0,r.__read)(R[0],2),I=D[0],B=D[1],F=(0,r.__read)(R[1],2),G=F[0],z=F[1],V=(0,r.__read)(O?(void 0===(o=O)&&(o=[0,0]),l=(0,r.__read)([_,P,o],3),h=(d=(0,r.__read)(l[0],2))[0],f=d[1],v=(p=(0,r.__read)(l[1],2))[0],g=p[1],b=(y=(0,r.__read)(l[2],2))[0],E=y[1],T=Math.sqrt(Math.pow(k=(x=(0,r.__read)([v-h,g-f],2))[0],2)+Math.pow(S=x[1],2)),[(w=(M=(0,r.__read)([-b/T,E/T],2))[0])*k,w*S,(N=M[1])*k,N*S]):[,,,,].fill(0),4),j=V[0],U=V[1],H=V[2],W=V[3],Y=function(t){return e.selectAll(s.CLASS_NAMES.line.class).data(t,function(e,t){return t;}).join(function(e){var t=e.append("line").styles(n).transition(function(e){return(0,a.transition)(this,m(e.line),!1);});return t.attr("className",function(e){if(!L)return"".concat(s.CLASS_NAMES.line.name," ").concat(e.className);var t=(0,u.getAxisClassName)(s.CLASS_NAMES.line.name,c.CLASSNAME_SUFFIX_MAP.line,L);if(e.className===s.CLASS_NAMES.lineFirst.name){var n=(0,u.getAxisClassName)(s.CLASS_NAMES.lineFirst.name,c.CLASSNAME_SUFFIX_MAP.lineFirst,L);return"".concat(t," ").concat(n);}if(e.className===s.CLASS_NAMES.lineSecond.name){var n=(0,u.getAxisClassName)(s.CLASS_NAMES.lineSecond.name,c.CLASSNAME_SUFFIX_MAP.lineSecond,L);return"".concat(t," ").concat(n);}return t;}),t;},function(e){return e.styles(n).transition(function(e){var t=e.line;return(0,a.transition)(this,m(t),i.update);});},function(e){return e.remove();}).transitions();};if(!C||!A)return Y([{line:[[I+j,B+U],[G+H,z+W]],className:s.CLASS_NAMES.line.name}]);var q=(0,r.__read)(A,2),X=q[0],$=q[1],K=G-I,Z=z-B,Q=(0,r.__read)([I+K*X,B+Z*X],2),J=Q[0],ee=Q[1],et=(0,r.__read)([I+K*$,B+Z*$],2),en=et[0],er=et[1],ei=Y([{line:[[I+j,B+U],[J,ee]],className:s.CLASS_NAMES.lineFirst.name},{line:[[en,er],[G+H,z+W]],className:s.CLASS_NAMES.lineSecond.name}]);return t.truncRange,t.truncShape,t.lineExtension,ei;}(e,t,(0,o.omit)(E,"arrow"),n):(l=(0,o.omit)(E,"arrow"),d=t.startAngle,h=t.endAngle,f=t.center,p=t.radius,v=t.classNamePrefix,y=e.selectAll(s.CLASS_NAMES.line.class).data([{d:g.apply(void 0,(0,r.__spreadArray)((0,r.__spreadArray)([d,h],(0,r.__read)(f),!1),[p],!1))}],function(e,t){return t;}).join(function(e){var n=e.append("path").attr("className",s.CLASS_NAMES.line.name).styles(t).styles({d:function(e){return e.d;}});return(0,u.applyClassName)(n,s.CLASS_NAMES.line,c.CLASSNAME_SUFFIX_MAP.line,v),n;},function(e){return e.transition(function(){var e,t,a,s,l,u=this,c=(0,o.keyframeInterpolate)(this,(t=(e=this.attributes).startAngle,a=e.endAngle,s=e.center,l=e.radius,(0,r.__spreadArray)((0,r.__spreadArray)([t,a],(0,r.__read)(s),!1),[l],!1)),(0,r.__spreadArray)((0,r.__spreadArray)([d,h],(0,r.__read)(f),!1),[p],!1),n.update);if(c){var v=function(){var e=(0,i.get)(u.attributes,"__keyframe_data__");u.style.d=g.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(e),!1));};c.onframe=v,c.onfinish=v;}return c;}).styles(t);},function(e){return e.remove();}).styles(l).transitions()),!function(e,t,n,r){var i,a,l=n.showArrow,u=n.showTrunc,c=n.lineArrow,d=n.lineArrowOffset,h=n.lineArrowSize;if(a="arc"===t?e.select(s.CLASS_NAMES.line.class):u?e.select(s.CLASS_NAMES.lineSecond.class):e.select(s.CLASS_NAMES.line.class),!l||!c||"arc"===n.type&&(i=n.startAngle,n.endAngle-i==360)){var f=a.node();f&&(f.style.markerEnd=void 0);return;}var p=(0,o.renderExtDo)(c);p.attr(r),(0,o.scaleToPixel)(p,h,!0),a.style("markerEnd",p).style("markerEndOffset",-d);}(e,b,t,E),y;}},a0b011ba:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return s;}});var r=n("38871e26"),i=n("3e6b097d"),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e;}).apply(this,arguments);},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value);}catch(e){i={error:e};}finally{try{r&&!r.done&&(n=a.return)&&n.call(a);}finally{if(i)throw i.error;}}return o;};function s(e){var t=e.onInit,n=e.onReady,s=e.onDestroy,l=e.options,u=o((0,i.useState)(!1),2),c=u[0],d=u[1],h=(0,i.useRef)(null),f=(0,i.useRef)(null);return(0,i.useEffect)(function(){if(!h.current&&f.current){var e=new r.Graph(a({container:f.current},l));return h.current=e,d(!0),null==t||t(h.current),function(){var e=h.current;e&&(e.destroy(),null==s||s(),h.current=null);};}},[]),(0,i.useEffect)(function(){var e=f.current,t=h.current;l&&e&&t&&!t.destroyed&&(t.setOptions(l),t.render().then(function(){return null==n?void 0:n(t);}));},[l]),{graph:h.current,containerRef:f,isReady:c};}},a0cde663:function(e,t,n){"use strict";function r(e,t){let n=0,r=0,i=0;return 4===e.length?(n=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)):7===e.length&&(n=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),i=parseInt(e[5]+e[6],16)),`rgba(${n}, ${r}, ${i}, ${t})`;}function i(e,t){let n=0,r=0,i=0;4===e.length?(n=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)):7===e.length&&(n=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),i=parseInt(e[5]+e[6],16)),n=Math.max(0,n-t),r=Math.max(0,r-t),i=Math.max(0,i-t);let a=e=>e.toString(16).padStart(2,"0");return`#${a(n)}${a(r)}${a(i)}`;}n.d(t,"__esModule",{value:!0}),n.e(t,{darkenHexColor:function(){return i;},hexToRgba:function(){return r;}});},a0f91022:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"HTML",{enumerable:!0,get:function(){return u;}});var r=n("a566da36"),i=n("0c02ee7e"),a=n("abe9d8d6"),o=n("6b0531cc"),s=n("ec2f02a5"),l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class u extends s.BaseNode{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},u.defaultStyleProps,e.style)})),this.rootPointerEvent=new r.FederatedPointerEvent(null),this.forwardEvents=e=>{let t=this.context.canvas,n=t.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(e,n).forEach(r=>{let i=this.bootstrapEvent(this.rootPointerEvent,r,n,e);(0,a.set)(t.context.eventService,"mappingTable.pointerupoutside",[]),t.context.eventService.mapEvent(i);});};}get eventService(){return this.context.canvas.context.eventService;}get events(){return[o.CommonEvent.CLICK,o.CommonEvent.POINTER_DOWN,o.CommonEvent.POINTER_MOVE,o.CommonEvent.POINTER_UP,o.CommonEvent.POINTER_OVER,o.CommonEvent.POINTER_LEAVE];}getDomElement(){return this.getShape("key").getDomElement();}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.drawPortShapes(e,t);}getKeyStyle(e){let t=(0,a.pick)(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:r=0}=t,i=l(t,["dx","dy"]),[o,s]=this.getSize(e);return Object.assign(Object.assign({x:n,y:r},i),{width:o,height:s});}drawKeyShape(e,t){let n=this.getKeyStyle(e),{x:i,y:a,width:o=0,height:s=0}=n,l=this.upsert("key-container",r.Rect,{x:i,y:a,width:o,height:s,opacity:0},t);return this.upsert("key",r.HTML,n,l);}connectedCallback(){if(!(this.context.canvas.getRenderer("main") instanceof i.Renderer))return;let e=this.getDomElement();this.events.forEach(t=>{e.addEventListener(t,this.forwardEvents);});}attributeChangedCallback(e,t,n){"zIndex"===e&&t!==n&&(this.getDomElement().style.zIndex=n);}destroy(){let e=this.getDomElement();this.events.forEach(t=>{e.removeEventListener(t,this.forwardEvents);}),super.destroy();}normalizeToPointerEvent(e,t){let n=[];if(t.isTouchEvent(e))for(let t=0;t<e.changedTouches.length;t++){let r=e.changedTouches[t];(0,a.isUndefined)(r.button)&&(r.button=0),(0,a.isUndefined)(r.buttons)&&(r.buttons=1),(0,a.isUndefined)(r.isPrimary)&&(r.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,a.isUndefined)(r.width)&&(r.width=r.radiusX||1),(0,a.isUndefined)(r.height)&&(r.height=r.radiusY||1),(0,a.isUndefined)(r.tiltX)&&(r.tiltX=0),(0,a.isUndefined)(r.tiltY)&&(r.tiltY=0),(0,a.isUndefined)(r.pointerType)&&(r.pointerType="touch"),(0,a.isUndefined)(r.pointerId)&&(r.pointerId=r.identifier||0),(0,a.isUndefined)(r.pressure)&&(r.pressure=r.force||.5),(0,a.isUndefined)(r.twist)&&(r.twist=0),(0,a.isUndefined)(r.tangentialPressure)&&(r.tangentialPressure=0),r.isNormalized=!0,r.type=e.type,n.push(r);}else t.isMouseEvent(e)&&((0,a.isUndefined)(e.isPrimary)&&(e.isPrimary=!0),(0,a.isUndefined)(e.width)&&(e.width=1),(0,a.isUndefined)(e.height)&&(e.height=1),(0,a.isUndefined)(e.tiltX)&&(e.tiltX=0),(0,a.isUndefined)(e.tiltY)&&(e.tiltY=0),(0,a.isUndefined)(e.pointerType)&&(e.pointerType="mouse"),(0,a.isUndefined)(e.pointerId)&&(e.pointerId=1),(0,a.isUndefined)(e.pressure)&&(e.pressure=.5),(0,a.isUndefined)(e.twist)&&(e.twist=0),(0,a.isUndefined)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),n.push(e);return n;}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null;}bootstrapEvent(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);let{x:i,y:a}=this.getViewportXY(t);e.viewport.x=i,e.viewport.y=a;let[o,s]=this.context.canvas.getCanvasByViewport([i,a]);return e.canvas.x=o,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e;}getViewportXY(e){let t,n;let{offsetX:r,offsetY:i,clientX:o,clientY:s}=e;if((0,a.isNil)(r)||(0,a.isNil)(i)){let e=this.eventService.client2Viewport({x:o,y:s});t=e.x,n=e.y;}else t=r,n=i;return{x:t,y:n};}onframe(){super.onframe();let{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`;}}u.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};},a186b6b1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return f;},getIndentedTreeOptions:function(){return g;}});var r=n("777fffbe"),i=n("c5eb7168"),a=r._(n("3e6b097d")),o=n("02c619b4"),s=n("2b663a31"),l=n("e50a16b8"),u=n("74355096"),c=n("91053888");let{ArrowCountIcon:d}=o.CollapseExpandIcon,{TextNode:h}=o.RCNode,f={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"indented",style:{lineWidth:3}},transforms:e=>[...e,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(e,t){return a.default.createElement(d,{graph:this,data:t,isCollapsed:e});}}],layout:{type:"indented",direction:"LR",indent:e=>p(e,20),getVGap:()=>14,preLayout:!1},animation:{duration:500}},p=(e,t)=>{if(0===e.depth)return 0;let n=t,r=e.parent;for(;r;)n+=r.width/2,r=r.parent;return n/e.depth;},v=(e,t)=>{let n=(0,u.getNodeSide)(e,t);return"left"===n?"right":"center"===n?"center":"left";},g=({type:e,nodeMinWidth:t,nodeMaxWidth:n,direction:r,labelField:o})=>{let d={},f=t||0,p=n||300;if("boxed"===e)d={node:{style:{component:function(e){var t;let n=e.depth,r=null===(t=e.style)||void 0===t?void 0:t.color,i=(0,s.formatLabel)(e,o),{font:l}=(0,c.getBoxedTextNodeStyle)(i,f,p,n),u={type:0===n||1===n?"filled":"outlined",text:i,color:0===n?"#f1f4f5":r,maxWidth:p,font:l,style:{textAlign:v(this,e),...0===n?{color:"#252525"}:{}}};return a.default.createElement(h,{...u});},size:e=>{let t=(0,s.formatLabel)(e,o);return(0,c.getBoxedTextNodeStyle)(t,f,p,e.depth).size;}}},edge:{style:{stroke:function(e){let t=this.getNodeData(e.source);return(0,i.get)(t,"style.color","#99ADD1");},radius:16}},transforms:e=>[...e,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"indented",getWidth:e=>{let t=(0,s.formatLabel)(e,o),[n]=(0,c.getBoxedTextNodeStyle)(t,f,p,e.depth).size;return n;},getHeight:e=>{let t=(0,s.formatLabel)(e,o),[,n]=(0,c.getBoxedTextNodeStyle)(t,f,p,e.depth).size;return n;}}};else if("linear"===e)d={node:{style:{component:function(e){var t;let n=e.depth,r=null===(t=e.style)||void 0===t?void 0:t.color,i=(0,s.formatLabel)(e,o),{font:l}=(0,c.getLinearTextNodeStyle)(i,f,p,n),u={text:i,color:r,maxWidth:p,font:l};return Object.assign(u,0===n?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:{textAlign:v(this,e)}}),a.default.createElement(h,{...u});},size:e=>{let t=(0,s.formatLabel)(e,o);return(0,c.getLinearTextNodeStyle)(t,f,p,e.depth).size;},ports:function(e){let t=(0,u.getNodeSide)(this,e);return"left"===t?[{placement:"bottom"},{placement:"bottom-right"}]:"center"===t?[{placement:"bottom"}]:[{placement:"bottom"},{placement:"bottom-left"}];}}},edge:{style:{stroke:function(e){let t=this.getNodeData(e.target);return(0,i.get)(t,"style.color","#99ADD1");},radius:24}},layout:{type:"indented",getWidth:e=>{let t=(0,s.formatLabel)(e,o),[n]=(0,c.getLinearTextNodeStyle)(t,f,p,e.depth).size;return n;},getHeight:e=>{let t=(0,s.formatLabel)(e,o),[,n]=(0,c.getLinearTextNodeStyle)(t,f,p,e.depth).size;return n;},getVGap:()=>12},transforms:e=>[...e,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};else{let e=[24,16];d={node:{style:{component:e=>{let t=(0,s.formatLabel)(e,o);return a.default.createElement(h,{type:"filled",text:t});},size:t=>{let n=(0,s.formatLabel)(t,o);return(0,l.measureTextSize)(n,e);}}},layout:{type:"indented",getWidth:t=>{let n=(0,s.formatLabel)(t,o),[r]=(0,l.measureTextSize)(n,e);return r;},getHeight:t=>{let n=(0,s.formatLabel)(t,o),[,r]=(0,l.measureTextSize)(n,e);return r;}}};}if(r){var g;(g=d).layout||(g.layout={}),Object.assign(d.layout,{direction:"alternate"===r?"H":"left"===r?"RL":"LR"});}return d;};},a1c5fe05:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return l;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("01a29d03"),o=n("16bb9463");function s(e,t){return(void 0===t&&(t={}),(0,i.isNil)(e))?0:"number"==typeof e?e:Math.floor((0,a.measureTextWidth)(e,t));}function l(e,t,n,l){if(!(e.length<=0)){var u=t.suffix,c=void 0===u?"...":u,d=t.minLength,h=t.maxLength,f=void 0===h?1/0:h,p=t.step,v=t.margin,g=void 0===v?[0,0,0,0]:v,m=(0,a.getFont)(l.getTextShape(e[0])),y=s(void 0===p?" ":p,m),b=d?s(d,m):y,E=s(f,m);((0,i.isNil)(E)||E===1/0)&&(E=Math.max.apply(null,e.map(function(e){return e.getBBox().width;})));var x=e.slice(),k=(0,r.__read)(g,4);k[0],k[1],k[2],k[3];for(var S=function(t){if(x.forEach(function(e){l.ellipsis(l.getTextShape(e),t,c);}),(x=(0,o.boundTest)(e,n,g)).length<1)return{value:void 0};},T=E;T>b+y;T-=y){var M=S(T);if("object"==typeof M)return M.value;}}}},a2380bd8:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CollapseExpand",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("f20c9f5f"),o=n("966f7de2"),s=n("32576f8a"),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class u extends s.BaseBehavior{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.onCollapseExpand=e=>l(this,void 0,void 0,function*(){if(!this.validate(e))return;let{target:t}=e;if(!(0,o.isElement)(t))return;let n=t.id,{model:r,graph:i}=this.context,s=r.getElementDataById(n);if(!s)return!1;let{onCollapse:l,onExpand:u,animation:c,align:d}=this.options;(0,a.isCollapsed)(s)?(yield i.expandElement(n,{animation:c,align:d}),null==u||u(n)):(yield i.collapseElement(n,{animation:c,align:d}),null==l||l(n));}),this.bindEvents();}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}bindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.on(`node:${t}`,this.onCollapseExpand),e.on(`combo:${t}`,this.onCollapseExpand);}unbindEvents(){let{graph:e}=this.context,{trigger:t}=this.options;e.off(`node:${t}`,this.onCollapseExpand),e.off(`combo:${t}`,this.onCollapseExpand);}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}destroy(){this.unbindEvents(),super.destroy();}}u.defaultOptions={enable:!0,animation:!0,trigger:i.CommonEvent.DBLCLICK,align:!0};},a2c47206:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{findActualConnectNodeData:function(){return C;},getArrowSize:function(){return _;},getBadgePositionStyle:function(){return h;},getBorderRadiusPoints:function(){return E;},getCubicLoopControlPoints:function(){return T;},getCubicLoopPath:function(){return S;},getCubicPath:function(){return y;},getCurveControlPoint:function(){return p;},getLabelPositionStyle:function(){return d;},getLoopEndpoints:function(){return k;},getPolylineLoopControlPoints:function(){return w;},getPolylineLoopPath:function(){return M;},getPolylinePath:function(){return b;},getQuadraticPath:function(){return m;},getRadians:function(){return x;},getSubgraphRelatedEdges:function(){return N;},parseCurveOffset:function(){return v;},parseCurvePosition:function(){return g;}});var r=n("abe9d8d6"),i=n("8a0aecd6"),a=n("f20c9f5f"),o=n("966f7de2"),s=n("81401a10"),l=n("8bdd800c"),u=n("367c3e1e"),c=n("71473486");function d(e,t,n,r,i){let a="number"==typeof t?t:.5;"start"===t&&(a=0),"end"===t&&(a=.99);let o=(0,l.parsePoint)(e.getPoint(a)),s=(0,l.parsePoint)(e.getPoint(a+.01)),u="start"===t?"left":"end"===t?"right":"center";if((0,l.isHorizontal)(o,s)||!n){let[t,n]=f(e,a,r,i);return{transform:[["translate",t,n]],textAlign:u};}let c=Math.atan2(s[1]-o[1],s[0]-o[0]);s[0]<o[0]&&(u="center"===u?u:"left"===u?"right":"left",r*=-1,c+=Math.PI);let[d,h]=f(e,a,r,i,c);return{textAlign:u,transform:[["translate",d,h],["rotate",c/Math.PI*180]]};}function h(e,t,n,r,i){var a,o;let s=(null===(a=e.badge)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=(null===(o=e.label)||void 0===o?void 0:o.getGeometryBounds().halfExtents[0])*2||0;return d(e.key,n,!0,(l?(l/2+s/2)*("suffix"===t?1:-1):0)+r,i);}function f(e,t,n,r,i){let[a,o]=(0,l.parsePoint)(e.getPoint(t)),s=n,u=r;return i&&(s=n*Math.cos(i)-r*Math.sin(i),u=n*Math.sin(i)+r*Math.cos(i)),[a+s,o+u];}function p(e,t,n,i){if((0,r.isEqual)(e,t))return e;let a=(0,c.subtract)(t,e),o=[e[0]+n*a[0],e[1]+n*a[1]],s=(0,c.normalize)((0,c.perpendicular)(a,!1));return o[0]+=i*s[0],o[1]+=i*s[1],o;}function v(e){return(0,r.isNumber)(e)?[e,-e]:e;}function g(e){return(0,r.isNumber)(e)?[e,1-e]:e;}function m(e,t,n){return[["M",e[0],e[1]],["Q",n[0],n[1],t[0],t[1]]];}function y(e,t,n){return[["M",e[0],e[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],t[0],t[1]]];}function b(e,t=0,n=!1){let r=e.length-1,i=e[0],a=e[r],o=e.slice(1,r),s=[["M",i[0],i[1]]];return o.forEach((e,n)=>{let r=o[n-1]||i,u=o[n+1]||a;if(!(0,l.isCollinear)(r,e,u)&&t){let[n,i]=E(r,e,u,t);s.push(["L",n[0],n[1]],["Q",e[0],e[1],i[0],i[1]],["L",i[0],i[1]]);}else s.push(["L",e[0],e[1]]);}),s.push(["L",a[0],a[1]]),n&&s.push(["Z"]),s;}function E(e,t,n,r){let i=(0,c.manhattanDistance)(e,t),a=(0,c.manhattanDistance)(n,t),o=Math.min(r,Math.min(i,a)/2);return[[t[0]-o/i*(t[0]-e[0]),t[1]-o/i*(t[1]-e[1])],[t[0]-o/a*(t[0]-n[0]),t[1]-o/a*(t[1]-n[1])]];}let x=e=>{let t=Math.PI/2,n=(0,i.getBBoxHeight)(e)/2,r=(0,i.getBBoxWidth)(e)/2,a=Math.atan2(n,r)/2,o=Math.atan2(r,n)/2;return{top:[-t-o,-t+o],"top-right":[-t+o,-a],"right-top":[-t+o,-a],right:[-a,a],"bottom-right":[a,t-o],"right-bottom":[a,t-o],bottom:[t-o,t+o],"bottom-left":[t+o,Math.PI-a],"left-bottom":[t+o,Math.PI-a],left:[Math.PI-a,Math.PI+a],"top-left":[Math.PI+a,-t-o],"left-top":[Math.PI+a,-t-o]};};function k(e,t,n,r,a){let s=(0,i.getNodeBBox)(e),l=e.getCenter(),u=r&&(0,o.getPortPosition)(r),d=a&&(0,o.getPortPosition)(a);if(!u||!d){let r=x(s),a=r[t][0],h=r[t][1],[f,p]=(0,i.getBBoxSize)(s),v=Math.max(f,p),g=(0,c.add)(l,[v*Math.cos(a),v*Math.sin(a),0]),m=(0,c.add)(l,[v*Math.cos(h),v*Math.sin(h),0]);u=(0,o.getNodeConnectionPoint)(e,g),d=(0,o.getNodeConnectionPoint)(e,m),n||([u,d]=[d,u]);}return[u,d];}function S(e,t,n,r,i,a){let s=e.getPorts()[i||a],l=e.getPorts()[a||i],[u,c]=k(e,t,n,s,l),d=T(e,u,c,r);return s&&(u=(0,o.getPortConnectionPoint)(s,d[0])),l&&(c=(0,o.getPortConnectionPoint)(l,d.at(-1))),y(u,c,d);}function T(e,t,n,i){let a=e.getCenter();if((0,r.isEqual)(t,n)){let e=(0,c.subtract)(t,a),r=[i*Math.sign(e[0])||i/2,i*Math.sign(e[1])||-i/2,0];return[(0,c.add)(t,r),(0,c.add)(n,(0,c.multiply)(r,[1,-1,1]))];}return[(0,l.moveTo)(a,t,(0,c.distance)(a,t)+i),(0,l.moveTo)(a,n,(0,c.distance)(a,n)+i)];}function M(e,t,n,r,i,a,s){let l=(0,o.getAllPorts)(e),u=l[a||s],c=l[s||a],[d,h]=k(e,n,r,u,c),f=w(e,d,h,i);return u&&(d=(0,o.getPortConnectionPoint)(u,f[0])),c&&(h=(0,o.getPortConnectionPoint)(c,f.at(-1))),b([d,...f,h],t);}function w(e,t,n,a){let o=[],s=(0,i.getNodeBBox)(e);if((0,r.isEqual)(t,n))switch((0,i.getNearestBoundarySide)(t,s)){case"left":o.push([t[0]-a,t[1]]),o.push([t[0]-a,t[1]+a]),o.push([t[0],t[1]+a]);break;case"right":o.push([t[0]+a,t[1]]),o.push([t[0]+a,t[1]+a]),o.push([t[0],t[1]+a]);break;case"top":o.push([t[0],t[1]-a]),o.push([t[0]+a,t[1]-a]),o.push([t[0]+a,t[1]]);break;case"bottom":o.push([t[0],t[1]+a]),o.push([t[0]+a,t[1]+a]),o.push([t[0]+a,t[1]]);}else{let e=(0,i.getNearestBoundarySide)(t,s),r=(0,i.getNearestBoundarySide)(n,s);if(e===r){let r,i;switch(e){case"left":r=Math.min(t[0],n[0])-a,o.push([r,t[1]]),o.push([r,n[1]]);break;case"right":r=Math.max(t[0],n[0])+a,o.push([r,t[1]]),o.push([r,n[1]]);break;case"top":i=Math.min(t[1],n[1])-a,o.push([t[0],i]),o.push([n[0],i]);break;case"bottom":i=Math.max(t[1],n[1])+a,o.push([t[0],i]),o.push([n[0],i]);}}else{let i=(e,t)=>({left:[t[0]-a,t[1]],right:[t[0]+a,t[1]],top:[t[0],t[1]-a],bottom:[t[0],t[1]+a]})[e],l=i(e,t),c=i(r,n),d=(0,u.freeJoin)(l,c,s);o.push(l,d,c);}}return o;}function N(e,t){let n=new Set,r=new Set,i=new Set;return e.forEach(a=>{t(a).forEach(t=>{n.add(t),e.includes(t.source)&&e.includes(t.target)?r.add(t):i.add(t);});}),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)};}function C(e,t){let n=[],r=e;for(;r;){n.push(r);let e=t((0,s.idOf)(r));if(e)r=e;else break;}if(n.some(e=>{var t;return null===(t=e.style)||void 0===t?void 0:t.collapsed;})){let e=n.reverse().findIndex(a.isCollapsed);return n[e]||n.at(-1);}return e;}function _(e,t){return t||(e<4?10:4===e?12:2.5*e);}},a3d8a00c:function(e,t,n){"use strict";function r(e){return[i].reduce((e,t)=>t(e),e);}function i(e){return!e.layout||Array.isArray(e.layout)||"preLayout"in e.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(e.layout.type)&&(e.layout.preLayout=!0),e;}n.d(t,"__esModule",{value:!0}),n.d(t,"inferOptions",{enumerable:!0,get:function(){return r;}});},a4504c9b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Band:function(){return r.Band;},Linear:function(){return i.Linear;}});var r=n("67fd20c3"),i=n("49035947");},a4a27411:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{tickIncrement:function(){return o;},tickStep:function(){return s;}});let r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(e,t,n){let o=(t-e)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),l=o/10**s;return s>=0?(l>=r?10:l>=i?5:l>=a?2:1)*10**s:-(10**-s)/(l>=r?10:l>=i?5:l>=a?2:1);}function s(e,t,n){let o=Math.abs(t-e)/Math.max(0,n),s=10**Math.floor(Math.log(o)/Math.LN10),l=o/s;return l>=r?s*=10:l>=i?s*=5:l>=a&&(s*=2),t<e?-s:s;}},a56aaf9d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("6bff9c72");},a6c281dd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Select",{enumerable:!0,get:function(){return r.Select;}});var r=n("5af5778c");},a6c8c51c:function(e,t,n){"use strict";function r(e,t){return+e.toPrecision(t);}n.d(t,"__esModule",{value:!0}),n.d(t,"toPrecision",{enumerable:!0,get:function(){return r;}});},a985d8b9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"registerBuiltInExtensions",{enumerable:!0,get:function(){return v;}});var r=n("a566da36"),i=n("bdc2796d"),a=n("bc2fd635"),o=n("8754ee1a"),s=n("988eb09c"),l=n("8a0441b2"),u=n("b429f029"),c=n("5ccee541"),d=n("f5c9f631"),h=n("7f9242cd"),f=n("4c9c9fd1");let p={animation:{"combo-collapse":i.ComboCollapse,"combo-expand":i.ComboExpand,"node-collapse":i.NodeCollapse,"node-expand":i.NodeExpand,"path-in":i.PathIn,"path-out":i.PathOut,fade:i.Fade,translate:i.Translate},behavior:{"brush-select":a.BrushSelect,"click-select":a.ClickSelect,"collapse-expand":a.CollapseExpand,"create-edge":a.CreateEdge,"drag-canvas":a.DragCanvas,"drag-element-force":a.DragElementForce,"drag-element":a.DragElement,"fix-element-size":a.FixElementSize,"focus-element":a.FocusElement,"hover-activate":a.HoverActivate,"lasso-select":a.LassoSelect,"auto-adapt-label":a.AutoAdaptLabel,"optimize-viewport-transform":a.OptimizeViewportTransform,"scroll-canvas":a.ScrollCanvas,"zoom-canvas":a.ZoomCanvas},combo:{circle:o.CircleCombo,rect:o.RectCombo},edge:{cubic:o.Cubic,line:o.Line,polyline:o.Polyline,quadratic:o.Quadratic,"cubic-horizontal":o.CubicHorizontal,"cubic-radial":o.CubicRadial,"cubic-vertical":o.CubicVertical},layout:{"antv-dagre":l.AntVDagreLayout,"combo-combined":l.ComboCombinedLayout,"compact-box":l.compactBox,"d3-force":l.D3ForceLayout,"force-atlas2":l.ForceAtlas2Layout,circular:l.CircularLayout,concentric:l.ConcentricLayout,dagre:l.DagreLayout,dendrogram:l.dendrogram,fishbone:l.FishboneLayout,force:l.ForceLayout,fruchterman:l.FruchtermanLayout,grid:l.GridLayout,indented:l.indented,mds:l.MDSLayout,mindmap:l.mindmap,radial:l.RadialLayout,random:l.RandomLayout,snake:l.SnakeLayout},node:{circle:o.Circle,diamond:o.Diamond,ellipse:o.Ellipse,hexagon:o.Hexagon,html:o.HTML,image:o.Image,rect:o.Rect,star:o.Star,donut:o.Donut,triangle:o.Triangle},palette:{spectral:u.spectral,tableau:u.tableau,oranges:u.oranges,greens:u.greens,blues:u.blues},theme:{dark:d.dark,light:d.light},plugin:{"bubble-sets":c.BubbleSets,"edge-bundling":c.EdgeBundling,"edge-filter-lens":c.EdgeFilterLens,"grid-line":c.GridLine,background:c.Background,contextmenu:c.Contextmenu,fisheye:c.Fisheye,fullscreen:c.Fullscreen,history:c.History,hull:c.Hull,legend:c.Legend,minimap:c.Minimap,snapline:c.Snapline,timebar:c.Timebar,title:c.Title,toolbar:c.Toolbar,tooltip:c.Tooltip,watermark:c.Watermark},transform:{"arrange-draw-order":h.ArrangeDrawOrder,"collapse-expand-combo":h.CollapseExpandCombo,"collapse-expand-node":h.CollapseExpandNode,"get-edge-actual-ends":h.GetEdgeActualEnds,"map-node-size":h.MapNodeSize,"place-radial-labels":h.PlaceRadialLabels,"process-parallel-edges":h.ProcessParallelEdges,"update-related-edges":h.UpdateRelatedEdge},shape:{circle:r.Circle,ellipse:r.Ellipse,group:r.Group,html:r.HTML,image:s.Image,line:r.Line,path:r.Path,polygon:r.Polygon,polyline:r.Polyline,rect:r.Rect,text:r.Text,label:s.Label,badge:s.Badge}};function v(){Object.entries(p).forEach(([e,t])=>{Object.entries(t).forEach(([t,n])=>{(0,f.register)(e,t,n);});});}},aa2003f3:function(e,t,n){"use strict";function r(e){return e.states||[];}n.d(t,"__esModule",{value:!0}),n.d(t,"statesOf",{enumerable:!0,get:function(){return r;}});},aa6d8f0b:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"ComboEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).CLICK="combo:click",i.DBLCLICK="combo:dblclick",i.POINTER_OVER="combo:pointerover",i.POINTER_LEAVE="combo:pointerleave",i.POINTER_ENTER="combo:pointerenter",i.POINTER_MOVE="combo:pointermove",i.POINTER_OUT="combo:pointerout",i.POINTER_DOWN="combo:pointerdown",i.POINTER_UP="combo:pointerup",i.CONTEXT_MENU="combo:contextmenu",i.DRAG_START="combo:dragstart",i.DRAG="combo:drag",i.DRAG_END="combo:dragend",i.DRAG_ENTER="combo:dragenter",i.DRAG_OVER="combo:dragover",i.DRAG_LEAVE="combo:dragleave",i.DROP="combo:drop";},aa8f6430:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{createTreeStructure:function(){return u;},toG6Data:function(){return l;},toGraphlibData:function(){return s;}});var r=n("6b0531cc"),i=n("81401a10"),a=n("bb430c3e"),o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function s(e){let{id:t=(0,i.idOf)(e),style:n,data:r}=e,s=o(e,["id","style","data"]),l=Object.assign(Object.assign({},e),{style:Object.assign({},n),data:Object.assign({},r)});return(0,a.isEdgeData)(e)?Object.assign({id:t,data:l},s):{id:t,data:l};}function l(e){return e.data;}function u(e){if(!e.hasTreeStructure(r.TREE_KEY))for(let t of(e.attachTreeStructure(r.TREE_KEY),e.getAllEdges())){let{source:n,target:i}=t;e.setParent(i,n,r.TREE_KEY);}}},ab4b4a00:function(e,t,n){"use strict";var r=e.exports;e.exports.isNumber=function(e){return"number"==typeof e;},e.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t;},e.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t;},e.exports.findMinMulti=function(e){for(var t=r.findMin(e[0]),n=1;n<e.length;n++)t=Math.min(t,r.findMin(e[n]));return t;},e.exports.findMaxMulti=function(e){for(var t=r.findMax(e[0]),n=1;n<e.length;n++)t=Math.max(t,r.findMax(e[n]));return t;},e.exports.inside=function(e,t,n){return e<=n&&n<=t;};},ad38acb3:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CubicRadial",{enumerable:!0,get:function(){return s;}});var r=n("2a08964b"),i=n("cdd49f4a"),a=n("71473486"),o=n("1d8e11d8");class s extends o.Cubic{constructor(e){super((0,i.mergeOptions)({style:s.defaultStyleProps},e));}get ref(){return this.context.model.getRootsData()[0];}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);let t=(0,r.positionOf)(this.ref);return[this.sourceNode.getIntersectPoint(t,!0),this.targetNode.getIntersectPoint(t)];}toRadialCoordinate(e){let t=(0,r.positionOf)(this.ref);return[(0,a.distance)(e,t),(0,a.rad)((0,a.subtract)(e,t))];}getControlPoints(e,t,n,r){let[i,a]=this.toRadialCoordinate(e),[o]=this.toRadialCoordinate(t),s=o-i;return[[e[0]+(s*n[0]+r[0])*Math.cos(a),e[1]+(s*n[0]+r[0])*Math.sin(a)],[t[0]-(s*n[1]-r[0])*Math.cos(a),t[1]-(s*n[1]-r[0])*Math.sin(a)]];}}s.defaultStyleProps={curvePosition:.5,curveOffset:20};},adea5865:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"interpolatize",{enumerable:!0,get:function(){return o;}});var r=n("abe9d8d6"),i=n("4e815d37");let a=e=>t=>{let n=e(t);return(0,r.isNumber)(n)?Math.round(n):n;};function o(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();let[e]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e));},n.prototype.initRange=function(){let{interpolator:t}=this.options;this.options.range=e(t);},n.prototype.composeOutput=function(e,n){let{domain:r,interpolator:o,round:s}=this.getOptions(),l=t(r.map(e)),u=s?a(o):o;this.output=(0,i.compose)(u,l,n,e);},n.prototype.invert=void 0;};}},aeeab442:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"mergeOptions",{enumerable:!0,get:function(){return function e(...t){if(0===t.length)return{};let n={...t[0]};for(let i=1;i<t.length;i++){let a=t[i];for(let t in a)if(a.hasOwnProperty(t)){let i=a[t],o=n[t];["component","data"].includes(t)?n[t]=i:"function"==typeof i?["plugins","behaviors","transforms"].includes(t)?n[t]=i(o||[]):n[t]=function(t){let n=i.call(this,t);return(0,r.isPlainObject)(n)?e(o,n):n;}:(0,r.isPlainObject)(i)&&(0,r.isPlainObject)(o)?n[t]=e(o,i):n[t]=i;}}return n;};}});var r=n("c5eb7168");},af246d8c:function(e,t,n){"use strict";function r(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(e){return e[0];}):e.length>2?[e[0]]:e.split("");}n.d(t,"__esModule",{value:!0}),n.d(t,"parsePosition",{enumerable:!0,get:function(){return r;}});},af537705:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return s;},getOrganizationChartOptions:function(){return l;}});var r=n("777fffbe")._(n("3e6b097d")),i=n("02c619b4"),a=n("2b663a31");let{TextNode:o}=i.RCNode,s={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]};function l({direction:e,labelField:t}){return{node:{style:{component:e=>{let n=(0,a.formatLabel)(e,t);return r.default.createElement(o,{type:"filled",text:n});},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},transforms:t=>[...t,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",iconPlacement:"vertical"===e?"bottom":"right",enable:!1,refreshLayout:!0}],layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}};}},af83e449:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getTickPoints:function(){return f;},getTickVector:function(){return h;},renderTicks:function(){return v;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("f457f3e3"),o=n("01a29d03"),s=n("cd5371db"),l=n("9e868a30"),u=n("bcf4e626"),c=n("d5e231fc"),d=n("82f544b2");function h(e,t){return(0,u.getDirectionVector)(e,t.tickDirection,t);}function f(e,t){var n=(0,r.__read)(e,2);return[[0,0],[n[0]*t,n[1]*t]];}function p(e,t,n,p,v,g){var m,y,b,E,x,k,S,T,M,w,N,C,_,P,A,O,L,R,D,I,B,F=(m=(0,o.select)(this),y=p.tickFormatter,b=p.classNamePrefix,E=h(e.value,p),x="line",(0,i.isFunction)(y)&&(x=function(){return(0,o.getCallbackValue)(y,[e,t,n,E]);}),k=m.append(x).attr("className",s.CLASS_NAMES.tickItem.name),(0,c.applyClassName)(k,s.CLASS_NAMES.tickItem,d.CLASSNAME_SUFFIX_MAP.tickItem,b),k);S=h(e.value,p),A=(T=p.tickLength,M=(0,r.__read)(f(S,(0,o.getCallbackValue)(T,[e,t,n])),2),N=(w=(0,r.__read)(M[0],2))[0],C=w[1],P={x1:N,x2:(_=(0,r.__read)(M[1],2))[0],y1:C,y2:_[1]}).x1,O=P.x2,L=P.y1,R=P.y2,I=(D=(0,r.__read)((0,o.splitStyle)((0,u.getCallbackStyle)(v,[e,t,n,S])),2))[0],B=D[1],"line"===F.node().nodeName&&F.styles((0,r.__assign)({x1:A,x2:O,y1:L,y2:R},I)),this.attr(B),F.styles(I);var G=(0,r.__read)((0,l.getValuePos)(e.value,p),2),z=G[0],V=G[1];return(0,a.transition)(this,{transform:"translate(".concat(z,", ").concat(V,")")},g);}function v(e,t,n,r){var i=n.classNamePrefix,l=(0,u.filterExec)(t,n.tickFilter),h=(0,o.subStyleProps)(n,"tick");return e.selectAll(s.CLASS_NAMES.tick.class).data(l,function(e){return e.id||e.label;}).join(function(e){var t=e.append("g").attr("className",s.CLASS_NAMES.tick.name).transition(function(e,t){return p.call(this,e,t,l,n,h,!1);});return(0,c.applyClassName)(t,s.CLASS_NAMES.tick,d.CLASSNAME_SUFFIX_MAP.tick,i),t;},function(e){return e.transition(function(e,t){return this.removeChildren(),p.call(this,e,t,l,n,h,r.update);});},function(e){return e.transition(function(){var e=this,t=(0,a.fadeOut)(this.childNodes[0],r.exit);return(0,a.onAnimateFinished)(t,function(){return e.remove();}),t;});}).transitions();}},afc63cf6:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"version",{enumerable:!0,get:function(){return r;}});let r="5.0.51";},afcfc7b4:function(e,t,n){"use strict";function r(e,t){var n={YYYY:e.getFullYear(),MM:e.getMonth()+1,DD:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()},r=t;return Object.keys(n).forEach(function(e){var t=n[e];r=r.replace(e,"YYYY"===e?"".concat(t):"".concat(t).padStart(2,"0"));}),r;}n.d(t,"__esModule",{value:!0}),n.d(t,"formatTime",{enumerable:!0,get:function(){return r;}});},b04d91b4:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"PinchHandler",{enumerable:!0,get:function(){return i;}});var r=n("6b0531cc");class i{constructor(e,t,n){if(this.phase=t,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,i.instance)return i.callbacks[this.phase].push(n),i.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),i.instance=this,i.callbacks[this.phase].push(n);}bindEvents(){let{emitter:e}=this;e.on(r.CommonEvent.POINTER_DOWN,this.onPointerDown),e.on(r.CommonEvent.POINTER_MOVE,this.onPointerMove),e.on(r.CommonEvent.POINTER_UP,this.onPointerUp);}updatePointerPosition(e,t,n){let r=this.pointerByTouch.findIndex(t=>t.pointerId===e);r>=0&&(this.pointerByTouch[r]={x:t,y:n,pointerId:e});}onPointerDown(e){let{x:t,y:n}=e.client||{};if(void 0!==t&&void 0!==n&&(this.pointerByTouch.push({x:t,y:n,pointerId:e.pointerId}),"touch"===e.pointerType&&2===this.pointerByTouch.length)){i.isPinching=!0;let t=this.pointerByTouch[0].x-this.pointerByTouch[1].x,n=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(t*t+n*n),i.callbacks.pinchstart.forEach(t=>t(e,{scale:0}));}}onPointerMove(e){if(2!==this.pointerByTouch.length||null===this.initialDistance)return;let{x:t,y:n}=e.client||{};if(void 0===t||void 0===n)return;this.updatePointerPosition(e.pointerId,t,n);let r=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(r*r+a*a)/this.initialDistance;i.callbacks.pinchmove.forEach(t=>t(e,{scale:(o-1)*5}));}onPointerUp(e){var t;i.callbacks.pinchend.forEach(t=>t(e,{scale:0})),i.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],null===(t=i.instance)||void 0===t||t.tryDestroy();}destroy(){this.emitter.off(r.CommonEvent.POINTER_DOWN,this.onPointerDown),this.emitter.off(r.CommonEvent.POINTER_MOVE,this.onPointerMove),this.emitter.off(r.CommonEvent.POINTER_UP,this.onPointerUp),i.instance=null;}off(e,t){let n=i.callbacks[e].indexOf(t);n>-1&&i.callbacks[e].splice(n,1),this.tryDestroy();}tryDestroy(){Object.values(i.callbacks).every(e=>0===e.length)&&this.destroy();}}i.isPinching=!1,i.instance=null,i.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};},b165e34b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getRange:function(){return a;},getStackedData:function(){return o;}});var r=n("18f14020"),i=n("abe9d8d6");function a(e){return 0===e.length?[0,0]:[(0,i.min)((0,i.minBy)(e,function(e){return(0,i.min)(e)||0;})),(0,i.max)((0,i.maxBy)(e,function(e){return(0,i.max)(e)||0;}))];}function o(e){for(var t=(0,i.clone)(e),n=t[0].length,a=(0,r.__read)([Array(n).fill(0),Array(n).fill(0)],2),o=a[0],s=a[1],l=0;l<t.length;l+=1)for(var u=t[l],c=0;c<n;c+=1)u[c]>=0?(u[c]+=o[c],o[c]=u[c]):(u[c]+=s[c],s[c]=u[c]);return t;}},b1961425:function(e,t,n){"use strict";function r(e){return e*Math.PI/180;}function i(e){return Number((180*e/Math.PI).toPrecision(5));}n.d(t,"__esModule",{value:!0}),n.e(t,{degToRad:function(){return r;},radToDeg:function(){return i;}});},b1a96927:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{arcBox:function(){return l;},cubicBox:function(){return v;},cubicPointDistance:function(){return g;},distance:function(){return o;},lineLength:function(){return c;},linePointAt:function(){return d;},linePointToLine:function(){return h;},polylineLength:function(){return m;},quadBox:function(){return E;},quadPointDistance:function(){return x;}});var r=n("777fffbe")._(n("d60881d0")),i=n("abe9d8d6"),a=n("597fa39f");function o(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a);}function s(e,t){var n=Math.min.apply(Math,(0,r.default)(e)),i=Math.min.apply(Math,(0,r.default)(t));return{x:n,y:i,width:Math.max.apply(Math,(0,r.default)(e))-n,height:Math.max.apply(Math,(0,r.default)(t))-i};}function l(e,t,n,r,i,a,o){for(var s=Math.atan(-r/n*Math.tan(i)),l=1/0,u=-1/0,c=[a,o],d=-(2*Math.PI);d<=2*Math.PI;d+=Math.PI){var h=s+d;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h);}for(var f=0;f<c.length;f++){var p,v=n*Math.cos(i)*Math.cos(p=c[f])-r*Math.sin(i)*Math.sin(p)+e;v<l&&(l=v),v>u&&(u=v);}for(var g=Math.atan(r/(n*Math.tan(i))),m=1/0,y=-1/0,b=[a,o],E=-(2*Math.PI);E<=2*Math.PI;E+=Math.PI){var x=g+E;a<o?a<x&&x<o&&b.push(x):o<x&&x<a&&b.push(x);}for(var k=0;k<b.length;k++){var S,T=n*Math.sin(i)*Math.cos(S=b[k])+r*Math.cos(i)*Math.sin(S)+t;T<m&&(m=T),T>y&&(y=T);}return{x:l,y:m,width:u-l,height:y-m};}function u(e,t,n,i,a,s){var l=-1,u=1/0,c=[n,i],d=20;s&&s>200&&(d=s/10);for(var h=1/d,f=h/10,p=0;p<=d;p++){var v=p*h,g=[a.apply(void 0,(0,r.default)(e.concat([v]))),a.apply(void 0,(0,r.default)(t.concat([v])))],m=o(c[0],c[1],g[0],g[1]);m<u&&(l=v,u=m);}if(0===l)return{x:e[0],y:t[0]};if(1===l){var y=e.length;return{x:e[y-1],y:t[y-1]};}u=1/0;for(var b=0;b<32&&!(f<1e-4);b++){var E=l-f,x=l+f,k=[a.apply(void 0,(0,r.default)(e.concat([E]))),a.apply(void 0,(0,r.default)(t.concat([E])))],S=o(c[0],c[1],k[0],k[1]);if(E>=0&&S<u)l=E,u=S;else{var T=[a.apply(void 0,(0,r.default)(e.concat([x]))),a.apply(void 0,(0,r.default)(t.concat([x])))],M=o(c[0],c[1],T[0],T[1]);x<=1&&M<u?(l=x,u=M):f*=.5;}}return{x:a.apply(void 0,(0,r.default)(e.concat([l]))),y:a.apply(void 0,(0,r.default)(t.concat([l])))};}function c(e,t,n,r){return o(e,t,n,r);}function d(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r};}function h(e,t,n,r,i,o){var s=[n-e,r-t];if(a.vec2.exactEquals(s,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));var l=[-s[1],s[0]];return a.vec2.normalize(l,l),Math.abs(a.vec2.dot([i-e,o-t],l));}function f(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i;}function p(e,t,n,r){var a,o,s,l=-3*e+9*t-9*n+3*r,u=6*e-12*t+6*n,c=3*t-3*e,d=[];if((0,i.isNumberEqual)(l,0))!(0,i.isNumberEqual)(u,0)&&(a=-c/u)>=0&&a<=1&&d.push(a);else{var h=u*u-4*l*c;(0,i.isNumberEqual)(h,0)?d.push(-u/(2*l)):h>0&&(a=(-u+(s=Math.sqrt(h)))/(2*l),o=(-u-s)/(2*l),a>=0&&a<=1&&d.push(a),o>=0&&o<=1&&d.push(o));}return d;}function v(e,t,n,r,i,a,o,l){for(var u=[e,o],c=[t,l],d=p(e,n,i,o),h=p(t,r,a,l),v=0;v<d.length;v++)u.push(f(e,n,i,o,d[v]));for(var g=0;g<h.length;g++)c.push(f(t,r,a,l,h[g]));return s(u,c);}function g(e,t,n,r,i,a,s,l,c,d,h){var p=u([e,n,i,s],[t,r,a,l],c,d,f,h);return o(p.x,p.y,c,d);}function m(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=o(r[0],r[1],i[0],i[1]);}return t;}(e);}function y(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n;}function b(e,t,n){var r=e+n-2*t;if((0,i.isNumberEqual)(r,0))return[.5];var a=(e-t)/r;return a<=1&&a>=0?[a]:[];}function E(e,t,n,r,i,a){var o=b(e,n,i)[0],l=b(t,r,a)[0],u=[e,i],c=[t,a];return void 0!==o&&u.push(y(e,n,i,o)),void 0!==l&&c.push(y(t,r,a,l)),s(u,c);}function x(e,t,n,r,i,a,s,l){var c=u([e,n,i],[t,r,a],s,l,y);return o(c.x,c.y,s,l);}},b1f50233:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_OPTIONS:function(){return o;},getFishboneOptions:function(){return c;}});var r=n("c5eb7168"),i=n("2b663a31"),a=n("e50a16b8");let o={node:{style:{size:10,labelPlacement:"center"}},edge:{type:"polyline"},layout:{type:"fishbone",hGap:40,vGap:60},animation:!1},s="system-ui, sans-serif",l=(e,t)=>0===t?(0,a.measureTextSize)(e,[80,48],{fontSize:24,fontWeight:600,fontFamily:s}):1===t?(0,a.measureTextSize)(e,[80,30],{fontSize:18,fontFamily:s}):[2,30],u=e=>{var t;let n=e.depth;return 0===n?"#EFF0F0":1===n?(null===(t=e.style)||void 0===t?void 0:t.color)||"#EFF0F0":"transparent";};function c({type:e,labelField:t}){let n={node:{type:"rect",style:{fill:e=>u(e),labelFill:e=>1===e.depth?"#fff":"#262626",labelFillOpacity:1,labelFontSize:e=>0===e.depth?24:1===e.depth?18:16,labelFontWeight:e=>0===e.depth?600:400,labelLineHeight:e=>0===e.depth?26:1===e.depth?20:18,labelText:e=>(0,i.formatLabel)(e,t),radius:8,size:e=>l(e.id,e.depth)}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(e){let t=this.getNodeData(e.target);return(0,r.get)(t,"style.color","#99ADD1");}}},transforms:e=>[...e,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};return n.layout||(n.layout={}),"decision"===e?(n.node.style.labelPlacement=e=>0===e.depth||1===e.depth?"center":"right",Object.assign(n.layout,{direction:"LR"})):"cause"===e&&(n.node.style.labelPlacement=e=>0===e.depth||1===e.depth?"center":"left",Object.assign(n.layout,{direction:"RL"})),n;}},b20c224c:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{arrayInterpolate:function(){return a;},interpolate:function(){return s;},numberInterpolate:function(){return i;},objectInterpolate:function(){return o;}});var r=n("18f14020"),i=function(e,t){return function(n){return e*(1-n)+t*n;};};function a(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var a=Array(r),o=Array(n),l=0;for(l=0;l<r;++l)a[l]=s(e[l],t[l]);for(;l<n;++l)o[l]=t[l];for(l=0;l<r;++l)o[l]=a[l](i);return o;};}function o(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n={},i={};return Object.entries(t).forEach(function(t){var a=(0,r.__read)(t,2),o=a[0],l=a[1];o in e?n[o]=s(e[o],l):i[o]=l;}),function(e){return Object.entries(n).forEach(function(t){var n=(0,r.__read)(t,2),a=n[0],o=n[1];return i[a]=o(e);}),i;};}function s(e,t){return"number"==typeof e&&"number"==typeof t?i(e,t):Array.isArray(e)&&Array.isArray(t)?a(e,t):"object"==typeof e&&"object"==typeof t?o(e,t):function(t){return e;};}},b2775701:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"intersect",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("39218125");function a(e,t,n){var a,o,s=(0,i.getBounds)(e,n).flat(1),l=(0,i.getBounds)(t,n).flat(1),u=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var c=(0,r.__values)(u),d=c.next();!d.done;d=c.next()){var h=d.value;if(function(e,t){return[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]].some(function(e){return function(e,t){var n=(0,r.__read)(e,4),i=n[0],a=n[1],o=n[2],s=n[3],l=(0,r.__read)(t,4),u=l[0],c=l[1],d=l[2],h=l[3],f=o-i,p=s-a,v=d-u,g=h-c,m=f*g-v*p;if(0===m)return!1;var y=m>0,b=i-u,E=a-c,x=f*E-p*b;if(x<0===y)return!1;var k=v*E-g*b;return k<0!==y&&x>m!==y&&k>m!==y;}(t,e);});}(l,h))return!0;}}catch(e){a={error:e};}finally{try{d&&!d.done&&(o=c.return)&&o.call(c);}finally{if(a)throw a.error;}}return!1;}},b284d42c:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{bowtie:function(){return c;},button:function(){return S;},circle:function(){return r;},cross:function(){return h;},dash:function(){return m;},diamond:function(){return o;},dot:function(){return g;},focus:function(){return T;},hexagon:function(){return u;},hv:function(){return b;},hvh:function(){return x;},hyphen:function(){return v;},line:function(){return d;},plus:function(){return p;},point:function(){return i;},smooth:function(){return y;},square:function(){return a;},tick:function(){return f;},triangle:function(){return s;},triangleDown:function(){return l;},vh:function(){return E;},vhv:function(){return k;}});var r=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];},i=r,a=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];},o=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]];},s=function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]];},l=function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]];},u=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]];},c=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]];},d=function(e,t,n){return[["M",e,t+n],["L",e,t-n]];},h=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];},f=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];},p=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];},v=function(e,t,n){return[["M",e-n,t],["L",e+n,t]];},g=function(e,t,n){return[["M",e-n,t],["L",e+n,t]];},m=g,y=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];},b=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];},E=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];},x=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];};function k(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];}var S=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]];},T=function(e,t,n){var r=.2*n,i=.7*n;return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"],["M",e-i,t],["L",e-r,t],["M",e+r,t],["L",e+i,t],["M",e,t-i],["L",e,t-r],["M",e,t+r],["L",e,t+i]];};},b415022d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"EXTENSION_REGISTRY",{enumerable:!0,get:function(){return r;}});let r={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};},b429f029:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{blues:function(){return s;},greens:function(){return o;},oranges:function(){return a;},spectral:function(){return r;},tableau:function(){return i;}});let r=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],i=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],a=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],o=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],s=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];},b515d568:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Linear",{enumerable:!0,get:function(){return l;}});var r=n("abe9d8d6"),i=n("da5246de"),a=n("90abb703"),o=n("4f434d3c"),s=n("fb09bcee");class l extends i.Continuous{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:a.createInterpolateValue,tickMethod:o.d3Ticks,tickCount:5};}removeUnsortedValues(e,t,n){let r=-1/0;return t.reduce((e,i,a)=>{if(0===a)return e;let o=r>0?r:i;return r>0&&(n?i>r:i<r)?e.push(a):(o-t[a-1])*(n?-1:1)<0?(r<0&&(r=t[a-1]),e.push(a)):r=-1/0,e;},[]).slice().reverse().forEach(n=>{e.splice(n,1),t.splice(n,1);}),{breaksDomain:e,breaksRange:t};}transformDomain(e){let t=.03,{domain:n=[],range:i=[1,0],breaks:a=[],tickCount:l=5,nice:u}=e,[c,d]=[Math.min(...n),Math.max(...n)],h=c,f=d;if(u&&a.length<2){let e=this.chooseNice()(c,d,l);h=e[0],f=e[e.length-1];}let p=Math.min(h,c),v=Math.max(f,d),g=a.filter(({end:e})=>e<v).sort((e,t)=>e.start-t.start),m=(0,o.d3Ticks)(p,v,l,g);if((0,r.last)(m)<v){let e=(0,s.d3LinearNice)(0,v-(0,r.last)(m),3);m.push((0,r.last)(m)+(0,r.last)(e)),v=(0,r.last)(m);}let[y,b]=[i[0],(0,r.last)(i)],E=v-p,x=Math.abs(b-y),k=y>b,S=m.map(e=>{let t=(e-p)/E;return k?y-t*x:y+t*x;}),[T,M]=[.2,.8];return g.forEach(({start:e,end:n,gap:r=t,compress:i="middle"})=>{let a=m.indexOf(e),o=m.indexOf(n),s=(S[a]+S[o])/2;"start"===i&&(s=S[a]),"end"===i&&(s=S[o]);let l=r*x/2,u=k?s+l:s-l,c=k?s-l:s+l;u<T&&(c+=T-u,u=T),c>M&&(u-=c-M,c=M),u>M&&(c-=u-M,u=M),c<T&&(u+=T-c,c=T),S[a]=u,S[o]=c;}),this.removeUnsortedValues(m,S,k);}transformBreaks(e){let{domain:t,breaks:n=[]}=e;if(!(0,r.isArray)(e.breaks))return e;let i=Math.max(...t),a=n.filter(({end:e})=>e<i),o={...e,breaks:a},{breaksDomain:s,breaksRange:l}=this.transformDomain(o);return{...e,domain:s,range:l,breaks:a,tickMethod:()=>[...s]};}chooseTransforms(){return[r.identity,r.identity];}clone(){return new l(this.options);}}},b5264332:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Text",{enumerable:!0,get:function(){return o;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("39f45b08"),o=function(e){function t(t){void 0===t&&(t={});var n=t.style,i=(0,r.__rest)(t,["style"]);return e.call(this,(0,r.__assign)({style:(0,r.__assign)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,a.createOffscreenGroup)(this)),this._offscreen;},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var e;null===(e=this._offscreen)||void 0===e||e.destroy();},t;}(i.Text);},b5560c11:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Ordinal:function(){return l;},defaultUnknown:function(){return i;}});var r=n("526d1d3a");let i=Symbol("defaultUnknown");function a(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r);}function o(e){let{value:t,from:n,to:r,mapper:a,notFoundReturn:o}=e,s=a.get(t);if(void 0===s){if(o!==i)return o;s=n.push(t)-1,a.set(t,s);}return r[s%r.length];}function s(e){return e instanceof Date?e=>`${e}`:"object"==typeof e?e=>JSON.stringify(e):e=>e;}class l extends r.Base{getDefaultOptions(){return{domain:[],range:[],unknown:i};}constructor(e){super(e);}map(e){return 0===this.domainIndexMap.size&&a(this.domainIndexMap,this.getDomain(),this.domainKey),o({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(e){return 0===this.rangeIndexMap.size&&a(this.rangeIndexMap,this.getRange(),this.rangeKey),o({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(e){let[t]=this.options.domain,[n]=this.options.range;if(this.domainKey=s(t),this.rangeKey=s(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return;}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0);}clone(){return new l(this.options);}getRange(){return this.options.range;}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain;}}},b5f34ca1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Quantile",{enumerable:!0,get:function(){return o;}});var r=n("55be970f"),i=n("6506d72a"),a=n("8941b7ac");class o extends r.Threshold{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:i.wilkinsonExtended};}constructor(e){super(e);}rescale(){let{domain:e,range:t}=this.options;this.n=t.length-1,this.thresholds=(0,a.createQuartile)(e,this.n+1,!1);}invert(e){let[t,n]=super.invert(e),{domain:r}=this.options,i=r[0],a=r[r.length-1];return void 0===t&&void 0===n?[t,n]:[t||i,n||a];}getThresholds(){return this.thresholds;}clone(){return new o(this.options);}getTicks(){let{tickCount:e,domain:t,tickMethod:n}=this.options,r=t.length-1;return n(t[0],t[r],e);}}},b60caef5:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"monotoneConvexHull2D",{enumerable:!0,get:function(){return i;}});let r=n("777fffbe")._(n("93ff44d0")).default[3];function i(e){let t=e.length;if(t<3){let n=Array(t);for(let e=0;e<t;++e)n[e]=e;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n;}let n=Array(t);for(let e=0;e<t;++e)n[e]=e;n.sort((t,n)=>e[t][0]-e[n][0]||e[t][1]-e[n][1]);let i=[n[0],n[1]],a=[n[0],n[1]];for(let o=2;o<t;++o){let t=n[o],s=e[t],l=i.length;for(;l>1&&0>=r(e[i[l-2]],e[i[l-1]],s);)l-=1,i.pop();for(i.push(t),l=a.length;l>1&&r(e[a[l-2]],e[a[l-1]],s)>=0;)l-=1,a.pop();a.push(t);}let o=Array(a.length+i.length-2),s=0;for(let e=0,t=i.length;e<t;++e)o[s++]=i[e];for(let e=a.length-2;e>0;--e)o[s++]=a[e];return o;}},b61745e2:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IndentedTree",{enumerable:!0,get:function(){return u;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("66366487"),s=n("aeeab442"),l=n("a186b6b1");let u=(0,r.forwardRef)(({children:e,...t},n)=>{let{data:u,defaultExpandLevel:c,type:d="default",nodeMinWidth:h,nodeMaxWidth:f,direction:p="right",labelField:v,...g}=t,m=(0,r.useMemo)(()=>(0,s.mergeOptions)(a.COMMON_OPTIONS,l.DEFAULT_OPTIONS,{data:(0,o.formatTreeData)(u,c)},(0,l.getIndentedTreeOptions)({type:d,nodeMinWidth:h,nodeMaxWidth:f,direction:p,labelField:v}),g),[t]);return r.default.createElement(i.BaseGraph,{...m,ref:n},e);});},b625de69:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"parsePlacement",{enumerable:!0,get:function(){return i;}});var r=n("5b11de40");function i(e){if(Array.isArray(e))return(0,r.isBetween)(e[0],0,1)&&(0,r.isBetween)(e[1],0,1)?e:[.5,.5];let t=e.split("-");return[t.includes("left")?0:t.includes("right")?1:.5,t.includes("top")?0:t.includes("bottom")?1:.5];}},b6a8238e:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Fishbone",{enumerable:!0,get:function(){return u;}});var r=n("852bbaa9")._(n("3e6b097d")),i=n("75c1a80f"),a=n("e314c61c"),o=n("66366487"),s=n("aeeab442"),l=n("b1f50233");let u=(0,r.forwardRef)(({children:e,...t},n)=>{let{data:u,defaultExpandLevel:c,type:d="cause",labelField:h,...f}=t,p=(0,r.useMemo)(()=>(0,s.mergeOptions)(a.COMMON_OPTIONS,l.DEFAULT_OPTIONS,{data:(0,o.formatTreeData)(u)},(0,l.getFishboneOptions)({type:d,labelField:h}),f),[t]);return r.default.createElement(i.BaseGraph,{...p,ref:n},e);});},b6da631d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"findTickInterval",{enumerable:!0,get:function(){return s;}});var r=n("9c971d62"),i=n("62f6eb3c"),a=n("e71f3dfd"),o=n("a4a27411");function s(e,t,n,s,l){let u;let c=+e,d=+t,{tickIntervals:h,year:f,millisecond:p}=function(e){let{year:t,month:n,week:a,day:o,hour:s,minute:l,second:u,millisecond:c}=e?i.utcIntervalMap:r.localIntervalMap;return{tickIntervals:[[u,1],[u,5],[u,15],[u,30],[l,1],[l,5],[l,15],[l,30],[s,1],[s,3],[s,6],[s,12],[o,1],[o,2],[a,1],[n,1],[n,3],[t,1]],year:t,millisecond:c};}(l),v=([e,t])=>e.duration*t,g=s?(d-c)/s:n||5,m=s||(d-c)/g,y=h.length,b=(0,a.bisect)(h,m,0,y,v);if(b===y){let e=(0,o.tickStep)(c/f.duration,d/f.duration,g);u=[f,e];}else if(b){let[e,t]=m/v(h[b-1])<v(h[b])/m?h[b-1]:h[b],n=s?Math.ceil(s/e.duration):t;u=[e,n];}else u=[p,Math.max((0,o.tickStep)(c,d,g),1)];return u;}},b6eb382e:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"treeToGraphData",{enumerable:!0,get:function(){return a;}});var r=n("d88e9b7d"),i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function a(e,t){let{getNodeData:n=(e,t)=>{if(e.depth=t,!e.children)return e;let{children:n}=e;return Object.assign(Object.assign({},i(e,["children"])),{children:n.map(e=>e.id)});},getEdgeData:a=(e,t)=>({source:e.id,target:t.id}),getChildren:o=e=>e.children||[]}=t||{},s=[],l=[];return(0,r.dfs)(e,(e,t)=>{for(let r of(s.push(n(e,t)),o(e)))l.push(a(e,r));},e=>o(e),"TB"),{nodes:s,edges:l};}},b6ebc843:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DragElement",{enumerable:!0,get:function(){return p;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("8a0aecd6"),s=n("966f7de2"),l=n("81401a10"),u=n("9da99c33"),c=n("db1e79e1"),d=n("71473486"),h=n("32576f8a"),f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class p extends h.BaseBehavior{constructor(e,t){super(e,Object.assign({},p.defaultOptions,t)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=e=>f(this,void 0,void 0,function*(){var t;if("link"!==this.options.dropEffect)return;let{model:n,element:r}=this.context,i=e.target.id;this.target.forEach(e=>{let t=n.getParentData(e,a.COMBO_KEY);t&&(0,l.idOf)(t)===i&&n.refreshComboData(i),n.setParent(e,i,a.COMBO_KEY);}),yield null===(t=null==r?void 0:r.draw({animation:!0}))||void 0===t?void 0:t.finished;}),this.setCursor=e=>{if(this.isDragging)return;let{type:t}=e,{canvas:n}=this.context,{cursor:r}=this.options;t===a.CommonEvent.POINTER_ENTER?n.setCursor((null==r?void 0:r.grab)||"grab"):n.setCursor((null==r?void 0:r.default)||"default");},this.shortcut=new c.Shortcut(e.graph),this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents();}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}bindEvents(){let{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(t=>{e.on(`${t}:${a.CommonEvent.DRAG_START}`,this.onDragStart),e.on(`${t}:${a.CommonEvent.DRAG}`,this.onDrag),e.on(`${t}:${a.CommonEvent.DRAG_END}`,this.onDragEnd),e.on(`${t}:${a.CommonEvent.POINTER_ENTER}`,this.setCursor),e.on(`${t}:${a.CommonEvent.POINTER_LEAVE}`,this.setCursor);}),["link"].includes(this.options.dropEffect)&&(e.on(a.ComboEvent.DROP,this.onDrop),e.on(a.CanvasEvent.DROP,this.onDrop));}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(e=>e.id).concat(e)));}getDelta(e){let t=this.context.graph.getZoom();return(0,d.divide)([e.dx,e.dy],t);}onDragStart(e){var t;if(this.enable=this.validate(e),!this.enable)return;let{batch:n,canvas:r,graph:i}=this.context;r.setCursor((null===(t=this.options.cursor)||void 0===t?void 0:t.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();let a=e.target.id;i.getElementState(a).includes(this.options.state)?this.target=this.getSelectedNodeIDs([a]):this.target=[a],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target);}onDrag(e){if(!this.enable)return;let t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t);}onDragEnd(){var e,t,n;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";let{x:e=0,y:t=0}=this.shadow.attributes,[n,r]=(0,d.subtract)([+e,+t],this.shadowOrigin);this.moveElement(this.target,[n,r]);}this.showEdges(),null===(t=(e=this.options).onFinish)||void 0===t||t.call(e,this.target);let{batch:r,canvas:i}=this.context;r.endBatch(),i.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[];}isKeydown(){let{trigger:e}=this.options;return null==e||!e.length||this.shortcut.match(e);}validate(e){if(this.destroyed||(0,s.isToBeDestroyed)(e.target)||this.context.graph.isCollapsingExpanding||!this.isKeydown())return!1;let{enable:t}=this.options;return(0,i.isFunction)(t)?t(e):!!t;}clampByRotation([e,t]){let n=this.context.graph.getRotation();return(0,d.rotate)([e,t],n);}moveElement(e,t){return f(this,void 0,void 0,function*(){let{graph:n,model:r}=this.context,{dropEffect:i}=this.options;"move"===i&&e.forEach(e=>r.refreshComboData(e)),n.translateElementBy(Object.fromEntries(e.map(e=>[e,this.clampByRotation(t)])),!1);});}moveShadow(e){if(!this.shadow)return;let{x:t=0,y:n=0}=this.shadow.attributes,[r,i]=e;this.shadow.attr({x:+t+r,y:+n+i});}createShadow(e){let t=(0,u.subStyleProps)(this.options,"shadow"),n=(0,o.getCombinedBBox)(e.map(e=>this.context.element.getElement(e).getBounds())),[i,a]=n.min;this.shadowOrigin=[i,a];let[s,l]=(0,o.getBBoxSize)(n),c={width:s,height:l,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},t),c),{visibility:"visible"})):(this.shadow=new r.Rect({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},t),c),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow));}showEdges(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[]);}hideEdge(){let{hideEdge:e,shadow:t}=this.options;if("none"===e||t)return;let{graph:n}=this.context;"all"===e?this.hiddenEdges=n.getEdgeData().map(l.idOf):this.hiddenEdges=Array.from(new Set(this.target.map(t=>n.getRelatedEdgesData(t,e).map(l.idOf)).flat())),n.hideElement(this.hiddenEdges);}unbindEvents(){let{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(t=>{e.off(`${t}:${a.CommonEvent.DRAG_START}`,this.onDragStart),e.off(`${t}:${a.CommonEvent.DRAG}`,this.onDrag),e.off(`${t}:${a.CommonEvent.DRAG_END}`,this.onDragEnd),e.off(`${t}:${a.CommonEvent.POINTER_ENTER}`,this.setCursor),e.off(`${t}:${a.CommonEvent.POINTER_LEAVE}`,this.setCursor);}),e.off(`combo:${a.CommonEvent.DROP}`,this.onDrop),e.off(`canvas:${a.CommonEvent.DROP}`,this.onDrop);}destroy(){var e;this.unbindEvents(),null===(e=this.shadow)||void 0===e||e.destroy(),super.destroy();}}p.defaultOptions={animation:!0,enable:e=>["node","combo"].includes(e.targetType),trigger:[],dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};},b70c264d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Tooltip",{enumerable:!0,get:function(){return l;}});var r=n("6b44cd45"),i=n("abe9d8d6"),a=n("966f7de2"),o=n("0d562788"),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class l extends o.BasePlugin{constructor(e,t){super(e,Object.assign({},l.defaultOptions,t)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(e,t)=>{let{enable:n}=this.options;return"function"==typeof n?n(e,t):n;},this.onClick=e=>{let{target:{id:t}}=e;this.currentTarget===t?this.hide(e):this.show(e);},this.onPointerMove=e=>{let{target:t}=e;this.currentTarget&&t.id!==this.currentTarget&&this.show(e);},this.onPointerLeave=e=>{this.hide(e);},this.onCanvasMove=e=>{this.hide(e);},this.onPointerOver=e=>{this.show(e);},this.showById=e=>s(this,void 0,void 0,function*(){yield this.show({target:{id:e}});}),this.getElementData=(e,t)=>{let{model:n}=this.context;switch(t){case"node":return n.getNodeData([e]);case"edge":return n.getEdgeData([e]);case"combo":return n.getComboData([e]);default:return[];}},this.show=e=>s(this,void 0,void 0,function*(){var t,n;let r,o;let{client:s,target:{id:l}}=e;if((0,a.isToBeDestroyed)(e.target))return;let u=this.context.graph.getElementType(l),{getContent:c,title:d}=this.options,h=this.getElementData(l,u);if(!this.tooltipElement)return;if(!this.isEnable(e,h)){this.hide(e);return;}let f={};if(c){if(f.content=yield c(e,h),!f.content)return;}else{let e=this.context.graph.getElementRenderStyle(l),t="node"===u?e.fill:e.stroke;f={title:d||u,data:h.map(e=>({name:"ID",value:e.id||`${e.source} -> ${e.target}`,color:t}))};}if(this.currentTarget=l,s)r=s.x,o=s.y;else{let e=(0,i.get)(h,"0.style",{x:0,y:0});r=e.x,o=e.y;}null===(n=(t=this.options).onOpenChange)||void 0===n||n.call(t,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:r,y:o,style:{".tooltip":{visibility:"visible"}}}),f));}),this.hide=e=>{var t,n,r,i,a;if(!e){null===(n=(t=this.options).onOpenChange)||void 0===n||n.call(t,!1),null===(r=this.tooltipElement)||void 0===r||r.hide(),this.currentTarget=null;return;}if(!this.tooltipElement||!this.currentTarget)return;let{client:{x:o,y:s}}=e;null===(a=(i=this.options).onOpenChange)||void 0===a||a.call(i,!1),this.tooltipElement.hide(o,s),this.currentTarget=null;},this.initTooltip=()=>{var e;let t=new r.Tooltip({className:"tooltip",style:this.tooltipStyleProps});return null===(e=this.container)||void 0===e||e.appendChild(t.HTMLTooltipElement),t;},this.render(),this.bindEvents();}getEvents(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave};}update(e){var t;this.unbindEvents(),super.update(e),this.tooltipElement&&(null===(t=this.container)||void 0===t||t.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents();}render(){let{canvas:e}=this.context,t=e.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip());}unbindEvents(){let{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.off(n,t[n]);});}bindEvents(){let{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.on(n,t[n]);});}get tooltipStyleProps(){let{canvas:e}=this.context,{center:t}=e.getBounds(),{top:n,left:r}=e.getContainer().getBoundingClientRect(),{style:i,position:a,enterable:o,container:s={x:-r,y:-n},title:l,offset:u}=this.options,[c,d]=t,[h,f]=e.getSize();return{x:c,y:d,container:s,title:l,bounding:{x:0,y:0,width:h,height:f},position:a,enterable:o,offset:u,style:i};}destroy(){var e;this.unbindEvents(),this.tooltipElement&&(null===(e=this.container)||void 0===e||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy();}}l.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};},b7402dd3:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"measureText",{enumerable:!0,get:function(){return o;}});var r=n("c5eb7168"),i=n("c848f2e6"),a=this&&this.__spreadArray||function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t));},o=(0,r.memoize)(function(e,t){void 0===t&&(t={});var n=t.fontSize,a=t.fontFamily,o=t.fontWeight,s=t.fontStyle,l=t.fontVariant,u=(0,i.getCanvasContext)();return u.font=[s,o,l,"".concat(n,"px"),void 0===a?"sans-serif":a].join(" "),u.measureText((0,r.isString)(e)?e:"");},function(e,t){return void 0===t&&(t={}),a([e],(0,r.values)(t),!0).join("");});},b81750fa:function(e,t,n){"use strict";function r(e,t,n){return n?"".concat(e," ").concat(n,"legend-").concat(t):e;}n.d(t,"__esModule",{value:!0}),n.d(t,"getLegendClassName",{enumerable:!0,get:function(){return r;}});},b8e146b3:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{linear:function(){return r;},log:function(){return i;},pow:function(){return a;},sqrt:function(){return o;}});let r=(e,t,n)=>{let[r,i]=t,[a,o]=n;return i===r?a:a+(e-r)/(i-r)*(o-a);},i=(e,t,n)=>{let[r,i]=t,[a,o]=n;return a+Math.log(e-r+1)/Math.log(i-r+1)*(o-a);},a=(e,t,n,r=2)=>{let[i,a]=t,[o,s]=n;return o+Math.pow((e-i)/(a-i),r)*(s-o);},o=(e,t,n)=>{let[r,i]=t,[a,o]=n;return a+Math.sqrt((e-r)/(i-r))*(o-a);};},b96c9b15:function(e,t,n){"use strict";function r(e){let t={top:"unset",right:"unset",bottom:"unset",left:"unset"};return e.split("-").forEach(e=>{t[e]="8px";}),t.flexDirection=e.startsWith("top")||e.startsWith("bottom")?"row":"column",t;}n.d(t,"__esModule",{value:!0}),n.e(t,{BUILD_IN_SVG_ICON:function(){return a;},TOOLBAR_CSS:function(){return i;},parsePositionToStyle:function(){return r;}});let i=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,a=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;},ba7a8f29:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"isValid",{enumerable:!0,get:function(){return i;}});var r=n("abe9d8d6");function i(e){return!(0,r.isUndefined)(e)&&!(0,r.isNull)(e)&&!Number.isNaN(e);}},baa0815f:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{linear:function(){return r;},log:function(){return i;},pow:function(){return a;},sqrt:function(){return o;}});let r=(e,t,n)=>{let[r,i]=t,[a,o]=n;return i===r?a:a+(e-r)/(i-r)*(o-a);},i=(e,t,n)=>{let[r,i]=t,[a,o]=n;return a+Math.log(e-r+1)/Math.log(i-r+1)*(o-a);},a=(e,t,n,r=2)=>{let[i,a]=t,[o,s]=n;return o+Math.pow((e-i)/(a-i),r)*(s-o);},o=(e,t,n)=>{let[r,i]=t,[a,o]=n;return a+Math.sqrt((e-r)/(i-r))*(o-a);};},bb3be533:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return i;}});var r=n("f949f236");function i(e,t){return e.style.opacity||(e.style.opacity=1),(0,r.transition)(e,{opacity:0},t);}},bb430c3e:function(e,t,n){"use strict";function r(e){return"source"in e&&"target"in e;}function i(e){return 2===e.length;}function a(e){return e instanceof Float32Array||!!Array.isArray(e)&&(2===e.length||3===e.length)&&e.every(e=>"number"==typeof e);}n.d(t,"__esModule",{value:!0}),n.e(t,{isEdgeData:function(){return r;},isPoint:function(){return a;},isVector2:function(){return i;}});},bc2fd635:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AutoAdaptLabel:function(){return r.AutoAdaptLabel;},BaseBehavior:function(){return i.BaseBehavior;},BrushSelect:function(){return a.BrushSelect;},ClickSelect:function(){return o.ClickSelect;},CollapseExpand:function(){return s.CollapseExpand;},CreateEdge:function(){return l.CreateEdge;},DragCanvas:function(){return u.DragCanvas;},DragElement:function(){return c.DragElement;},DragElementForce:function(){return d.DragElementForce;},FixElementSize:function(){return h.FixElementSize;},FocusElement:function(){return f.FocusElement;},HoverActivate:function(){return p.HoverActivate;},LassoSelect:function(){return v.LassoSelect;},OptimizeViewportTransform:function(){return g.OptimizeViewportTransform;},ScrollCanvas:function(){return m.ScrollCanvas;},ZoomCanvas:function(){return y.ZoomCanvas;}});var r=n("f0147f06"),i=n("32576f8a"),a=n("2b7b8fb0"),o=n("c96b1b1f"),s=n("a2380bd8"),l=n("307b1650"),u=n("bee7b50c"),c=n("b6ebc843"),d=n("16abca2d"),h=n("708b49e9"),f=n("96029596"),p=n("586bdc57"),v=n("3af71481"),g=n("0bb7f409"),m=n("8c6d1586"),y=n("8c74f1a4");},bc7d4453:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{arcBox:function(){return s;},cubicBox:function(){return h;},lineLength:function(){return l;},linePointAt:function(){return u;},polylineLength:function(){return f;},quadBox:function(){return g;}});var r=n("777fffbe")._(n("d60881d0")),i=n("abe9d8d6");function a(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a);}function o(e,t){var n=Math.min.apply(Math,(0,r.default)(e)),i=Math.min.apply(Math,(0,r.default)(t));return{x:n,y:i,width:Math.max.apply(Math,(0,r.default)(e))-n,height:Math.max.apply(Math,(0,r.default)(t))-i};}function s(e,t,n,r,i,a,o){for(var s=Math.atan(-r/n*Math.tan(i)),l=1/0,u=-1/0,c=[a,o],d=-(2*Math.PI);d<=2*Math.PI;d+=Math.PI){var h=s+d;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h);}for(var f=0;f<c.length;f++){var p,v=n*Math.cos(i)*Math.cos(p=c[f])-r*Math.sin(i)*Math.sin(p)+e;v<l&&(l=v),v>u&&(u=v);}for(var g=Math.atan(r/(n*Math.tan(i))),m=1/0,y=-1/0,b=[a,o],E=-(2*Math.PI);E<=2*Math.PI;E+=Math.PI){var x=g+E;a<o?a<x&&x<o&&b.push(x):o<x&&x<a&&b.push(x);}for(var k=0;k<b.length;k++){var S,T=n*Math.sin(i)*Math.cos(S=b[k])+r*Math.cos(i)*Math.sin(S)+t;T<m&&(m=T),T>y&&(y=T);}return{x:l,y:m,width:u-l,height:y-m};}function l(e,t,n,r){return a(e,t,n,r);}function u(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r};}function c(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i;}function d(e,t,n,r){var a,o,s,l=-3*e+9*t-9*n+3*r,u=6*e-12*t+6*n,c=3*t-3*e,d=[];if((0,i.isNumberEqual)(l,0))!(0,i.isNumberEqual)(u,0)&&(a=-c/u)>=0&&a<=1&&d.push(a);else{var h=u*u-4*l*c;(0,i.isNumberEqual)(h,0)?d.push(-u/(2*l)):h>0&&(a=(-u+(s=Math.sqrt(h)))/(2*l),o=(-u-s)/(2*l),a>=0&&a<=1&&d.push(a),o>=0&&o<=1&&d.push(o));}return d;}function h(e,t,n,r,i,a,s,l){for(var u=[e,s],h=[t,l],f=d(e,n,i,s),p=d(t,r,a,l),v=0;v<f.length;v++)u.push(c(e,n,i,s,f[v]));for(var g=0;g<p.length;g++)h.push(c(t,r,a,l,p[g]));return o(u,h);}function f(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=a(r[0],r[1],i[0],i[1]);}return t;}(e);}function p(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n;}function v(e,t,n){var r=e+n-2*t;if((0,i.isNumberEqual)(r,0))return[.5];var a=(e-t)/r;return a<=1&&a>=0?[a]:[];}function g(e,t,n,r,i,a){var s=v(e,n,i)[0],l=v(t,r,a)[0],u=[e,i],c=[t,a];return void 0!==s&&u.push(p(e,n,i,s)),void 0!==l&&c.push(p(t,r,a,l)),o(u,c);}},bc814306:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ChartModeHandle:function(){return u;},TimeModeHandle:function(){return l;}});var r=n("18f14020"),i=n("c086f503"),a=n("9225b8d3"),o=n("01a29d03"),s=n("38242230"),l=function(e){function t(n){var r=e.call(this,(0,s.deepAssign)({},t.defaultOptions,n))||this;return r.bindEvents(),r;}return(0,r.__extends)(t,e),t.prototype.bindEvents=function(){var e=this;this.addEventListener("mouseenter",function(){e.attr("lineWidth",Math.ceil(+(e.style.r||0)/2));}),this.addEventListener("mouseleave",function(){e.attr("lineWidth",0);});},t.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},t;}(a.Circle),u=function(e){function t(n){return e.call(this,(0,s.deepAssign)({},t.defaultOptions,n))||this;}return(0,r.__extends)(t,e),t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,i=e.width,a=e.height,s=(0,o.subStyleProps)(this.attributes,"background");(0,o.select)(this).maybeAppend("background","rect").attr("className","background").styles((0,r.__assign)({x:t-i/2,y:n-a/2,width:i,height:a},s));},t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,i=e.iconSize,a=(0,o.subStyleProps)(this.attributes,"icon"),s=i/2;(0,o.select)(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles((0,r.__assign)({x1:t-1,y1:n-s,x2:t-1,y2:n+s},a)),(0,o.select)(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles((0,r.__assign)({x1:t+1,y1:n-s,x2:t+1,y2:n+s},a));},t.prototype.renderBorder=function(){var e=this.attributes,t=e.x,n=e.y,i=e.width,a=e.height,s=e.type,l=(0,o.subStyleProps)(this.attributes,"border"),u="start"===s?+i/2:-i/2;(0,o.select)(this).maybeAppend("border","line").attr("className","border").styles((0,r.__assign)({x1:u+t,y1:n-a/2,x2:u+t,y2:n+a/2},l));},t.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder();},t.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},t;}(i.Component);},bcf4e626:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{filterExec:function(){return s;},getCallbackStyle:function(){return o;},getDirectionVector:function(){return c;},getLabelVector:function(){return d;},getLineAngle:function(){return l;},getLineTangentVector:function(){return u;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("01a29d03");function o(e,t){return Object.fromEntries(Object.entries(e).map(function(e){var n=(0,r.__read)(e,2),i=n[0],o=n[1];return[i,(0,a.getCallbackValue)(o,t)];}));}function s(e,t){return t&&(0,i.isFunction)(t)?e.filter(t):e;}function l(e,t){var n=t.startAngle;return(t.endAngle-n)*e+n;}function u(e,t){if("linear"===t.type){var n=(0,r.__read)(t.startPos,2),i=n[0],o=n[1],s=(0,r.__read)(t.endPos,2),u=s[0],c=s[1],d=(0,r.__read)([u-i,c-o],2),h=d[0],f=d[1];return(0,a.normalize)([h,f]);}var p=(0,a.degToRad)(l(e,t));return[-Math.sin(p),Math.cos(p)];}function c(e,t,n){var r=u(e,n);return(0,a.vertical)(r,"positive"!==t);}function d(e,t){return c(e,t.labelDirection,t);}},bd3ad08a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{CLASS_NAMES:function(){return s;},HANDLE_DEFAULT_CFG:function(){return o;},HANDLE_ICON_DEFAULT_CFG:function(){return i;},HANDLE_LABEL_DEFAULT_CFG:function(){return a;}});var r=n("01a29d03"),i={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},a={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},o={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},s=(0,r.classNames)({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider");},bd4c807b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Columns",{enumerable:!0,get:function(){return s;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("9225b8d3"),o=n("01a29d03"),s=function(e){function t(t){var n=this,o=t.style,s=(0,r.__rest)(t,["style"]);return(n=e.call(this,(0,i.deepMix)({},{type:"column"},(0,r.__assign)({style:o},s)))||this).columnsGroup=new a.Group({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n;}return(0,r.__extends)(t,e),t.prototype.render=function(){var e=this.attributes,t=e.columns,n=e.x,r=e.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),(0,o.select)(this.columnsGroup).selectAll(".column").data(t.flat()).join(function(e){return e.append("rect").attr("className","column").each(function(e){this.attr(e);});},function(e){return e.each(function(e){this.attr(e);});},function(e){return e.remove();});},t.prototype.update=function(e){this.attr((0,o.deepAssign)({},this.attributes,e)),this.render();},t.prototype.clear=function(){this.removeChildren();},t;}(a.DisplayObject);},bd7a65f9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{OVERRIDE_KEY:function(){return s;},cloneElementData:function(){return a;},isElementDataEqual:function(){return o;},isOverridable:function(){return l;},mergeElementsData:function(){return i;}});var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function i(e,t){let{data:n,style:i}=e,a=r(e,["data","style"]),{data:o,style:s}=t,l=r(t,["data","style"]),u=Object.assign(Object.assign({},a),l);return(n||o)&&Object.assign(u,{data:Object.assign(Object.assign({},n),o)}),(i||s)&&Object.assign(u,{style:Object.assign(Object.assign({},i),s)}),u;}function a(e){let{data:t,style:n}=e,i=r(e,["data","style"]);return t&&(i.data=Object.assign({},t)),n&&(i.style=Object.assign({},n)),i;}function o(e={},t={}){let{states:n=[],data:i={},style:a={},children:s=[]}=e,l=r(e,["states","data","style","children"]),{states:u=[],data:c={},style:d={},children:h=[]}=t,f=r(t,["states","data","style","children"]),p=(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),v=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>e[n]===t[n]);};return!!(v(l,f)&&p(s,h)&&p(n,u)&&v(i,c)&&v(a,d));}let s="__internal_override__";function l(e){return!1!==e[s];}},bdc2796d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ComboCollapse:function(){return u;},ComboExpand:function(){return c;},Fade:function(){return r;},NodeCollapse:function(){return a;},NodeExpand:function(){return o;},PathIn:function(){return s;},PathOut:function(){return l;},Translate:function(){return i;}}),n("15a0e3a2");let r=[{fields:["opacity"]}],i=[{fields:["x","y"]}],a=[{fields:["x","y"]}],o=a,s=[{fields:["sourceNode","targetNode"]}],l=s,u=[{fields:["childrenNode","x","y"]}],c=u;},bdd59e95:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BubbleSets",{enumerable:!0,get:function(){return p;}});var r=n("abe9d8d6"),i=n("82f69751"),a=n("6b0531cc"),o=n("988eb09c"),s=n("8a0aecd6"),l=n("4eb3f949"),u=n("81401a10"),c=n("905895f2"),d=n("8bdd800c"),h=n("0d562788"),f=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class p extends h.BasePlugin{constructor(e,t){super(e,(0,r.deepMix)({},p.defaultOptions,t)),this.path=null,this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{let{style:e,bubbleSetOptions:t}=this.parseOptions();(0,r.isEqual)(this.bubbleSetOptions,t)||this.init(),this.bubbleSetOptions=Object.assign({},t);let n=Object.assign(Object.assign({},e),{d:this.getPath()});this.shape?this.shape.update(n):(this.shape=new o.Contour({style:n}),this.context.canvas.appendChild(this.shape));},this.updateBubbleSetsPath=e=>{if(!this.shape)return;let t=(0,u.idOf)(e.data);[...this.options.members,...this.options.avoidMembers].includes(t)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(t)}));},this.getPath=e=>{let{graph:t}=this.context,n=this.options.members,i=[...this.members.keys()],a=this.options.avoidMembers,o=[...this.avoidMembers.keys()];if(0===n.length&&0===a.length)return this.members.clear(),this.avoidMembers.clear(),this.path=[],this.path;if(!e&&this.path&&(0,r.isEqual)(n,i)&&(0,r.isEqual)(a,o))return this.path;let{enter:s=[],exit:u=[]}=(0,l.arrayDiff)(i,n,e=>e),{enter:h=[],exit:f=[]}=(0,l.arrayDiff)(o,a,e=>e);if(e){let t=n.includes(e),r=a.includes(e);t&&(u.push(e),s.push(e)),r&&(f.push(e),h.push(e));}let p=(e,n,r)=>{e.forEach(e=>{let i=r?this.members:this.avoidMembers;if(n){let n;"edge"===t.getElementType(e)?([n]=g(t,e),this.bubbleSets.pushEdge(n)):([n]=v(t,e),this.bubbleSets[r?"pushMember":"pushNonMember"](n)),i.set(e,n);}else{let n=i.get(e);n&&("edge"===t.getElementType(e)?this.bubbleSets.removeEdge(n):this.bubbleSets[r?"removeMember":"removeNonMember"](n),i.delete(e));}});};p(u,!1,!0),p(s,!0,!0),p(f,!1,!1),p(h,!0,!1);let m=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=(0,c.getClosedSpline)(m.points.map(d.parsePoint)),this.path;},this.bindEvents(),this.bubbleSets=new i.BubbleSets(this.options);}bindEvents(){this.context.graph.on(a.GraphEvent.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(a.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath);}init(){this.bubbleSets=new i.BubbleSets(this.options),this.members.clear(),this.avoidMembers.clear(),this.path=null;}parseOptions(){let e=this.options,{type:t,key:n,members:r,avoidMembers:a}=e,o=f(e,["type","key","members","avoidMembers"]);return Object.assign({type:t,key:n,members:r,avoidMembers:a},Object.keys(o).reduce((e,t)=>(t in i.defaultOptions?e.bubbleSetOptions[t]=o[t]:e.style[t]=o[t],e),{style:{},bubbleSetOptions:{}}));}addMember(e){let t=Array.isArray(e)?e:[e];t.some(e=>this.options.avoidMembers.includes(e))&&(this.options.avoidMembers=this.options.avoidMembers.filter(e=>!t.includes(e))),this.options.members=[...new Set([...this.options.members,...t])],this.drawBubbleSets();}removeMember(e){let t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(e=>!t.includes(e)),this.drawBubbleSets();}updateMember(e){this.options.members=(0,r.isFunction)(e)?e(this.options.members):e,this.drawBubbleSets();}getMember(){return this.options.members;}addAvoidMember(e){let t=Array.isArray(e)?e:[e];t.some(e=>this.options.members.includes(e))&&(this.options.members=this.options.members.filter(e=>!t.includes(e))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...t])],this.drawBubbleSets();}removeAvoidMember(e){let t=Array.isArray(e)?e:[e];this.options.avoidMembers.some(e=>t.includes(e))&&(this.options.avoidMembers=this.options.avoidMembers.filter(e=>!t.includes(e)),this.drawBubbleSets());}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets();}getAvoidMember(){return this.options.avoidMembers;}destroy(){this.context.graph.off(a.GraphEvent.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(a.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape&&(this.shape.destroy(),this.shape=void 0),super.destroy();}}p.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},i.defaultOptions);let v=(e,t)=>(Array.isArray(t)?t:[t]).map(t=>{let n=e.getElementRenderBounds(t);return new i.Rectangle(n.min[0],n.min[1],(0,s.getBBoxWidth)(n),(0,s.getBBoxHeight)(n));}),g=(e,t)=>(Array.isArray(t)?t:[t]).map(t=>{let n=e.getEdgeData(t),r=e.getElementPosition(n.source),a=e.getElementPosition(n.target);return i.Line.from({x1:r[0],y1:r[1],x2:a[0],y2:a[1]});});},bee7b50c:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DragCanvas",{enumerable:!0,get:function(){return h;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("8a0aecd6"),o=n("28792030"),s=n("b04d91b4"),l=n("db1e79e1"),u=n("71473486"),c=n("32576f8a"),d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class h extends c.BaseBehavior{constructor(e,t){super(e,Object.assign({},h.defaultOptions,t)),this.isDragging=!1,this.onDragStart=e=>{this.validate(e)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"));},this.onDrag=e=>{var t,n,r,i;if(!this.isDragging||s.PinchHandler.isPinching)return;let a=null!==(n=null===(t=e.movement)||void 0===t?void 0:t.x)&&void 0!==n?n:e.dx,o=null!==(i=null===(r=e.movement)||void 0===r?void 0:r.y)&&void 0!==i?i:e.dy;(a|o)!=0&&this.translate([a,o],!1);},this.onDragEnd=()=>{var e,t;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),null===(t=(e=this.options).onFinish)||void 0===t||t.call(e);},this.invokeOnFinish=(0,r.debounce)(()=>{var e,t;null===(t=(e=this.options).onFinish)||void 0===t||t.call(e);},300),this.shortcut=new l.Shortcut(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default";}update(e){this.unbindEvents(),super.update(e),this.bindEvents();}bindEvents(){let{trigger:e}=this.options;if((0,r.isObject)(e)){let{up:t=[],down:n=[],left:r=[],right:i=[]}=e;this.shortcut.bind(t,e=>this.onTranslate([0,1],e)),this.shortcut.bind(n,e=>this.onTranslate([0,-1],e)),this.shortcut.bind(r,e=>this.onTranslate([1,0],e)),this.shortcut.bind(i,e=>this.onTranslate([-1,0],e));}else{let{graph:e}=this.context;e.on(i.CommonEvent.DRAG_START,this.onDragStart),e.on(i.CommonEvent.DRAG,this.onDrag),e.on(i.CommonEvent.DRAG_END,this.onDragEnd);}}onTranslate(e,t){return d(this,void 0,void 0,function*(){if(!this.validate(t))return;let{sensitivity:n}=this.options;yield this.translate((0,u.multiply)(e,-1*n),this.options.animation),this.invokeOnFinish();});}translate(e,t){return d(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),e=this.clampByRotation(e),yield this.context.graph.translateBy(e,t);});}clampByRotation([e,t]){let n=this.context.graph.getRotation();return(0,u.rotate)([e,t],n);}clampByDirection([e,t]){let{direction:n}=this.options;return"x"===n?t=0:"y"===n&&(e=0),[e,t];}clampByRange([e,t]){let{viewport:n,canvas:r}=this.context,[i,s]=r.getSize(),[l,c,d,h]=(0,o.parsePadding)(this.options.range),f=(0,a.getExpandedBBox)((0,a.getPointBBox)(n.getCanvasCenter()),[s*l,i*c,s*d,i*h]),p=(0,u.subtract)(n.getViewportCenter(),[e,t,0]);if(!(0,a.isPointInBBox)(p,f)){let{min:[n,r],max:[i,a]}=f;(p[0]<n&&e>0||p[0]>i&&e<0)&&(e=0),(p[1]<r&&t>0||p[1]>a&&t<0)&&(t=0);}return[e,t];}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return"function"==typeof t?t(e):!!t;}unbindEvents(){this.shortcut.unbindAll();let{graph:e}=this.context;e.off(i.CommonEvent.DRAG_START,this.onDragStart),e.off(i.CommonEvent.DRAG,this.onDrag),e.off(i.CommonEvent.DRAG_END,this.onDragEnd);}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy();}}h.defaultOptions={enable:e=>!("targetType"in e)||"canvas"===e.targetType,sensitivity:10,direction:"both",range:1/0};},bf1fd347:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getLinesIntersection:function(){return o;},isLinesParallel:function(){return a;}});var r=n("5b11de40"),i=n("71473486");function a(e,t){let[n,r]=e,[a,o]=t,s=(0,i.subtract)(n,r),l=(0,i.subtract)(a,o);return(0,i.cross)(s,l).every(e=>0===e);}function o(e,t,n=!1){if(a(e,t))return;let[i,s]=e,[l,u]=t,c=((i[0]-l[0])*(l[1]-u[1])-(i[1]-l[1])*(l[0]-u[0]))/((i[0]-s[0])*(l[1]-u[1])-(i[1]-s[1])*(l[0]-u[0])),d=u[0]-l[0]?(i[0]-l[0]+c*(s[0]-i[0]))/(u[0]-l[0]):(i[1]-l[1]+c*(s[1]-i[1]))/(u[1]-l[1]);if(n||(0,r.isBetween)(c,0,1)&&(0,r.isBetween)(d,0,1))return[i[0]+c*(s[0]-i[0]),i[1]+c*(s[1]-i[1])];}},bf663559:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Navigator",{enumerable:!0,get:function(){return p;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("f457f3e3"),s=n("c086f503"),l=n("9225b8d3"),u=n("01a29d03"),c=n("b284d42c"),d=n("66eb3e12"),h=n("b81750fa"),f=(0,u.classNames)({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),p=function(e){function t(t){var n=e.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(0,c.button)(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(e,t){return"".concat(e,"/").concat(t);},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new l.Group({class:f.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new l.Group({class:f.playWindow.name})),n.innerCurrPage=n.defaultPage,n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return(0,a.clamp)(e,0,Math.max(this.pageViews.length-1,0));},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var e=this.pageViews,t=(0,r.__read)((0,u.transpose)(e.map(function(e){var t=e.getBBox();return[t.width,t.height];})).map(function(e){return Math.max.apply(Math,(0,r.__spreadArray)([],(0,r.__read)(e),!1));}),2),n=t[0],i=t[1],a=this.attributes,o=a.pageWidth,s=a.pageHeight;return{pageWidth:void 0===o?n:o,pageHeight:void 0===s?i:s};},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow;},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage;},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t=e.prototype.getBBox.call(this),n=t.x,r=t.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,s=a.pageHeight;return new u.BBox(n,r,o+i.width,s);},t.prototype.goTo=function(e){var t=this,n=this.attributes.animate,i=this.currPage,a=this.playState,s=this.playWindow,l=this.pageViews;if("idle"!==a||e<0||l.length<=0||e>=l.length)return null;l[i].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=(0,r.__read)(this.getFollowingPageDiff(e),2),c=u[0],d=u[1];this.playState="running";var h=(0,o.animate)(s,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-d,")")}],n);return(0,o.onAnimateFinished)(h,function(){t.innerCurrPage=e,t.playState="idle",t.setVisiblePages([e]),t.updatePageInfo();}),h;},t.prototype.prev=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n<=0)return null;var r=e?(n-1+t)%t:(0,a.clamp)(n-1,0,t);return this.goTo(r);},t.prototype.next=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n>=t-1)return null;var r=e?(n+1)%t:(0,a.clamp)(n+1,0,t);return this.goTo(r);},t.prototype.renderClipPath=function(e){var t=this.pageShape,n=t.pageWidth,r=t.pageHeight;if(!n||!r){this.contentGroup.style.clipPath=void 0;return;}this.clipPath=e.maybeAppendByClassName(f.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node());},t.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(t,n){e.includes(n)?(0,u.show)(t):(0,u.hide)(t);});},t.prototype.adjustControllerLayout=function(){var e=this.prevBtnGroup,t=this.nextBtnGroup,n=this.pageInfoGroup,i=this.attributes,a=i.orientation,o=i.controllerPadding,s=n.getBBox(),l=s.width;s.height;var u=(0,r.__read)("horizontal"===a?[-180,0]:[-90,90],2),c=u[0],d=u[1];e.setLocalEulerAngles(c),t.setLocalEulerAngles(d);var h=e.getBBox(),f=h.width,p=h.height,v=t.getBBox(),g=v.width,m=v.height,y=Math.max(f,l,g),b="horizontal"===a?{offset:[[0,0],[f/2+o,0],[f+l+2*o,0]],textAlign:"start"}:{offset:[[y/2,-p-o],[y/2,0],[y/2,m+o]],textAlign:"center"},E=(0,r.__read)(b.offset,3),x=(0,r.__read)(E[0],2),k=x[0],S=x[1],T=(0,r.__read)(E[1],2),M=T[0],w=T[1],N=(0,r.__read)(E[2],2),C=N[0],_=N[1],P=b.textAlign,A=n.querySelector("text");A&&(A.style.textAlign=P),e.setLocalPosition(k,S),n.setLocalPosition(M,w),t.setLocalPosition(C,_);},t.prototype.updatePageInfo=function(){var e,t=this.currPage,n=this.pageViews,r=this.attributes.formatter;n.length<2||(null===(e=this.pageInfoGroup.querySelector(f.pageInfo.class))||void 0===e||e.attr("text",r(t+1,n.length)),this.adjustControllerLayout());},t.prototype.getFollowingPageDiff=function(e){var t=this.currPage;if(t===e)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=e<t?-1:1;return"horizontal"===n?[o*i,0]:[0,o*a];},t.prototype.prepareFollowingPage=function(e){var t=this.currPage,n=this.pageViews;if(this.setVisiblePages([e,t]),e!==t){var i=(0,r.__read)(this.getFollowingPageDiff(e),2),a=i[0],o=i[1];n[e].setLocalPosition(a,o);}},t.prototype.renderController=function(e){var t=this,n=this.attributes,i=n.controllerSpacing,a=n.classNamePrefix,o=void 0===a?"":a,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,p=this.pageViews.length>=2,v=e.maybeAppendByClassName(f.controller,"g");if((0,u.visibility)(v.node(),p),p){var g=(0,u.subStyleProps)(this.attributes,"button"),m=(0,u.subStyleProps)(this.attributes,"pageNum"),y=(0,r.__read)((0,u.splitStyle)(g),2),b=y[0],E=y[1],x=b.size,k=(0,r.__rest)(b,["size"]),S=!v.select(f.prevBtnGroup.class).node(),T=v.maybeAppendByClassName(f.prevBtnGroup,"g").styles(E);this.prevBtnGroup=T.node();var M=T.maybeAppendByClassName(f.prevBtn,"path");if(o){var w=(0,h.getLegendClassName)(f.prevBtn.name,d.CLASSNAME_SUFFIX_MAP.prevBtn,o);M.node().setAttribute("class",w);}var N=v.maybeAppendByClassName(f.nextBtnGroup,"g").styles(E);this.nextBtnGroup=N.node();var C=N.maybeAppendByClassName(f.nextBtn,"path");if(o){var _=(0,h.getLegendClassName)(f.nextBtn.name,d.CLASSNAME_SUFFIX_MAP.nextBtn,o);C.node().setAttribute("class",_);}[M,C].forEach(function(e){e.styles((0,r.__assign)((0,r.__assign)({},k),{transformOrigin:"center"})),(0,u.scaleToPixel)(e.node(),x,!0);});var P=v.maybeAppendByClassName(f.pageInfoGroup,"g");this.pageInfoGroup=P.node();var A=P.maybeAppendByClassName(f.pageInfo,"text");if(A.styles(m),o){var O=(0,h.getLegendClassName)(f.pageInfo.name,d.CLASSNAME_SUFFIX_MAP.pageInfo,o);A.node().setAttribute("class",O);}this.updatePageInfo(),v.node().setLocalPosition(l+i,c/2),S&&(this.prevBtnGroup.addEventListener("click",function(){t.prev();}),this.nextBtnGroup.addEventListener("click",function(){t.next();}));}},t.prototype.render=function(e,t){var n=e.x,r=e.y;this.attr("transform","translate(".concat(void 0===n?0:n,", ").concat(void 0===r?0:r,")"));var i=(0,u.select)(t);this.renderClipPath(i),this.renderController(i),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage);},t.prototype.bindEvents=function(){var e=this,t=(0,a.debounce)(function(){return e.render(e.attributes,e);},50);this.playWindow.addEventListener(i.ElementEvent.INSERTED,t),this.playWindow.addEventListener(i.ElementEvent.REMOVED,t);},t;}(s.Component);},bfa6e8c6:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{cacheStyle:function(){return o;},getCachedStyle:function(){return s;},hasCachedStyle:function(){return l;}});var r=n("abe9d8d6");let i="cachedStyle",a=e=>`__${e}__`;function o(e,t){let n=Array.isArray(t)?t:[t];(0,r.get)(e,i)||(0,r.set)(e,i,{}),n.forEach(t=>{(0,r.set)((0,r.get)(e,i),a(t),e.attributes[t]);});}function s(e,t){return(0,r.get)(e,[i,a(t)]);}function l(e,t){return a(t) in((0,r.get)(e,i)||{});}},c01f850d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"GridLine",{enumerable:!0,get:function(){return l;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("71473486"),o=n("0d562788"),s=n("82c10466");class l extends o.BasePlugin{constructor(e,t){super(e,Object.assign({},l.defaultOptions,t)),this.$element=(0,s.createPluginContainer)("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=e=>{let{data:{scale:t,origin:n}}=e;if(!t||void 0===n&&void 0===this.context.viewport)return;let r=this.currentScale;this.currentScale=t;let i=t/r,o=(0,a.multiply)(n||this.context.graph.getCanvasCenter(),1-i),s=this.baseSize*t,l=(0,a.multiply)(this.offset,i),u=(0,a.mod)(l,s),c=(0,a.add)(u,o);this.$element.style.backgroundSize=`${s}px ${s}px`,this.$element.style.backgroundPosition=`${c[0]}px ${c[1]}px`,this.offset=(0,a.mod)(c,s);},this.followTranslate=e=>{if(!this.options.follow)return;let{data:{translate:t}}=e;t&&this.updateOffset(t);},this.onTransform=e=>{let t=this.parseFollow(this.options.follow);t.zoom&&this.followZoom(e),t.translate&&this.followTranslate(e);},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents();}update(e){super.update(e),void 0!==e.size&&(this.baseSize=e.size),this.updateStyle();}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.AFTER_TRANSFORM,this.onTransform);}updateStyle(){let{stroke:e,lineWidth:t,border:n,borderLineWidth:r,borderStroke:i,borderStyle:a}=this.options,o=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${r}px ${a} ${i}`:"none",backgroundImage:`linear-gradient(${e} ${t}px, transparent ${t}px), linear-gradient(90deg, ${e} ${t}px, transparent ${t}px)`,backgroundSize:`${o}px ${o}px`,backgroundRepeat:"repeat"});}updateOffset(e){let t=this.baseSize*this.currentScale;this.offset=(0,a.mod)((0,a.add)(this.offset,e),t),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`;}parseFollow(e){var t,n;return(0,r.isBoolean)(e)?{translate:e,zoom:e}:{translate:null!==(t=null==e?void 0:e.translate)&&void 0!==t&&t,zoom:null!==(n=null==e?void 0:e.zoom)&&void 0!==n&&n};}destroy(){this.context.graph.off(i.GraphEvent.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy();}}l.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};},c086f503:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Component",{enumerable:!0,get:function(){return r.Component;}});var r=n("fb2b1989");},c0c03803:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Band:function(){return r.Band;},Constant:function(){return a.Constant;},Identity:function(){return o.Identity;},Linear:function(){return s.Linear;},Log:function(){return h.Log;},Ordinal:function(){return i.Ordinal;},Point:function(){return l.Point;},Pow:function(){return u.Pow;},Quantile:function(){return p.Quantile;},Quantize:function(){return f.Quantize;},Sequential:function(){return g.Sequential;},Sqrt:function(){return c.Sqrt;},Threshold:function(){return d.Threshold;},Time:function(){return v.Time;},createInterpolateValue:function(){return m.createInterpolateValue;}});var r=n("83fd8d4e"),i=n("3e76858e"),a=n("643d93c4"),o=n("522a998f"),s=n("b515d568"),l=n("00e9feee"),u=n("44db2d5d"),c=n("c0c17813"),d=n("55be970f"),h=n("34de554e"),f=n("924ca9a1"),p=n("b5f34ca1"),v=n("29bf47da"),g=n("226c6f8d"),m=n("90abb703");},c0c17813:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Sqrt",{enumerable:!0,get:function(){return o;}});var r=n("90abb703"),i=n("44db2d5d"),a=n("4f434d3c");class o extends i.Pow{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:r.createInterpolateValue,tickMethod:a.d3Ticks,tickCount:5,exponent:.5};}constructor(e){super(e);}update(e){super.update(e);}clone(){return new o(this.options);}}},c23b41b5:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{BaseExtension:function(){return l;},ExtensionController:function(){return s;}});var r=n("4eb3f949"),i=n("0c54d29c"),a=n("ec6e52f6"),o=n("d1f78d64");class s{constructor(e){this.extensions=[],this.extensionMap={},this.context=e;}setExtensions(e){let t=(0,i.parseExtensions)(this.context.graph,this.category,e),{enter:n,update:a,exit:o,keep:s}=(0,r.arrayDiff)(this.extensions,t,e=>e.key);this.createExtensions(n),this.updateExtensions([...a,...s]),this.destroyExtensions(o),this.extensions=t;}createExtension(e){let{category:t}=this,{key:n,type:r}=e,i=(0,o.getExtension)(t,r);if(!i)return a.print.warn(`The extension ${r} of ${t} is not registered.`);let s=new i(this.context,e);s.initialized=!0,this.extensionMap[n]=s;}createExtensions(e){e.forEach(e=>this.createExtension(e));}updateExtension(e){let{key:t}=e,n=this.extensionMap[t];n&&n.update(e);}updateExtensions(e){e.forEach(e=>this.updateExtension(e));}destroyExtension(e){let t=this.extensionMap[e];t&&(t.initialized&&!t.destroyed&&t.destroy(),delete this.extensionMap[e]);}destroyExtensions(e){e.forEach(({key:e})=>this.destroyExtension(e));}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={};}}class l{constructor(e,t){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=t;}update(e){this.options=Object.assign(this.options,e);}destroy(){this.context={},this.options={},this.destroyed=!0;}}},c28581c9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DEFAULT_HANDLE_CFG:function(){return d;},Handle:function(){return h;}});var r=n("18f14020"),i=n("c086f503"),a=n("01a29d03"),o=n("e6d068ba"),s=n("dbd5a5c2"),l=n("b81750fa"),u=n("66eb3e12"),c=(0,a.classNames)({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),d={showLabel:!0,formatter:function(e){return e.toString();},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},h=function(e){function t(t){return e.call(this,t,d)||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,t){var n=(0,a.select)(t).maybeAppendByClassName(c.markerGroup,"g");this.renderMarker(n);var r=(0,a.select)(t).maybeAppendByClassName(c.labelGroup,"g");this.renderLabel(r);},t.prototype.renderMarker=function(e){var t=this,n=this.attributes,i=n.orientation,d=n.classNamePrefix,h=n.markerSymbol,f=void 0===h?(0,s.ifHorizontal)(i,"horizontalHandle","verticalHandle"):h;(0,a.ifShow)(!!f,e,function(e){var n=(0,a.subStyleProps)(t.attributes,"marker"),i=(0,r.__assign)({symbol:f},n),s=(0,l.getLegendClassName)(c.marker.name,u.CLASSNAME_SUFFIX_MAP.handleMarker,d);if(t.marker=e.maybeAppendByClassName(c.marker,function(){return new o.Marker({style:i,className:s});}).update(i),d){var h=t.marker.node().querySelector(".marker");if(h){var p=(h.getAttribute("class")||"").split(" ")[0],v=(0,l.getLegendClassName)(p,u.CLASSNAME_SUFFIX_MAP.handleMarker,d);h.setAttribute("class",v);}}});},t.prototype.renderLabel=function(e){var t=this,n=this.attributes,i=n.showLabel,o=n.orientation,d=n.spacing,h=void 0===d?0:d,f=n.formatter,p=n.classNamePrefix;(0,a.ifShow)(i,e,function(e){var n,i=(0,a.subStyleProps)(t.attributes,"label"),d=i.text,v=(0,r.__rest)(i,["text"]),g=(null===(n=e.select(c.marker.class))||void 0===n?void 0:n.node().getBBox())||{},m=g.width,y=g.height,b=(0,r.__read)((0,s.ifHorizontal)(o,[0,(void 0===y?0:y)+h,"center","top"],[(void 0===m?0:m)+h,0,"start","middle"]),4),E=b[0],x=b[1],k=b[2],S=b[3],T=(0,l.getLegendClassName)(c.label.name,u.CLASSNAME_SUFFIX_MAP.handleLabel,p);e.maybeAppendByClassName(c.label,"text").attr("className",T).styles((0,r.__assign)((0,r.__assign)({},v),{x:E,y:x,text:f(d).toString(),textAlign:k,textBaseline:S}));});},t;}(i.Component);},c311f013:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"History",{enumerable:!0,get:function(){return u;}});var r=n("777fffbe")._(n("fcd40416")),i=n("6b0531cc"),a=n("da9864f1"),o=n("81401a10"),s=n("0d562788"),l=n("3f2a568d");class u extends s.BasePlugin{constructor(e,t){super(e,Object.assign({},u.defaultOptions,t)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(e,t=!0)=>{var n,r,i;this.freezed=!0,null===(r=(n=this.options).executeCommand)||void 0===r||r.call(n,e);let a=t?e.original:e.current;this.context.graph.addData(a.add),this.context.graph.updateData(a.update),this.context.graph.removeData((0,o.idsOf)(a.remove,!1)),null===(i=this.context.element)||void 0===i||i.draw({silence:!0,animation:e.animation}),this.freezed=!1;},this.addCommand=e=>{var t;if(!this.freezed){if(e.type===i.GraphEvent.AFTER_DRAW){let{dataChanges:n=[],animation:r=!0}=e.data;if(null===(t=this.context.batch)||void 0===t?void 0:t.isBatching){if(!this.batchChanges)return;this.batchChanges.push(n),this.batchAnimation&&(this.batchAnimation=r);return;}this.batchChanges=[n],this.batchAnimation=r;}this.undoStackPush((0,l.parseCommand)(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(a.HistoryEvent.ADD,this.undoStack[this.undoStack.length-1]);}},this.initBatchCommand=e=>{let{initiate:t}=e.data;this.batchAnimation=!1,t?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null);},this.emitter=new r.default;let{graph:n}=this.context;n.on(i.GraphEvent.AFTER_DRAW,this.addCommand),n.on(i.GraphEvent.BATCH_START,this.initBatchCommand),n.on(i.GraphEvent.BATCH_END,this.addCommand);}canUndo(){return this.undoStack.length>0;}canRedo(){return this.redoStack.length>0;}undo(){var e,t,n,r;let i=this.undoStack.pop();if(i){if(this.executeCommand(i),!1===(null===(t=(e=this.options).beforeAddCommand)||void 0===t?void 0:t.call(e,i,!1)))return;this.redoStack.push(i),null===(r=(n=this.options).afterAddCommand)||void 0===r||r.call(n,i,!1),this.notify(a.HistoryEvent.UNDO,i);}return this;}redo(){let e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(a.HistoryEvent.REDO,e)),this;}undoAndCancel(){let e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(a.HistoryEvent.CANCEL,e)),this;}undoStackPush(e){var t,n,r,i;let{stackSize:a}=this.options;0!==a&&this.undoStack.length>=a&&this.undoStack.shift(),!1!==(null===(n=(t=this.options).beforeAddCommand)||void 0===n?void 0:n.call(t,e,!0))&&(this.undoStack.push(e),null===(i=(r=this.options).afterAddCommand)||void 0===i||i.call(r,e,!0));}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(a.HistoryEvent.CLEAR,null);}notify(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(a.HistoryEvent.CHANGE,{cmd:t});}on(e,t){this.emitter.on(e,t);}destroy(){let{graph:e}=this.context;e.off(i.GraphEvent.AFTER_DRAW,this.addCommand),e.off(i.GraphEvent.BATCH_START,this.initBatchCommand),e.off(i.GraphEvent.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[];}}u.defaultOptions={stackSize:0};},c3987985:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"effect",{enumerable:!0,get:function(){return i;}});let r=new WeakMap;function i(e,t,n){r.has(e)||r.set(e,{});let i=r.get(e);return i[t]?!a(i[t],n)&&(i[t]=n,!0):(i[t]=n,!0);}let a=(e,t,n=2)=>{if("object"!=typeof e||"object"!=typeof t)return e===t;let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let i of r){let r=e[i],o=t[i];if(n>1&&"object"==typeof r&&"object"==typeof o){if(!a(r,o,n-1))return!1;}else if(r!==o)return!1;}return!0;};},c3a91540:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{computeNodeBetweennessCentrality:function(){return s;},computeNodeClosenessCentrality:function(){return l;},computeNodeEigenvectorCentrality:function(){return c;},computeNodePageRankCentrality:function(){return u;},createAdjacencyMatrix:function(){return d;},getNodeCentralities:function(){return a;},initCentralityResult:function(){return o;}});var r=n("995a9ba3"),i=n("81401a10");let a=(e,t,n)=>{var r;switch(n.type){case"degree":{let a=new Map;return null===(r=e.nodes)||void 0===r||r.forEach(e=>{let r=t((0,i.idOf)(e),n.direction).length;a.set((0,i.idOf)(e),r);}),a;}case"betweenness":return s(e,n.directed,n.weightPropertyName);case"closeness":return l(e,n.directed,n.weightPropertyName);case"eigenvector":return c(e,n.directed);case"pagerank":return u(e,n.epsilon,n.linkProb);default:return o(e);}},o=e=>{var t;let n=new Map;return null===(t=e.nodes)||void 0===t||t.forEach(e=>{n.set((0,i.idOf)(e),0);}),n;},s=(e,t,n)=>{let a=o(e),{nodes:s=[]}=e;return s.forEach(o=>{s.forEach(s=>{if(o!==s){let{allPath:l}=(0,r.findShortestPath)(e,(0,i.idOf)(o),(0,i.idOf)(s),t,n),u=l.length;l.flat().forEach(e=>{e!==(0,i.idOf)(o)&&e!==(0,i.idOf)(s)&&a.set(e,a.get(e)+1/u);});}});}),a;},l=(e,t,n)=>{let a=new Map,{nodes:o=[]}=e;return o.forEach(s=>{let l=o.reduce((a,o)=>{if(s!==o){let{length:l}=(0,r.findShortestPath)(e,(0,i.idOf)(s),(0,i.idOf)(o),t,n);a+=l;}return a;},0);a.set((0,i.idOf)(s),1/l);}),a;},u=(e,t,n)=>{var a;let o=new Map,s=(0,r.pageRank)(e,t,n);return null===(a=e.nodes)||void 0===a||a.forEach(e=>{o.set((0,i.idOf)(e),s[(0,i.idOf)(e)]);}),o;},c=(e,t)=>{let{nodes:n=[]}=e,r=h(d(e,t),n.length),a=new Map;return n.forEach((e,t)=>{a.set((0,i.idOf)(e),r[t]);}),a;},d=(e,t)=>{let{nodes:n=[],edges:r=[]}=e,a=Array(n.length).fill(null).map(()=>Array(n.length).fill(0));return r.forEach(({source:e,target:r})=>{let o=n.findIndex(t=>(0,i.idOf)(t)===e),s=n.findIndex(e=>(0,i.idOf)(e)===r);t?a[o][s]=1:(a[o][s]=1,a[s][o]=1);}),a;},h=(e,t,n=100,r=1e-6)=>{let i=Array(t).fill(1),a=1/0;for(let o=0;o<n&&a>r;o++){let n=Array(t).fill(0);for(let r=0;r<t;r++)for(let a=0;a<t;a++)n[r]+=e[r][a]*i[a];let r=Math.sqrt(n.reduce((e,t)=>e+t*t,0));for(let e=0;e<t;e++)n[e]/=r;a=Math.sqrt(n.reduce((e,t,n)=>e+(t-i[n])*t,0)),i=n;}return i;};},c3b278fd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getTranslate:function(){return i;},percentTransform:function(){return a;}});var r=n("18f14020");function i(e,t,n){var i=e.getBBox(),a=i.width,o=i.height,s=(0,r.__read)([t,n].map(function(e,t){var n;return e.includes("%")?parseFloat((null===(n=e.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===t?a:o):e;}),2);return[s[0],s[1]];}function a(e,t){if(t)try{var n=t.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(t,n,r){return"translate(".concat(i(e,n,r),")");});e.attr("transform",n);}catch(e){}}},c3c0b51a:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"ExtensionCategory",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).NODE="node",i.EDGE="edge",i.COMBO="combo",i.THEME="theme",i.PALETTE="palette",i.LAYOUT="layout",i.BEHAVIOR="behavior",i.PLUGIN="plugin",i.ANIMATION="animation",i.TRANSFORM="transform",i.SHAPE="shape";},c43476b3:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CollapseExpandNode",{enumerable:!0,get:function(){return u;}});var r=n("6b0531cc"),i=n("f20c9f5f"),a=n("81401a10"),o=n("eb4593bd"),s=n("fba51a74");let l=(e,t,n,r)=>{let i=`${n}s`,o=(0,a.idOf)(r);e.add[i].has(o)||e.update[i].has(o)||e[t][i].set((0,a.idOf)(r),r);};class u extends o.BaseTransform{getElement(e){return this.context.element.getElement(e);}handleExpand(e,t){if(l(t,"add","node",e),(0,i.isCollapsed)(e))return;let n=(0,a.idOf)(e);l(t,"add","node",e),this.context.model.getRelatedEdgesData(n).forEach(e=>{(0,s.reassignTo)(t,"add","edge",e);}),this.context.model.getChildrenData(n).forEach(e=>{this.handleExpand(e,t);});}beforeDraw(e){let{graph:t,model:n}=this.context;if(!n.model.hasTreeStructure(r.TREE_KEY))return e;let{add:{nodes:o,edges:l},update:{nodes:u}}=e,c=new Map,d=new Map;o.forEach((e,t)=>{(0,i.isCollapsed)(e)&&c.set(t,e);}),l.forEach(e=>{if("node"!==t.getElementType(e.source))return;let n=t.getNodeData(e.source);(0,i.isCollapsed)(n)&&c.set(e.source,n);}),u.forEach((e,t)=>{let n=this.getElement(t);if(!n)return;let r=n.attributes.collapsed;(0,i.isCollapsed)(e)?r||c.set(t,e):r&&d.set(t,e);});let h=new Set;return c.forEach((t,r)=>{n.getDescendantsData(r).forEach(t=>{let r=(0,a.idOf)(t);h.has(r)||((0,s.reassignTo)(e,"remove","node",t),n.getRelatedEdgesData(r).forEach(t=>{(0,s.reassignTo)(e,"remove","edge",t);}),h.add(r));});}),d.forEach((t,a)=>{if(n.getAncestorsData(a,r.TREE_KEY).some(i.isCollapsed)){(0,s.reassignTo)(e,"remove","node",t);return;}this.handleExpand(t,e);}),e;}}},c69adf7a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("cf98accf"),t);},c7141940:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ProcessParallelEdges:function(){return c;},getParallelEdges:function(){return h;},groupByEndpoints:function(){return d;},isParallelEdges:function(){return f;}});var r=n("abe9d8d6"),i=n("fc95c318"),a=n("81401a10"),o=n("eb4593bd"),s=n("deb7ab63"),l=n("fba51a74");let u=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class c extends o.BaseTransform{constructor(e,t){super(e,Object.assign({},c.defaultOptions,t)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=e=>{let{add:{edges:t},update:{nodes:n,edges:o,combos:l},remove:{edges:u}}=e,{model:c}=this.context,d=new Map,p=(e,t)=>{c.getRelatedEdgesData(t).forEach(e=>!d.has((0,a.idOf)(e))&&d.set((0,a.idOf)(e),e));};n.forEach(p),l.forEach(p);let v=t=>{let n=new Set(e.remove.edges.keys());h(t,c.getEdgeData().filter(e=>!n.has((0,a.idOf)(e))).map(e=>(0,s.getEdgeEndsContext)(c,e)),!0).forEach(e=>{let t=(0,a.idOf)(e);d.has(t)||d.set(t,e);});};if(u.size&&u.forEach(v),t.size&&t.forEach(v),o.size){let e=(0,i.groupByChangeType)((0,i.reduceDataChanges)(c.getChanges())).update.edges;o.forEach(t=>{var n;v(t);let r=null===(n=e.find(e=>(0,a.idOf)(e.value)===(0,a.idOf)(t)))||void 0===n?void 0:n.original;r&&!f(t,r)&&v(r);});}(0,r.isEmpty)(this.options.edges)||d.forEach((e,t)=>!this.options.edges.includes(t)&&d.delete(t));let g=c.getEdgeData().map(a.idOf);return new Map([...d].sort((e,t)=>g.indexOf(e[0])-g.indexOf(t[0])));},this.applyBundlingStyle=(e,t,n)=>{let{edgeMap:r,reverses:i}=d(t);r.forEach(t=>{t.forEach((t,r,o)=>{var s;let c=o.length,d=t.style||{};if(t.source===t.target){let e=u.length;d.loopPlacement=u[r%e],d.loopDist=Math.floor(r/e)*n+50;}else if(1===c)d.curveOffset=0;else{let e=(r%2==0?1:-1)*(i[`${t.source}|${t.target}|${r}`]?-1:1);d.curveOffset=c%2==1?e*Math.ceil(r/2)*n*2:e*(Math.floor(r/2)*n*2+n);}let h=Object.assign(t,{type:"quadratic",style:d}),f=null===(s=this.context.element)||void 0===s?void 0:s.getElement((0,a.idOf)(t));f&&(0,l.isStyleEqual)(h.style,f.attributes)||(0,l.reassignTo)(e,f?"update":"add","edge",h,!0);});});},this.resetEdgeStyle=e=>{let t=e.style||{},n=this.cacheMergeStyle.get((0,a.idOf)(e))||{};return Object.keys(n).forEach(i=>{(0,r.isEqual)(t[i],n[i])&&(e[i]?t[i]=e[i]:delete t[i]);}),Object.assign(e,{style:t});},this.applyMergingStyle=(e,t)=>{let{edgeMap:n,reverses:i}=d(t);n.forEach(t=>{var n;if(1===t.length){let r=t[0],i=null===(n=this.context.element)||void 0===n?void 0:n.getElement((0,a.idOf)(r)),o=this.resetEdgeStyle(r);i&&(0,l.isStyleEqual)(o,i.attributes)||(0,l.reassignTo)(e,i?"update":"add","edge",o);return;}let o=t.map(({source:e,target:t,style:n={}},a)=>{let{startArrow:o,endArrow:s}=n,l={},[u,c]=i[`${e}|${t}|${a}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return(0,r.isBoolean)(o)&&(l[u]=o),(0,r.isBoolean)(s)&&(l[c]=s),l;}).reduce((e,t)=>Object.assign(Object.assign({},e),t),{});t.forEach((t,n,i)=>{var s;if(0!==n){(0,l.reassignTo)(e,"remove","edge",t);return;}let u=Object.assign({},(0,r.isFunction)(this.options.style)?this.options.style(i):this.options.style,{childrenData:i});this.cacheMergeStyle.set((0,a.idOf)(t),u);let c=Object.assign(Object.assign({},t),{type:"line",style:Object.assign(Object.assign(Object.assign({},t.style),o),u)}),d=null===(s=this.context.element)||void 0===s?void 0:s.getElement((0,a.idOf)(t));d&&(0,l.isStyleEqual)(c.style,d.attributes)||(0,l.reassignTo)(e,d?"update":"add","edge",c,!0);});});};}beforeDraw(e){let t=this.getAffectedParallelEdges(e);return 0===t.size||("bundle"===this.options.mode?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e;}}c.defaultOptions={mode:"bundle",distance:15};let d=e=>{let t=new Map,n=new Set,r={},i=new Map;for(let[a,o]of e){if(n.has(a))continue;let{source:s,target:l}=o,u=`${s}-${l}`;t.has(u)||(t.set(u,[]),i.set(u,new Set));let c=t.get(u),d=i.get(u);for(let[h,p]of(c&&d&&!d.has(a)&&(c.push(o),d.add(a),n.add(a)),e))if(!n.has(h)&&h!==a&&f(o,p)){let e=t.get(u),a=i.get(u);e&&a&&!a.has(h)&&(e.push(p),a.add(h),s===p.target&&l===p.source&&(r[`${p.source}|${p.target}|${e.length-1}`]=!0),n.add(h));}}return{edgeMap:t,reverses:r};},h=(e,t,n)=>t.filter(t=>(n||(0,a.idOf)(t)!==(0,a.idOf)(e))&&f(t,e)),f=(e,t)=>{let{sourceNode:n,targetNode:r}=e.style||{},{sourceNode:i,targetNode:a}=t.style||{};return n===i&&r===a||n===a&&r===i;};},c734abb9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Fishbone:function(){return i.Fishbone;},FlowGraph:function(){return i.FlowGraph;},G6:function(){return r;},IndentedTree:function(){return i.IndentedTree;},MindMap:function(){return i.MindMap;},NetworkGraph:function(){return i.NetworkGraph;},OrganizationChart:function(){return i.OrganizationChart;},RCNode:function(){return a.RCNode;}});var r=n("852bbaa9")._(n("38871e26"));n("39296384");var i=n("d84b5b6b"),a=n("02c619b4");n("e50a16b8"),n("74355096"),n("aeeab442");},c848f2e6:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getCanvasContext",{enumerable:!0,get:function(){return i;}});var r,i=function(){return r||(r=document.createElement("canvas").getContext("2d")),r;};},c96b1b1f:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ClickSelect",{enumerable:!0,get:function(){return h;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("95550d14"),o=n("81401a10"),s=n("10ef3afb"),l=n("db1e79e1"),u=n("aa2003f3"),c=n("32576f8a"),d=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class h extends c.BaseBehavior{constructor(e,t){super(e,Object.assign({},h.defaultOptions,t)),this.onClickSelect=e=>d(this,void 0,void 0,function*(){var t,n;this.validate(e)&&(yield this.updateState(e),null===(n=(t=this.options).onClick)||void 0===n||n.call(t,e));}),this.onClickCanvas=e=>d(this,void 0,void 0,function*(){var t,n;this.validate(e)&&(yield this.clearState(),null===(n=(t=this.options).onClick)||void 0===n||n.call(t,e));}),this.shortcut=new l.Shortcut(e.graph),this.bindEvents();}bindEvents(){let{graph:e}=this.context;this.unbindEvents(),a.ELEMENT_TYPES.forEach(t=>{e.on(`${t}:${i.CommonEvent.CLICK}`,this.onClickSelect);}),e.on(i.CanvasEvent.CLICK,this.onClickCanvas);}get isMultipleSelect(){let{multiple:e,trigger:t}=this.options;return e&&this.shortcut.match(t);}getNeighborIds(e){let{target:t,targetType:n}=e,{graph:r}=this.context,{degree:i}=this.options;return(0,s.getElementNthDegreeIds)(r,n,t.id,"function"==typeof i?i(e):i).filter(e=>e!==t.id);}updateState(e){return d(this,void 0,void 0,function*(){let{state:t,unselectedState:n,neighborState:r,animation:i}=this.options;if(!t&&!r&&!n)return;let{target:a}=e,{graph:o}=this.context,s=o.getElementData(a.id),l=(0,u.statesOf)(s).includes(t)?"unselect":"select",c={},d=this.isMultipleSelect,h=[a.id],f=this.getNeighborIds(e);if(d){if(Object.assign(c,this.getDataStates()),"select"===l){let e=(e,t)=>{e.forEach(e=>{let r=new Set(o.getElementState(e));r.add(t),r.delete(n),c[e]=Array.from(r);});};e(h,t),e(f,r),n&&Object.keys(c).forEach(e=>{let i=c[e];i.includes(t)||i.includes(r)||i.includes(n)||c[e].push(n);});}else{let e=c[a.id];c[a.id]=e.filter(e=>e!==t&&e!==r),e.includes(n)||c[a.id].push(n),f.forEach(e=>{c[e]=c[e].filter(e=>e!==r),c[e].includes(t)||c[e].push(n);});}}else if("select"===l){Object.assign(c,this.getClearStates(!!n));let e=(e,t)=>{e.forEach(e=>{c[e]||(c[e]=o.getElementState(e)),c[e].push(t);});};e(h,t),e(f,r),n&&Object.keys(c).forEach(e=>{h.includes(e)||f.includes(e)||c[e].push(n);});}else Object.assign(c,this.getClearStates());yield o.setElementState(c,i);});}getDataStates(){let{graph:e}=this.context,{nodes:t,edges:n,combos:r}=e.getData(),i={};return[...t,...n,...r].forEach(e=>{i[(0,o.idOf)(e)]=(0,u.statesOf)(e);}),i;}getClearStates(e=!1){let{graph:t}=this.context,{state:n,unselectedState:r,neighborState:i}=this.options,a=new Set([n,r,i]),{nodes:s,edges:l,combos:c}=t.getData(),d={};return[...s,...l,...c].forEach(t=>{let n=(0,u.statesOf)(t),r=n.filter(e=>!a.has(e));e?d[(0,o.idOf)(t)]=r:r.length!==n.length&&(d[(0,o.idOf)(t)]=r);}),d;}clearState(){return d(this,void 0,void 0,function*(){let{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation);});}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}unbindEvents(){let{graph:e}=this.context;a.ELEMENT_TYPES.forEach(t=>{e.off(`${t}:${i.CommonEvent.CLICK}`,this.onClickSelect);}),e.off(i.CanvasEvent.CLICK,this.onClickCanvas);}destroy(){this.unbindEvents(),super.destroy();}}h.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};},ca7cc1cb:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return a;}});var r=n("4c46169a"),i=n("d350cddd"),a=function(e,t,n){if(0===t.length)return[];var a={flex:r.flex,grid:i.grid},o=n.display in a?a[n.display]:null;return(null==o?void 0:o.call(null,e,t,n))||[];};},cb2810d0:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{PRIMILTIVE_ATTRIBUTES:function(){return r;},getPrimitiveAttributes:function(){return a;},isPrimitiveAttribute:function(){return i;}});var r=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function i(e){return r.includes(e);}function a(e){var t={};for(var n in e)i(n)&&(t[n]=e[n]);return t;}},cbbb1352:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"calcLayout",{enumerable:!0,get:function(){return r.default;}});var r=n("777fffbe")._(n("ca7cc1cb"));},cbd8e3a1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{closePathByBaseLine:function(){return u;},dataToLines:function(){return o;},lineToCurvePath:function(){return l;},lineToLinePath:function(){return s;},linesToAreaPaths:function(){return c;},linesToStackAreaPaths:function(){return d;},linesToStackCurveAreaPaths:function(){return h;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("01a29d03");function o(e,t){var n,a=t.x,o=t.y,s=(0,r.__read)(o.getOptions().range||[0,0],2),l=s[0],u=s[1];return u>l&&(u=(n=(0,r.__read)([l,u],2))[0],l=n[1]),e.map(function(e){return e.map(function(e,t){return[a.map(t),(0,i.clamp)(o.map(e),u,l)];});});}function s(e,t){void 0===t&&(t=!1);var n=t?e.length-1:0,i=e.map(function(e,t){return(0,r.__spreadArray)([t===n?"M":"L"],(0,r.__read)(e),!1);});return t?i.reverse():i;}function l(e,t){if(void 0===t&&(t=!1),e.length<=2)return s(e);for(var n=[],o=e.length,l=0;l<o;l+=1){var u=t?e[o-l-1]:e[l];(0,i.isEqual)(u,n.slice(-2))||n.push.apply(n,(0,r.__spreadArray)([],(0,r.__read)(u),!1));}var c=(0,a.catmullRom2Bezier)(n,!1);return t?c.unshift((0,r.__spreadArray)(["M"],(0,r.__read)(e[o-1]),!1)):c.unshift((0,r.__spreadArray)(["M"],(0,r.__read)(e[0]),!1)),c;}function u(e,t,n){var r=(0,i.clone)(e);return r.push(["L",t,n],["L",0,n],["Z"]),r;}function c(e,t,n,r){return e.map(function(e){return u(t?l(e):s(e),n,r);});}function d(e,t,n){for(var i=[],a=e.length-1;a>=0;a-=1){var o=s(e[a]),l=void 0;if(0===a)l=u(o,t,n);else{var c=s(e[a-1],!0);c[0][0]="L",l=(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(o),!1),(0,r.__read)(c),!1),[["Z"]],!1);}i.push(l);}return i;}function h(e,t,n){for(var i=[],a=e.length-1;a>=0;a-=1){var o=e[a],s=l(o),c=void 0;if(0===a)c=u(s,t,n);else{var d=l(e[a-1],!0),h=o[0];d[0][0]="L",c=(0,r.__spreadArray)((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(s),!1),(0,r.__read)(d),!1),[(0,r.__spreadArray)(["M"],(0,r.__read)(h),!1),["Z"]],!1);}i.push(c);}return i;}},cc282246:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"EdgeFilterLens",{enumerable:!0,get:function(){return d;}});var r=n("6b0531cc"),i=n("8754ee1a"),a=n("81401a10"),o=n("8bdd800c"),s=n("2a08964b"),l=n("71473486"),u=n("0d562788");let c={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0};class d extends u.BasePlugin{constructor(e,t){super(e,Object.assign({},d.defaultOptions,t)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=e=>{if("drag"===this.options.trigger&&this.isLensOn)return;let t=(0,o.parsePoint)(e.canvas);this.renderLens(t),this.renderFocusElements();},this.renderLens=e=>{let t=Object.assign({},c,this.options.style);this.isLensOn||(this.lens=new i.Circle({style:t}),this.canvas.appendChild(this.lens)),Object.assign(t,(0,o.toPointObject)(e),{size:2*this.r}),this.lens.update(t);},this.getFilterData=()=>{let{filter:e}=this.options,{model:t}=this.context,n=t.getData();if(!e)return n;let{nodes:r,edges:i,combos:o}=n;return{nodes:r.filter(t=>e((0,a.idOf)(t),"node")),edges:i.filter(t=>e((0,a.idOf)(t),"edge")),combos:o.filter(t=>e((0,a.idOf)(t),"combo"))};},this.getFocusElements=e=>{let{nodes:t,edges:n}=this.getFilterData(),r=t.filter(t=>(0,l.distance)((0,s.positionOf)(t),e)<this.r),i=r.map(e=>(0,a.idOf)(e));return{nodes:r,edges:n.filter(e=>{let{source:t,target:n}=e,r=i.includes(t),a=i.includes(n);switch(this.options.nodeType){case"both":return r&&a;case"either":return r!==a;case"source":return r&&!a;case"target":return!r&&a;default:return!1;}})};},this.renderFocusElements=()=>{let{element:e,graph:t}=this.context;if(!this.isLensOn)return;let n=this.lens.getCenter(),{nodes:r,edges:i}=this.getFocusElements(n),o=new Set,s=n=>{let r=(0,a.idOf)(n);o.add(r);let i=e.getElement(r);if(!i)return;let s=this.shapes.get(r)||i.cloneNode();s.setPosition(i.getPosition()),s.id=i.id,this.shapes.has(r)?Object.entries(i.attributes).forEach(([e,t])=>{s.style[e]!==t&&(s.style[e]=t);}):(this.canvas.appendChild(s),this.shapes.set(r,s));let l=t.getElementType(r),u=this.getElementStyle(l,n);s.update(u);};r.forEach(s),i.forEach(s),this.shapes.forEach((e,t)=>{o.has(t)||(e.destroy(),this.shapes.delete(t));});},this.scaleRByWheel=e=>{var t;this.options.preventDefault&&e.preventDefault();let{clientX:n,clientY:r,deltaX:i,deltaY:a}=e,{graph:o,canvas:s}=this.context,u=o.getCanvasByClient([n,r]),c=null===(t=this.lens)||void 0===t?void 0:t.getCenter();if(!this.isLensOn||(0,l.distance)(u,c)>this.r)return;let{maxR:d,minR:h}=this.options,f=Math.min(...s.getSize())/2;this.r=Math.max(h||0,Math.min(d||f,this.r*(i+a>0?1/.95:.95))),this.renderLens(c),this.renderFocusElements();},this.isLensDragging=!1,this.onDragStart=e=>{var t;let n=(0,o.parsePoint)(e.canvas),r=null===(t=this.lens)||void 0===t?void 0:t.getCenter();!this.isLensOn||(0,l.distance)(n,r)>this.r||(this.isLensDragging=!0);},this.onDrag=e=>{if(!this.isLensDragging)return;let t=(0,o.parsePoint)(e.canvas);this.renderLens(t),this.renderFocusElements();},this.onDragEnd=()=>{this.isLensDragging=!1;},this.bindEvents();}get canvas(){return this.context.canvas.getLayer("transient");}get isLensOn(){return this.lens&&!this.lens.destroyed;}getElementStyle(e,t){let n="node"===e?this.options.nodeStyle:this.options.edgeStyle;return"function"==typeof n?n(t):n;}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}bindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.addEventListener(r.CommonEvent.CLICK,this.onEdgeFilter),"pointermove"===n?a.addEventListener(r.CommonEvent.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(a.addEventListener(r.CommonEvent.DRAG_START,this.onDragStart),a.addEventListener(r.CommonEvent.DRAG,this.onDrag),a.addEventListener(r.CommonEvent.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(e=this.graphDom)||void 0===e||e.addEventListener(r.CommonEvent.WHEEL,this.scaleRByWheel,{passive:!1}));}unbindEvents(){var e;let{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.removeEventListener(r.CommonEvent.CLICK,this.onEdgeFilter),"pointermove"===n?a.removeEventListener(r.CommonEvent.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(a.removeEventListener(r.CommonEvent.DRAG_START,this.onDragStart),a.removeEventListener(r.CommonEvent.DRAG,this.onDrag),a.removeEventListener(r.CommonEvent.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(e=this.graphDom)||void 0===e||e.removeEventListener(r.CommonEvent.WHEEL,this.scaleRByWheel));}update(e){var t;this.unbindEvents(),super.update(e),this.r=null!==(t=e.r)&&void 0!==t?t:this.r,this.bindEvents();}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,t)=>{e.destroy(),this.shapes.delete(t);}),super.destroy();}}d.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};},cc7a743a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ChartLoading:function(){return r.ChartLoading;},ErrorBoundary:function(){return i.ErrorBoundary;}}),n("32f32d40");var r=n("970f6e03"),i=n("6c8609ef");},cd3e27e8:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Image",{enumerable:!0,get:function(){return r.Image;}});var r=n("f7bb74fc");},cd5371db:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ARC_DEFAULT_OPTIONS:function(){return l;},AXIS_BASE_DEFAULT_ATTR:function(){return s;},CLASS_NAMES:function(){return c;},HELIX_DEFAULT_OPTIONS:function(){return u;}});var r=n("abe9d8d6"),i=n("9225b8d3"),a=n("01a29d03"),o=n("82f544b2"),s={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new i.Path({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}});},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},l=(0,r.deepMix)({},s,{style:{type:"arc"}}),u=(0,r.deepMix)({},s,{style:{}}),c=(0,a.classNames)({mainGroup:o.CLASSNAME_SUFFIX_MAP.mainGroup,gridGroup:o.CLASSNAME_SUFFIX_MAP.gridGroup,grid:o.CLASSNAME_SUFFIX_MAP.grid,lineGroup:o.CLASSNAME_SUFFIX_MAP.lineGroup,line:o.CLASSNAME_SUFFIX_MAP.line,tickGroup:o.CLASSNAME_SUFFIX_MAP.tickGroup,tick:o.CLASSNAME_SUFFIX_MAP.tick,tickItem:o.CLASSNAME_SUFFIX_MAP.tickItem,labelGroup:o.CLASSNAME_SUFFIX_MAP.labelGroup,label:o.CLASSNAME_SUFFIX_MAP.label,labelItem:o.CLASSNAME_SUFFIX_MAP.labelItem,titleGroup:o.CLASSNAME_SUFFIX_MAP.titleGroup,title:o.CLASSNAME_SUFFIX_MAP.title,lineFirst:o.CLASSNAME_SUFFIX_MAP.lineFirst,lineSecond:o.CLASSNAME_SUFFIX_MAP.lineSecond},"axis");},cd783615:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"parseHeightFromHTML",{enumerable:!0,get:function(){return i;}});var r=n("18f14020"),i=function(e){var t,n=new DOMParser().parseFromString(e,"text/html").body.firstElementChild;if(console.log(null==n?void 0:n.getClientRects(),11),!n)return 0;var i=Object.fromEntries((n.getAttribute("style")||"").split(";").map(function(e){return e.trim();}).filter(function(e){return e.includes(":");}).map(function(e){var t=(0,r.__read)(e.split(":").map(function(e){return e.trim();}),2),n=t[0],i=t[1];return[n.toLowerCase(),i];})),a=function(e){if(!e)return 0;var t=e.match(/([\d.]+)px/);return t?parseFloat(t[1]):0;};if(i.height)return a(i.height);var o=a(i["font-size"])||16,s=i["line-height"];t=s&&"normal"!==s?s.endsWith("px")?a(s):/^[\d.]+$/.test(s)?parseFloat(s)*o:o:1.2*o;var l=a(i["padding-top"]),u=a(i["padding-bottom"]);if(i.padding){var c=i.padding.split(/\s+/).map(a);1===c.length?(l=c[0],u=c[0]):2===c.length?(l=c[0],u=c[0]):3===c.length?(l=c[0],u=c[2]):4===c.length&&(l=c[0],u=c[2]);}var d=a(i["border-top-width"]),h=a(i["border-bottom-width"]);if(i.border){var f=i.border.match(/([\d.]+)px/);f&&(d=parseFloat(f[1]),h=parseFloat(f[1]));}if(i["border-width"]){var c=i["border-width"].split(/\s+/).map(a);1===c.length?(d=c[0],h=c[0]):2===c.length?(d=c[0],h=c[0]):3===c.length?(d=c[0],h=c[2]):4===c.length&&(d=c[0],h=c[2]);}return t+l+u+d+h;};},cdd49f4a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{computeElementCallbackStyle:function(){return i;},getSubShapeStyle:function(){return o;},mergeOptions:function(){return a;}});var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function i(e,t){let{datum:n,graph:r}=t;return"function"==typeof e?e.call(r,n):Object.fromEntries(Object.entries(e).map(([e,t])=>"function"==typeof t?[e,t.call(r,n)]:[e,t]));}function a(e,t){let n=(null==e?void 0:e.style)||{},r=(null==t?void 0:t.style)||{};for(let e in n)e in r||(r[e]=n[e]);return Object.assign({},e,t,{style:r});}function o(e){let{x:t,y:n,z:i,class:a,className:o,transform:s,transformOrigin:l,zIndex:u,visibility:c}=e;return r(e,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"]);}},cf98accf:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Indicator",{enumerable:!0,get:function(){return c;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("c086f503"),o=n("9225b8d3"),s=n("01a29d03"),l=n("358b2a8b"),u=(0,s.classNames)({background:"background",labelGroup:"label-group",label:"label"},"indicator"),c=function(e){function t(t){var n=e.call(this,t,l.DEFAULT_INDICATOR_STYLE_PROPS)||this;return n.point=[0,0],n.group=n.appendChild(new o.Group({})),n.isMutationObserved=!0,n;}return(0,r.__extends)(t,e),t.prototype.renderBackground=function(){if(this.label){var e=this.attributes,t=e.position,n=e.padding,i=(0,r.__read)((0,s.parseSeriesAttr)(n),4),a=i[0],o=i[1],l=i[2],c=i[3],d=this.label.node().getLocalBounds(),h=d.min,f=d.max,p=new s.BBox(h[0]-c,h[1]-a,f[0]+o-h[0]+c,f[1]+l-h[1]+a),v=this.getPath(t,p),g=(0,s.subStyleProps)(this.attributes,"background");this.background=(0,s.select)(this.group).maybeAppendByClassName(u.background,"path").styles((0,r.__assign)((0,r.__assign)({},g),{d:v})),this.group.appendChild(this.label.node());}},t.prototype.renderLabel=function(){var e=this.attributes,t=e.formatter,n=e.labelText,i=(0,s.subStyleProps)(this.attributes,"label"),a=(0,r.__read)((0,s.splitStyle)(i),2),o=a[0],l=a[1],c=(o.text,(0,r.__rest)(o,["text"]));this.label=(0,s.select)(this.group).maybeAppendByClassName(u.labelGroup,"g").styles(l),n&&this.label.maybeAppendByClassName(u.label,function(){return(0,s.renderExtDo)(t(n));}).style("text",t(n).toString()).selectAll("text").styles(c);},t.prototype.adjustLayout=function(){var e=(0,r.__read)(this.point,2),t=e[0],n=e[1],i=this.attributes,a=i.x,o=i.y;this.group.attr("transform","translate(".concat(a-t,", ").concat(o-n,")"));},t.prototype.getPath=function(e,t){var n=this.attributes.radius,i=t.x,a=t.y,o=t.width,s=t.height,l=[["M",i+n,a],["L",i+o-n,a],["A",n,n,0,0,1,i+o,a+n],["L",i+o,a+s-n],["A",n,n,0,0,1,i+o-n,a+s],["L",i+n,a+s],["A",n,n,0,0,1,i,a+s-n],["L",i,a+n],["A",n,n,0,0,1,i+n,a],["Z"]],u={top:4,right:6,bottom:0,left:2}[e],c=this.createCorner([l[u].slice(-2),l[u+1].slice(-2)]);return l.splice.apply(l,(0,r.__spreadArray)([u+1,1],(0,r.__read)(c),!1)),l[0][0]="M",l;},t.prototype.createCorner=function(e,t){void 0===t&&(t=10);var n=s.isHorizontal.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(e),!1)),i=(0,r.__read)(e,2),a=(0,r.__read)(i[0],2),o=a[0],l=a[1],u=(0,r.__read)(i[1],2),c=u[0],d=u[1],h=(0,r.__read)(n?[c-o,[o,c]]:[d-l,[l,d]],2),f=h[0],p=(0,r.__read)(h[1],2),v=p[0],g=p[1],m=f/2,y=f/Math.abs(f)*t,b=y/2,E=y*Math.sqrt(3)/2*.8,x=(0,r.__read)([v,v+m-b,v+m,v+m+b,g],5),k=x[0],S=x[1],T=x[2],M=x[3],w=x[4];return n?(this.point=[T,l-E],[["L",k,l],["L",S,l],["L",T,l-E],["L",M,l],["L",w,l]]):(this.point=[o+E,T],[["L",o,k],["L",o,S],["L",o+E,T],["L",o,M],["L",o,w]]);},t.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?(0,s.hide)(this):(0,s.show)(this);},t.prototype.bindEvents=function(){this.label.on(i.ElementEvent.BOUNDS_CHANGED,this.renderBackground);},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility();},t;}(a.Component);},cfda2b31:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{BaseNode:function(){return r.BaseNode;},Circle:function(){return i.Circle;},Diamond:function(){return a.Diamond;},Donut:function(){return o.Donut;},Ellipse:function(){return s.Ellipse;},HTML:function(){return u.HTML;},Hexagon:function(){return l.Hexagon;},Image:function(){return c.Image;},Rect:function(){return d.Rect;},Star:function(){return h.Star;},Triangle:function(){return f.Triangle;}});var r=n("ec2f02a5"),i=n("f8157ecf"),a=n("83ea9a35"),o=n("38da6d3f"),s=n("70a1457a"),l=n("3b1d6410"),u=n("a0f91022"),c=n("88a1608c"),d=n("616d27f2"),h=n("7a48cea7"),f=n("527010ac");},d0061d3b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("777fffbe"),i=n("276fa9d1"),a=r._(n("b1a4abb6")),o=r._(n("72ce8fb5")),s=r._(n("0b95a4d2")),l=r._(n("0afdccfb")),u=n("abe9d8d6"),c=n("597fa39f"),d=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,s.default)(this,t,[].concat(r))).landmarks=[],e;}return(0,l.default)(t,e),(0,o.default)(t,[{key:"rotate",value:function(e,t,n){if(this.relElevation=(0,i.getAngle)(t),this.relAzimuth=(0,i.getAngle)(e),this.relRoll=(0,i.getAngle)(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===i.CameraType.EXPLORING){var r=c.quat.setAxisAngle(c.quat.create(),[1,0,0],(0,i.deg2rad)((this.rotateWorld?1:-1)*this.relElevation)),a=c.quat.setAxisAngle(c.quat.create(),[0,1,0],(0,i.deg2rad)((this.rotateWorld?1:-1)*this.relAzimuth)),o=c.quat.setAxisAngle(c.quat.create(),[0,0,1],(0,i.deg2rad)(this.relRoll)),s=c.quat.multiply(c.quat.create(),a,r);s=c.quat.multiply(c.quat.create(),s,o);var l=c.mat4.fromQuat(c.mat4.create(),s);c.mat4.translate(this.matrix,this.matrix,[0,0,-this.distance]),c.mat4.multiply(this.matrix,this.matrix,l),c.mat4.translate(this.matrix,this.matrix,[0,0,this.distance]);}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix();}return this._getAxes(),this.type===i.CameraType.ORBITING||this.type===i.CameraType.EXPLORING?this._getPosition():this.type===i.CameraType.TRACKING&&this._getFocalPoint(),this._update(),this;}},{key:"pan",value:function(e,t){var n=(0,i.createVec3)(e,t,0),r=c.vec3.clone(this.position);return c.vec3.add(r,r,c.vec3.scale(c.vec3.create(),this.right,n[0])),c.vec3.add(r,r,c.vec3.scale(c.vec3.create(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this;}},{key:"dolly",value:function(e){var t=this.forward,n=c.vec3.clone(this.position),r=e*this.dollyingStep;return r=Math.max(Math.min(this.distance+e*this.dollyingStep,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*t[0],n[1]+=r*t[1],n[2]+=r*t[2],this._setPosition(n),this.type===i.CameraType.ORBITING||this.type===i.CameraType.EXPLORING?this._getDistance():this.type===i.CameraType.TRACKING&&c.vec3.add(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this;}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID);}},{key:"createLandmark",value:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.position,l=void 0===s?this.position:s,u=o.focalPoint,d=void 0===u?this.focalPoint:u,h=o.roll,f=o.zoom,p=new i.runtime.CameraContribution;p.setType(this.type,void 0),p.setPosition(l[0],null!==(t=l[1])&&void 0!==t?t:this.position[1],null!==(n=l[2])&&void 0!==n?n:this.position[2]),p.setFocalPoint(d[0],null!==(r=d[1])&&void 0!==r?r:this.focalPoint[1],null!==(a=d[2])&&void 0!==a?a:this.focalPoint[2]),p.setRoll(null!=h?h:this.roll),p.setZoom(null!=f?f:this.zoom);var v={name:e,matrix:c.mat4.clone(p.getWorldTransform()),right:c.vec3.clone(p.right),up:c.vec3.clone(p.up),forward:c.vec3.clone(p.forward),position:c.vec3.clone(p.getPosition()),focalPoint:c.vec3.clone(p.getFocalPoint()),distanceVector:c.vec3.clone(p.getDistanceVector()),distance:p.getDistance(),dollyingStep:p.getDollyingStep(),azimuth:p.getAzimuth(),elevation:p.getElevation(),roll:p.getRoll(),relAzimuth:p.relAzimuth,relElevation:p.relElevation,relRoll:p.relRoll,zoom:p.getZoom()};return this.landmarks.push(v),v;}},{key:"gotoLandmark",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,u.isString)(e)?this.landmarks.find(function(t){return t.name===e;}):e;if(r){var a,o=(0,u.isNumber)(n)?{duration:n}:n,s=o.easing,l=o.duration,d=void 0===l?100:l,h=o.easingFunction,f=o.onfinish,p=void 0===f?void 0:f,v=o.onframe,g=void 0===v?void 0:v;this.cancelLandmarkAnimation();var m=r.position,y=r.focalPoint,b=r.zoom,E=r.roll,x=(void 0===h?void 0:h)||i.runtime.EasingFunction(void 0===s?"linear":s),k=function(){t.setFocalPoint(y),t.setPosition(m),t.setRoll(E),t.setZoom(b),t.computeMatrix(),t.triggerUpdate(),null==p||p();};if(0===d)return k();var S=function(e){void 0===a&&(a=e);var n=e-a;if(n>=d){k();return;}var r=x(n/d),i=c.vec3.create(),o=c.vec3.create(),s=1,l=0;if(c.vec3.lerp(i,t.focalPoint,y,r),c.vec3.lerp(o,t.position,m,r),l=t.roll*(1-r)+E*r,s=t.zoom*(1-r)+b*r,t.setFocalPoint(i),t.setPosition(o),t.setRoll(l),t.setZoom(s),c.vec3.dist(i,y)+c.vec3.dist(o,m)<=.01&&void 0===b&&void 0===E)return k();t.computeMatrix(),t.triggerUpdate(),n<d&&(null==g||g(r),t.landmarkAnimationID=t.canvas.requestAnimationFrame(S));};this.canvas.requestAnimationFrame(S);}}}]);}(i.Camera);i.runtime.CameraContribution=d;},d10fccfd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{logs:function(){return i;},pows:function(){return a;}});let r=e=>t=>-e(-t),i=(e,t)=>{let n=Math.log(e),i=e===Math.E?Math.log:10===e?Math.log10:2===e?Math.log2:e=>Math.log(e)/n;return t?r(i):i;},a=(e,t)=>{let n=e===Math.E?Math.exp:t=>e**t;return t?r(n):n;};},d1f78d64:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getExtension:function(){return i;},getExtensions:function(){return a;}});var r=n("b415022d");function i(e,t){var n;let i=null===(n=r.EXTENSION_REGISTRY[e])||void 0===n?void 0:n[t];if(i)return i;}function a(e){return r.EXTENSION_REGISTRY[e];}},d2c4aca4:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"traverse",{enumerable:!0,get:function(){return function e(t,n){n(t),t.children&&t.children.forEach(function(t){t&&e(t,n);});};}});},d350cddd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"grid",{enumerable:!0,get:function(){return r;}});var r=function(e,t,n){return[];};},d353eedf:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3Ticks",{enumerable:!0,get:function(){return i;}});var r=n("89123580");let i=(e,t,n)=>{let i,a;let o=e,s=t;if(o===s&&n>0)return[o];let l=(0,r.tickIncrement)(o,s,n);if(0===l||!Number.isFinite(l))return[];if(l>0){o=Math.ceil(o/l),a=Array(i=Math.ceil((s=Math.floor(s/l))-o+1));for(let e=0;e<i;e+=1)a[e]=(o+e)*l;}else{o=Math.ceil(o*(l=-l)),a=Array(i=Math.ceil((s=Math.floor(s*l))-o+1));for(let e=0;e<i;e+=1)a[e]=(o+e)/l;}return a;};},d368189b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{applyStyleSheet:function(){return a;},splitStyle:function(){return u;},subStyleProps:function(){return s;},superStyleProps:function(){return l;}});var r=n("18f14020"),i=n("8cfad0d0");function a(e,t){Object.entries(t).forEach(function(t){var n=(0,r.__read)(t,2),i=n[0],a=n[1];(0,r.__spreadArray)([e],(0,r.__read)(e.querySelectorAll(i)),!1).filter(function(e){return e.matches(i);}).forEach(function(e){e&&(e.style.cssText+=Object.entries(a).reduce(function(e,t){return"".concat(e).concat(t.join(":"),";");},""));});});}var o=function(e,t){if(!(null==e?void 0:e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z";};function s(e,t,n){void 0===n&&(n=!1);var a={};return Object.entries(e).forEach(function(e){var s=(0,r.__read)(e,2),l=s[0],u=s[1];if("className"===l||"class"===l);else if(o(l,"show")&&o((0,i.removePrefix)(l,"show"),t)!==n)l===(0,i.addPrefix)(t,"show")?a[l]=u:a[l.replace(new RegExp((0,i.toUppercaseFirstLetter)(t)),"")]=u;else if(!o(l,"show")&&o(l,t)!==n){var c=(0,i.removePrefix)(l,t);"filter"===c&&"function"==typeof u||(a[c]=u);}}),a;}function l(e,t){return Object.entries(e).reduce(function(e,n){var a=(0,r.__read)(n,2),o=a[0],s=a[1];return o.startsWith("show")?e["show".concat(t).concat(o.slice(4))]=s:e["".concat(t).concat((0,i.toUppercaseFirstLetter)(o))]=s,e;},{});}function u(e,t){void 0===t&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],i={},a={};return Object.entries(e).forEach(function(e){var o=(0,r.__read)(e,2),s=o[0],l=o[1];t.includes(s)||(-1!==n.indexOf(s)?a[s]=l:i[s]=l);}),[i,a];}},d36f7e73:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getItemsBBox",{enumerable:!0,get:function(){return r.getItemsBBox;}});var r=n("27a9fe4d");},d431610e:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Scrollbar",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("abe9d8d6"),o=n("c086f503"),s=n("01a29d03"),l=n("014bbf9e"),u=function(e){function t(t){var n=e.call(this,t,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(e){var t=n.attributes.value;if(e!==t){var r={detail:{oldValue:e,value:t}};n.dispatchEvent(new i.CustomEvent("scroll",r)),n.dispatchEvent(new i.CustomEvent("valuechange",r));}},n.onTrackClick=function(e){if(n.attributes.slidable){var t=(0,r.__read)(n.getLocalPosition(),2),i=t[0],a=t[1],o=(0,r.__read)(n.padding,4),l=o[0],u=o[3],c=n.getOrientVal([i+u,a+l]),d=(n.getOrientVal((0,s.getEventPos)(e))-c)/n.trackLength;n.setValue(d,!0);}},n.onThumbMouseenter=function(e){n.dispatchEvent(new i.CustomEvent("thumbMouseenter",{detail:e.detail}));},n.onTrackMouseenter=function(e){n.dispatchEvent(new i.CustomEvent("trackMouseenter",{detail:e.detail}));},n.onThumbMouseleave=function(e){n.dispatchEvent(new i.CustomEvent("thumbMouseleave",{detail:e.detail}));},n.onTrackMouseleave=function(e){n.dispatchEvent(new i.CustomEvent("trackMouseleave",{detail:e.detail}));},n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){var e=this.attributes.padding;return(0,s.parseSeriesAttr)(e);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var e=this.attributes.value,t=(0,r.__read)(this.range,2),n=t[0],i=t[1];return(0,a.clamp)(e,n,i);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var e=this.attributes,t=e.viewportLength,n=e.trackLength;return void 0===n?t:n;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes.trackSize,t=this.trackLength,n=(0,r.__read)(this.padding,4),i=n[0],a=n[1],o=n[2],s=n[3],l=(0,r.__read)(this.getOrientVal([[t,e],[e,t]]),2);return{x:s,y:i,width:+l[0]-(s+a),height:+l[1]-(i+o)};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var e=this.attributes,t=e.isRound,n=e.trackSize;return t?n/2:0;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var e=this.attributes,t=e.isRound,n=e.thumbRadius;if(!t)return 0;var r=this.availableSpace,i=r.width,a=r.height;return n||this.getOrientVal([a,i])/2;},enumerable:!1,configurable:!0}),t.prototype.getValues=function(e){void 0===e&&(e=this.value);var t=this.attributes,n=t.viewportLength/t.contentLength,i=(0,r.__read)(this.range,2),a=i[0],o=e*(i[1]-a-n);return[o,o+n];},t.prototype.getValue=function(){return this.value;},t.prototype.renderSlider=function(e){var t=this.attributes,n=t.x,i=t.y,a=t.orientation,o=t.trackSize,u=t.padding,c=t.slidable,d=(0,s.subStyleProps)(this.attributes,"track"),h=(0,s.subStyleProps)(this.attributes,"thumb"),f=(0,r.__assign)((0,r.__assign)({x:n,y:i,brushable:!1,orientation:a,padding:u,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:o,values:this.getValues()},(0,s.superStyleProps)(d,"track")),(0,s.superStyleProps)(h,"selection"));this.slider=(0,s.select)(e).maybeAppendByClassName("scrollbar",function(){return new l.Slider({style:f});}).update(f).node();},t.prototype.render=function(e,t){this.renderSlider(t);},t.prototype.setValue=function(e,t){void 0===t&&(t=!1);var n=this.attributes.value,i=(0,r.__read)(this.range,2),o=i[0],s=i[1];this.slider.setValues(this.getValues((0,a.clamp)(e,o,s)),t),this.onValueChange(n);},t.prototype.bindEvents=function(){var e=this;this.slider.addEventListener("trackClick",function(t){t.stopPropagation(),e.onTrackClick(t.detail);}),this.onHover();},t.prototype.getOrientVal=function(e){return"horizontal"===this.attributes.orientation?e[0]:e[1];},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave);},t.tag="scrollbar",t;}(o.Component);},d5a5db80:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getLayoutProperty:function(){return g;},invokeLayoutMethod:function(){return v;},isPreLayout:function(){return h;},isTreeLayout:function(){return d;},layoutAdapter:function(){return p;},layoutMapping2GraphData:function(){return f;}});var r=n("440e77c8"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("7ed4a1e7"),s=n("81401a10"),l=n("8bdd800c"),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};function d(e){let{type:t}=e;return["compact-box","mindmap","dendrogram","indented"].includes(t);}function h(e){return!Array.isArray(e)&&(null==e?void 0:e.preLayout);}function f(e){let{nodes:t,edges:n}=e,r={nodes:[],edges:[],combos:[]};return t.forEach(e=>{let t=e.data._isCombo?r.combos:r.nodes,{x:n,y:i,z:a=0}=e.data;null==t||t.push({id:e.id,style:{x:n,y:i,z:a}});}),n.forEach(e=>{let{id:t,source:n,target:i,data:{points:a=[],controlPoints:o=a.slice(1,a.length-1)}}=e;r.edges.push({id:t,source:n,target:i,style:Object.assign({},(null==o?void 0:o.length)?{controlPoints:o.map(l.parsePoint)}:{})});}),r;}function p(e,t){class n extends o.BaseLayout{constructor(t,n){if(super(t,n),this.instance=new e({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){let e=this.instance;this.stop=e.stop.bind(e),this.tick=t=>f(e.tick(t));}}execute(e,t){return u(this,void 0,void 0,function*(){return f((yield this.instance.execute(this.graphData2LayoutModel(e),this.transformOptions((0,i.deepMix)({},this.options,t)))));});}transformOptions(e){if(!("onTick"in e))return e;let t=e.onTick;return e.onTick=e=>t(f(e)),e;}graphData2LayoutModel(e){let{nodes:n=[],edges:i=[],combos:o=[]}=e,l=n.map(e=>{let t=(0,s.idOf)(e),{data:n,style:r,combo:i}=e,a=c(e,["data","style","combo"]),o={id:t,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),a)};return(null==r?void 0:r.x)&&Object.assign(o.data,{x:r.x}),(null==r?void 0:r.y)&&Object.assign(o.data,{y:r.y}),(null==r?void 0:r.z)&&Object.assign(o.data,{z:r.z}),o;}),u=new Map(l.map(e=>[e.id,e])),d=i.filter(e=>{let{source:t,target:n}=e;return u.has(t)&&u.has(n);}).map(e=>{let{source:t,target:n,data:r,style:i}=e;return{id:(0,s.idOf)(e),source:t,target:n,data:Object.assign({},r),style:Object.assign({},i)};}),h=o.map(e=>({id:(0,s.idOf)(e),data:Object.assign({_isCombo:!0},e.data),style:Object.assign({},e.style)})),f=new r.Graph({nodes:[...l,...h],edges:d});return t.model.model.hasTreeStructure(a.COMBO_KEY)&&(f.attachTreeStructure(a.COMBO_KEY),l.forEach(e=>{let n=t.model.model.getParent(e.id,a.COMBO_KEY);n&&f.hasNode(n.id)&&f.setParent(e.id,n.id,a.COMBO_KEY);})),f;}}return n;}function v(e,t,...n){if(t in e)return e[t](...n);if("instance"in e){let r=e.instance;if(t in r)return r[t](...n);}return null;}function g(e,t){if(t in e)return e[t];if("instance"in e){let n=e.instance;if(t in n)return n[t];}return null;}},d5e231fc:function(e,t,n){"use strict";function r(e,t,n){return n?"".concat(e," ").concat(n,"axis-").concat(t):e;}function i(e,t,n,i){return i&&e.attr("className",r(t.name,n,i)),e;}n.d(t,"__esModule",{value:!0}),n.e(t,{applyClassName:function(){return i;},getAxisClassName:function(){return r;}});},d6237fba:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"string2rbg",{enumerable:!0,get:function(){return a;}});var r=n("777fffbe")._(n("20b1bab9"));function i(e,t,n){let r=n;return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e;}function a(e){let t=r.default.get(e);if(!t)return null;let{model:n,value:a}=t;return"rgb"===n?a:"hsl"===n?function(e){let t=e[0]/360,n=e[1]/100,r=e[2]/100,a=e[3];if(0===n)return[255*r,255*r,255*r,a];let o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;return[255*i(s,o,t+1/3),255*i(s,o,t),255*i(s,o,t-1/3),a];}(a):null;}},d6769d2c:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getCallbackValue",{enumerable:!0,get:function(){return a;}});var r=n("18f14020"),i=n("abe9d8d6");function a(e,t){return(0,i.isFunction)(e)?e.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(t),!1)):e;}},d7bc52f9:function(e,t,n){"use strict";function r(e,t){let n,r,i,a,o,s;let l=0|e.length,u=0|t.length;if(1===l&&1===u)return function(e,t){let n=e+t,r=n-e,i=e-(n-r)+(t-r);return i?[i,n]:[n];}(e[0],t[0]);let c=Array(l+u),d=0,h=0,f=0,p=Math.abs,v=e[0],g=p(v),m=t[f],y=p(m);g<y?(r=v,(h+=1)<l&&(g=p(v=e[h]))):(r=m,(f+=1)<u&&(y=p(m=t[f]))),h<l&&g<y||f>=u?(n=v,(h+=1)<l&&(g=p(v=e[h]))):(n=m,(f+=1)<u&&(y=p(m=t[f])));let b=n+r,E=b-n,x=r-E,k=x,S=b;for(;h<l&&f<u;)g<y?(n=v,(h+=1)<l&&(g=p(v=e[h]))):(n=m,(f+=1)<u&&(y=p(m=t[f]))),E=(b=n+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i;for(;h<l;)E=(b=(n=v)+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i,(h+=1)<l&&(v=e[h]);for(;f<u;)E=(b=(n=m)+(r=k))-n,(x=r-E)&&(c[d++]=x),a=(i=S+b)-S,k=S-(i-a)+(b-a),S=i,(f+=1)<u&&(m=t[f]);return k&&(c[d++]=k),S&&(c[d++]=S),d||(c[d++]=0),c.length=d,c;}n.d(t,"__esModule",{value:!0}),n.d(t,"linearExpansionSum",{enumerable:!0,get:function(){return r;}});},d84b5b6b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{Fishbone:function(){return r.Fishbone;},FlowGraph:function(){return i.FlowGraph;},IndentedTree:function(){return a.IndentedTree;},MindMap:function(){return o.MindMap;},NetworkGraph:function(){return s.NetworkGraph;},OrganizationChart:function(){return l.OrganizationChart;}}),n("5bb5ae54");var r=n("b6a8238e");n("5ed3382d");var i=n("7c1f9bc2"),a=n("b61745e2"),o=n("21b783dc"),s=n("93db2ea5"),l=n("54bb3a1e");},d88e9b7d:function(e,t,n){"use strict";function r(e,t,n){let r=[[e,0]];for(;r.length;){let[e,i]=r.shift();t(e,i);let a=n(e);if(a)for(let e of a)r.push([e,i+1]);}}n.d(t,"__esModule",{value:!0}),n.e(t,{bfs:function(){return r;},dfs:function(){return function e(t,n,r,i,a=0){"TB"===i&&n(t,a);let o=r(t);if(o)for(let t of o)e(t,n,r,i,a+1);"BT"===i&&n(t,a);};}});},da5246de:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Continuous",{enumerable:!0,get:function(){return u;}});var r=n("abe9d8d6"),i=n("9d4f096a"),a=n("90abb703");let o=(e,t,n)=>{let r,i;let[o,s]=e,[l,u]=t;return o<s?(r=(0,a.createNormalize)(o,s),i=n(l,u)):(r=(0,a.createNormalize)(s,o),i=n(u,l)),(0,a.compose)(i,r);},s=(e,t,n)=>{let r=Math.min(e.length,t.length)-1,i=Array(r),o=Array(r),s=e[0]>e[r],l=s?[...e].reverse():e,u=s?[...t].reverse():t;for(let e=0;e<r;e+=1)i[e]=(0,a.createNormalize)(l[e],l[e+1]),o[e]=n(u[e],u[e+1]);return t=>{let n=(0,a.bisect)(e,t,1,r)-1,s=i[n],l=o[n];return(0,a.compose)(l,s)(t);};},l=(e,t,n,r)=>(Math.min(e.length,t.length)>2?s:o)(e,t,r?a.createInterpolateRound:n);class u extends i.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:a.createInterpolateNumber,tickCount:5};}map(e){return(0,a.isValid)(e)?this.output(e):this.options.unknown;}invert(e){return(0,a.isValid)(e)?this.input(e):this.options.unknown;}nice(){if(!this.options.nice||(0,r.isArray)(this.options.breaks))return;let[e,t,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,n,...i);}getTicks(){let{tickMethod:e}=this.options,[t,n,r,...i]=this.getTickMethodOptions();return e(t,n,r,...i);}getTickMethodOptions(){let{domain:e,tickCount:t}=this.options;return[e[0],e[e.length-1],t];}chooseNice(){return a.d3LinearNice;}rescale(){this.nice();let[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t));}chooseClamp(e){let{clamp:t,range:n}=this.options,i=this.options.domain.map(e),o=Math.min(i.length,n.length);return t?(0,a.createClamp)(i[0],i[o-1]):r.identity;}composeOutput(e,t){let{domain:n,range:r,round:i,interpolate:o}=this.options,s=l(n.map(e),r,o,i);this.output=(0,a.compose)(s,t,e);}composeInput(e,t,n){let{domain:r,range:i}=this.options,o=l(i,r.map(e),a.createInterpolateNumber);this.input=(0,a.compose)(t,n,o);}}},da56b468:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"GraphEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).BEFORE_CANVAS_INIT="beforecanvasinit",i.AFTER_CANVAS_INIT="aftercanvasinit",i.BEFORE_SIZE_CHANGE="beforesizechange",i.AFTER_SIZE_CHANGE="aftersizechange",i.BEFORE_ELEMENT_CREATE="beforeelementcreate",i.AFTER_ELEMENT_CREATE="afterelementcreate",i.BEFORE_ELEMENT_UPDATE="beforeelementupdate",i.AFTER_ELEMENT_UPDATE="afterelementupdate",i.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",i.AFTER_ELEMENT_DESTROY="afterelementdestroy",i.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",i.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",i.BEFORE_DRAW="beforedraw",i.AFTER_DRAW="afterdraw",i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_ANIMATE="beforeanimate",i.AFTER_ANIMATE="afteranimate",i.BEFORE_LAYOUT="beforelayout",i.AFTER_LAYOUT="afterlayout",i.BEFORE_STAGE_LAYOUT="beforestagelayout",i.AFTER_STAGE_LAYOUT="afterstagelayout",i.BEFORE_TRANSFORM="beforetransform",i.AFTER_TRANSFORM="aftertransform",i.BATCH_START="batchstart",i.BATCH_END="batchend",i.BEFORE_DESTROY="beforedestroy",i.AFTER_DESTROY="afterdestroy",i.BEFORE_RENDERER_CHANGE="beforerendererchange",i.AFTER_RENDERER_CHANGE="afterrendererchange";},da58df99:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"computeHullPath",{enumerable:!0,get:function(){return s;}});var r=n("bf1fd347"),i=n("905895f2"),a=n("8bdd800c"),o=n("71473486");function s(e,t,n){if(1===e.length)return l(e[0],t,n);if(2===e.length)return u(e,t,n);if(3===e.length){let[r,i,o]=(0,a.sortByClockwise)(e);if((0,a.isCollinear)(r,i,o))return u([r,o],t,n);}switch(n){case"smooth":return d(e,t);case"sharp":return h(e,t);default:return c(e,t);}}let l=(e,t,n)=>{if("sharp"===n)return[["M",e[0]-t,e[1]-t],["L",e[0]+t,e[1]-t],["L",e[0]+t,e[1]+t],["L",e[0]-t,e[1]+t],["Z"]];let r=[t,t,0,0,0];return[["M",e[0],e[1]-t],["A",...r,e[0],e[1]+t],["A",...r,e[0],e[1]-t]];},u=(e,t,n)=>{let r=[t,t,0,0,0],i="sharp"===n?(0,o.add)(e[0],(0,o.scale)((0,o.normalize)((0,o.subtract)(e[0],e[1])),t)):e[0],a="sharp"===n?(0,o.add)(e[1],(0,o.scale)((0,o.normalize)((0,o.subtract)(e[1],e[0])),t)):e[1],s=(0,o.scale)((0,o.normalize)((0,o.perpendicular)((0,o.subtract)(i,a),!1)),t),l=(0,o.scale)(s,-1),u=(0,o.add)(i,s),c=(0,o.add)(a,s),d=(0,o.add)(a,l),h=(0,o.add)(i,l);return"sharp"===n?[["M",u[0],u[1]],["L",c[0],c[1]],["L",d[0],d[1]],["L",h[0],h[1]],["Z"]]:[["M",u[0],u[1]],["L",c[0],c[1]],["A",...r,d[0],d[1]],["L",h[0],h[1]],["A",...r,u[0],u[1]]];},c=(e,t)=>{let n=(0,a.sortByClockwise)(e).map((n,r)=>{let i=(r-2+e.length)%e.length,a=(r-1+e.length)%e.length,s=(r+1)%e.length,l=e[i],u=e[a],c=e[s],d=(0,o.subtract)(l,u),h=(0,o.subtract)(u,n),f=(0,o.subtract)(n,c),p=(e,t)=>(0,o.angle)(e,t,!0)<Math.PI,v=p(d,h),g=p(h,f),m=e=>(0,o.scale)((0,o.normalize)((0,o.perpendicular)(e,!1)),t),y=m(h);return[{p:(0,o.toVector2)(v?(0,o.add)(u,m(d)):(0,o.add)(u,y)),concave:v&&u},{p:(0,o.toVector2)(g?(0,o.add)(n,m(f)):(0,o.add)(n,y)),concave:g&&n}];}),r=[t,t,0,0,0],i=n.findIndex((e,t)=>!n[(t-1+n.length)%n.length][0].concave&&!n[(t-1+n.length)%n.length][1].concave&&!e[0].concave&&!e[0].concave&&!e[1].concave),s=n.slice(i).concat(n.slice(0,i)),l=[];return s.flatMap((e,t)=>{let i=[],a=s[n.length-1];return 0===t&&i.push(["M",...a[1].p]),e[0].concave?l.push(e[0].p,e[1].p):i.push(["A",...r,...e[0].p]),e[1].concave?l.unshift(e[1].p):i.push(["L",...e[1].p]),3===l.length&&(i.pop(),i.push(["C",...l.flat()]),l=[]),i;});},d=(e,t)=>{let n=(0,a.sortByClockwise)(e).map((t,n)=>{let r=e[(n+1)%e.length];return{p:t,v:(0,o.normalize)((0,o.subtract)(r,t))};});return n.forEach((r,i)=>{let a=n[i>0?i-1:e.length-1].v,s=(0,o.normalize)((0,o.add)(a,(0,o.scale)(r.v,(0,o.angle)(a,r.v,!0)<Math.PI?1:-1)));r.p=(0,o.add)(r.p,(0,o.scale)(s,t));}),(0,i.getClosedSpline)(n.map(e=>e.p));},h=(e,t)=>{let n=e.map((n,r)=>{let i=e[0===r?e.length-1:r-1],a=(0,o.toVector3)((0,o.scale)((0,o.normalize)((0,o.perpendicular)((0,o.subtract)(i,n),!1)),t));return[(0,o.add)(i,a),(0,o.add)(n,a)];}).flat();return n.map((e,t)=>{if(t%2==0)return null;let i=[n[(t-1)%n.length],n[t%n.length]],a=[n[(t+1)%n.length],n[(t+2)%n.length]];return(0,r.getLinesIntersection)(i,a,!0);}).filter(Boolean).map((e,t)=>[0===t?"M":"L",e[0],e[1]]).concat([["Z"]]);};},da9864f1:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"HistoryEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).UNDO="undo",i.REDO="redo",i.CANCEL="cancel",i.ADD="add",i.CLEAR="clear",i.CHANGE="change";},dac7208b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Path",{enumerable:!0,get:function(){return r.Path;}});var r=n("f7bb74fc");},dac9a6d1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"withCollapsibleNode",{enumerable:!0,get:function(){return c;}});var r=n("852bbaa9"),i=n("38871e26"),a=n("c5eb7168"),o=r._(n("3e6b097d")),s=r._(n("247081c8"));let l=s.default.div`
  position: relative;
  height: inherit;
  width: inherit;
`,u=s.default.div`
  position: absolute;
  z-index: 10;

  &:hover {
    cursor: pointer;
  }

  ${({$placement:e,$offsetX:t,$offsetY:n})=>{let r={top:`left: calc(50% + ${t}px); top: ${n}px;`,bottom:`left: calc(50% + ${t}px); top: calc(100% + ${n}px);`,right:`left: calc(100% + ${t}px); top: calc(50% + ${n}px);`,left:`left: ${t}px; top: calc(50% + ${n}px);`};return(0,s.css)`
      ${r[e]}
    `;}}
`,c=e=>t=>{let{data:n,graph:r,trigger:s,iconRender:c,iconPlacement:d,iconOffsetX:h,iconOffsetY:f,iconClassName:p,iconStyle:v,refreshLayout:g}=t,[m,y]=(0,o.useState)((0,a.get)(n,"style.collapsed",!1)),b=(0,o.useRef)(null),E=(0,o.useRef)(null),x="icon"===s&&!(0,a.isEmpty)(n.children),k=async e=>{e.stopPropagation();let t=m?"expandElement":"collapseElement";await r[t]((0,i.idOf)(n)),y(e=>!e),g&&await r.layout();};(0,o.useEffect)(()=>{let e="icon"===s?E.current:"node"===s?b.current:s;return null==e||e.addEventListener("click",k),()=>{null==e||e.removeEventListener("click",k);};},[s,m]);let S=e=>"function"==typeof e?e.call(r,n):e;return o.default.createElement(l,{ref:b,className:"collapsible-node-wrapper"},x&&o.default.createElement(u,{ref:E,$placement:S(d),$offsetX:S(h),$offsetY:S(f),className:p,style:v},null==c?void 0:c.call(r,m,n)),e.call(r,n));};},db1e79e1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Shortcut",{enumerable:!0,get:function(){return s;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("b04d91b4");let o=e=>e.map(e=>(0,r.isString)(e)?e.toLocaleLowerCase():e);class s{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=e=>{(null==e?void 0:e.key)&&(this.recordKey.add(e.key),this.trigger(e));},this.onKeyUp=e=>{(null==e?void 0:e.key)&&this.recordKey.delete(e.key);},this.onWheel=e=>{this.triggerExtendKey(i.CommonEvent.WHEEL,e);},this.onDrag=e=>{this.triggerExtendKey(i.CommonEvent.DRAG,e);},this.handlePinch=(e,t)=>{this.triggerExtendKey(i.CommonEvent.PINCH,Object.assign(Object.assign({},e),t));},this.onFocus=()=>{this.recordKey.clear();},this.emitter=e,this.bindEvents();}bind(e,t){0!==e.length&&(e.includes(i.CommonEvent.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new a.PinchHandler(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,t));}unbind(e,t){this.map.forEach((n,i)=>{(0,r.isEqual)(i,e)&&(!t||t===n)&&this.map.delete(i);});}unbindAll(){this.map.clear();}match(e){let t=o(Array.from(this.recordKey)).sort(),n=o(e).sort();return(0,r.isEqual)(t,n);}bindEvents(){var e;let{emitter:t}=this;t.on(i.CommonEvent.KEY_DOWN,this.onKeyDown),t.on(i.CommonEvent.KEY_UP,this.onKeyUp),t.on(i.CommonEvent.WHEEL,this.onWheel),t.on(i.CommonEvent.DRAG,this.onDrag),null===(e=globalThis.addEventListener)||void 0===e||e.call(globalThis,"focus",this.onFocus);}trigger(e){this.map.forEach((t,n)=>{this.match(n)&&t(e);});}triggerExtendKey(e,t){this.map.forEach((n,i)=>{i.includes(e)&&(0,r.isEqual)(Array.from(this.recordKey),i.filter(t=>t!==e))&&n(t);});}destroy(){var e,t;this.unbindAll(),this.emitter.off(i.CommonEvent.KEY_DOWN,this.onKeyDown),this.emitter.off(i.CommonEvent.KEY_UP,this.onKeyUp),this.emitter.off(i.CommonEvent.WHEEL,this.onWheel),this.emitter.off(i.CommonEvent.DRAG,this.onDrag),null===(e=this.pinchHandler)||void 0===e||e.off("pinchmove",this.boundHandlePinch),null===(t=globalThis.removeEventListener)||void 0===t||t.call(globalThis,"focus",this.onFocus);}}},db863a29:function(e,t,n){"use strict";function r(e=0){if("number"==typeof e)return[e,e,e];let[t,n=t,i=t]=e;return[t,n,i];}n.d(t,"__esModule",{value:!0}),n.d(t,"parseSize",{enumerable:!0,get:function(){return r;}});},dbd5a5c2:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getSafetySelections:function(){return u;},getStepValueByValue:function(){return a;},hiddenHandle:function(){return o;},horizontalHandle:function(){return l;},ifHorizontal:function(){return c;},verticalHandle:function(){return s;}});var r=n("18f14020"),i=n("e6d068ba");function a(e,t,n){var r=Math.round((e-n)/t);return n+r*t;}function o(e,t,n){var r=1.4*n;return[["M",e-n,t-r],["L",e+n,t-r],["L",e+n,t+r],["L",e-n,t+r],["Z"]];}function s(e,t,n){var r=1.4*n,i=n/2,a=n/6,o=e+.4*r;return[["M",e,t],["L",o,t+i],["L",e+r,t+i],["L",e+r,t-i],["L",o,t-i],["Z"],["M",o,t+a],["L",e+r-2,t+a],["M",o,t-a],["L",e+r-2,t-a]];}function l(e,t,n){var r=1.4*n,i=n/2,a=n/6,o=t+.4*r;return[["M",e,t],["L",e-i,o],["L",e-i,t+r],["L",e+i,t+r],["L",e+i,o],["Z"],["M",e-a,o],["L",e-a,t+r-2],["M",e+a,o],["L",e+a,t+r-2]];}function u(e,t,n,i){void 0===i&&(i=4);var a,o=(0,r.__read)(e,2),s=o[0],l=o[1],u=(0,r.__read)(t,2),c=u[0],d=u[1],h=(0,r.__read)(n,2),f=h[0],p=h[1],v=(0,r.__read)([c,d],2),g=v[0],m=v[1],y=m-g;return(g>m&&(g=(a=(0,r.__read)([m,g],2))[0],m=a[1]),y>l-s)?[s,l]:g<s?f===s&&p===m?[s,m]:[s,y+s]:m>l?p===l&&f===g?[g,l]:[l-y,l]:[g,m];}function c(e,t,n){return void 0===e&&(e="horizontal"),"horizontal"===e?t:n;}i.Marker.registerSymbol("hiddenHandle",o),i.Marker.registerSymbol("verticalHandle",s),i.Marker.registerSymbol("horizontalHandle",l);},dce52038:function(e,t,n){"use strict";function r(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t)return[t.x,t.y];if(n){var a=n[0];return[a.clientX,a.clientY];}return r&&i?[r,i]:[0,0];}function i(e){var t=e.nativeEvent,n=e.touches,r=e.clientX,i=e.clientY;if(t)return[t.clientX,t.clientY];if(n){var a=n[0];return[a.clientX,a.clientY];}return"number"==typeof r&&"number"==typeof i?[r,i]:[0,0];}n.d(t,"__esModule",{value:!0}),n.e(t,{getEventPos:function(){return r;},getEventViewportPos:function(){return i;}});},dd65e88e:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"NodeEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).CLICK="node:click",i.DBLCLICK="node:dblclick",i.POINTER_OVER="node:pointerover",i.POINTER_LEAVE="node:pointerleave",i.POINTER_ENTER="node:pointerenter",i.POINTER_MOVE="node:pointermove",i.POINTER_OUT="node:pointerout",i.POINTER_DOWN="node:pointerdown",i.POINTER_UP="node:pointerup",i.CONTEXT_MENU="node:contextmenu",i.DRAG_START="node:dragstart",i.DRAG="node:drag",i.DRAG_END="node:dragend",i.DRAG_ENTER="node:dragenter",i.DRAG_OVER="node:dragover",i.DRAG_LEAVE="node:dragleave",i.DROP="node:drop";},de23250b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3LinearNice",{enumerable:!0,get:function(){return i;}});var r=n("e314a3ad");let i=(e,t,n=5)=>{let i;let a=[e,t],o=0,s=a.length-1,l=a[o],u=a[s];return u<l&&([l,u]=[u,l],[o,s]=[s,o]),(i=(0,r.tickIncrement)(l,u,n))>0?(l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i,i=(0,r.tickIncrement)(l,u,n)):i<0&&(l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i,i=(0,r.tickIncrement)(l,u,n)),i>0?(a[o]=Math.floor(l/i)*i,a[s]=Math.ceil(u/i)*i):i<0&&(a[o]=Math.ceil(l*i)/i,a[s]=Math.floor(u*i)/i),a;};},de433e3a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"withCollapsibleNode",{enumerable:!0,get:function(){return r.withCollapsibleNode;}});var r=n("dac9a6d1");},deb7ab63:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{GetEdgeActualEnds:function(){return s;},getEdgeEndsContext:function(){return l;}});var r=n("6b0531cc"),i=n("2f3b9e1a"),a=n("a2c47206"),o=n("eb4593bd");class s extends o.BaseTransform{beforeDraw(e){let{add:t,update:n}=e,{model:r}=this.context;return[...t.edges.entries(),...n.edges.entries()].forEach(([,e])=>{l(r,e);}),e;}}let l=(e,t)=>{let{source:n,target:o}=t,s=e.getElementDataById(n),l=e.getElementDataById(o),u=(0,a.findActualConnectNodeData)(s,t=>e.getParentData(t,r.COMBO_KEY)),c=(0,a.findActualConnectNodeData)(l,t=>e.getParentData(t,r.COMBO_KEY)),d={sourceNode:(0,i.idOf)(u),targetNode:(0,i.idOf)(c)};return t.style?Object.assign(t.style,d):t.style=d,t;};},dfa93ec1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"CircleCombo",{enumerable:!0,get:function(){return u;}});var r=n("a566da36"),i=n("8a0aecd6"),a=n("8bdd800c"),o=n("9da99c33"),s=n("db863a29"),l=n("751c3a20");class u extends l.BaseCombo{constructor(e){super(e);}drawKeyShape(e,t){return this.upsert("key",r.Circle,this.getKeyStyle(e),t);}getKeyStyle(e){let{collapsed:t}=e,n=super.getKeyStyle(e),[r]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),t&&(0,o.subStyleProps)(n,"collapsed")),{r:r/2});}getCollapsedKeySize(e){let[t,n]=(0,s.parseSize)(e.collapsedSize),r=Math.max(t,n)/2;return[2*r,2*r,0];}getExpandedKeySize(e){let t=this.getContentBBox(e),[n,r]=(0,i.getBBoxSize)(t),a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/2;return[2*a,2*a,0];}getIntersectPoint(e,t=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(e,n,t);}}},dff91bc3:function(e,t,n){"use strict";function r(e,t,n,r,i){let a=n||0,o=r||e.length,s=i||(e=>e);for(;a<o;){let n=Math.floor((a+o)/2);s(e[n])>t?o=n:a=n+1;}return a;}n.d(t,"__esModule",{value:!0}),n.d(t,"bisect",{enumerable:!0,get:function(){return r;}});},e00150b4:function(e,t,n){"use strict";function r(e){var t;return(null===(t=null==e?void 0:e.style)||void 0===t?void 0:t.zIndex)||0;}n.d(t,"__esModule",{value:!0}),n.d(t,"getZIndexOf",{enumerable:!0,get:function(){return r;}});},e17abe05:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Polyline",{enumerable:!0,get:function(){return r.Polyline;}});var r=n("f7bb74fc");},e1d0d761:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Sparkline",{enumerable:!0,get:function(){return h;}});var r=n("18f14020"),i=n("a4504c9b"),a=n("abe9d8d6"),o=n("c086f503"),s=n("01a29d03"),l=n("bd4c807b"),u=n("8d5f4e75"),c=n("cbd8e3a1"),d=n("b165e34b"),h=function(e){function t(t){return e.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||(null==e?void 0:e.length)===0)return[[]];var t=(0,a.clone)(e);return(0,a.isNumber)(t[0])?[t]:t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?(0,d.getStackedData)(this.rawData):this.rawData;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var e=this.scales.y,t=(0,r.__read)(e.getOptions().domain||[0,0],2),n=t[0],i=t[1];return i<0?e.map(i):e.map(n<0?0:n);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var e=this.attributes;return{width:e.width,height:e.height};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var e=this,t=this.attributes,n=t.type,i=t.isStack,a=t.smooth;if("line"!==n)throw Error("linesStyle can only be used in line type");var o=(0,s.subStyleProps)(this.attributes,"area"),l=(0,s.subStyleProps)(this.attributes,"line"),u=this.containerShape.width,d=this.data;if(0===d[0].length)return{lines:[],areas:[]};var h=this.scales,f=h.x,p=h.y,v=(0,c.dataToLines)(d,{type:"line",x:f,y:p}),g=[];if(o){var m=this.baseline;g=i?a?(0,c.linesToStackCurveAreaPaths)(v,u,m):(0,c.linesToStackAreaPaths)(v,u,m):(0,c.linesToAreaPaths)(v,a,u,m);}return{lines:v.map(function(t,n){return(0,r.__assign)({stroke:e.getColor(n),d:a?(0,c.lineToCurvePath)(t):(0,c.lineToLinePath)(t)},l);}),areas:g.map(function(t,n){return(0,r.__assign)({d:t,fill:e.getColor(n)},o);})};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var e=this,t=(0,s.subStyleProps)(this.attributes,"column"),n=this.attributes,a=n.isStack,o=n.type,l=n.scale;if("column"!==o)throw Error("columnsStyle can only be used in column type");var u=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=(0,d.getStackedData)(c));var h=this.createScales(c),f=h.x,p=h.y,v=(0,r.__read)((0,d.getRange)(c),2),g=v[0],m=v[1],y=new i.Linear({domain:[0,m-(g>0?0:g)],range:[0,u*l]}),b=f.getBandWidth(),E=this.rawData;return{columns:c.map(function(n,i){return n.map(function(n,o){var s=b/c.length;return(0,r.__assign)((0,r.__assign)({fill:e.getColor(i)},t),a?{x:f.map(o),y:p.map(n),width:b,height:y.map(E[i][o])}:{x:f.map(o)+s*i,y:n>=0?p.map(n):p.map(0),width:s,height:y.map(Math.abs(n))});});})};},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){(0,s.maybeAppend)(t,".container","rect").attr("className","container").node();var n=e.type,i=e.x,a=e.y,o="spark".concat(n),c=(0,r.__assign)({x:i,y:a},"line"===n?this.linesStyle:this.columnsStyle);(0,s.select)(t).selectAll(".spark").data([n]).join(function(e){return e.append(function(e){return"line"===e?new u.Lines({className:o,style:c}):new l.Columns({className:o,style:c});}).attr("className","spark ".concat(o));},function(e){return e.update(c);},function(e){return e.remove();});},t.prototype.getColor=function(e){var t=this.attributes.color;return(0,a.isArray)(t)?t[e%t.length]:(0,a.isFunction)(t)?t.call(null,e):t;},t.prototype.createScales=function(e){var t,n,a=this.attributes,o=a.type,s=a.scale,l=a.range,u=void 0===l?[]:l,c=a.spacing,h=this.containerShape,f=h.width,p=h.height,v=(0,r.__read)((0,d.getRange)(e),2),g=v[0],m=v[1],y=new i.Linear({domain:[null!==(t=u[0])&&void 0!==t?t:g,null!==(n=u[1])&&void 0!==n?n:m],range:[p,p*(1-s)]});return"line"===o?{type:o,x:new i.Linear({domain:[0,e[0].length-1],range:[0,f]}),y:y}:{type:o,x:new i.Band({domain:e[0].map(function(e,t){return t;}),range:[0,f],paddingInner:c,paddingOuter:c/2,align:.5}),y:y};},t.tag="sparkline",t;}(o.Component);},e314a3ad:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"tickIncrement",{enumerable:!0,get:function(){return o;}});let r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(e,t,n){let o=(t-e)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),l=o/10**s;return s>=0?(l>=r?10:l>=i?5:l>=a?2:1)*10**s:-(10**-s)/(l>=r?10:l>=i?5:l>=a?2:1);}},e314c61c:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"COMMON_OPTIONS",{enumerable:!0,get:function(){return r.COMMON_OPTIONS;}});var r=n("e6787a9d");},e3863157:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"defined",{enumerable:!0,get:function(){return r;}});var r=function(e){return void 0!==e&&null!=e&&!Number.isNaN(e);};},e50a16b8:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"measureTextSize",{enumerable:!0,get:function(){return i;}});var r=n("8011b6f5");function i(e,t=[0,0],n={fontSize:16,fontFamily:"PingFang SC"},a=0,o=1/0){let s=(0,r.measureTextHeight)(e,n),l=(0,r.measureTextWidth)(e,n)+4,u=o===1/0?1:Math.ceil(l/o),[c,d]=t;return[Math.max(a,Math.min(o,l))+c,d+s+1.5*s*(u-1)];}},e6787a9d:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"COMMON_OPTIONS",{enumerable:!0,get:function(){return r;}});let r={autoResize:!0,behaviors:[{key:"zoom-canvas",type:"zoom-canvas"},{key:"drag-canvas",type:"drag-canvas"}]};},e695f7e6:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"PlusMinusIcon",{enumerable:!0,get:function(){return s;}});var r=n("777fffbe"),i=r._(n("3e6b097d")),a=r._(n("247081c8"));let o=a.default.div`
  height: 16px;
  width: 16px;
  transform: translate(-50%, -50%);
  background: #fff;
  border-radius: 50%;
  border: 2px solid #99add1;
  color: #99add1;
  font-weight: 800;
  line-height: 14px;
  text-align: center;
  box-sizing: content-box;
`,s=e=>{let{isCollapsed:t,style:n,className:r}=e;return i.default.createElement(o,{className:r,style:n},t?"+":"-");};},e6a028a0:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{contain:function(){return l;},isPointInsideRectangle:function(){return o;},isRectangleBInsideA:function(){return s;}});var r=n("39218125");function i(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1]);}function a(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r<0?2:1;}function o(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],o=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(function(e,t){var n=a(e[0],e[1],t[0]),r=a(e[0],e[1],t[1]),o=a(t[0],t[1],e[0]),s=a(t[0],t[1],e[1]);return!!(n!==r&&o!==s||0===n&&i(e,t[0])||0===r&&i(e,t[1])||0===o&&i(t,e[0])||0===s&&i(t,e[1]));}(l,r)){if(0===a(l[0],t,l[1]))return i(l,t);o++;}s=(s+1)%n;}while(0!==s)return!!(1&o);}function s(e,t){return t.every(function(t){return o(e,t);});}function l(e,t,n){var i=e.x1,a=e.x2,o=e.y1,l=e.y2;return s([[i,o],[a,o],[a,l],[i,l]],(0,r.getBounds)(t,n));}},e6d068ba:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Marker",{enumerable:!0,get:function(){return u;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("c086f503"),o=n("01a29d03"),s=n("b284d42c"),l=n("5c987f9e"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this;}return(0,r.__extends)(t,e),t.prototype.render=function(e,n){var a,s=e.x,u=void 0===s?0:s,c=e.y,d=void 0===c?0:c,h=this.getSubShapeStyle(e),f=h.symbol,p=h.size,v=void 0===p?16:p,g=(0,r.__rest)(h,["symbol","size"]),m=["base64","url","image"].includes(a=(0,l.parseMarker)(f))?"image":f&&"symbol"===a?"path":null;(0,o.ifShow)(!!m,(0,o.select)(n),function(e){e.maybeAppendByClassName("marker",m).attr("className","marker ".concat(m,"-marker")).call(function(e){if("image"===m){var n=2*v;e.styles({img:f,width:n,height:n,x:u-v,y:d-v});}else{var n=v/2,a=(0,i.isFunction)(f)?f:t.getSymbol(f);e.styles((0,r.__assign)({d:null==a?void 0:a(u,d,n)},g));}});});},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(e,n){t.MARKER_SYMBOL_MAP.set(e,n);},t.getSymbol=function(e){return t.MARKER_SYMBOL_MAP.get(e);},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys());},t;}(a.Component);u.registerSymbol("cross",s.cross),u.registerSymbol("hyphen",s.hyphen),u.registerSymbol("line",s.line),u.registerSymbol("plus",s.plus),u.registerSymbol("tick",s.tick),u.registerSymbol("circle",s.circle),u.registerSymbol("point",s.point),u.registerSymbol("bowtie",s.bowtie),u.registerSymbol("hexagon",s.hexagon),u.registerSymbol("square",s.square),u.registerSymbol("diamond",s.diamond),u.registerSymbol("triangle",s.triangle),u.registerSymbol("triangle-down",s.triangleDown),u.registerSymbol("line",s.line),u.registerSymbol("dot",s.dot),u.registerSymbol("dash",s.dash),u.registerSymbol("smooth",s.smooth),u.registerSymbol("hv",s.hv),u.registerSymbol("vh",s.vh),u.registerSymbol("hvh",s.hvh),u.registerSymbol("vhv",s.vhv),u.registerSymbol("focus",s.focus);},e71f3dfd:function(e,t,n){"use strict";function r(e,t,n,r,i){let a=n||0,o=r||e.length,s=i||(e=>e);for(;a<o;){let n=Math.floor((a+o)/2);s(e[n])>t?o=n:a=n+1;}return a;}n.d(t,"__esModule",{value:!0}),n.d(t,"bisect",{enumerable:!0,get:function(){return r;}});},e82d5849:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n("d1751d7c")._(n("ea1b9c4c"),t);},e96a45f9:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"ContainerEvent",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).KEY_DOWN="keydown",i.KEY_UP="keyup";},eae16085:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{createInterpolateColor:function(){return a;},createInterpolateNumber:function(){return i;},createInterpolateRound:function(){return s;},createInterpolateValue:function(){return o;}});var r=n("d6237fba");let i=(e,t)=>n=>e*(1-n)+t*n,a=(e,t)=>{let n=(0,r.string2rbg)(e),i=(0,r.string2rbg)(t);return null===n||null===i?n?()=>e:()=>t:e=>{let t=[,,,,];for(let r=0;r<4;r+=1){let a=n[r],o=i[r];t[r]=a*(1-e)+o*e;}let[r,a,o,s]=t;return`rgba(${Math.round(r)}, ${Math.round(a)}, ${Math.round(o)}, ${s})`;};},o=(e,t)=>"number"==typeof e&&"number"==typeof t?i(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):()=>e,s=(e,t)=>{let n=i(e,t);return e=>Math.round(n(e));};},eb4593bd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseTransform",{enumerable:!0,get:function(){return i;}});var r=n("c23b41b5");class i extends r.BaseExtension{beforeDraw(e,t){return e;}afterLayout(e,t){}}},eb97948a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BBox",{enumerable:!0,get:function(){return r;}});var r=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=r;}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y;},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height);},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left};},e.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom;},e;}();},ebc02449:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Watermark",{enumerable:!0,get:function(){return l;}});var r=n("0d562788"),i=n("82c10466"),a=n("94534a11"),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class l extends r.BasePlugin{constructor(e,t){super(e,Object.assign({},l.defaultOptions,t)),this.$element=(0,i.createPluginContainer)("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(t);}update(e){let t=Object.create(null,{update:{get:()=>super.update}});return o(this,void 0,void 0,function*(){t.update.call(this,e);let n=this.options,{width:r,height:i,text:o,imageURL:l}=n,u=s(n,["width","height","text","imageURL"]);Object.keys(u).forEach(t=>{t.startsWith("background")&&(this.$element.style[t]=e[t]);});let c=l?yield(0,a.getImageWatermark)(r,i,l,u):yield(0,a.getTextWatermark)(r,i,o,u);this.$element.style.backgroundImage=`url(${c})`;});}destroy(){super.destroy(),this.$element.remove();}}l.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};},ec2f02a5:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BaseNode",{enumerable:!0,get:function(){return m;}});var r=n("a566da36"),i=n("966f7de2"),a=n("ef11d2df"),o=n("49bbc4a4"),s=n("8bdd800c"),l=n("9da99c33"),u=n("db863a29"),c=n("cdd49f4a"),d=n("27a6f2bf"),h=n("6f097fb0"),f=n("65216f3f"),p=n("988eb09c"),v=n("133675a0"),g=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};class m extends f.BaseElement{constructor(e){super((0,c.mergeOptions)({style:m.defaultStyleProps},e)),this.type="node";}getSize(e=this.attributes){let{size:t}=e;return(0,u.parseSize)(t);}getKeyStyle(e){let t=this.getGraphicStyle(e);return Object.assign((0,l.omitStyleProps)(t,["label","halo","icon","badge","port"]));}getLabelStyle(e){if(!1===e.label||!e.labelText)return!1;let t=(0,l.subStyleProps)(this.getGraphicStyle(e),"label"),{placement:n,maxWidth:r,offsetX:a,offsetY:o}=t,s=g(t,["placement","maxWidth","offsetX","offsetY"]),u=this.getShape("key").getLocalBounds();return Object.assign((0,i.getTextStyleByPlacement)(u,n,a,o),{wordWrapWidth:(0,d.getWordWrapWidthByBox)(u,r)},s);}getHaloStyle(e){if(!1===e.halo)return!1;let t=this.getKeyStyle(e),{fill:n}=t,r=g(t,["fill"]),i=(0,l.subStyleProps)(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i);}getIconStyle(e){if(!1===e.icon||!e.iconText&&!e.iconSrc)return!1;let t=(0,l.subStyleProps)(this.getGraphicStyle(e),"icon");return Object.assign((0,a.inferIconStyle)(e.size,t),t);}getBadgesStyle(e){var t;let n=(0,l.subObject)(this.shapeMap,"badge-"),r={};if(Object.keys(n).forEach(e=>{r[e]=!1;}),!1===e.badge||!(null===(t=e.badges)||void 0===t?void 0:t.length))return r;let{badges:i=[],badgePalette:a,opacity:s=1}=e,u=g(e,["badges","badgePalette","opacity"]),c=(0,o.getPaletteColors)(a),d=(0,l.subStyleProps)(this.getGraphicStyle(u),"badge");return i.forEach((e,t)=>{r[t]=Object.assign(Object.assign({backgroundFill:c?c[t%(null==c?void 0:c.length)]:void 0,opacity:s},d),this.getBadgeStyle(e));}),r;}getBadgeStyle(e){let t=this.getShape("key"),{placement:n="top",offsetX:r,offsetY:a}=e,o=g(e,["placement","offsetX","offsetY"]);return Object.assign(Object.assign({},(0,i.getTextStyleByPlacement)(t.getLocalBounds(),n,r,a,!0)),o);}getPortsStyle(e){var t;let n=this.getPorts(),r={};if(Object.keys(n).forEach(e=>{r[e]=!1;}),!1===e.port||!(null===(t=e.ports)||void 0===t?void 0:t.length))return r;let a=(0,l.subStyleProps)(this.getGraphicStyle(e),"port"),{ports:o=[]}=e;return o.forEach((t,n)=>{let o=t.key||n,s=Object.assign(Object.assign({},a),t);if((0,i.isSimplePort)(s))r[o]=!1;else{let[n,i]=this.getPortXY(e,t);r[o]=Object.assign({transform:[["translate",n,i]]},s);}}),r;}getPortXY(e,t){let{placement:n="left"}=t,r=this.getShape("key");return(0,i.getPortXYByPlacement)(function(e,t){if(!e)return t.getLocalBounds();let n=e.canvas.getLayer(),r=t.cloneNode();(0,h.setVisibility)(r,"hidden"),n.appendChild(r);let i=r.getLocalBounds();return r.destroy(),i;}(this.context,r),n);}getPorts(){return(0,l.subObject)(this.shapeMap,"port-");}getCenter(){return this.getShape("key").getBounds().center;}getIntersectPoint(e,t=!1){let n=this.getShape("key").getBounds();return(0,s.getRectIntersectPoint)(e,n,t);}drawHaloShape(e,t){let n=this.getHaloStyle(e),r=this.getShape("key");this.upsert("halo",r.constructor,n,t);}drawIconShape(e,t){let n=this.getIconStyle(e);this.upsert("icon",p.Icon,n,t),(0,v.connectImage)(this);}drawBadgeShapes(e,t){let n=this.getBadgesStyle(e);Object.keys(n).forEach(e=>{let r=n[e];this.upsert(`badge-${e}`,p.Badge,r,t);});}drawPortShapes(e,t){let n=this.getPortsStyle(e);Object.keys(n).forEach(e=>{let i=n[e],a=`port-${e}`;this.upsert(a,r.Circle,i,t);});}drawLabelShape(e,t){let n=this.getLabelStyle(e);this.upsert("label",p.Label,n,t);}_drawKeyShape(e,t){return this.drawKeyShape(e,t);}render(e=this.parsedAttributes,t=this){this._drawKeyShape(e,t),this.getShape("key")&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t));}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&(0,v.dispatchPositionChange)(this);}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this);}}m.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};},ec4cc423:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ArrangeEdgeZIndex",{enumerable:!0,get:function(){return i;}});var r=n("38871e26");class i extends r.BaseTransform{beforeDraw(e){let{model:t}=this.context,{nodes:n,edges:r}=t.getData(),i=n.filter(e=>1===e.depth),a=i.map(e=>e.id);return r.forEach(e=>{a.includes(e.target)&&(e.style||(e.style={}),e.style.zIndex=i.length-i.findIndex(t=>t.id===e.target));}),e;}}},ec6e52f6:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{format:function(){return i;},print:function(){return a;}});var r=n("afc63cf6");function i(e){return`[G6 v${r.version}] ${e}`;}let a={mute:!1,debug:e=>{a.mute||console.debug(i(e));},info:e=>{a.mute||console.info(i(e));},warn:e=>{a.mute||console.warn(i(e));},error:e=>{a.mute||console.error(i(e));}};},ed0ed952:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"create",{enumerable:!0,get:function(){return o;}});let r=["#7E92B5","#F4664A","#FFBE3A"],i={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},a={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function o(e){let{bgColor:t,textColor:n,nodeColor:o,nodeColorDisabled:s,nodeStroke:l,nodeHaloStrokeOpacityActive:u=.15,nodeHaloStrokeOpacitySelected:c=.25,nodeOpacityDisabled:d=.06,nodeIconOpacityInactive:h=.85,nodeOpacityInactive:f=.25,nodeBadgePalette:p=r,nodePaletteOptions:v=i,edgeColor:g,edgeColorDisabled:m,edgePaletteOptions:y=a,comboColor:b,comboColorDisabled:E,comboStroke:x,comboStrokeDisabled:k,edgeColorInactive:S}=e;return{background:t,node:{palette:v,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:p,fill:o,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:o,portLineWidth:1,portStroke:l,portStrokeOpacity:.65,size:32,stroke:l,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:c,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:l},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:u},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:l,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:f,donutOpacity:f,fillOpacity:f,iconOpacity:h,labelFill:n,labelFillOpacity:f,strokeOpacity:f},disabled:{badgeBackgroundOpacity:.25,donutOpacity:d,fill:s,fillOpacity:d,iconFill:s,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:d}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:y,style:{badgeBackgroundFill:g,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,badgeBackgroundOpacity:1,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:g,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:S,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:m,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:t,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:b,halo:!1,haloLineWidth:12,haloStroke:x,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:x},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:E,fillOpacity:.25,labelOpacity:.25,stroke:k,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}};}},ee63ceb4:function(e,t,n){"use strict";var r,i;n.d(t,"__esModule",{value:!0}),n.d(t,"AnimationType",{enumerable:!0,get:function(){return r;}}),(i=r||(r={})).DRAW="draw",i.COLLAPSE="collapse",i.EXPAND="expand",i.TRANSFORM="transform";},eea2fa15:function(e,t,n){"use strict";function r(e){return 1e-14>Math.abs(e)?e:parseFloat(e.toFixed(14));}n.d(t,"__esModule",{value:!0}),n.d(t,"prettyNumber",{enumerable:!0,get:function(){return r;}});},ef11d2df:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"inferIconStyle",{enumerable:!0,get:function(){return i;}});var r=n("db863a29");function i(e,t){let n=(0,r.parseSize)(e),i={};return t.text&&!t.fontSize&&(i={fontSize:.5*Math.min(...n)}),!t.src||t.width&&t.height||(i={width:.5*n[0],height:.5*n[1]}),i;}},efced6b1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Line",{enumerable:!0,get:function(){return r.Line;}});var r=n("f7bb74fc");},f0147f06:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"AutoAdaptLabel",{enumerable:!0,get:function(){return c;}});var r=n("abe9d8d6"),i=n("6b0531cc"),a=n("8a0aecd6"),o=n("c3a91540"),s=n("4eb3f949"),l=n("6f097fb0"),u=n("32576f8a");class c extends u.BaseBehavior{constructor(e,t){super(e,Object.assign({},c.defaultOptions,t)),this.isOverlapping=(e,t)=>t.some(t=>e.intersects(t)),this.occupiedBounds=[],this.detectLabelCollision=e=>{let t=this.context.viewport,n={show:[],hide:[]};return this.occupiedBounds=[],e.forEach(e=>{let r=e.getShape("label").getRenderBounds();t.isInViewport(r,!0)&&!this.isOverlapping(r,this.occupiedBounds)?(n.show.push(e),this.occupiedBounds.push((0,a.getExpandedBBox)(r,this.options.padding))):n.hide.push(e);}),n;},this.hideLabelIfExceedViewport=(e,t)=>{let{exit:n}=(0,s.arrayDiff)(e,t,e=>e.id);null==n||n.forEach(this.hideLabel);},this.nodeCentralities=new Map,this.sortNodesByCentrality=(e,t)=>{let{model:n}=this.context,r=n.getData(),i=n.getRelatedEdgesData.bind(n);return e.map(e=>(this.nodeCentralities.has(e.id)||(this.nodeCentralities=(0,o.getNodeCentralities)(r,i,t)),{node:e,centrality:this.nodeCentralities.get(e.id)})).sort((e,t)=>t.centrality-e.centrality).map(e=>e.node);},this.sortLabelElementsInView=e=>{let{sort:t,sortNode:n,sortCombo:i,sortEdge:a}=this.options,{model:o}=this.context;if((0,r.isFunction)(t))return e.sort((e,n)=>t(o.getElementDataById(e.id),o.getElementDataById(n.id)));let{node:s=[],edge:l=[],combo:u=[]}=(0,r.groupBy)(e,e=>e.type);return[...(0,r.isFunction)(i)?u.sort((e,t)=>i(...o.getComboData([e.id,t.id]))):u,...(0,r.isFunction)(n)?s.sort((e,t)=>n(...o.getNodeData([e.id,t.id]))):this.sortNodesByCentrality(s,n),...(0,r.isFunction)(a)?l.sort((e,t)=>a(...o.getEdgeData([e.id,t.id]))):l];},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.stage)==="zIndex")return;if(!this.validate(e)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return;}let n=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,n),this.labelElementsInView=n;let r=this.sortLabelElementsInView(this.labelElementsInView),{show:i,hide:a}=this.detectLabelCollision(r);for(let e=i.length-1;e>=0;e--)this.showLabel(i[e]);a.forEach(this.hideLabel);},this.hiddenElements=new Map,this.hideLabel=e=>{let t=e.getShape("label");t&&(0,l.setVisibility)(t,"hidden"),this.hiddenElements.set(e.id,e);},this.showLabel=e=>{let t=e.getShape("label");t&&(0,l.setVisibility)(t,"visible"),e.toFront(),this.hiddenElements.delete(e.id);},this.onTransform=(0,r.throttle)(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=e=>{this.enableToggle&&this.onToggleVisibility(e);},this.onBeforeRender=()=>{this.enableToggle=!1;},this.onAfterRender=e=>{this.onToggleVisibility(e),this.enableToggle=!0;},this.bindEvents();}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({});}getLabelElements(){let{elementMap:e}=this.context.element,t=[];for(let n in e){let r=e[n];r.isVisible()&&r.getShape("label")&&t.push(r);}return t;}getLabelElementsInView(){let e=this.context.viewport;return this.getLabelElements().filter(t=>e.isInViewport(t.getShape("key").getRenderBounds()));}bindEvents(){let{graph:e}=this.context;e.on(i.GraphEvent.BEFORE_RENDER,this.onBeforeRender),e.on(i.GraphEvent.AFTER_RENDER,this.onAfterRender),e.on(i.GraphEvent.AFTER_DRAW,this.toggle),e.on(i.GraphEvent.AFTER_LAYOUT,this.toggle),e.on(i.GraphEvent.AFTER_TRANSFORM,this.onTransform);}unbindEvents(){let{graph:e}=this.context;e.off(i.GraphEvent.BEFORE_RENDER,this.onBeforeRender),e.off(i.GraphEvent.AFTER_RENDER,this.onAfterRender),e.off(i.GraphEvent.AFTER_DRAW,this.toggle),e.off(i.GraphEvent.AFTER_LAYOUT,this.toggle),e.off(i.GraphEvent.AFTER_TRANSFORM,this.onTransform);}validate(e){if(this.destroyed)return!1;let{enable:t}=this.options;return(0,r.isFunction)(t)?t(e):!!t;}destroy(){this.unbindEvents(),super.destroy();}}c.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};},f0c77c55:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{AABB:function(){return eo;},CSS:function(){return iJ;},Camera:function(){return eR;},CameraType:function(){return eP;},Canvas:function(){return an;},CanvasEvent:function(){return i5;},Circle:function(){return iL;},CustomElement:function(){return iD;},Document:function(){return i0;},ERROR_MSG_METHOD_NOT_IMPLEMENTED:function(){return eh;},ElementEvent:function(){return r0;},Ellipse:function(){return iI;},FederatedEvent:function(){return rV;},FederatedPointerEvent:function(){return rU;},Group:function(){return iB;},HTML:function(){return iG;},Image:function(){return iz;},Line:function(){return ij;},Path:function(){return iH;},Polygon:function(){return iY;},Polyline:function(){return iX;},PropertySyntax:function(){return ej;},Rect:function(){return i$;},Rectangle:function(){return ed;},Shape:function(){return Q;},Text:function(){return iZ;},createVec3:function(){return eg;},deg2rad:function(){return ey;},getAngle:function(){return ep;},isBrowser:function(){return n5;},propertyMetadataCache:function(){return nG;},rad2deg:function(){return eE;},runtime:function(){return ib;}});var r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y,b,E,x,k,S,T,M,w,N,C,_,P,A,O=n("777fffbe"),L=O._(n("ab297151")),R=O._(n("b1a4abb6")),D=O._(n("72ce8fb5")),I=O._(n("d60881d0")),B=O._(n("0b95a4d2")),F=O._(n("0afdccfb")),G=O._(n("7465ab36")),z=O._(n("32f41e1c")),V=n("597fa39f");n("f90e84e3");var j=n("abe9d8d6"),U=O._(n("3214ccb5")),H=O._(n("51ffafbb")),W=O._(n("3c7f532e")),Y=n("b1a96927"),q=O._(n("2fabd5d4")),X=O._(n("cb203630")),$=O._(n("1982f763")),K=O._(n("01aac514"));let Z=n("1714eebe");var Q=((r={}).GROUP="g",r.FRAGMENT="fragment",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh",r),J=((i={})[i.ZERO=0]="ZERO",i[i.NEGATIVE_ONE=1]="NEGATIVE_ONE",i),ee=((0,D.default)(function e(){(0,R.default)(this,e),this.plugins=[];},[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e);}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1);});}}]),V.vec3.add),et=V.vec3.copy,en=V.vec3.max,er=V.vec3.min,ei=V.vec3.scale,ea=V.vec3.sub,eo=function(){function e(){(0,R.default)(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0];}return(0,D.default)(e,[{key:"update",value:function(e,t){et(this.center,e),et(this.halfExtents,t),ea(this.min,this.center,this.halfExtents),ee(this.max,this.center,this.halfExtents);}},{key:"setMinMax",value:function(e,t){ee(this.center,t,e),ei(this.center,this.center,.5),ea(this.halfExtents,t,e),ei(this.halfExtents,this.halfExtents,.5),et(this.min,e),et(this.max,t);}},{key:"getMin",value:function(){return this.min;}},{key:"getMax",value:function(){return this.max;}},{key:"add",value:function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return;}var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],l=o[1],u=o[2],c=r-s,d=r+s,h=i-l,f=i+l,p=a-u,v=a+u,g=t.center,m=g[0],y=g[1],b=g[2],E=t.halfExtents,x=E[0],k=E[1],S=E[2],T=m-x,M=m+x,w=y-k,N=y+k,C=b-S,_=b+S;T<c&&(c=T),M>d&&(d=M),w<h&&(h=w),N>f&&(f=N),C<p&&(p=C),_>v&&(v=_),n[0]=(c+d)*.5,n[1]=(h+f)*.5,n[2]=(p+v)*.5,o[0]=(d-c)*.5,o[1]=(f-h)*.5,o[2]=(v-p)*.5,this.min[0]=c,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=f,this.max[2]=v;}}},{key:"setFromTransformedAABB",value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],l=t[8],u=t[1],c=t[5],d=t[9],h=t[2],f=t[6],p=t[10],v=Math.abs(o),g=Math.abs(s),m=Math.abs(l),y=Math.abs(u),b=Math.abs(c),E=Math.abs(d),x=Math.abs(h),k=Math.abs(f),S=Math.abs(p);n[0]=t[12]+o*i[0]+s*i[1]+l*i[2],n[1]=t[13]+u*i[0]+c*i[1]+d*i[2],n[2]=t[14]+h*i[0]+f*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+m*a[2],r[1]=y*a[0]+b*a[1]+E*a[2],r[2]=x*a[0]+k*a[1]+S*a[2],ea(this.min,n,r),ee(this.max,n,r);}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2];}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new e,r=en([0,0,0],this.getMin(),t.getMin()),i=er([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n;}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?et([0,0,0],this.min):272===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]];}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?et([0,0,0],this.max):272===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]];}}],[{key:"isEmpty",value:function(e){return!e||0===e.halfExtents[0]&&0===e.halfExtents[1]&&0===e.halfExtents[2];}}]);}(),es=(0,D.default)(function e(t,n){(0,R.default)(this,e),this.distance=t||0,this.normal=n||V.vec3.fromValues(0,1,0),this.updatePNVertexFlag();},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0);}},{key:"distanceToPoint",value:function(e){return V.vec3.dot(e,this.normal)-this.distance;}},{key:"normalize",value:function(){var e=1/V.vec3.len(this.normal);V.vec3.scale(this.normal,this.normal,e),this.distance*=e;}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),a=i>=0&&i<=1;return a&&n&&V.vec3.lerp(n,e,t,i),a;}}]),el=((a={})[a.OUTSIDE=4294967295]="OUTSIDE",a[a.INSIDE=0]="INSIDE",a[a.INDETERMINATE=2147483647]="INDETERMINATE",a),eu=(0,D.default)(function e(t){if((0,R.default)(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new es);},[{key:"extractFromVPMatrix",value:function(e){var t=(0,G.default)(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];V.vec3.set(this.planes[0].normal,a-n,u-o,f-c),this.planes[0].distance=m-p,V.vec3.set(this.planes[1].normal,a+n,u+o,f+c),this.planes[1].distance=m+p,V.vec3.set(this.planes[2].normal,a+r,u+s,f+d),this.planes[2].distance=m+v,V.vec3.set(this.planes[3].normal,a-r,u-s,f-d),this.planes[3].distance=m-v,V.vec3.set(this.planes[4].normal,a-i,u-l,f-h),this.planes[4].distance=m-g,V.vec3.set(this.planes[5].normal,a+i,u+l,f+h),this.planes[5].distance=m+g,this.planes.forEach(function(e){e.normalize(),e.updatePNVertexFlag();});}}]),ec=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,R.default)(this,e),this.x=0,this.y=0,this.x=t,this.y=n;}return(0,D.default)(e,[{key:"clone",value:function(){return new e(this.x,this.y);}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y;}}]);}(),ed=function(){function e(t,n,r,i){(0,R.default)(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i;}return(0,D.default)(e,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new e(t.x,t.y,t.width,t.height);}},{key:"applyTransform",value:function(t,n){var r=V.vec4.fromValues(t.x,t.y,0,1),i=V.vec4.fromValues(t.x+t.width,t.y,0,1),a=V.vec4.fromValues(t.x,t.y+t.height,0,1),o=V.vec4.fromValues(t.x+t.width,t.y+t.height,0,1),s=V.vec4.create(),l=V.vec4.create(),u=V.vec4.create(),c=V.vec4.create();V.vec4.transformMat4(s,r,n),V.vec4.transformMat4(l,i,n),V.vec4.transformMat4(u,a,n),V.vec4.transformMat4(c,o,n);var d=Math.min(s[0],l[0],u[0],c[0]),h=Math.min(s[1],l[1],u[1],c[1]),f=Math.max(s[0],l[0],u[0],c[0]),p=Math.max(s[1],l[1],u[1],c[1]);return e.fromRect({x:d,y:h,width:f-d,height:p-h});}}]);}(),eh="Method not implemented.",ef="Use document.documentElement instead.";function ep(e){return void 0===e?0:e>360||e<-360?e%360:e;}var ev=V.vec3.create();function eg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Array.isArray(e)&&3===e.length?r?V.vec3.clone(e):V.vec3.copy(ev,e):(0,j.isNumber)(e)?r?V.vec3.fromValues(e,t,n):V.vec3.set(ev,e,t,n):r?V.vec3.fromValues(e[0],e[1]||t,e[2]||n):V.vec3.set(ev,e[0],e[1]||t,e[2]||n);}var em=Math.PI/180;function ey(e){return e*em;}var eb=180/Math.PI;function eE(e){return e*eb;}var ex=Math.PI/2;function ek(e,t){var n,r,i,a,o,s,l,u,c,d,h,f,p,v,g,m,y;return 16===t.length?(i=V.mat4.getScaling(V.vec3.create(),t),o=(a=(0,G.default)(i,3))[0],s=a[1],l=a[2],(u=Math.asin(-t[2]/o))<ex?u>-ex?(n=Math.atan2(t[6]/s,t[10]/l),r=Math.atan2(t[1]/o,t[0]/o)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=u,e[2]=r):(c=t[0],d=t[1],h=t[2],f=t[3],m=c*c+(p=d*d)+(v=h*h)+(g=f*f),(y=c*f-d*h)>.499995*m?(e[0]=ex,e[1]=2*Math.atan2(d,c),e[2]=0):y<-.499995*m?(e[0]=-ex,e[1]=2*Math.atan2(d,c),e[2]=0):(e[0]=Math.asin(2*(c*h-f*d)),e[1]=Math.atan2(2*(c*f+d*h),1-2*(v+g)),e[2]=Math.atan2(2*(c*d+h*f),1-2*(p+v)))),e;}function eS(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s;}if(o){var l=1/o;r*=l,i*=l;}var u=Math.atan2(n,t)*eb;return[e[6],e[7],a,o,u];}var eT=V.mat4.create(),eM=V.mat4.create(),ew=V.vec4.create(),eN=[V.vec3.create(),V.vec3.create(),V.vec3.create()],eC=V.vec3.create();function e_(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i;}var eP=((o={})[o.ORBITING=0]="ORBITING",o[o.EXPLORING=1]="EXPLORING",o[o.TRACKING=2]="TRACKING",o),eA=((s={})[s.DEFAULT=0]="DEFAULT",s[s.ROTATIONAL=1]="ROTATIONAL",s[s.TRANSLATIONAL=2]="TRANSLATIONAL",s[s.CINEMATIC=3]="CINEMATIC",s),eO=((l={})[l.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",l[l.PERSPECTIVE=1]="PERSPECTIVE",l),eL={UPDATED:"updated"},eR=(0,D.default)(function e(){(0,R.default)(this,e),this.clipSpaceNearZ=J.NEGATIVE_ONE,this.eventEmitter=new z.default,this.matrix=V.mat4.create(),this.right=V.vec3.fromValues(1,0,0),this.up=V.vec3.fromValues(0,1,0),this.forward=V.vec3.fromValues(0,0,1),this.position=V.vec3.fromValues(0,0,1),this.focalPoint=V.vec3.fromValues(0,0,0),this.distanceVector=V.vec3.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=V.mat4.create(),this.projectionMatrixInverse=V.mat4.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=eP.EXPLORING,this.trackingMode=eA.DEFAULT,this.projectionMode=eO.PERSPECTIVE,this.frustum=new eu,this.orthoMatrix=V.mat4.create();},[{key:"isOrtho",value:function(){return this.projectionMode===eO.ORTHOGRAPHIC;}},{key:"getProjectionMode",value:function(){return this.projectionMode;}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix;}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse;}},{key:"getFrustum",value:function(){return this.frustum;}},{key:"getPosition",value:function(){return this.position;}},{key:"getFocalPoint",value:function(){return this.focalPoint;}},{key:"getDollyingStep",value:function(){return this.dollyingStep;}},{key:"getNear",value:function(){return this.near;}},{key:"getFar",value:function(){return this.far;}},{key:"getZoom",value:function(){return this.zoom;}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix;}},{key:"getView",value:function(){return this.view;}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e;}},{key:"setType",value:function(e,t){return this.type=e,this.type===eP.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===eP.TRACKING&&void 0!==t&&this.setTrackingMode(t),this;}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this;}},{key:"setTrackingMode",value:function(e){if(this.type!==eP.TRACKING)throw Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this;}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this;}},{key:"getViewTransform",value:function(){return V.mat4.invert(V.mat4.create(),this.matrix);}},{key:"getWorldTransform",value:function(){return this.matrix;}},{key:"jitterProjectionMatrix",value:function(e,t){var n=V.mat4.fromTranslation(V.mat4.create(),[e,t,0]);this.jitteredProjectionMatrix=V.mat4.multiply(V.mat4.create(),n,this.projectionMatrix);}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0;}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this;}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e;}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this;}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this;}},{key:"setNear",value:function(e){return this.projectionMode===eO.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this;}},{key:"setFar",value:function(e){return this.projectionMode===eO.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this;}},{key:"setViewOffset",value:function(e,t,n,r,i,a){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===eO.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===eO.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this;}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===eO.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===eO.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this;}},{key:"setZoomByViewportPoint",value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=o.x,l=o.y,u=V.vec3.fromValues(s-r,l-i,0),c=V.vec3.dot(u,this.right)/V.vec3.length(this.right),d=V.vec3.dot(u,this.up)/V.vec3.length(this.up),h=this.getPosition(),f=(0,G.default)(h,2),p=f[0],v=f[1],g=this.getFocalPoint(),m=(0,G.default)(g,2),y=m[0],b=m[1];return this.setPosition(p-c,v-d),this.setFocalPoint(y-c,b-d),this;}},{key:"setPerspective",value:function(e,t,n,r){this.projectionMode=eO.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var i,a=this.near*Math.tan(.5*this.fov*em)/this.zoom,o=2*a,s=this.aspect*o,l=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var u=this.view.fullWidth,c=this.view.fullHeight;l+=this.view.offsetX*s/u,a-=this.view.offsetY*o/c,s*=this.view.width/u,o*=this.view.height/c;}return!function(e,t,n,r,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=2*a,d=n-t,h=r-i,f=o-a,p=o*a;u?(s=-o/f,l=-p/f):(s=-(o+a)/f,l=-2*p/f),e[0]=c/d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c/h,e[6]=0,e[7]=0,e[8]=(n+t)/d,e[9]=(r+i)/h,e[10]=s,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0;}(this.projectionMatrix,l,l+s,a-o,a,e,this.far,this.clipSpaceNearZ===J.ZERO),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this;}},{key:"setOrthographic",value:function(e,t,n,r,i,a){this.projectionMode=eO.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var o,s=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,d=u-s,h=u+s,f=c+l,p=c-l;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=v*this.view.offsetX,h=d+v*this.view.width,f-=g*this.view.offsetY,p=f-g*this.view.height;}return this.clipSpaceNearZ===J.NEGATIVE_ONE?V.mat4.ortho(this.projectionMatrix,d,h,f,p,i,a):V.mat4.orthoZO(this.projectionMatrix,d,h,f,p,i,a),V.mat4.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this;}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],r=eg(e,t,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this;}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=V.vec3.fromValues(0,1,0);if(this.focalPoint=eg(e,t,n),this.trackingMode===eA.CINEMATIC){var i=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=Math.asin(t/V.vec3.length(i))*eb,o=90+Math.atan2(n,e)*eb,s=V.mat4.create();V.mat4.rotateY(s,s,o*em),V.mat4.rotateX(s,s,a*em),r=V.vec3.transformMat4(V.vec3.create(),[0,1,0],s);}return V.mat4.invert(this.matrix,V.mat4.lookAt(V.mat4.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this;}},{key:"getDistance",value:function(){return this.distance;}},{key:"getDistanceVector",value:function(){return this.distanceVector;}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=V.vec3.create();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this;}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this;}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this;}},{key:"setAzimuth",value:function(e){return this.azimuth=ep(e),this.computeMatrix(),this._getAxes(),this.type===eP.ORBITING||this.type===eP.EXPLORING?this._getPosition():this.type===eP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getAzimuth",value:function(){return this.azimuth;}},{key:"setElevation",value:function(e){return this.elevation=ep(e),this.computeMatrix(),this._getAxes(),this.type===eP.ORBITING||this.type===eP.EXPLORING?this._getPosition():this.type===eP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getElevation",value:function(){return this.elevation;}},{key:"setRoll",value:function(e){return this.roll=ep(e),this.computeMatrix(),this._getAxes(),this.type===eP.ORBITING||this.type===eP.EXPLORING?this._getPosition():this.type===eP.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this;}},{key:"getRoll",value:function(){return this.roll;}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate();}},{key:"computeMatrix",value:function(){var e=V.quat.setAxisAngle(V.quat.create(),[0,0,1],this.roll*em);V.mat4.identity(this.matrix);var t=V.quat.setAxisAngle(V.quat.create(),[1,0,0],(this.rotateWorld&&this.type!==eP.TRACKING||this.type===eP.TRACKING?1:-1)*this.elevation*em),n=V.quat.setAxisAngle(V.quat.create(),[0,1,0],(this.rotateWorld&&this.type!==eP.TRACKING||this.type===eP.TRACKING?1:-1)*this.azimuth*em),r=V.quat.multiply(V.quat.create(),n,t);r=V.quat.multiply(V.quat.create(),r,e);var i=V.mat4.fromQuat(V.mat4.create(),r);this.type===eP.ORBITING||this.type===eP.EXPLORING?(V.mat4.translate(this.matrix,this.matrix,this.focalPoint),V.mat4.multiply(this.matrix,this.matrix,i),V.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===eP.TRACKING&&(V.mat4.translate(this.matrix,this.matrix,this.position),V.mat4.multiply(this.matrix,this.matrix,i));}},{key:"_setPosition",value:function(e,t,n){this.position=eg(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix();}},{key:"_getAxes",value:function(){V.vec3.copy(this.right,eg(V.vec4.transformMat4(V.vec4.create(),[1,0,0,0],this.matrix))),V.vec3.copy(this.up,eg(V.vec4.transformMat4(V.vec4.create(),[0,1,0,0],this.matrix))),V.vec3.copy(this.forward,eg(V.vec4.transformMat4(V.vec4.create(),[0,0,1,0],this.matrix))),V.vec3.normalize(this.right,this.right),V.vec3.normalize(this.up,this.up),V.vec3.normalize(this.forward,this.forward);}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=V.vec3.length(this.distanceVector);if(0===r){this.elevation=0,this.azimuth=0;return;}this.type===eP.TRACKING?(this.elevation=Math.asin(t/r)*eb,this.azimuth=Math.atan2(-e,-n)*eb):this.rotateWorld?(this.elevation=Math.asin(t/r)*eb,this.azimuth=Math.atan2(-e,-n)*eb):(this.elevation=-(Math.asin(t/r)*eb),this.azimuth=-(Math.atan2(-e,-n)*eb));}},{key:"_getPosition",value:function(){V.vec3.copy(this.position,eg(V.vec4.transformMat4(V.vec4.create(),[0,0,0,1],this.matrix))),this._getDistance();}},{key:"_getFocalPoint",value:function(){V.vec3.transformMat3(this.distanceVector,[0,0,-this.distance],V.mat3.fromMat4(V.mat3.create(),this.matrix)),V.vec3.add(this.focalPoint,this.position,this.distanceVector),this._getDistance();}},{key:"_getDistance",value:function(){this.distanceVector=V.vec3.subtract(V.vec3.create(),this.focalPoint,this.position),this.distance=V.vec3.length(this.distanceVector),this.dollyingStep=this.distance/100;}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===eO.ORTHOGRAPHIC){var e=this.position,t=V.quat.setAxisAngle(V.quat.create(),[0,0,1],-this.roll*Math.PI/180);V.mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix,t,V.vec3.fromValues((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),V.vec3.fromValues(this.zoom,this.zoom,1),e);}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=V.mat4.multiply(V.mat4.create(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(eL.UPDATED);}}},{key:"rotate",value:function(e,t,n){throw Error(eh);}},{key:"pan",value:function(e,t){throw Error(eh);}},{key:"dolly",value:function(e){throw Error(eh);}},{key:"createLandmark",value:function(e,t){throw Error(eh);}},{key:"gotoLandmark",value:function(e,t){throw Error(eh);}},{key:"cancelLandmarkAnimation",value:function(){throw Error(eh);}}]),eD=((u={})[u.Standard=0]="Standard",u),eI=((c={})[c.ADDED=0]="ADDED",c[c.REMOVED=1]="REMOVED",c[c.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",c),eB=V.vec3.create(),eF=V.mat4.create(),eG=V.quat.create();function ez(e){if(e.localDirtyFlag){if(0!==e.localSkew[0]||0!==e.localSkew[1]){V.mat4.fromRotationTranslationScaleOrigin(e.localTransform,e.localRotation,e.localPosition,V.vec3.fromValues(1,1,1),e.origin),(0!==e.localSkew[0]||0!==e.localSkew[1])&&(V.mat4.identity(eF),eF[4]=Math.tan(e.localSkew[0]),eF[1]=Math.tan(e.localSkew[1]),V.mat4.multiply(e.localTransform,e.localTransform,eF));var t=V.mat4.fromRotationTranslationScaleOrigin(eF,V.quat.set(eG,0,0,0,1),V.vec3.set(eB,1,1,1),e.localScale,e.origin);V.mat4.multiply(e.localTransform,e.localTransform,t);}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=0!==r[0]||0!==r[1]||0!==r[2],l=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],u=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];l||u||c?V.mat4.fromRotationTranslationScaleOrigin(n,i,r,a,o):s?V.mat4.fromTranslation(n,r):V.mat4.identity(n);}e.localDirtyFlag=!1;}}var eV={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ed(0,0,0,0)},ej=((d={}).COORDINATE="<coordinate>",d.COLOR="<color>",d.PAINT="<paint>",d.NUMBER="<number>",d.ANGLE="<angle>",d.OPACITY_VALUE="<opacity-value>",d.SHADOW_BLUR="<shadow-blur>",d.LENGTH="<length>",d.PERCENTAGE="<percentage>",d.LENGTH_PERCENTAGE="<length> | <percentage>",d.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",d.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",d.LIST_OF_POINTS="<list-of-points>",d.PATH="<path>",d.FILTER="<filter>",d.Z_INDEX="<z-index>",d.OFFSET_DISTANCE="<offset-distance>",d.DEFINED_PATH="<defined-path>",d.MARKER="<marker>",d.TRANSFORM="<transform>",d.TRANSFORM_ORIGIN="<transform-origin>",d.TEXT="<text>",d.TEXT_TRANSFORM="<text-transform>",d);function eU(e,t,n){e.prototype=t.prototype=n,n.constructor=e;}function eH(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n;}function eW(){}var eY="\\s*([+-]?\\d+)\\s*",eq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eX="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e$=/^#([0-9a-f]{3,8})$/,eK=RegExp(`^rgb\\(${eY},${eY},${eY}\\)$`),eZ=RegExp(`^rgb\\(${eX},${eX},${eX}\\)$`),eQ=RegExp(`^rgba\\(${eY},${eY},${eY},${eq}\\)$`),eJ=RegExp(`^rgba\\(${eX},${eX},${eX},${eq}\\)$`),e0=RegExp(`^hsl\\(${eq},${eX},${eX}\\)$`),e1=RegExp(`^hsla\\(${eq},${eX},${eX},${eq}\\)$`),e2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e3(){return this.rgb().formatHex();}function e4(){return this.rgb().formatRgb();}function e6(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e5(t):3===n?new e9(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e8(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e8(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eK.exec(e))?new e9(t[1],t[2],t[3],1):(t=eZ.exec(e))?new e9(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eQ.exec(e))?e8(t[1],t[2],t[3],t[4]):(t=eJ.exec(e))?e8(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=e0.exec(e))?ti(t[1],t[2]/100,t[3]/100,1):(t=e1.exec(e))?ti(t[1],t[2]/100,t[3]/100,t[4]):e2.hasOwnProperty(e)?e5(e2[e]):"transparent"===e?new e9(NaN,NaN,NaN,0):null;}function e5(e){return new e9(e>>16&255,e>>8&255,255&e,1);}function e8(e,t,n,r){return r<=0&&(e=t=n=NaN),new e9(e,t,n,r);}function e9(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r;}function e7(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`;}function te(){let e=tt(this.opacity);return`${1===e?"rgb(":"rgba("}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${1===e?")":`, ${e})`}`;}function tt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function tn(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function tr(e){return((e=tn(e))<16?"0":"")+e.toString(16);}function ti(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new to(e,t,n,r);}function ta(e){if(e instanceof to)return new to(e.h,e.s,e.l,e.opacity);if(e instanceof eW||(e=e6(e)),!e)return new to;if(e instanceof to)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new to(o,s,l,e.opacity);}function to(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r;}function ts(e){return(e=(e||0)%360)<0?e+360:e;}function tl(e){return Math.max(0,Math.min(1,e||0));}function tu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255;}function tc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=e.apply(this,i);return n.cache=s.set(o,l)||s,l;};return n.cache=new(tc.Cache||Map),tc.cacheList.push(n.cache),n;}eU(eW,e6,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:e3,formatHex:e3,formatHex8:function(){return this.rgb().formatHex8();},formatHsl:function(){return ta(this).formatHsl();},formatRgb:e4,toString:e4}),eU(e9,function(e,t,n,r){var i;return 1==arguments.length?((i=e)instanceof eW||(i=e6(i)),i)?new e9((i=i.rgb()).r,i.g,i.b,i.opacity):new e9:new e9(e,t,n,null==r?1:r);},eH(eW,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e9(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new e9(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new e9(tn(this.r),tn(this.g),tn(this.b),tt(this.opacity));},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:e7,formatHex:e7,formatHex8:function(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`;},formatRgb:te,toString:te})),eU(to,function(e,t,n,r){return 1==arguments.length?ta(e):new to(e,t,n,null==r?1:r);},eH(eW,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new to(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=null==e?.7:Math.pow(.7,e),new to(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new e9(tu(e>=240?e-240:e+120,i,r),tu(e,i,r),tu(e<120?e+240:e-120,i,r),this.opacity);},clamp(){return new to(ts(this.h),tl(this.s),tl(this.l),tt(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){let e=tt(this.opacity);return`${1===e?"hsl(":"hsla("}${ts(this.h)}, ${100*tl(this.s)}%, ${100*tl(this.l)}%${1===e?")":`, ${e})`}`;}})),tc.Cache=Map,tc.cacheList=[],tc.clearCache=function(){tc.cacheList.forEach(function(e){return e.clear();});};var td=((h={})[h.kUnknown=0]="kUnknown",h[h.kNumber=1]="kNumber",h[h.kPercentage=2]="kPercentage",h[h.kEms=3]="kEms",h[h.kPixels=4]="kPixels",h[h.kRems=5]="kRems",h[h.kDegrees=6]="kDegrees",h[h.kRadians=7]="kRadians",h[h.kGradians=8]="kGradians",h[h.kTurns=9]="kTurns",h[h.kMilliseconds=10]="kMilliseconds",h[h.kSeconds=11]="kSeconds",h[h.kInteger=12]="kInteger",h),th=((f={})[f.kUNumber=0]="kUNumber",f[f.kUPercent=1]="kUPercent",f[f.kULength=2]="kULength",f[f.kUAngle=3]="kUAngle",f[f.kUTime=4]="kUTime",f[f.kUOther=5]="kUOther",f),tf=((p={})[p.kYes=0]="kYes",p[p.kNo=1]="kNo",p),tp=((v={})[v.kYes=0]="kYes",v[v.kNo=1]="kNo",v),tv=[{name:"em",unit_type:td.kEms},{name:"px",unit_type:td.kPixels},{name:"deg",unit_type:td.kDegrees},{name:"rad",unit_type:td.kRadians},{name:"grad",unit_type:td.kGradians},{name:"ms",unit_type:td.kMilliseconds},{name:"s",unit_type:td.kSeconds},{name:"rem",unit_type:td.kRems},{name:"turn",unit_type:td.kTurns}],tg=((g={})[g.kUnknownType=0]="kUnknownType",g[g.kUnparsedType=1]="kUnparsedType",g[g.kKeywordType=2]="kKeywordType",g[g.kUnitType=3]="kUnitType",g[g.kSumType=4]="kSumType",g[g.kProductType=5]="kProductType",g[g.kNegateType=6]="kNegateType",g[g.kInvertType=7]="kInvertType",g[g.kMinType=8]="kMinType",g[g.kMaxType=9]="kMaxType",g[g.kClampType=10]="kClampType",g[g.kTransformType=11]="kTransformType",g[g.kPositionType=12]="kPositionType",g[g.kURLImageType=13]="kURLImageType",g[g.kColorType=14]="kColorType",g[g.kUnsupportedColorType=15]="kUnsupportedColorType",g),tm=function(e){switch(e){case td.kNumber:case td.kInteger:return th.kUNumber;case td.kPercentage:return th.kUPercent;case td.kPixels:return th.kULength;case td.kMilliseconds:case td.kSeconds:return th.kUTime;case td.kDegrees:case td.kRadians:case td.kGradians:case td.kTurns:return th.kUAngle;default:return th.kUOther;}},ty=function(e){switch(e){case th.kUNumber:return td.kNumber;case th.kULength:return td.kPixels;case th.kUPercent:return td.kPercentage;case th.kUTime:return td.kSeconds;case th.kUAngle:return td.kDegrees;default:return td.kUnknown;}},tb=function(e){var t=1;switch(e){case td.kPixels:case td.kDegrees:case td.kSeconds:break;case td.kMilliseconds:t=.001;break;case td.kRadians:t=180/Math.PI;break;case td.kGradians:t=.9;break;case td.kTurns:t=360;}return t;},tE=function(e){switch(e){case td.kNumber:case td.kInteger:break;case td.kPercentage:return"%";case td.kEms:return"em";case td.kRems:return"rem";case td.kPixels:return"px";case td.kDegrees:return"deg";case td.kRadians:return"rad";case td.kGradians:return"grad";case td.kMilliseconds:return"ms";case td.kSeconds:return"s";case td.kTurns:return"turn";}return"";},tx=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"toString",value:function(){return this.buildCSSText(tf.kNo,tp.kNo,"");}},{key:"isNumericValue",value:function(){return this.getType()>=tg.kUnitType&&this.getType()<=tg.kClampType;}}],[{key:"isAngle",value:function(e){return e===td.kDegrees||e===td.kRadians||e===td.kGradians||e===td.kTurns;}},{key:"isLength",value:function(e){return e>=td.kEms&&e<td.kDegrees;}},{key:"isRelativeUnit",value:function(e){return e===td.kPercentage||e===td.kEms||e===td.kRems;}},{key:"isTime",value:function(e){return e===td.kSeconds||e===td.kMilliseconds;}}]),tk=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).colorSpace=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getType",value:function(){return tg.kColorType;}},{key:"to",value:function(e){return this;}}]);}(tx),tS=((m={})[m.Constant=0]="Constant",m[m.LinearGradient=1]="LinearGradient",m[m.RadialGradient=2]="RadialGradient",m),tT=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t)).type=e,r.value=n,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.type,this.value);}},{key:"buildCSSText",value:function(e,t,n){return n;}},{key:"getType",value:function(){return tg.kColorType;}}]);}(tx),tM=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).value=e,n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value);}},{key:"getType",value:function(){return tg.kKeywordType;}},{key:"buildCSSText",value:function(e,t,n){return n+this.value;}}]);}(tx),tw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(e)?"NaN":e>0?"infinity":"-infinity")+t;},tN=function(e){return ty(tm(e));},tC=function(e){function t(e){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td.kNumber;return(0,R.default)(this,t),r=(0,B.default)(this,t),i="string"==typeof a?(n=a)?"number"===n?td.kNumber:"percent"===n||"%"===n?td.kPercentage:tv.find(function(e){return e.name===n;}).unit_type:td.kUnknown:a,r.unit=i,r.value=e,r;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.value,this.unit);}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit;}},{key:"getType",value:function(){return tg.kUnitType;}},{key:"convertTo",value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=tN(this.unit);if(n!==tN(e)||n===td.kUnknown)return null;var r=tb(this.unit)/tb(e);return new t(this.value*r,e);}},{key:"buildCSSText",value:function(e,t,n){var r;switch(this.unit){case td.kUnknown:break;case td.kInteger:r=Number(this.value).toFixed(0);break;case td.kNumber:case td.kPercentage:case td.kEms:case td.kRems:case td.kPixels:case td.kDegrees:case td.kRadians:case td.kGradians:case td.kMilliseconds:case td.kSeconds:case td.kTurns:var i=this.value,a=tE(this.unit);if(i<-999999||i>999999){var o=tE(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?tw(i,o):i+(o||"");}else r="".concat(i).concat(a);}return n+r;}}]);}(tx),t_=new tC(0,"px");new tC(1,"px");var tP=new tC(0,"deg"),tA=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,R.default)(this,t),(i=(0,B.default)(this,t,["rgb"])).r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.alpha);}},{key:"buildCSSText",value:function(e,t,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")");}}]);}(tk),tO=new tM("unset"),tL={"":tO,unset:tO,initial:new tM("initial"),inherit:new tM("inherit")},tR=new tA(0,0,0,0,!0),tD=new tA(0,0,0,0),tI=tc(function(e,t,n,r){return new tA(e,t,n,r);},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")");}),tB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td.kNumber;return new tC(e,t);};new tC(50,"%");var tF=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){throw Error("".concat(t,": ").concat(e));}function r(){return i("linear-gradient",e.linearGradient,o)||i("repeating-linear-gradient",e.repeatingLinearGradient,o)||i("radial-gradient",e.radialGradient,s)||i("repeating-radial-gradient",e.repeatingRadialGradient,s)||i("conic-gradient",e.conicGradient,s);}function i(t,r,i){return a(r,function(r){var a=i();return a&&!y(e.comma)&&n("Missing comma before color stops"),{type:t,orientation:a,colorStops:h(f)};});}function a(t,r){var i=y(t);if(i){y(e.startCall)||n("Missing (");var a=r(i);return y(e.endCall)||n("Missing )"),a;}}function o(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1);}function s(){var n,r,i=l();return i&&((n=[]).push(i),r=t,y(e.comma)&&((i=l())?n.push(i):t=r)),n;}function l(){var e,t,n=((e=m("shape",/^(circle)/i,0))&&(e.style=g()||u()),e||((t=m("shape",/^(ellipse)/i,0))&&(t.style=v()||u()),t));if(n)n.at=c();else{var r=u();if(r){n=r;var i=c();i&&(n.at=i);}else{var a=d();a&&(n={type:"default-radial",at:a});}}return n;}function u(){return m("extent-keyword",e.extentKeywords,1);}function c(){if(m("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e;}}function d(){var e={x:v(),y:v()};if(e.x||e.y)return{type:"position",value:e};}function h(t){var r=t(),i=[];if(r)for(i.push(r);y(e.comma);)(r=t())?i.push(r):n("One extra comma");return i;}function f(){var t=m("hex",e.hexColor,1)||a(e.rgbaColor,function(){return{type:"rgba",value:h(p)};})||a(e.rgbColor,function(){return{type:"rgb",value:h(p)};})||m("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=v(),t;}function p(){return y(e.number)[1];}function v(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||g();}function g(){return m("px",e.pixelValue,1)||m("em",e.emValue,1);}function m(e,t,n){var r=y(t);if(r)return{type:e,value:r[n]};}function y(e){var n=/^[\n\r\t\s]+/.exec(t);n&&b(n[0].length);var r=e.exec(t);return r&&b(r[0].length),r;}function b(e){t=t.substring(e);}return function(e){var i;return t=e,i=h(r),t.length>0&&n("Invalid input not EOF"),i;};}(),tG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tz=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tV=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,tj=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,tU={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},tH=tc(function(e){return tB("angular"===e.type?Number(e.value):tU[e.value]||0,"deg");}),tW=tc(function(e){var t=50,n=50,r="%",i="%";if((null==e?void 0:e.type)==="position"){var a=e.value,o=a.x,s=a.y;(null==o?void 0:o.type)==="position-keyword"&&("left"===o.value?t=0:"center"===o.value?t=50:"right"===o.value?t=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),(null==s?void 0:s.type)==="position-keyword"&&("left"===s.value?t=0:"center"===s.value?n=50:"right"===s.value?t=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),((null==o?void 0:o.type)==="px"||(null==o?void 0:o.type)==="%"||(null==o?void 0:o.type)==="em")&&(r=null==o?void 0:o.type,t=Number(o.value)),((null==s?void 0:s.type)==="px"||(null==s?void 0:s.type)==="%"||(null==s?void 0:s.type)==="em")&&(i=null==s?void 0:s.type,n=Number(s.value));}return{cx:tB(t,r),cy:tB(n,i)};}),tY=tc(function(e){if(e.indexOf("linear")>-1||e.indexOf("radial")>-1)return tF(e).map(function(e){var t=e.type,n=e.orientation,r=e.colorStops;!function(e){var t=e.length;e[t-1].length=null!==(a=e[t-1].length)&&void 0!==a?a:{type:"%",value:"100"},t>1&&(e[0].length=null!==(o=e[0].length)&&void 0!==o?o:{type:"%",value:"0"});for(var n=0,r=Number(e[0].length.value),i=1;i<t;i++){var a,o,s,l=null===(s=e[i].length)||void 0===s?void 0:s.value;if(!(0,j.isNil)(l)&&!(0,j.isNil)(r)){for(var u=1;u<i-n;u++)e[n+u].length={type:"%",value:"".concat(r+(Number(l)-r)*u/(i-n))};n=i,r=Number(l);}}}(r);var i=r.map(function(e){var t,n;return{offset:tB(Number(e.length.value),"%"),color:(t=e.type,n=e.value,"hex"===t?"#".concat(n):"literal"===t?n:"rgb"===t?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")"))};});if("linear-gradient"===t)return new tT(tS.LinearGradient,{angle:n?tH(n):tP,steps:i});if("radial-gradient"===t&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var a,o=tW(n[0].at),s=o.cx,l=o.cy;if(n[0].style){var u=n[0].style,c=u.type,d=u.value;"extent-keyword"===c?(tL[d]||(tL[d]=new tM(d)),a=tL[d]):a=tB(d,c);}return new tT(tS.RadialGradient,{cx:s,cy:l,size:a,steps:i});}});var t=e[0];if("("===e[1]||"("===e[2]){if("l"===t){var n=tG.exec(e);if(n){var r,i=(null===(r=n[2].match(tj))||void 0===r?void 0:r.map(function(e){return e.split(":");}))||[];return[new tT(tS.LinearGradient,{angle:tB(parseFloat(n[1]),"deg"),steps:i.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tB(100*Number(n),"%"),color:r};})})];}}else if("r"===t){var a=function(e){var t=tz.exec(e);if(t){var n,r=(null===(n=t[4].match(tj))||void 0===n?void 0:n.map(function(e){return e.split(":");}))||[];return{cx:tB(50,"%"),cy:tB(50,"%"),steps:r.map(function(e){var t=(0,G.default)(e,2),n=t[0],r=t[1];return{offset:tB(100*Number(n),"%"),color:r};})};}return null;}(e);if(a){if(!(0,j.isString)(a))return[new tT(tS.RadialGradient,a)];e=a;}}else if("p"===t)return function(e){var t=tV.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat";}return{image:r,repetition:n};}return null;}(e);}});function tq(e){return e&&!!e.image;}function tX(e){return e&&!(0,j.isNil)(e.r)&&!(0,j.isNil)(e.g)&&!(0,j.isNil)(e.b);}var t$=tc(function(e){if(tq(e))return(0,L.default)({repetition:"repeat"},e);if((0,j.isNil)(e)&&(e=""),"transparent"===e)return tD;if("currentColor"===e)e="black";else if("none"===e)return tR;var t=tY(e);if(t)return t;var n=e6(e),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),tI.apply(void 0,r);});function tK(e,t){if(tX(e)&&tX(t))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round((0,j.clamp)(t[n],0,255));return t[3]=(0,j.clamp)(t[3],0,1),"rgba(".concat(t.join(","),")");}];}function tZ(e,t){if((0,j.isNil)(t))return tB(0,"px");if(isFinite(Number(t="".concat(t).trim().toLowerCase()))){if("px".search(e)>=0)return tB(Number(t),"px");if("deg".search(e)>=0)return tB(Number(t),"deg");}var n=[];t=t.replace(e,function(e){return n.push(e),"U".concat(e);});var r="U(".concat(e.source,")");return n.map(function(e){return tB(Number(t.replace(RegExp("U".concat(e),"g"),"").replace(RegExp(r,"g"),"*0")),e);})[0];}var tQ=function(e){return tZ(/px/g,e);},tJ=tc(tQ);tc(function(e){return tZ(RegExp("%","g"),e);});var t0=function(e){return(0,j.isNumber)(e)||isFinite(Number(e))?tB(Number(e)||0,"px"):tZ(RegExp("px|%|em|rem","g"),e);},t1=tc(t0),t2=function(e){return tZ(RegExp("deg|rad|grad|turn","g"),e);},t3=tc(t2);function t4(e){var t=0;return e.unit===td.kDegrees?t=e.value:e.unit===td.kRadians?t=Number(e.value)*eb:e.unit===td.kTurns?t=360*Number(e.value):e.value&&(t=e.value),t;}function t6(e,t){var n;return(Array.isArray(e)?n=e.map(function(e){return Number(e);}):(0,j.isString)(e)?n=e.split(" ").map(function(e){return Number(e);}):(0,j.isNumber)(e)&&(n=[e]),2===t)?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===t?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===t&&n.length%2==1?[].concat((0,I.default)(n),(0,I.default)(n)):n;}function t5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.unit===td.kPixels)return Number(e.value);if(e.unit===td.kPercentage&&n){var i=n.nodeName===Q.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2;}return 0;}var t8=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function t9(e){return e.toString();}var t7=function(e){return"number"==typeof e?tB(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?tB(Number(e)):tB(0);},ne=tc(t7);function nt(e,t){return[e,t,t9];}function nn(e,t){return function(n,r){return[n,r,function(n){return t9((0,j.clamp)(n,e,t));}];};}function nr(e,t){if(e.length===t.length)return[e,t,function(e){return e;}];}function ni(e){return 0===e.parsedStyle.d.totalLength&&(e.parsedStyle.d.totalLength=(0,j.getTotalLength)(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength;}function na(e,t){return e[0]===t[0]&&e[1]===t[1];}function no(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.acos((a+o-(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)))/(2*Math.sqrt(a)*Math.sqrt(o)));if(!s||0===Math.sin(s)||(0,j.isNumberEqual)(s,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return{xExtra:t/2*(1/Math.sin(s/2))*Math.cos(s/2-(l=l>Math.PI/2?Math.PI-l:l))-t/2||0,yExtra:t/2*(1/Math.sin(s/2))*Math.cos((u=u>Math.PI/2?Math.PI-u:u)-s/2)-t/2||0};}function ns(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])];}tc(function(e){return(0,j.isString)(e)?e.split(" ").map(ne):e.map(ne);});var nl=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r);},nu=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n);var l=(r=(0,j.mod)(r,360))*em;if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-o.x)/2,c=(e.y-o.y)/2,d={x:Math.cos(l)*u+Math.sin(l)*c,y:-Math.sin(l)*u+Math.cos(l)*c},h=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var f=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2))/(Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2)),p=(i!==a?1:-1)*Math.sqrt(f=f<0?0:f),v={x:p*(t*d.y/n),y:p*(-(n*d.x)/t)},g={x:Math.cos(l)*v.x-Math.sin(l)*v.y+(e.x+o.x)/2,y:Math.sin(l)*v.x+Math.cos(l)*v.y+(e.y+o.y)/2},m={x:(d.x-v.x)/t,y:(d.y-v.y)/n},y=nl({x:1,y:0},m),b=nl(m,{x:(-d.x-v.x)/t,y:(-d.y-v.y)/n});!a&&b>0?b-=2*Math.PI:a&&b<0&&(b+=2*Math.PI);var E=y+(b%=2*Math.PI)*s,x=t*Math.cos(E),k=n*Math.sin(E);return{x:Math.cos(l)*x-Math.sin(l)*k+g.x,y:Math.sin(l)*x+Math.cos(l)*k+g.y,ellipticalArcStartAngle:y,ellipticalArcEndAngle:y+b,ellipticalArcAngle:E,ellipticalArcCenter:g,resultantRx:t,resultantRy:n};};function nc(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,d=nu({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},t),h=nu({x:e.prePoint[0],y:e.prePoint[1]},a,s,l,!!u,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),f=h.x-d.x,p=h.y-d.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v};}function nd(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]);}function nh(e,t){return nd(e)*nd(t)?(e[0]*t[0]+e[1]*t[1])/(nd(e)*nd(t)):1;}function nf(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(nh(e,t));}var np=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};try{t=(0,j.normalizePath)(e);}catch(n){t=(0,j.normalizePath)(""),console.error("[g]: Invalid SVG Path definition: ".concat(e));}!function(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:("C"===i||"A"===i||"Q"===i)&&(o=[n[n.length-2],n[n.length-1]]),o&&na(a,o)&&(e.splice(t,1),t--);}}}(t);var t,n=function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break;}}return t;}(t),r=function(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]]);}return r.length>0&&n.push(r),{polygons:t,polylines:n};}(t),i=r.polygons,a=r.polylines,o=function(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var l=e[s];r=e[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var d=function(e,t){var n=t[1],r=t[2],i=(0,j.mod)(t[3]*em,2*Math.PI),a=t[4],o=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?-(v*r)*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,E=[(d-g)/n,(h-m)/r],x=[(-1*d-g)/n,(-1*h-m)/r],k=nf([1,0],E),S=nf(E,x);return -1>=nh(E,x)&&(S=Math.PI),nh(E,x)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:na(e,[u,c])?0:n,ry:na(e,[u,c])?0:r,startAngle:k,endAngle:k+S,xRotation:i,arcFlag:a,sweepFlag:o};}(n,l);c.arcParams=d;}if("Z"===u)n=i,r=e[a+1];else{var h=l.length;n=[l[h-2],l[h-1]];}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),c.currentPoint=n,t[a]&&na(n,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]];}else if("T"===u){var g=t[s-1],m=ns(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]]);}else if("C"===u){var y=[l[1],l[2]],b=[l[3],l[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-y[0],b[1]-y[1]]);}else if("S"===u){var E=t[s-1],x=ns(E.currentPoint,p),k=[l[1],l[2]];"C"===E.command?(c.command="C",c.startTangent=[p[0]-x[0],p[1]-x[1]]):(c.command="SQ",c.startTangent=[p[0]-k[0],p[1]-k[1]]),c.endTangent=[n[0]-k[0],n[1]-k[1]];}else if("A"===u){var S=nc(c,0),T=S.x,M=S.y,w=nc(c,1,!1),N=w.x,C=w.y;c.startTangent=[T,M],c.endTangent=[N,C];}t.push(c);}return t;}(t),s=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=(0,Y.quadBox)(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=(0,Y.cubicBox)(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var d=o.arcParams;c=(0,Y.arcBox)(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height));}n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0;});var h=(0,j.min)(n),f=(0,j.min)(r),p=(0,j.max)(n),v=(0,j.max)(r);if(0===i.length)return{x:h,y:f,width:p-h,height:v-f};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint;y[0]===h?h-=no(m,0).xExtra:y[0]===p&&(p+=no(m,0).xExtra),y[1]===f?f-=no(m,t).yExtra:y[1]===v&&(v+=no(m,t).yExtra);}return{x:h,y:f,width:p-h,height:v-f};}(o,0),l=s.x,u=s.y,c=s.width,d=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(d)?d:0}};},nv=tc(np);function ng(e){return(0,j.isString)(e)?nv(e):np(e);}function nm(e,t,n){var r=e.curve,i=t.curve;r&&0!==r.length||(r=(0,j.path2Curve)(e.absolutePath,!1),e.curve=r),i&&0!==i.length||(i=(0,j.path2Curve)(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=(0,j.equalizeSegments)(r,i));var o=(0,j.getDrawDirection)(a[0])!==(0,j.getDrawDirection)(a[1])?(0,j.reverseCurve)(a[0]):(0,j.clonePath)(a[0]);return[o,(0,j.getRotatedCurve)(a[1],o),function(e){return e;}];}function ny(e,t){return[e.points,t.points,function(e){return e;}];}var nb=/\s*(\w+)\(([^)]*)\)/g;function nE(e){return function(t){var n=0;return e.map(function(e){return null===e?t[n++]:e;});};}function nx(e){return e;}var nk={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],nx],matrix3d:["NNNNNNNNNNNNNNNN",nx],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",nE([null,null,new tC(1)]),nx],scaleX:["N",nE([null,new tC(1),new tC(1)]),nE([null,new tC(1)])],scaleY:["N",nE([new tC(1),null,new tC(1)]),nE([new tC(1),null])],scaleZ:["N",nE([new tC(1),new tC(1),null])],scale3d:["NNN",nx],skew:["Aa",null,nx],skewX:["A",null,nE([null,tP])],skewY:["A",null,nE([tP,null])],translate:["Tt",nE([null,null,t_]),nx],translateX:["T",nE([null,t_,t_]),nE([null,t_])],translateY:["T",nE([t_,null,t_]),nE([t_,null])],translateZ:["L",nE([t_,t_,null])],translate3d:["TTL",nx]};function nS(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!nk[a])return[];var s=o.map(function(e){return tB(e);});t.push({t:a,d:s});}return t;}function nT(e){if(Array.isArray(e))return nS(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nb.lastIndex=0;(t=nb.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nk[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tP:t3(e);},N:ne,T:t1,L:tJ})[d.toUpperCase()](c):({a:tP,n:l[0],t:t_})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nb.lastIndex===e.length)return n;}return[];}function nM(e){if(Array.isArray(e))return nS(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(nb.lastIndex=0;(t=nb.exec(e))&&t.index===r;){r=t.index+t[0].length;var i=t[1],a=nk[i];if(!a)break;var o=t[2].split(","),s=a[0];if(s.length<o.length)break;for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u],h=void 0;if(void 0===(h=c?({A:function(e){return"0"===e.trim()?tP:t2(e);},N:t7,T:t0,L:tQ})[d.toUpperCase()](c):({a:tP,n:l[0],t:t_})[d]))return[];l.push(h);}if(n.push({t:i,d:l}),nb.lastIndex===e.length)return n;}return[];}function nw(e){switch(e.t){case"rotateX":return[1,0,0,0,0,Math.cos(i=t4(e.d[0])*em),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return[Math.cos(i=t4(e.d[0])*em),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return[Math.cos(i=t4(e.d[0])*em),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=t4(e.d[3])*em;var t,n,r,i,a=t*t+n*n+r*r;if(0===a)t=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);t/=o,n/=o,r/=o;}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(t*n*u+r*l),2*(t*r*u-n*l),0,2*(t*n*u-r*l),1-2*(t*t+r*r)*u,2*(n*r*u+t*l),0,2*(t*r*u+n*l),2*(n*r*u-t*l),1-2*(t*t+n*n)*u,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var c=t4(e.d[0])*em;return[1,Math.tan(t4(e.d[1])*em),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return[1,0,0,0,Math.tan(i=t4(e.d[0])*em),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return[1,Math.tan(i=t4(e.d[0])*em),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t5(e.d[0],0,null)||0,n=t5(e.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t5(e.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=t5(e.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=t5(e.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,t=t5(e.d[0],0,null)||0,n=t5(e.d[1],0,null)||0,r=t5(e.d[2],0,null)||0,1];case"perspective":var d=t5(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(e){return e.value;});}}function nN(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]];}function nC(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return!function(e,t,n,r,i,a){if(!(!function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0;}(eT,e)||(V.mat4.copy(eM,eT),eM[3]=0,eM[7]=0,eM[11]=0,eM[15]=1,1e-8>Math.abs(V.mat4.determinant(eM))))){var o=eT[3],s=eT[7],l=eT[11],u=eT[12],c=eT[13],d=eT[14],h=eT[15];if(0!==o||0!==s||0!==l){if(ew[0]=o,ew[1]=s,ew[2]=l,ew[3]=h,!V.mat4.invert(eM,eM))return;V.mat4.transpose(eM,eM),V.vec4.transformMat4(i,ew,eM);}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=c,t[2]=d,eN[0][0]=eT[0],eN[0][1]=eT[1],eN[0][2]=eT[2],eN[1][0]=eT[4],eN[1][1]=eT[5],eN[1][2]=eT[6],eN[2][0]=eT[8],eN[2][1]=eT[9],eN[2][2]=eT[10],n[0]=V.vec3.length(eN[0]),V.vec3.normalize(eN[0],eN[0]),r[0]=V.vec3.dot(eN[0],eN[1]),e_(eN[1],eN[1],eN[0],1,-r[0]),n[1]=V.vec3.length(eN[1]),V.vec3.normalize(eN[1],eN[1]),r[0]/=n[1],r[1]=V.vec3.dot(eN[0],eN[2]),e_(eN[2],eN[2],eN[0],1,-r[1]),r[2]=V.vec3.dot(eN[1],eN[2]),e_(eN[2],eN[2],eN[1],1,-r[2]),n[2]=V.vec3.length(eN[2]),V.vec3.normalize(eN[2],eN[2]),r[1]/=n[2],r[2]/=n[2],V.vec3.cross(eC,eN[1],eN[2]),0>V.vec3.dot(eN[0],eC))for(var f=0;f<3;f++)n[f]*=-1,eN[f][0]*=-1,eN[f][1]*=-1,eN[f][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+eN[0][0]-eN[1][1]-eN[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-eN[0][0]+eN[1][1]-eN[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-eN[0][0]-eN[1][1]+eN[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+eN[0][0]+eN[1][1]+eN[2][2],0)),eN[2][1]>eN[1][2]&&(a[0]=-a[0]),eN[0][2]>eN[2][0]&&(a[1]=-a[1]),eN[1][0]>eN[0][1]&&(a[2]=-a[2]);}}(0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(nw).reduce(nN),t,n,r,i,a),[[t,n,r,a,i]];}var n_=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n;}return function(t,n,r,i,a){for(var o,s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)s[l][3]=a[l];for(var u=0;u<3;u++)for(var c=0;c<3;c++)s[3][u]+=t[c]*s[c][u];var d=i[0],h=i[1],f=i[2],p=i[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+f*f),v[0][1]=2*(d*h-f*p),v[0][2]=2*(d*f+h*p),v[1][0]=2*(d*h+f*p),v[1][1]=1-2*(d*d+f*f),v[1][2]=2*(h*f-d*p),v[2][0]=2*(d*f-h*p),v[2][1]=2*(h*f+d*p),v[2][2]=1-2*(d*d+h*h),s=e(s,v);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],s=e(s,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],s=e(s,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],s=e(s,g));for(var m=0;m<3;m++)for(var y=0;y<3;y++)s[m][y]*=n[m];return 0===(o=s)[0][2]&&0===o[0][3]&&0===o[1][2]&&0===o[1][3]&&0===o[2][0]&&0===o[2][1]&&1===o[2][2]&&0===o[2][3]&&0===o[3][2]&&1===o[3][3]?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3]);};}();function nP(e){return e.toFixed(6).replace(".000000","");}function nA(e,t){var n,r;return(e.decompositionPair!==t&&(e.decompositionPair=t,n=nC(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=nC(t)),null===n[0]||null===r[0])?[[!1],[!0],function(n){return n?t[0].d:e[0].d;}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=function(e,t,n){var r=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n;}(e,t);r=(0,j.clamp)(r,-1,1);var i=[];if(1===r)i=e;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i;}(n[0][3],r[0][3],e[5]);return n_(e[0],e[1],e[2],t,e[4]).map(nP).join(",");}]);}function nO(e){return e.replace(/[XY]/,"");}function nL(e){return e.replace(/(X|Y|Z|3d)?$/,"3d");}function nR(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=0;i<e.length;i++)!function(){var n=e[i],r=n.t,a=n.d,o="scale"===r.substring(0,5)?1:0;t.push({t:r,d:a.map(function(e){return"number"==typeof e?tB(o):tB(o,e.unit);})});}();}var a=[],o=[],s=[];if(e.length!==t.length){var l=nA(e,t);a=[l[0]],o=[l[1]],s=[["matrix",[l[2]]]];}else for(var u=0;u<e.length;u++){var c=e[u].t,d=t[u].t,h=e[u].d,f=t[u].d,p=nk[c],v=nk[d],g=void 0;if("perspective"===c&&"perspective"===d||("matrix"===c||"matrix3d"===c)&&("matrix"===d||"matrix3d"===d)){var m=nA([e[u]],[t[u]]);a.push(m[0]),o.push(m[1]),s.push(["matrix",[m[2]]]);continue;}if(c===d)g=c;else if(p[2]&&v[2]&&nO(c)===nO(d))g=nO(c),h=p[2](h),f=v[2](f);else if(p[1]&&v[1]&&nL(c)===nL(d))g=nL(c),h=p[1](h),f=v[1](f);else{var y=nA(e,t);a=[y[0]],o=[y[1]],s=[["matrix",[y[2]]]];break;}for(var b=[],E=[],x=[],k=0;k<h.length;k++){var S=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=e.value||0,s=t.value||0,l=tN(e.unit),u=e.convertTo(l),c=t.convertTo(l);return u&&c?(o=u.value,s=c.value,a=tE(e.unit)):(tC.isLength(e.unit)||tC.isLength(t.unit))&&(o=t5(e,i,n),s=t5(t,i,n),a="px"),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a;}];}(h[k],f[k],n,!1,k);b[k]=S[0],E[k]=S[1],x.push(S[2]);}a.push(b),o.push(E),s.push([g,x]);}if(r){var T=a;a=o,o=T;}return[a,o,function(e){return e.map(function(e,t){var n=e.map(function(e,n){return s[t][1][n](e);}).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),"matrix3d"===s[t][0]&&6===n.split(",").length&&(s[t][0]="matrix"),"".concat(s[t][0],"(").concat(n,")");}).join(" ");}];}var nD=tc(function(e){if((0,j.isString)(e)){if("text-anchor"===e)return[tB(0,"px"),tB(0,"px")];var t=e.split(" ");return(1===t.length&&("top"===t[0]||"bottom"===t[0]?(t[1]=t[0],t[0]="center"):t[1]="center"),2!==t.length)?null:[t1(nI(t[0])),t1(nI(t[1]))];}return[tB(e[0]||0,"px"),tB(e[1]||0,"px")];});function nI(e){return"center"===e?"50%":"left"===e||"top"===e?"0%":"right"===e||"bottom"===e?"100%":e;}var nB=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ej.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ej.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ej.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ej.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ej.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ej.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ej.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ej.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ej.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ej.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ej.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ej.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ej.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ej.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ej.FILTER},{n:"clipPath",syntax:ej.DEFINED_PATH},{n:"textPath",syntax:ej.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ej.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:ej.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:ej.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ej.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ej.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ej.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ej.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ej.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ej.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ej.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ej.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:ej.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ej.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ej.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ej.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ej.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ej.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ej.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ej.NUMBER,d:function(e){return e===Q.PATH||e===Q.POLYGON||e===Q.POLYLINE?"4":"10";}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ej.MARKER},{n:"markerEnd",syntax:ej.MARKER},{n:"markerMid",syntax:ej.MARKER},{n:"markerStartOffset",syntax:ej.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ej.LENGTH,l:!0,int:!0,d:"0"}],nF=new Set(nB.filter(function(e){return!!e.l;}).map(function(e){return e.n;})),nG={},nz=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.runtime=t,nB.forEach(function(e){n.registerMetadata(e);});},[{key:"registerMetadata",value:function(e){[e.n].concat((0,I.default)(e.a||[])).forEach(function(t){nG[t]=e;});}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e];}},{key:"processProperties",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var i=e.parsedStyle.clipPath,a=e.parsedStyle.offsetPath;!function(e,t){var n=nV(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r]);}(e,t);var o=!!r.forceUpdateGeometry;if(!o){for(var s in t)if(nF.has(s)){o=!0;break;}}var l=nV(e);l.has("fill")&&t.fill&&(e.parsedStyle.fill=t$(t.fill)),l.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=t$(t.stroke)),l.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=t$(t.shadowColor)),l.has("filter")&&t.filter&&(e.parsedStyle.filter=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;(e=n.exec(t))&&e.index===i;)if(i=e.index+e[0].length,t8.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map(function(e){return tZ(/deg|rad|grad|turn|px|%/g,e)||t$(e);})}),n.lastIndex===t.length)return r;return[];}(t.filter)),l.has("radius")&&!(0,j.isNil)(t.radius)&&(e.parsedStyle.radius=t6(t.radius,4)),l.has("lineDash")&&!(0,j.isNil)(t.lineDash)&&(e.parsedStyle.lineDash=t6(t.lineDash,"even")),l.has("points")&&t.points&&(e.parsedStyle.points=(n=t.points,{points:(0,j.isString)(n)?n.split(" ").map(function(e){var t=e.split(","),n=(0,G.default)(t,2),r=n[0],i=n[1];return[Number(r),Number(i)];}):n,totalLength:0,segments:[]})),l.has("d")&&""===t.d&&(e.parsedStyle.d=(0,L.default)({},eV)),l.has("d")&&t.d&&(e.parsedStyle.d=ng(t.d)),l.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[ej.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),l.has("clipPath")&&!(0,j.isUndefined)(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[ej.DEFINED_PATH].calculator("clipPath",i,t.clipPath,e,this.runtime),l.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[ej.DEFINED_PATH].calculator("offsetPath",a,t.offsetPath,e,this.runtime),l.has("transform")&&t.transform&&(e.parsedStyle.transform=nT(t.transform)),l.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=nD(t.transformOrigin)),l.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[ej.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),l.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[ej.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),l.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[ej.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),l.has("zIndex")&&!(0,j.isNil)(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[ej.Z_INDEX].postProcessor(e),l.has("offsetDistance")&&!(0,j.isNil)(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[ej.OFFSET_DISTANCE].postProcessor(e),l.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[ej.TRANSFORM].postProcessor(e),l.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[ej.TRANSFORM_ORIGIN].postProcessor(e),o&&(e.dirty(!0,!0),r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e));}},{key:"updateGeometry",value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||(r.contentBounds=new eo),r.renderBounds||(r.renderBounds=new eo);var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=a.cy,l=a.cz,u=a.hwidth,c=void 0===u?0:u,d=a.hheight,h=void 0===d?0:d,f=a.hdepth,p=[Math.abs(c),Math.abs(h),void 0===f?0:f],v=i.stroke,g=i.lineWidth,m=i.increasedLineWidthForHitTesting,y=i.shadowType,b=void 0===y?"outer":y,E=i.shadowColor,x=i.filter,k=i.transformOrigin,S=[void 0===o?0:o,void 0===s?0:s,void 0===l?0:l];r.contentBounds.update(S,p);var T=t===Q.POLYLINE||t===Q.POLYGON||t===Q.PATH?Math.SQRT2:.5;if(v&&!v.isNone){var M=(((void 0===g?1:g)||0)+((void 0===m?0:m)||0))*T;p[0]+=M,p[1]+=M;}if(r.renderBounds.update(S,p),E&&b&&"inner"!==b){var w=r.renderBounds,N=w.min,C=w.max,_=i.shadowBlur,P=i.shadowOffsetX,A=i.shadowOffsetY,O=_||0,L=P||0,R=A||0,D=N[0]-O+L,I=C[0]+O+L,B=N[1]-O+R,F=C[1]+O+R;N[0]=Math.min(N[0],D),C[0]=Math.max(C[0],I),N[1]=Math.min(N[1],B),C[1]=Math.max(C[1],F),r.renderBounds.setMinMax(N,C);}(void 0===x?[]:x).forEach(function(e){var t=e.name,n=e.params;if("blur"===t){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,V.vec3.add(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]));}else if("drop-shadow"===t){var a=n[0].value,o=n[1].value,s=n[2].value,l=r.renderBounds,u=l.min,c=l.max,d=u[0]-s+a,h=c[0]+s+a,f=u[1]-s+o,p=c[1]+s+o;u[0]=Math.min(u[0],d),c[0]=Math.max(c[0],h),u[1]=Math.min(u[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(u,c);}}),e.geometry.dirty=!1;var G=h<0,z=(c<0?-1:1)*(k?t5(k[0],0,e,!0):0),j=(G?-1:1)*(k?t5(k[1],1,e,!0):0);(z||j)&&e.setOrigin(z,j);}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===Q.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===Q.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR));}}]);function nV(e){return e.constructor.PARSED_STYLE_LIST;}var nj=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt;},[{key:"calculator",value:function(e,t,n,r){return t4(n);}}]),nU=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r,i){return n instanceof tM&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),"clipPath"===e&&r.forEach(function(e){0===e.childNodes.length&&i.sceneGraphService.dirtyToRoot(e);}),n;}}]),nH=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=t$,this.mixer=tK;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tM?"none"===n.value?tR:tD:n;}}]),nW=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n){return n instanceof tM?[]:n;}}]);function nY(e){var t=e.parsedStyle.fontSize;return(0,j.isNil)(t)?null:t;}var nq=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt;},[{key:"calculator",value:function(e,t,n,r,i){if((0,j.isNumber)(n))return n;if(!tC.isRelativeUnit(n.unit))return n.value;if(n.unit===td.kPercentage)return 0;if(n.unit===td.kEms){if(r.parentNode){var a,o=nY(r.parentNode);if(o)return o*n.value;}return 0;}if(n.unit===td.kRems){if(null!=r&&null!==(a=r.ownerDocument)&&void 0!==a&&a.documentElement){var s=nY(r.ownerDocument.documentElement);if(s)return s*n.value;}return 0;}}}]),nX=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nr;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),n$=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nr;},[{key:"calculator",value:function(e,t,n){return n.map(function(e){return e.value;});}}]),nK=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){n instanceof tM&&(n=null);var i,a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a;}}]),nZ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nt;},[{key:"calculator",value:function(e,t,n){return n.value;}}]),nQ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nn(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===Q.LINE||i===Q.PATH||i===Q.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y);}}}}]),nJ=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=nn(0,1);},[{key:"calculator",value:function(e,t,n){return n.value;}}]),n0=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=ng,this.mixer=nm;},[{key:"calculator",value:function(e,t,n){return n instanceof tM&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ed(0,0,0,0)}:n;}}]),n1=(0,D.default)(function e(){(0,R.default)(this,e),this.mixer=ny;}),n2=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).mixer=nn(0,1/0),e;}return(0,F.default)(t,e),(0,D.default)(t);}(nq),n3=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n instanceof tM?"unset"===n.value?"":n.value:"".concat(n);}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||"";}}]),n4=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a;}return n.value;}}]),n6=new WeakMap,n5="undefined"!=typeof window&&void 0!==window.document;function n8(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t);}}return n-r;}function n9(e,t){if(n5)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t);}var n7={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},re="object"==typeof performance&&performance.now?performance:Date;function rt(e){return e.nodeName===Q.FRAGMENT||e.getRootNode().nodeName===Q.FRAGMENT;}var rn=1,rr="object"==typeof self&&self.self===self?self:"object"==typeof Z&&Z.global===Z?Z:{},ri=Date.now(),ra={},ro=Date.now(),rs=function(e){if("function"!=typeof e)throw TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-ro,r=rn++;return ra[r]=e,Object.keys(ra).length>1||setTimeout(function(){ro=t;var e=ra;ra={},Object.keys(e).forEach(function(t){return e[t](rr.performance&&"function"==typeof rr.performance.now?rr.performance.now():Date.now()-ri);});},n>16?0:16-n),r;},rl=function(e){return"string"!=typeof e?rs:""===e?rr.requestAnimationFrame:rr["".concat(e,"RequestAnimationFrame")];},ru=function(e,t){for(var n=0;void 0!==e[n];){if(t(e[n]))return e[n];n+=1;}}(["","webkit","moz","ms","o"],function(e){return!!rl(e);}),rc=rl(ru),rd="string"!=typeof ru?function(e){delete ra[e];}:""===ru?rr.cancelAnimationFrame:rr["".concat(ru,"CancelAnimationFrame")]||rr["".concat(ru,"CancelRequestAnimationFrame")];rr.requestAnimationFrame=rc,rr.cancelAnimationFrame=rd;var rh=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"getCallbacksNum",value:function(){return this.callbacks.length;}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(e){return e.apply(void 0,t);}));}}]),rf=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tapPromise",value:function(e,t){this.callbacks.push(t);}},{key:"promise",value:(y=(0,X.default)((0,q.default)().mark(function e(){var t,n,r,i,a=arguments;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=6;break;}return e.next=1,(t=this.callbacks)[0].apply(t,a);case 1:n=e.sent,r=1;case 2:if(!(r<this.callbacks.length)){e.next=5;break;}return i=this.callbacks[r],e.next=3,i(n);case 3:n=e.sent;case 4:r++,e.next=2;break;case 5:return e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop();}},e,this);})),function(){return y.apply(this,arguments);})}]),rp=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=arguments;this.callbacks.forEach(function(e){e.apply(void 0,r);});}}]),rv=(0,D.default)(function e(){(0,R.default)(this,e),this.callbacks=[];},[{key:"tap",value:function(e,t){this.callbacks.push(t);}},{key:"call",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=1;a<this.callbacks.length;a++)i=(0,this.callbacks[a])(i);return i;}return null;}}]),rg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rm=/([\"\'])[^\'\"]+\1/;function ry(e){var t=e.fontSize,n=e.fontFamily,r=e.fontStyle,i=e.fontVariant,a=e.fontWeight;return{fontSize:void 0===t?16:t,fontFamily:void 0===n?"sans-serif":n,fontStyle:void 0===r?"normal":r,fontVariant:void 0===i?"normal":i,fontWeight:void 0===a?"normal":a};}var rb=tc(function(e){for(var t=ry(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight,s=(0,j.isNumber)(n)&&"".concat(n,"px")||"16px",l=r.split(","),u=l.length-1;u>=0;u--){var c=l[u].trim();!rm.test(c)&&0>rg.indexOf(c)&&(c='"'.concat(c,'"')),l[u]=c;}return"".concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l.join(","));},function(e){var t=ry(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle,a=t.fontVariant,o=t.fontWeight;return"".concat(i,"_").concat(a,"_").concat(o,"_").concat(n,"_").concat(r);}),rE=function(e){return Math.max(e,1e-6);};function rx(e,t,n){return V.mat4.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e;}var rk=V.mat4.create(),rS=V.mat4.create(),rT={scale:function(e){V.mat4.fromScaling(rk,[e[0].value,e[1].value,1].map(function(e){return rE(e);}));},scaleX:function(e){V.mat4.fromScaling(rk,[e[0].value,1,1].map(function(e){return rE(e);}));},scaleY:function(e){V.mat4.fromScaling(rk,[1,e[0].value,1].map(function(e){return rE(e);}));},scaleZ:function(e){V.mat4.fromScaling(rk,[1,1,e[0].value].map(function(e){return rE(e);}));},scale3d:function(e){V.mat4.fromScaling(rk,[e[0].value,e[1].value,e[2].value].map(function(e){return rE(e);}));},translate:function(e){V.mat4.fromTranslation(rk,[e[0].value,e[1].value,0]);},translateX:function(e){V.mat4.fromTranslation(rk,[e[0].value,0,0]);},translateY:function(e){V.mat4.fromTranslation(rk,[0,e[0].value,0]);},translateZ:function(e){V.mat4.fromTranslation(rk,[0,0,e[0].value]);},translate3d:function(e){V.mat4.fromTranslation(rk,[e[0].value,e[1].value,e[2].value]);},rotate:function(e){V.mat4.fromZRotation(rk,t4(e[0])*em);},rotateX:function(e){V.mat4.fromXRotation(rk,t4(e[0])*em);},rotateY:function(e){V.mat4.fromYRotation(rk,t4(e[0])*em);},rotateZ:function(e){V.mat4.fromZRotation(rk,t4(e[0])*em);},rotate3d:function(e){V.mat4.fromRotation(rk,t4(e[3])*em,[e[0].value,e[1].value,e[2].value]);},skew:function(e){rx(rk,e[0].value*em,e[1].value*em);},skewX:function(e){rx(rk,e[0].value*em,0);},skewY:function(e){rx(rk,0,e[0].value*em);},matrix:function(e){V.mat4.set(rk,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1);},matrix3d:function(e){V.mat4.set.apply(V.mat4,[rk].concat((0,I.default)(e.map(function(e){return e.value;}))));}},rM=V.vec3.fromValues(1,1,1),rw=V.vec3.create(),rN={translate:function(e,t){ib.sceneGraphService.setLocalScale(e,rM,!1),ib.sceneGraphService.setLocalEulerAngles(e,rw,void 0,void 0,!1),ib.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),ib.sceneGraphService.dirtyLocalTransform(e,e.transformable);}};function rC(e,t){if(e.length){if(1===e.length&&rN[e[0].t]){rN[e[0].t](t,e[0].d);return;}for(var n=V.mat4.identity(rS),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=rT[a];s&&(s(o),V.mat4.mul(n,n,rk));}t.setLocalTransform(n);}else t.resetLocalTransform();return t.getLocalTransform();}var r_=(0,D.default)(function e(){(0,R.default)(this,e),this.parser=nM,this.mixer=nR;},[{key:"calculator",value:function(e,t,n,r){return n instanceof tM?[]:n;}},{key:"postProcessor",value:function(e){rC(e.parsedStyle.transform,e);}}]),rP=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===td.kPixels&&t[1].unit===td.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds();}}]),rA=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"calculator",value:function(e,t,n,r){return n.value;}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&t.dirty(),r&&(r.dirty=!0,r.dirtyReason=eI.Z_INDEX_CHANGED);}}}]),rO=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.r,a=void 0===i?0:i;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:a,hheight:a};}}]),rL=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.cx,r=e.cy,i=e.rx,a=e.ry;return{cx:void 0===n?0:n,cy:void 0===r?0:r,hwidth:void 0===i?0:i,hheight:void 0===a?0:a};}}]),rR=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.min(n,i),s=(Math.max(t,r)-a)/2,l=(Math.max(n,i)-o)/2;return{cx:a+s,cy:o+l,hwidth:s,hheight:l};}}]),rD=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width,a=t.height,o=i/2,s=a/2;return{cx:n+o,cy:r+s,hwidth:o,hheight:s};}}]),rI=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e){if(e.points&&(0,j.isArray)(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),r=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[0];}))),i=Math.min.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),a=Math.max.apply(Math,(0,I.default)(t.map(function(e){return e[1];}))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s};}return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rB=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.src,a=e.width,o=e.height,s=void 0===a?0:a,l=void 0===o?0:o;return!i||(0,j.isString)(i)||(s||(s=i.width,e.width=s),l||(l=i.height,e.height=l)),{cx:(void 0===n?0:n)+s/2,cy:(void 0===r?0:r)+l/2,hwidth:s/2,hheight:l/2};}}]),rF=(0,D.default)(function e(t){(0,R.default)(this,e),this.globalRuntime=t;},[{key:"isReadyToMeasure",value:function(e,t){return e.text;}},{key:"update",value:function(e,t){var n,r=e.text,i=e.textAlign,a=void 0===i?"start":i,o=e.lineWidth,s=void 0===o?1:o,l=e.textBaseline,u=void 0===l?"alphabetic":l,c=e.dx,d=void 0===c?0:c,h=e.dy,f=void 0===h?0:h,p=e.x,v=e.y;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var g=((null==t||null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,m=this.globalRuntime.textService.measureText(r,e,g);e.metrics=m;var y=m.width,b=m.height,E=y/2,x=b/2,k=(void 0===p?0:p)+E;"center"===a||"middle"===a?k+=s/2-E:("right"===a||"end"===a)&&(k+=s-2*E);var S=(void 0===v?0:v)-x;return"middle"===u?S+=x:"top"===u||"hanging"===u?S+=2*x:"alphabetic"===u||("bottom"===u||"ideographic"===u)&&(S+=0),d&&(k+=d),f&&(S+=f),{cx:k,cy:S,hwidth:E,hheight:x};}}]),rG=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0};}}]),rz=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"update",value:function(e,t){var n=e.x,r=e.y,i=e.width,a=void 0===i?0:i,o=e.height,s=void 0===o?0:o;return{cx:(void 0===n?0:n)+a/2,cy:(void 0===r?0:r)+s/2,hwidth:a/2,hheight:s/2};}}]),rV=(0,D.default)(function e(t){(0,R.default)(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ec,this.page=new ec,this.canvas=new ec,this.viewport=new ec,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t;},[{key:"name",get:function(){return this.type;}},{key:"layerX",get:function(){return this.layer.x;}},{key:"layerY",get:function(){return this.layer.y;}},{key:"pageX",get:function(){return this.page.x;}},{key:"pageY",get:function(){return this.page.y;}},{key:"x",get:function(){return this.canvas.x;}},{key:"y",get:function(){return this.canvas.y;}},{key:"canvasX",get:function(){return this.canvas.x;}},{key:"canvasY",get:function(){return this.canvas.y;}},{key:"viewportX",get:function(){return this.viewport.x;}},{key:"viewportY",get:function(){return this.viewport.y;}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"propagationPath",get:function(){return this.composedPath();}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function(){this.propagationStopped=!0;}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw Error(eh);}}]),rj=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).client=new ec,e.movement=new ec,e.offset=new ec,e.global=new ec,e.screen=new ec,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clientX",get:function(){return this.client.x;}},{key:"clientY",get:function(){return this.client.y;}},{key:"movementX",get:function(){return this.movement.x;}},{key:"movementY",get:function(){return this.movement.y;}},{key:"offsetX",get:function(){return this.offset.x;}},{key:"offsetY",get:function(){return this.offset.y;}},{key:"globalX",get:function(){return this.global.x;}},{key:"globalY",get:function(){return this.global.y;}},{key:"screenX",get:function(){return this.screen.x;}},{key:"screenY",get:function(){return this.screen.y;}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e);}},{key:"initMouseEvent",value:function(){throw Error(eh);}}]);}(rV),rU=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).width=0,e.height=0,e.isPrimary=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function(){throw Error("getPredictedEvents is not supported!");}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this);}}]);}(rj),rH=function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,arguments);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this);}}]);}(rj),rW=function(e){function t(e,n){var r;return(0,R.default)(this,t),(r=(0,B.default)(this,t,[null])).type=e,r.detail=null==n?void 0:n.detail,!n||"detail"in n||(r.detail=n),Object.assign(r,n),r;}return(0,F.default)(t,e),(0,D.default)(t);}(rV),rY=(0,D.default)(function e(){(0,R.default)(this,e),this.emitter=new z.default;},[{key:"on",value:function(e,t,n){return this.addEventListener(e,t,n),this;}},{key:"addEventListener",value:function(e,t,n){var r=!1,i=!1;if((0,j.isBoolean)(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o;}r&&(e+="capture"),t=(0,j.isFunction)(t)?t:t.handleEvent;var s=(0,j.isFunction)(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this;}},{key:"off",value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this;}},{key:"removeAllEventListeners",value:function(){var e;null===(e=this.emitter)||void 0===e||e.removeAllListeners();}},{key:"removeEventListener",value:function(e,t,n){if(!this.emitter)return this;((0,j.isBoolean)(n)?n:null==n?void 0:n.capture)&&(e+="capture"),t=(0,j.isFunction)(t)?t:null===(r=t)||void 0===r?void 0:r.handleEvent;var r,i=(0,j.isFunction)(t)?void 0:t;return this.emitter.off(e,t,i),this;}},{key:"emit",value:function(e,t){this.dispatchEvent(new rW(e,t));}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e);}},{key:"dispatchEvent",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;if(t=this.document?this:this.defaultView?this.defaultView:null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView){if(e.manager=t.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],r||(e.target=this),e.manager.dispatchEvent(e,e.type,r);}else this.dispatchEventToSelf(e);return!e.defaultPrevented;}}]),rq=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.mutations=void 0,e.parentNode=null,e.destroyed=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"textContent",get:function(){var e="";this.nodeName===Q.TEXT&&(e+=this.style.text);var t,n=(0,$.default)(this.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.nodeName===Q.TEXT?e+=r.nodeValue:e+=r.textContent;}}catch(e){n.e(e);}finally{n.f();}return e;},set:function(e){var t=this;this.childNodes.slice().forEach(function(e){t.removeChild(e);}),this.nodeName===Q.TEXT&&(this.style.text="".concat(e));}},{key:"getRootNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this;}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0;}},{key:"isDefaultNamespace",value:function(e){throw Error(eh);}},{key:"lookupNamespaceURI",value:function(e){throw Error(eh);}},{key:"lookupPrefix",value:function(e){throw Error(eh);}},{key:"normalize",value:function(){throw Error(eh);}},{key:"isEqualNode",value:function(e){return this===e;}},{key:"isSameNode",value:function(e){return this.isEqualNode(e);}},{key:"parent",get:function(){return this.parentNode;}},{key:"parentElement",get:function(){return null;}},{key:"nextSibling",get:function(){return null;}},{key:"previousSibling",get:function(){return null;}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null;}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null;}},{key:"compareDocumentPosition",value:function(e){if(e===this)return 0;for(var n,r=e,i=this,a=[r],o=[i];null!==(n=r.parentNode)&&void 0!==n?n:i.parentNode;)r=r.parentNode?(a.push(r.parentNode),r.parentNode):r,i=i.parentNode?(o.push(i.parentNode),i.parentNode):i;if(r!==i)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=a.length>o.length?a:o,l=s===a?o:a;if(s[s.length-l.length]===l[0])return s===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var u=s.length-l.length,c=l.length-1;c>=0;c--){var d=l[c],h=s[u+c];if(h!==d){var f=d.parentNode.childNodes;if(f.indexOf(d)<f.indexOf(h)){if(l===a)return t.DOCUMENT_POSITION_PRECEDING;return t.DOCUMENT_POSITION_FOLLOWING;}if(s===a)return t.DOCUMENT_POSITION_PRECEDING;break;}}return t.DOCUMENT_POSITION_FOLLOWING;}},{key:"contain",value:function(e){return this.contains(e);}},{key:"contains",value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t;}},{key:"getAncestor",value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t;}},{key:"forEach",value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(!1===e(n))break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r]);}}}],[{key:"isNode",value:function(e){return!!e.childNodes;}}]);}(rY);rq.DOCUMENT_POSITION_DISCONNECTED=1,rq.DOCUMENT_POSITION_PRECEDING=2,rq.DOCUMENT_POSITION_FOLLOWING=4,rq.DOCUMENT_POSITION_CONTAINS=8,rq.DOCUMENT_POSITION_CONTAINED_BY=16,rq.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var rX=(0,D.default)(function e(t,n){var r=this;(0,R.default)(this,e),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=V.mat4.create(),this.tmpVec3=V.vec3.create(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)r.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;r.dispatchEvent(t,n?"rightdown":"mousedown");}r.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t);},this.onPointerUp=function(e){var t=re.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup");}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var l=o;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var u=2===n.button;r.notifyTarget(n,u?"rightupoutside":"mouseupoutside");}rq.isNode(l)&&(l=l.parentNode);}delete a.pressTargetsByButton[e.button],s=l;}if(s){var c,d=r.clonePointerEvent(n,"click");d.target=s,d.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});var h=r.context.renderingContext.root.ownerDocument.defaultView,f=a.clicksByButton[e.button];f.target===d.target&&t-f.timeStamp<h.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=d.target,f.timeStamp=t,d.detail=f.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==d.pointerType&&"touch"!==d.pointerType||r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d);}r.freeEvent(n);},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o="mousemove"===e.type?"mouseout":"pointerout",s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!t.composedPath().includes(a)){var l=r.createPointerEvent(e,"pointerleave",a||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!t.composedPath().includes(l.target);)l.currentTarget=l.target,r.notifyTarget(l),n&&r.notifyTarget(l,"mouseleave"),rq.isNode(l.target)&&(l.target=l.target.parentNode);r.freeEvent(l);}r.freeEvent(s);}if(a!==t.target){var u="mousemove"===e.type?"mouseover":"pointerover",c=r.clonePointerEvent(t,u);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var d=a&&rq.isNode(a)&&a.parentNode;d&&d!==(rq.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&d!==t.target;)d=d.parentNode;if(!d||d===(rq.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var h=r.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==a&&h.target!==(rq.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),n&&r.notifyTarget(h,"mouseenter"),rq.isNode(h.target)&&(h.target=h.target.parentNode);r.freeEvent(h);}r.freeEvent(c);}r.dispatchEvent(t,"pointermove"),"touch"===t.pointerType&&r.dispatchEvent(t,"touchmove"),n&&(r.dispatchEvent(t,"mousemove"),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t);},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(e,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(rq.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),rq.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o);}r.cursor=null;},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(rq.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),rq.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a);},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||("mouse"===i.pointerType||"pen"===i.pointerType)&&r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),rq.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button];}r.freeEvent(i);},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t);},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t);}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t);},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick);}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear();}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a);}return{scaleX:t,scaleY:n,bbox:e};}},{key:"client2Viewport",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new ec((e.x-((null==i?void 0:i.left)||0))/n,(e.y-((null==i?void 0:i.top)||0))/r);}},{key:"viewport2Client",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new ec((e.x+((null==i?void 0:i.left)||0))*n,(e.y+((null==i?void 0:i.top)||0))*r);}},{key:"viewport2Canvas",value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),l=r.getWorldTransform(),u=V.mat4.multiply(this.tmpMatrix,l,s),c=V.vec3.set(this.tmpVec3,t/a*2-1,(1-n/o)*2-1,0);return V.vec3.transformMat4(c,c,u),new ec(c[0],c[1]);}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=V.mat4.multiply(this.tmpMatrix,n,r),a=V.vec3.set(this.tmpVec3,e.x,e.y,0);V.vec3.transformMat4(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,l=o.height;return new ec((a[0]+1)/2*s,(1-(a[1]+1)/2)*l);}},{key:"setPickHandler",value:function(e){this.pickHandler=e;}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority;});}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type));}}},{key:"dispatchEvent",value:function(e,t,n){if(n){e.eventPhase=e.AT_TARGET;var r=this.rootTarget.defaultView||null;e.currentTarget=r,this.notifyListeners(e,t);}else e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t);}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;}}}},{key:"propagationPath",value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<2048&&e!==this.rootTarget;r++)rq.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t;}},{key:"hitTest",value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null;}},{key:"isNativeEventFromCanvas",value:function(e,t){var n,r=null==t?void 0:t.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r);}return null!=t&&!!t.composedPath&&t.composedPath().indexOf(e)>-1;}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i;}return null;}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY});}},{key:"createPointerEvent",value:function(e,t,n,r){var i=this.allocateEvent(rU);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof t&&(i.type=t),i;}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(rH);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t;}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e];}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(rH);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t;}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(rU);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!=t?t:n.type,n;}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist;}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset);}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=re.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport);}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t;}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e);}},{key:"notifyTarget",value:function(e,t){t=null!=t?t:e.type;var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t);}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r){if("fn"in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e);}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(r===this.rootTarget||rq.isNode(r)&&r.parentNode===t)t=e[n];else break;}return t;}},{key:"getCursor",value:function(e){for(var t=e;t;){var n=!!t.getAttribute&&t.getAttribute("cursor");if(n)return n;t=rq.isNode(t)&&t.parentNode;}}}]),r$=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||ib.offscreenCanvas)this.canvas=e||ib.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"));}catch(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,L.default)({willReadFrequently:!0},t));}return this.canvas.width=10,this.canvas.height=10,this.canvas;}},{key:"getOrCreateContext",value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context;}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0);}catch(e){}try{return document.createElement("canvas");}catch(e){}return null;}}]),rK=((b={})[b.CAMERA_CHANGED=0]="CAMERA_CHANGED",b[b.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",b[b.NONE=2]="NONE",b),rZ=(0,D.default)(function e(t,n){(0,R.default)(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new rp,initAsync:new rh,dirtycheck:new rv,cull:new rv,beginFrame:new rp,beforeRender:new rp,render:new rp,afterRender:new rp,endFrame:new rp,destroy:new rp,pick:new rf,pickSync:new rv,pointerDown:new rp,pointerUp:new rp,pointerMove:new rp,pointerOut:new rp,pointerOver:new rp,pointerWheel:new rp,pointerCancel:new rp,click:new rp},this.globalRuntime=t,this.context=n;},[{key:"init",value:function(e){var t=this,n=(0,L.default)((0,L.default)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(e){e.apply(n,t.globalRuntime);}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){t.inited=!0,e();}).catch(function(e){});}},{key:"getStats",value:function(){return this.stats;}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(rK.CAMERA_CHANGED);}},{key:"render",value:function(e,t,n){var r=this,i=e.getConfig(),a=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(a.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(e),a.renderReasons.size&&this.inited){a.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=1===a.renderReasons.size&&a.renderReasons.has(rK.CAMERA_CHANGED),s=!i.disableRenderHooks||!o;s&&this.renderDisplayObject(a.root,i,a),this.hooks.beginFrame.call(t),s&&a.renderListCurrentFrame.forEach(function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e);}),this.hooks.endFrame.call(t),a.renderListCurrentFrame=[],a.renderReasons.clear(),n();}}},{key:"renderDisplayObject",value:function(e,t,n){for(var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling,s=[e];s.length>0;){var l,u=s.pop();!function(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e,l=null;s&&(l=o?r.hooks.cull.call(s,r.context.camera):s)&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(l)),e.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0);}(u);for(var c=(null===(l=u.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?u.sortable.sorted:u.childNodes,d=c.length-1;d>=0;d--)s.push(c[d]);}}},{key:"sort",value:function(e,t){var n,r;(null==t||null===(n=t.sorted)||void 0===n?void 0:n.length)>0&&t.dirtyReason!==eI.Z_INDEX_CHANGED?t.dirtyChildren.forEach(function(n){var r=t.sorted.indexOf(n);if(r>-1&&t.sorted.splice(r,1),e.childNodes.indexOf(n)>-1){if(0===t.sorted.length)t.sorted.push(n);else{var i=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;0>n8(e[i],t)?n=i+1:r=i;}return n;}(t.sorted,n);t.sorted.splice(i,0,n);}}}):t.sorted=e.childNodes.slice().sort(n8),(null===(r=t.sorted)||void 0===r?void 0:r.length)>0&&0===e.childNodes.filter(function(e){return e.parsedStyle.zIndex;}).length&&(t.sorted=[]);}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call();}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(rK.DISPLAY_OBJECT_CHANGED);}}]),rQ=/\[\s*(.*)=(.*)\s*\]/,rJ=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"selectOne",value:function(e,t){var n=this;if(e.startsWith("."))return t.find(function(t){return((null==t?void 0:t.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.find(function(t){return t.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):null;}return t.find(function(n){return t!==n&&n.nodeName===e;});}},{key:"selectAll",value:function(e,t){var n=this;if(e.startsWith("."))return t.findAll(function(r){return t!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(e))>-1;});if(e.startsWith("#"))return t.findAll(function(r){return t!==r&&r.id===n.getIdOrClassname(e);});if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll(function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a);}):[];}return t.findAll(function(n){return t!==n&&n.nodeName===e;});}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),r=n.name,i=n.value;return"name"===r?t.name===i:this.attributeToString(t,r)===i;}return t.nodeName===e;}},{key:"getIdOrClassname",value:function(e){return e.substring(1);}},{key:"getAttribute",value:function(e){var t=e.match(rQ),n="",r="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),r=t[2].replace(/"/g,"")),{name:n,value:r};}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return(0,j.isNil)(n)?"":n.toString?n.toString():"";}}]),r0=((E={}).ATTR_MODIFIED="DOMAttrModified",E.INSERTED="DOMNodeInserted",E.MOUNTED="DOMNodeInsertedIntoDocument",E.REMOVED="removed",E.UNMOUNTED="DOMNodeRemovedFromDocument",E.REPARENT="reparent",E.DESTROY="destroy",E.BOUNDS_CHANGED="bounds-changed",E.CULLED="culled",E),r1=function(e){function t(e,n,r,i,a,o,s,l){var u;return(0,R.default)(this,t),(u=(0,B.default)(this,t,[null])).relatedNode=n,u.prevValue=r,u.newValue=i,u.attrName=a,u.attrChange=o,u.prevParsedValue=s,u.newParsedValue=l,u.type=e,u;}return(0,F.default)(t,e),(0,D.default)(t);}(rV);r1.ADDITION=2,r1.MODIFICATION=1,r1.REMOVAL=3;var r2=new r1(r0.REPARENT,null,"","","",0,"",""),r3=V.vec2.create(),r4=V.vec3.create(),r6=V.vec3.fromValues(1,1,1),r5=V.mat4.create(),r8=V.vec2.create(),r9=V.vec3.create(),r7=V.mat4.create(),ie=V.quat.create(),it=V.vec3.create(),ir=V.quat.create(),ii=V.vec3.create(),ia=V.vec3.create(),io=V.vec3.create(),is=V.mat4.create(),il=V.quat.create(),iu=V.quat.create(),ic=V.quat.create(),id=(0,D.default)(function e(t){(0,R.default)(this,e),this.displayObjectDependencyMap=new WeakMap,this.runtime=t;},[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t);}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t);}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t);}},{key:"attach",value:function(e,t,n){var r=!1;e.parentNode&&(r=e.parentNode!==t,this.detach(e));var i=e.nodeName===Q.FRAGMENT,a=rt(t);e.parentNode=t;var o=i?e.childNodes:[e];(0,j.isNumber)(n)?o.forEach(function(e){t.childNodes.splice(n,0,e),e.parentNode=t;}):o.forEach(function(e){t.childNodes.push(e),e.parentNode=t;});var s=t.sortable;if((null!=s&&null!==(u=s.sorted)&&void 0!==u&&u.length||s.dirty||e.parsedStyle.zIndex)&&(-1===s.dirtyChildren.indexOf(e)&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=eI.ADDED),!a){if(i)this.dirtyFragment(e);else{var l=e.transformable;l&&this.dirtyWorldTransform(e,l);}if(r){var u,c,d=(null===(c=t.ownerDocument)||void 0===c||null===(c=c.defaultView)||void 0===c||null===(c=c.getConfig())||void 0===c||null===(c=c.future)||void 0===c?void 0:c.experimentalCancelEventPropagation)===!0;e.dispatchEvent(r2,d,d);}}}},{key:"detach",value:function(e){if(e.parentNode){var t,n,r=e.transformable,i=e.parentNode.sortable;(null!=i&&null!==(t=i.sorted)&&void 0!==t&&t.length||null!==(n=e.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(e)&&i.dirtyChildren.push(e),i.dirty=!0,i.dirtyReason=eI.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),r&&this.dirtyWorldTransform(e,r),e.parentNode=null;}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition;}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation;}},{key:"getLocalScale",value:function(e){return e.transformable.localScale;}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew;}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return ez(t),t.localTransform;}},{key:"setLocalPosition",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;ia[0]=t[0],ia[1]=t[1],ia[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(i.localPosition,ia)&&(V.vec3.copy(i.localPosition,ia),r&&this.dirtyLocalTransform(e,i));}},{key:"translateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.vec3.equals(t,r4)||(V.vec3.transformQuat(t,t,i.localRotation),V.vec3.add(i.localPosition,i.localPosition,t),this.dirtyLocalTransform(e,i));}},{key:"setLocalRotation",value:function(e,t,n,r,i){var a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];"number"==typeof t&&(t=V.quat.set(ie,t,n,r,i));var o=e.transformable;V.quat.copy(o.localRotation,t),a&&this.dirtyLocalTransform(e,o);}},{key:"rotateLocal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;V.quat.fromEuler(iu,t[0],t[1],t[2]),V.quat.mul(i.localRotation,i.localRotation,iu),this.dirtyLocalTransform(e,i);}},{key:"setLocalScale",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.transformable;V.vec3.set(r9,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:i.localScale[2]),!V.vec3.equals(r9,i.localScale)&&(V.vec3.copy(i.localScale,r9),r&&this.dirtyLocalTransform(e,i));}},{key:"scaleLocal",value:function(e,t){var n,r=e.transformable;V.vec3.multiply(r.localScale,r.localScale,V.vec3.set(r9,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:1)),this.dirtyLocalTransform(e,r);}},{key:"setLocalSkew",value:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];"number"==typeof t&&(t=V.vec2.set(r8,t,n));var i=e.transformable;V.vec2.copy(i.localSkew,t),r&&this.dirtyLocalTransform(e,i);}},{key:"setLocalEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var a=e.transformable;V.quat.fromEuler(a.localRotation,t[0],t[1],t[2]),i&&this.dirtyLocalTransform(e,a);}},{key:"setLocalTransform",value:function(e,t){var n=V.mat4.getTranslation(it,t),r=V.mat4.getRotation(ir,t),i=V.mat4.getScaling(ii,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,r6,!1),this.setLocalPosition(e,r4,!1),this.setLocalEulerAngles(e,r4,void 0,void 0,!1),this.setLocalSkew(e,r3,void 0,!1),this.dirtyLocalTransform(e,e.transformable);}},{key:"getPosition",value:function(e){var t=e.transformable;return V.mat4.getTranslation(t.position,this.getWorldTransform(e,t));}},{key:"getRotation",value:function(e){var t=e.transformable;return V.mat4.getRotation(t.rotation,this.getWorldTransform(e,t));}},{key:"getScale",value:function(e){var t=e.transformable;return V.mat4.getScaling(t.scaling,this.getWorldTransform(e,t));}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin;}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transformable;return(t.localDirtyFlag||t.dirtyFlag)&&(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),t.worldTransform;}},{key:"setPosition",value:function(e,t){var n,r=e.transformable;if(io[0]=t[0],io[1]=t[1],io[2]=null!==(n=t[2])&&void 0!==n?n:0,!V.vec3.equals(this.getPosition(e),io)){if(V.vec3.copy(r.position,io),null!==e.parentNode&&e.parentNode.transformable){var i=e.parentNode.transformable;V.mat4.copy(is,i.worldTransform),V.mat4.invert(is,is),V.vec3.transformMat4(r.localPosition,io,is);}else V.vec3.copy(r.localPosition,io);this.dirtyLocalTransform(e,r);}}},{key:"translate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.set(r9,t,n,r)),V.vec3.equals(t,r4)||(V.vec3.add(r9,this.getPosition(e),t),this.setPosition(e,r9));}},{key:"setRotation",value:function(e,t,n,r,i){var a=e.transformable;if("number"==typeof t&&(t=V.quat.fromValues(t,n,r,i)),null!==e.parentNode&&e.parentNode.transformable){var o=this.getRotation(e.parentNode);V.quat.copy(ie,o),V.quat.invert(ie,ie),V.quat.multiply(a.localRotation,ie,t),V.quat.normalize(a.localRotation,a.localRotation),this.dirtyLocalTransform(e,a);}else this.setLocalRotation(e,t);}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(ie,t[0],t[1],t[2]);var a=this.getRotation(e),o=this.getRotation(e.parentNode);V.quat.copy(ic,o),V.quat.invert(ic,ic),V.quat.multiply(ie,ic,ie),V.quat.multiply(i.localRotation,ie,a),V.quat.normalize(i.localRotation,i.localRotation),this.dirtyLocalTransform(e,i);}else this.rotateLocal(e,t);}},{key:"setOrigin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=[t,n,r]);var i=e.transformable;if(t[0]!==i.origin[0]||t[1]!==i.origin[1]||t[2]!==i.origin[2]){var a=i.origin;a[0]=t[0],a[1]=t[1],a[2]=t[2]||0,this.dirtyLocalTransform(e,i);}}},{key:"setEulerAngles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"==typeof t&&(t=V.vec3.fromValues(t,n,r));var i=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){V.quat.fromEuler(i.localRotation,t[0],t[1],t[2]);var a=this.getRotation(e.parentNode);V.quat.copy(il,V.quat.invert(ie,a)),V.quat.mul(i.localRotation,i.localRotation,il),this.dirtyLocalTransform(e,i);}else this.setLocalEulerAngles(e,t);}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.geometry;return n.dirty&&ib.styleValueRegistry.updateGeometry(e),(t?n.renderBounds:n.contentBounds||null)||new eo;}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!eo.isEmpty(r)){var i=n||new eo;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i;}return null;}},{key:"getBounds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(e,n,i);if(e.childNodes.forEach(function(e){var r=t.getBounds(e,n);r&&(a?a.add(r):(a=i||new eo).update(r.center,r.halfExtents));}),a||(a=new eo),n){var o=function(e){var t,n=e;do{if(null===(t=n.parsedStyle)||void 0===t?void 0:t.clipPath)return n;n=n.parentElement;}while(null!==n)return null;}(e);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents);}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a;}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=r5;e.parentNode.transformable&&(t=V.mat4.invert(r7,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!eo.isEmpty(n)){var r=new eo;return r.setFromTransformedAABB(n,t),r;}}return this.getBounds(e);}},{key:"getBoundingClientRect",value:function(e){var t,n,r=this.getGeometryBounds(e);eo.isEmpty(r)||(n=new eo).setFromTransformedAABB(r,this.getWorldTransform(e));var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.getContextService().getBoundingClientRect();if(n){var a=n.getMin(),o=(0,G.default)(a,2),s=o[0],l=o[1],u=n.getMax(),c=(0,G.default)(u,2),d=c[0],h=c[1];return new ed(s+((null==i?void 0:i.left)||0),l+((null==i?void 0:i.top)||0),d-s,h-l);}return new ed((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0);}},{key:"internalUpdateTransform",value:function(e){var t,n,r=null===(n=e.parentNode)||void 0===n?void 0:n.transformable;ez(e.transformable),(t=e.transformable).dirtyFlag&&(r?V.mat4.multiply(t.worldTransform,r.worldTransform,t.localTransform):V.mat4.copy(t.worldTransform,t.localTransform),t.dirtyFlag=!1);}},{key:"internalUpdateElement",value:function(e,t){var n=(null===(s=e.ownerDocument)||void 0===s||null===(s=s.defaultView)||void 0===s||null===(s=s.getConfig())||void 0===s||null===(s=s.future)||void 0===s?void 0:s.experimentalAttributeUpdateOptimization)===!0,r=t[t.length-1],i=(null==r?void 0:r.transformDirty)||(null===(l=e.transformable)||void 0===l?void 0:l.localDirtyFlag);e.transformable&&((d=e.transformable).dirtyFlag||(d.dirtyFlag=i)),this.internalUpdateTransform(e),i&&(null===(h=e.dirty)||void 0===h||h.call(e,!0,!0));var a=(null===(u=e.renderable)||void 0===u?void 0:u.boundsDirty)||(null===(c=e.renderable)||void 0===c?void 0:c.renderBoundsDirty);if((i||a)&&(null==r?void 0:r.shapeUpdated)===!1&&n)for(var o=t.length-1;o>=0;){var s,l,u,c,d,h,f,p,v=t[o];if(v.shapeUpdated)break;null===(f=(p=v.node).dirty)||void 0===f||f.call(p,!0,!0),v.shapeUpdated=!0,o-=1;}return i;}},{key:"syncHierarchy",value:function(e){for(var t,n,r=[e],i=e.parentNode?[{node:e.parentNode,transformDirty:(null===(t=e.parentNode.transformable)||void 0===t?void 0:t.localDirtyFlag)||(null===(n=e.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];r.length>0;){for(var a=r.pop(),o=i[i.length-1];i.length>0&&a.parentNode!==o.node;)o=i.pop();var s=this.internalUpdateElement(a,i);if(a.childNodes.length>0){for(var l=a.childNodes.length-1;l>=0;l--)r.push(a.childNodes[l]);i.push({node:a,transformDirty:s,shapeUpdated:!1});}}}},{key:"dirtyLocalTransform",value:function(e,t){rt(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtyWorldTransform(e,t));}},{key:"dirtyWorldTransform",value:function(e,t){this.dirtyWorldInternal(e,t),this.dirtyToRoot(e,!0);}},{key:"dirtyWorldInternal",value:function(e,t){var n,r=this,i=(null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization)===!0;t.dirtyFlag||(t.dirtyFlag=!0,e.dirty(!0,!0),i||e.childNodes.forEach(function(e){var t=e.transformable;r.dirtyWorldInternal(e,t);}));}},{key:"dirtyToRoot",value:function(e){for(var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,o=(null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalAttributeUpdateOptimization)===!0;a&&(null===(n=(r=a).dirty)||void 0===n||n.call(r,!0,!0),!o);)a=a.parentNode;i&&e.forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),this.informDependentDisplayObjects(e);var s=e.mutations||[],l=s.find(function(e){return"attributes"===e.type&&e._boundsChangeData;});l?l._boundsChangeData={affectChildren:l._boundsChangeData.affectChildren||i}:(l={type:"attributes",target:e,_boundsChangeData:{affectChildren:i}},s.push(l)),e.mutations=s;}},{key:"dirtyFragment",value:function(e){var t,n=e.transformable;n&&(n.dirtyFlag=!0,n.localDirtyFlag=!0),null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);for(var r=e.childNodes.length,i=0;i<r;i++)this.dirtyFragment(e.childNodes[i]);}},{key:"notifyMutationObservers",value:function(e){var t=new Set;if(e.getRoot().forEach(function(e){(e.mutations||[]).forEach(function(n){"attributes"===n.type&&n._boundsChangeData&&(n._boundsChangeData.affectChildren?e.forEach(function(e){var r=(0,L.default)({},n);r.target=e,t.add(r);}):t.add(n));}),e.mutations=void 0;}),t.size>0){var n=new rW(r0.BOUNDS_CHANGED,{detail:Array.from(t)});e.dispatchEvent(n,!0,!0);}}},{key:"updateDisplayObjectDependency",value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1);}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r);}}},{key:"informDependentDisplayObjects",value:function(e){var t,n=this,r=this.displayObjectDependencyMap.get(e);if(r){var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.future)||void 0===t?void 0:t.experimentalCancelEventPropagation;Object.keys(r).forEach(function(e){r[e].forEach(function(t){n.dirtyToRoot(t,!0),t.dispatchEvent(new r1(r0.ATTR_MODIFIED,t,n,n,e,r1.MODIFICATION,n,n),i,i),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback(e,n,n);});});}}}]),ih=(0,D.default)(function e(t){if((0,R.default)(this,e),t<=0)throw Error("LRU capacity must be a positive number.");this.capacity=t,this.cache=new Map;},[{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t;}}},{key:"put",value:function(e,t){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache.delete(n);}}},{key:"len",value:function(){return this.cache.size;}},{key:"clear",value:function(){this.cache.clear();}}]),ip={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},iv=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,ig=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),im=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),iy=(0,D.default)(function e(t){var n=this;(0,R.default)(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return!n.isBreakingSpace(t)&&!!(e&&(im.exec(t)||ig.exec(e)));},this.trimByKinsokuShorui=function(e){var t=(0,I.default)(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t;},this.runtime=t,this.charWidthCache=new ih(100);},[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=ip.MetricsString+ip.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(ip.BaselineSymbol).width),l=ip.HeightMultiplier*s;s=s*ip.BaselineMultiplier|0,r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var u=i.getImageData(0,0,o||1,l||1).data,c=u.length,d=4*o,h=0,f=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<d;v+=4)if(255!==u[f+v]){p=!0;break;}if(p)break;f+=d;}for(n.ascent=s-h,f=c-d,p=!1,h=l;h>s;--h){for(var g=0;g<d;g+=4)if(255!==u[f+g]){p=!0;break;}if(p)break;f-=d;}return n.descent=h-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n;}},{key:"measureText",value:function(e,t,n){var r=t.fontSize,i=void 0===r?16:r,a=t.wordWrap,o=t.lineHeight,s=t.lineWidth,l=void 0===s?1:s,u=t.textBaseline,c=void 0===u?"alphabetic":u,d=t.textAlign,h=void 0===d?"start":d,f=t.letterSpacing,p=void 0===f?0:f,v=t.textPath;t.textPathSide,t.textPathStartOffset;var g=t.leading,m=void 0===g?0:g,y=rb(t),b=this.measureFont(y,n);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);E.font=y,t.isOverflowing=!1;var x=(void 0!==a&&a?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),k=Array(x.length),S=0;if(v){v.getTotalLength();for(var T=0;T<x.length;T++)E.measureText(x[T]).width,x[T].length;}else{for(var M=0;M<x.length;M++){var w=E.measureText(x[M]).width+(x[M].length-1)*p;k[M]=w,S=Math.max(S,w);}var N=S+l,C=o||b.fontSize+l,_=Math.max(C,b.fontSize+l)+(x.length-1)*(C+m);C+=m;var P=0;return"middle"===c?P=-_/2:"bottom"===c||"alphabetic"===c||"ideographic"===c?P=-_:("top"===c||"hanging"===c)&&(P=0),{font:y,width:N,height:_,lines:x,lineWidths:k,lineHeight:C,maxLineWidth:S,fontProperties:b,lineMetrics:k.map(function(e,t){var n=0;return"center"===h||"middle"===h?n-=e/2:("right"===h||"end"===h)&&(n-=e),new ed(n-l/2,P+t*C,e+l,C);})};}}},{key:"wordWrap",value:function(e,t,n){var r=this,i=Array.from(e);if(0===i.length)return"";var a=this,o=t.wordWrapWidth,s=t.letterSpacing,l=void 0===s?0:s,u=t.maxLines,c=void 0===u?1/0:u,d=t.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),f=(void 0===o?0:o)+l,p="";"ellipsis"===d?p="...":d&&"clip"!==d&&(p=d);var v=[""],g=0,m=0,y=-1,b=rb(t),E=this.charWidthCache.get(b);E||(E=new ih(500),this.charWidthCache.put(b,E));var x=function(e){return r.getFromCache(e,l,E,h);},k=x(p);function S(e,t,n,r){for(;x(e)<r&&t<i.length-1&&!a.isNewline(i[t+1]);)t+=1,e+=i[t];for(;x(e)>r&&t>=n;)t-=1,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t};}function T(e,t){if(!(k<=0)&&!(k>f)){if(!v[e]){v[e]=p;return;}var n=S(v[e],t,y+1,f-k);v[e]=n.lineTxt+p;}}for(var M=0;M<i.length;M++){var w=i[M],N=i[M-1],C=i[M+1],_=x(w);if(this.isNewline(w)){if(g+1>=c){M<i.length-1&&T(g,M-1),t.isOverflowing=!0;break;}y=M-1,m=0,v[g+=1]="";continue;}if(_>f){T(g,M-1),t.isOverflowing=!0;break;}if(m>0&&m+_>f){var P=S(v[g],M-1,y+1,f);if(P.txtLastCharIndex!==M-1){if(v[g]=P.lineTxt,P.txtLastCharIndex===i.length-1)break;w=i[M=P.txtLastCharIndex+1],N=i[M-1],C=i[M+1],_=x(w);}if(g+1>=c){T(g,M-1),t.isOverflowing=!0;break;}if(y=M-1,m=0,v[g+=1]="",this.isBreakingSpace(w))continue;this.canBreakInLastChar(w)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[g]||"",x)),this.shouldBreakByKinsokuShorui(w,C)&&(v=this.trimByKinsokuShorui(v),m+=x(N||""));}m+=_,v[g]+=w;}return v.join("\n");}},{key:"isBreakingSpace",value:function(e){return"string"==typeof e&&ip.BreakingSpaces.indexOf(e.charCodeAt(0))>=0;}},{key:"isNewline",value:function(e){return"string"==typeof e&&ip.Newlines.indexOf(e.charCodeAt(0))>=0;}},{key:"trimToBreakable",value:function(e){var t=(0,I.default)(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return t;var i=n.slice(r,r+1),a=this.isBreakingSpace(i);return t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,r+(a?0:1)),t;}},{key:"canBreakInLastChar",value:function(e){return!(e&&iv.test(e));}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce(function(e,n){return e+t(n);},0);}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!iv.test(e[t]))return t;return -1;}},{key:"getFromCache",value:function(e,t,n,r){var i=n.get(e);if("number"!=typeof i){var a=e.length*t;i=r.measureText(e).width+a,n.put(e,i);}return i;}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear();}}]),ib={},iE=(k=new rB,S=new rI,x={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(x,Q.FRAGMENT,null),Q.CIRCLE,new rO),Q.ELLIPSE,new rL),Q.RECT,k),Q.IMAGE,k),Q.GROUP,new rG),Q.LINE,new rR),Q.TEXT,new rF(ib)),Q.POLYLINE,S),Q.POLYGON,S),(0,U.default)((0,U.default)((0,U.default)(x,Q.PATH,new rD),Q.HTML,new rz),Q.MESH,null)),ix=(M=new nH,w=new nq,T={},(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,ej.PERCENTAGE,null),ej.NUMBER,new nZ),ej.ANGLE,new nj),ej.DEFINED_PATH,new nU),ej.PAINT,M),ej.COLOR,M),ej.FILTER,new nW),ej.LENGTH,w),ej.LENGTH_PERCENTAGE,w),ej.LENGTH_PERCENTAGE_12,new nX),(0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)((0,U.default)(T,ej.LENGTH_PERCENTAGE_14,new n$),ej.COORDINATE,new nq),ej.OFFSET_DISTANCE,new nQ),ej.OPACITY_VALUE,new nJ),ej.PATH,new n0),ej.LIST_OF_POINTS,new n1),ej.SHADOW_BLUR,new n2),ej.TEXT,new n3),ej.TEXT_TRANSFORM,new n4),ej.TRANSFORM,new r_),(0,U.default)((0,U.default)((0,U.default)(T,ej.TRANSFORM_ORIGIN,new rP),ej.Z_INDEX,new rA),ej.MARKER,new nK));ib.CameraContribution=eR,ib.AnimationTimeline=null,ib.EasingFunction=null,ib.offscreenCanvasCreator=new r$,ib.sceneGraphSelector=new rJ,ib.sceneGraphService=new id(ib),ib.textService=new iy(ib),ib.geometryUpdaterFactory=iE,ib.CSSPropertySyntaxFactory=ix,ib.styleValueRegistry=new nz(ib),ib.layoutRegistry=null,ib.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Z?Z:{},ib.enableStyleSyntax=!0,ib.enableSizeAttenuation=!1;var ik=0,iS=new r1(r0.INSERTED,null,"","","",0,"",""),iT=new r1(r0.REMOVED,null,"","","",0,"",""),iM=new rW(r0.DESTROY),iw=function(e){function t(){var e;(0,R.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=(0,B.default)(this,t,[].concat(r))).entity=ik++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:eD.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"dirty",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=e,void 0!==t&&(this.renderable.boundsDirty=t,this.renderable.renderBoundsDirty=t,this.geometry.dirty=t);}},{key:"className",get:function(){return this.getAttribute("class")||"";},set:function(e){this.setAttribute("class",e);}},{key:"classList",get:function(){return this.className.split(" ").filter(function(e){return""!==e;});}},{key:"tagName",get:function(){return this.nodeName;}},{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"parentElement",get:function(){return this.parentNode;}},{key:"nextSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null;}return null;}},{key:"previousSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null;}return null;}},{key:"cloneNode",value:function(e){throw Error(eh);}},{key:"appendChild",value:function(e,t){var n;if(e.destroyed)throw Error("Cannot append a destroyed element.");return ib.sceneGraphService.attach(e,this,t),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(rt(this)||e.nodeName!==Q.FRAGMENT?this.ownerDocument.defaultView.mountChildren(e):this.ownerDocument.defaultView.mountFragment(e)),this.isMutationObserved&&(iS.relatedNode=this,e.dispatchEvent(iS)),e;}},{key:"insertBefore",value:function(e,t){if(t){e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);-1===n?this.appendChild(e):this.appendChild(e,n);}else this.appendChild(e);return e;}},{key:"replaceChild",value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t;}},{key:"removeChild",value:function(e){var t,n,r=(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return iT.relatedNode=this,e.dispatchEvent(iT,r,r),null!==(n=e.ownerDocument)&&void 0!==n&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),ib.sceneGraphService.detach(e),e;}},{key:"removeChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t);}}},{key:"destroyChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy();}}},{key:"matches",value:function(e){return ib.sceneGraphService.matches(e,this);}},{key:"getElementById",value:function(e){return ib.sceneGraphService.querySelector("#".concat(e),this);}},{key:"getElementsByName",value:function(e){return ib.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this);}},{key:"getElementsByClassName",value:function(e){return ib.sceneGraphService.querySelectorAll(".".concat(e),this);}},{key:"getElementsByTagName",value:function(e){return ib.sceneGraphService.querySelectorAll(e,this);}},{key:"querySelector",value:function(e){return ib.sceneGraphService.querySelector(e,this);}},{key:"querySelectorAll",value:function(e){return ib.sceneGraphService.querySelectorAll(e,this);}},{key:"closest",value:function(e){var t=this;do{if(ib.sceneGraphService.matches(e,t))return t;t=t.parentElement;}while(null!==t)return null;}},{key:"find",value:function(e){var t=this,n=null;return this.forEach(function(r){return!(r!==t&&e(r))||(n=r,!1);}),n;}},{key:"findAll",value:function(e){var t=this,n=[];return this.forEach(function(r){r!==t&&e(r)&&n.push(r);}),n;}},{key:"after",value:function(){var e=this;if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){var i;return null===(i=e.parentNode)||void 0===i?void 0:i.appendChild(n,t+r+1);});}}},{key:"before",value:function(){if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=(0,W.default)(n).slice(1);this.parentNode.appendChild(i,e),i.after.apply(i,(0,I.default)(a));}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove();}},{key:"append",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t);});}},{key:"prepend",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t,n){return e.appendChild(t,n);});}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments);}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this;}},{key:"destroy",value:function(){var e,t=(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(iM,t,t),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0;}},{key:"getGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ib.sceneGraphService.getGeometryBounds(this,e);}},{key:"getTransformedGeometryBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ib.sceneGraphService.getTransformedGeometryBounds(this,e);}},{key:"getBounds",value:function(){return ib.sceneGraphService.getBounds(this);}},{key:"getRenderBounds",value:function(){return ib.sceneGraphService.getBounds(this,!0);}},{key:"getLocalBounds",value:function(){return ib.sceneGraphService.getLocalBounds(this);}},{key:"getBoundingClientRect",value:function(){return ib.sceneGraphService.getBoundingClientRect(this);}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle));}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes);}},{key:"getAttribute",value:function(e){if("symbol"!=typeof e)return this.attributes[e];}},{key:"hasAttribute",value:function(e){return this.getAttributeNames().includes(e);}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length;}},{key:"removeAttribute",value:function(e){this.setAttribute(e,null),delete this.attributes[e];}},{key:"setAttribute",value:function(e,t){this.attributes[e]=t;}},{key:"getAttributeNS",value:function(e,t){throw Error(eh);}},{key:"getAttributeNode",value:function(e){throw Error(eh);}},{key:"getAttributeNodeNS",value:function(e,t){throw Error(eh);}},{key:"hasAttributeNS",value:function(e,t){throw Error(eh);}},{key:"removeAttributeNS",value:function(e,t){throw Error(eh);}},{key:"removeAttributeNode",value:function(e){throw Error(eh);}},{key:"setAttributeNS",value:function(e,t,n){throw Error(eh);}},{key:"setAttributeNode",value:function(e){throw Error(eh);}},{key:"setAttributeNodeNS",value:function(e){throw Error(eh);}},{key:"toggleAttribute",value:function(e,t){throw Error(eh);}}]);}(rq);function iN(e){return!!(null!=e&&e.nodeName);}var iC=ib.globalThis.Proxy?ib.globalThis.Proxy:function(){},i_=new r1(r0.ATTR_MODIFIED,null,null,null,null,r1.MODIFICATION,null,null),iP=V.vec3.create(),iA=V.quat.create(),iO=function(e){function t(e){var n;return(0,R.default)(this,t),(n=(0,B.default)(this,t)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||Q.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),ib.enableStyleSyntax&&(n.style=new iC({setProperty:function(e,t){n.setAttribute(e,t);},getPropertyValue:function(e){return n.getAttribute(e);},removeProperty:function(e){n.removeAttribute(e);},item:function(){return"";}},{get:function(e,t){return void 0!==e[t]?e[t]:n.getAttribute(t);},set:function(e,t,r){return n.setAttribute(t,r),!0;}})),n;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"destroy",value:function(){(0,H.default)(t,"destroy",this,3)([]),this.getAnimations().forEach(function(e){e.cancel();});}},{key:"cloneNode",value:function(e,t){var n=(0,L.default)({},this.attributes);for(var r in n){var i=n[r];iN(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i));}var a=new this.constructor((0,L.default)((0,L.default)({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n);}}),a;}},{key:"initAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ib.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.dirty();}},{key:"setAttribute",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];!(0,j.isUndefined)(n)&&(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),(0,H.default)(t,"setAttribute",this,3)([e,n]));}},{key:"setAttributes",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.skipDispatchAttrModifiedEvent,a=void 0!==i&&i;if(a||(t=(0,L.default)({},this.attributes),n=(0,L.default)({},this.parsedStyle)),ib.styleValueRegistry.processProperties(this,e,r),this.dirty(),!a)for(var o in e)this.dispatchAttrModifiedEvent(o,t[o],e[o],n[o]);}},{key:"internalSetAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.attributes[e],i=this.parsedStyle[e];ib.styleValueRegistry.processProperties(this,(0,U.default)({},e,t),n),this.dirty(),this.dispatchAttrModifiedEvent(e,r,t,i);}},{key:"dispatchAttrModifiedEvent",value:function(e,t,n,r){var i,a=this.parsedStyle[e];if(this.isConnected){if(i_.relatedNode=this,i_.prevValue=t,i_.newValue=n,i_.attrName=e,i_.prevParsedValue=r,i_.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(i_);else{var o,s=(null===(o=this.ownerDocument.defaultView.getConfig().future)||void 0===o?void 0:o.experimentalCancelEventPropagation)===!0;i_.target=this,this.ownerDocument.defaultView.dispatchEvent(i_,!0,s);}}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(i=this.attributeChangedCallback)||void 0===i||i.call(this,e,t,n,r,a));}},{key:"getBBox",value:function(){var e=this.getBounds(),t=e.getMin(),n=(0,G.default)(t,2),r=n[0],i=n[1],a=e.getMax(),o=(0,G.default)(a,2);return new ed(r,i,o[0]-r,o[1]-i);}},{key:"setOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib.sceneGraphService.setOrigin(this,eg(e,t,n,!1)),this;}},{key:"getOrigin",value:function(){return ib.sceneGraphService.getOrigin(this);}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib.sceneGraphService.setPosition(this,eg(e,t,n,!1)),this;}},{key:"setLocalPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib.sceneGraphService.setLocalPosition(this,eg(e,t,n,!1)),this;}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib.sceneGraphService.translate(this,eg(e,t,n,!1)),this;}},{key:"translateLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib.sceneGraphService.translateLocal(this,eg(e,t,n,!1)),this;}},{key:"getPosition",value:function(){return ib.sceneGraphService.getPosition(this);}},{key:"getLocalPosition",value:function(){return ib.sceneGraphService.getLocalPosition(this);}},{key:"scale",value:function(e,t,n){return this.scaleLocal(e,t,n);}},{key:"scaleLocal",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=eg(e,t,n,!1)),ib.sceneGraphService.scaleLocal(this,e),this;}},{key:"setLocalScale",value:function(e,t,n){return"number"==typeof e&&(t=t||e,n=n||e,e=eg(e,t,n,!1)),ib.sceneGraphService.setLocalScale(this,e),this;}},{key:"getLocalScale",value:function(){return ib.sceneGraphService.getLocalScale(this);}},{key:"getScale",value:function(){return ib.sceneGraphService.getScale(this);}},{key:"getEulerAngles",value:function(){var e=ek(iP,ib.sceneGraphService.getWorldTransform(this));return(0,G.default)(e,3)[2]*eb;}},{key:"getLocalEulerAngles",value:function(){var e=ek(iP,ib.sceneGraphService.getLocalRotation(this));return(0,G.default)(e,3)[2]*eb;}},{key:"setEulerAngles",value:function(e){return ib.sceneGraphService.setEulerAngles(this,0,0,e),this;}},{key:"setLocalEulerAngles",value:function(e){return ib.sceneGraphService.setLocalEulerAngles(this,0,0,e),this;}},{key:"rotateLocal",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ib.sceneGraphService.rotateLocal(this,0,0,e):ib.sceneGraphService.rotateLocal(this,e,t,n),this;}},{key:"rotate",value:function(e,t,n){return(0,j.isNil)(t)&&(0,j.isNil)(n)?ib.sceneGraphService.rotate(this,0,0,e):ib.sceneGraphService.rotate(this,e,t,n),this;}},{key:"setRotation",value:function(e,t,n,r){return ib.sceneGraphService.setRotation(this,e,t,n,r),this;}},{key:"setLocalRotation",value:function(e,t,n,r){return ib.sceneGraphService.setLocalRotation(this,e,t,n,r),this;}},{key:"setLocalSkew",value:function(e,t){return ib.sceneGraphService.setLocalSkew(this,e,t),this;}},{key:"getRotation",value:function(){return ib.sceneGraphService.getRotation(this);}},{key:"getLocalRotation",value:function(){return ib.sceneGraphService.getLocalRotation(this);}},{key:"getLocalSkew",value:function(){return ib.sceneGraphService.getLocalSkew(this);}},{key:"getLocalTransform",value:function(){return ib.sceneGraphService.getLocalTransform(this);}},{key:"getWorldTransform",value:function(){return ib.sceneGraphService.getWorldTransform(this);}},{key:"setLocalTransform",value:function(e){return ib.sceneGraphService.setLocalTransform(this,e),this;}},{key:"resetLocalTransform",value:function(){ib.sceneGraphService.resetLocalTransform(this);}},{key:"getAnimations",value:function(){return this.activeAnimations;}},{key:"animate",value:function(e,t){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,e,t):null;}},{key:"isVisible",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.visibility)!=="hidden";}},{key:"interactive",get:function(){return this.isInteractive();},set:function(e){this.style.pointerEvents=e?"auto":"none";}},{key:"isInteractive",value:function(){var e;return(null===(e=this.parsedStyle)||void 0===e?void 0:e.pointerEvents)!=="none";}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible);}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))+1),this;}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,I.default)(this.parentNode.children.map(function(e){return Number(e.style.zIndex);})))-1),this;}},{key:"getConfig",value:function(){return this.config;}},{key:"attr",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?(0,j.isObject)(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t]);}),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes;}},{key:"getMatrix",value:function(e){var t,n,r,i=e||this.getWorldTransform(),a=V.mat4.getTranslation(iP,i),o=(0,G.default)(a,2),s=o[0],l=o[1],u=V.mat4.getScaling(iP,i),c=(0,G.default)(u,2),d=c[0],h=c[1],f=ek(iP,V.mat4.getRotation(iA,i)),p=(0,G.default)(f,3),v=p[0],g=p[2];return n=Math.cos(t=v||g),r=Math.sin(t),V.mat3.fromValues(d*n,h*r,0,-d*r,h*n,0,s,l,1);}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform());}},{key:"setMatrix",value:function(e){var t=eS(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setEulerAngles(s).setPosition(r,i).setLocalScale(a,o);}},{key:"setLocalMatrix",value:function(e){var t=eS(e),n=(0,G.default)(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];this.setLocalEulerAngles(s).setLocalPosition(r,i).setLocalScale(a,o);}},{key:"show",value:function(){this.forEach(function(e){e.style.visibility="visible";});}},{key:"hide",value:function(){this.forEach(function(e){e.style.visibility="hidden";});}},{key:"getCount",value:function(){return this.childElementCount;}},{key:"getParent",value:function(){return this.parentElement;}},{key:"getChildren",value:function(){return this.children;}},{key:"getFirst",value:function(){return this.firstElementChild;}},{key:"getLast",value:function(){return this.lastElementChild;}},{key:"getChildByIndex",value:function(e){return this.children[e]||null;}},{key:"add",value:function(e,t){return this.appendChild(e,t);}},{key:"set",value:function(e,t){this.config[e]=t;}},{key:"get",value:function(e){return this.config[e];}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this;}},{key:"setZIndex",value:function(e){return this.style.zIndex=e,this;}}]);}(iw);iO.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var iL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.CIRCLE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO);iL.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var iR=["style"],iD=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iR);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({style:r},i)])).isCustomElement=!0,e;}return(0,F.default)(t,e),(0,D.default)(t);}(iO);iD.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.ELLIPSE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO);iI.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),function(e){function t(){return(0,R.default)(this,t),(0,B.default)(this,t,[{type:Q.FRAGMENT}]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO).PARSED_STYLE_LIST=new Set(["class","className"]);var iB=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.GROUP},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO);iB.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var iF=["style"],iG=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iF);return(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.HTML,style:r},i)])).cullable.enable=!1,e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getDomElement",value:function(){return this.parsedStyle.$el;}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()];}},{key:"getLocalBounds",value:function(){if(this.parentNode){var e=V.mat4.invert(V.mat4.create(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!eo.isEmpty(t)){var n=new eo;return n.setFromTransformedAABB(t,e),n;}}return this.getBounds();}}]);}(iO);iG.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var iz=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.IMAGE},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO);iz.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var iV=["style"],ij=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iV);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.LINE,style:(0,L.default)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&iN(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&iN(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"x1"===e||"y1"===e||"x2"===e||"y2"===e||"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iN(r)&&(this.markerStartAngle=0,r.remove()),i&&iN(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e&&(r&&iN(r)&&(this.markerEndAngle=0,r.remove()),i&&iN(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)));}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=s.x1,f=s.x2,p=s.y1,v=s.y2,g=e?l:u;if(g&&iN(g)){var m=0;e?(r=h,i=p,t=f-h,n=v-p,a=c||0,o=this.markerStartAngle):(r=f,i=v,t=h-f,n=p-v,a=d||0,o=this.markerEndAngle),m=Math.atan2(n,t),g.setLocalEulerAngles(180*m/Math.PI+o),g.setLocalPosition(r+Math.cos(m)*a,i+Math.sin(m)*a);}}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=(0,Y.linePointAt)(r,i,a,o,e),l=s.x,u=s.y,c=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(l,u,0),t?this.getWorldTransform():this.getLocalTransform());return new ec(c[0],c[1]);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getTotalLength",value:function(){var e=this.parsedStyle,t=e.x1,n=e.y1,r=e.x2,i=e.y2;return(0,Y.lineLength)(t,n,r,i);}}]);}(iO);ij.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var iU=["style"],iH=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iU);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.PATH,style:r,initialParsedStyle:{miterLimit:4,d:(0,L.default)({},eV)}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iN(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iN(l)&&e.placeMarkerMid(l),s&&iN(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"d"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iN(r)&&(this.markerStartAngle=0,r.remove()),i&&iN(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iN(r)&&(this.markerEndAngle=0,r.remove()),i&&iN(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=e?l:u;if(h&&iN(h)){var f=0;if(e){var p=this.getStartTangent(),v=(0,G.default)(p,2),g=v[0],m=v[1];r=m[0],i=m[1],t=g[0]-m[0],n=g[1]-m[1],a=c||0,o=this.markerStartAngle;}else{var y=this.getEndTangent(),b=(0,G.default)(y,2),E=b[0],x=b[1];r=x[0],i=x[1],t=E[0]-x[0],n=E[1]-x[1],a=d||0,o=this.markerEndAngle;}f=Math.atan2(n,t),h.setLocalEulerAngles(180*f/Math.PI+o),h.setLocalPosition(r+Math.cos(f)*a,i+Math.sin(f)*a);}}},{key:"placeMarkerMid",value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(e){e.remove();}),e&&iN(e))for(var n=1;n<t.length-1;n++){var r=(0,G.default)(t[n].currentPoint,2),i=r[0],a=r[1],o=1===n?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a);}}},{key:"getTotalLength",value:function(){return ni(this);}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.d.absolutePath,r=(0,j.getPointAtLength)(n,e),i=r.x,a=r.y,o=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new ec(o[0],o[1]);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(e*ni(this),t);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?t.push([n[0]-i[0],n[1]-i[1]]):t.push([r[0],r[1]]),t.push([n[0],n[1]]);}return t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?n.push([i[0]-a[0],i[1]-a[1]]):n.push([r[0],r[1]]),n.push([i[0],i[1]]);}return n;}}]);}(iO);iH.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var iW=["style"],iY=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=(0,K.default)(n,iW);(0,R.default)(this,t),(e=(0,B.default)(this,t,[(0,L.default)({type:Q.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerMid;return o&&iN(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),l&&iN(l)&&e.placeMarkerMid(l),s&&iN(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"points"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&iN(r)&&(this.markerStartAngle=0,r.remove()),i&&iN(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&iN(r)&&(this.markerEndAngle=0,r.remove()),i&&iN(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i);}},{key:"transformMarker",value:function(e){var t,n,r,i,a,o,s=this.parsedStyle,l=s.markerStart,u=s.markerEnd,c=s.markerStartOffset,d=s.markerEndOffset,h=(s.points||{}).points,f=e?l:u;if(f&&iN(f)&&h){var p=0;if(r=h[0][0],i=h[0][1],e)t=h[1][0]-h[0][0],n=h[1][1]-h[0][1],a=c||0,o=this.markerStartAngle;else{var v=h.length;this.parsedStyle.isClosed?(t=h[v-1][0]-h[0][0],n=h[v-1][1]-h[0][1]):(r=h[v-1][0],i=h[v-1][1],t=h[v-2][0]-h[v-1][0],n=h[v-2][1]-h[v-1][1]),a=d||0,o=this.markerEndAngle;}p=Math.atan2(n,t),f.setLocalEulerAngles(180*p/Math.PI+o),f.setLocalPosition(r+Math.cos(p)*a,i+Math.sin(p)*a);}}},{key:"placeMarkerMid",value:function(e){var t=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(e){e.remove();}),this.markerMidList=[],e&&iN(e)&&t)for(var n=1;n<(this.parsedStyle.isClosed?t.length:t.length-1);n++){var r=t[n][0],i=t[n][1],a=1===n?e:e.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i);}}}]);}(iO);iY.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var iq=["style"],iX=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iq);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getTotalLength",value:function(){return 0===this.parsedStyle.points.totalLength&&(this.parsedStyle.points.totalLength=(0,Y.polylineLength)(this.parsedStyle.points.points)),this.parsedStyle.points.totalLength;}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t);}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach(function(e,t){n[t+1]&&((r=[0,0])[0]=o/s,i=(0,Y.lineLength)(e[0],e[1],n[t+1][0],n[t+1][1]),o+=i,r[1]=o/s,a.push(r));}),this.parsedStyle.points.segments=a;}var l=0,u=0;this.parsedStyle.points.segments.forEach(function(t,n){e>=t[0]&&e<=t[1]&&(l=(e-t[0])/(t[1]-t[0]),u=n);});var c=(0,Y.linePointAt)(n[u][0],n[u][1],n[u+1][0],n[u+1][1],l),d=c.x,h=c.y,f=V.vec3.transformMat4(V.vec3.create(),V.vec3.fromValues(d,h,0),t?this.getWorldTransform():this.getLocalTransform());return new ec(f[0],f[1]);}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t;}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n;}}]);}(iY);iX.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iY.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var i$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.RECT},e)]);}return(0,F.default)(t,e),(0,D.default)(t);}(iO);i$.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var iK=["style"],iZ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=(0,K.default)(e,iK);return(0,R.default)(this,t),(0,B.default)(this,t,[(0,L.default)({type:Q.TEXT,style:(0,L.default)({fill:"black"},n)},r)]);}return(0,F.default)(t,e),(0,D.default)(t,[{key:"getComputedTextLength",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.maxLineWidth)||0;}},{key:"getLineBoundingRects",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.lineMetrics)||[];}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing;}}]);}(iO);iZ.PARSED_STYLE_LIST=new Set([].concat((0,I.default)(iO.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"]));var iQ=(0,D.default)(function e(){(0,R.default)(this,e),this.registry={},this.define(Q.CIRCLE,iL),this.define(Q.ELLIPSE,iI),this.define(Q.RECT,i$),this.define(Q.IMAGE,iz),this.define(Q.LINE,ij),this.define(Q.GROUP,iB),this.define(Q.PATH,iH),this.define(Q.POLYGON,iY),this.define(Q.POLYLINE,iX),this.define(Q.TEXT,iZ),this.define(Q.HTML,iG);},[{key:"define",value:function(e,t){this.registry[e]=t;}},{key:"get",value:function(e){return this.registry[e];}}]),iJ={number:function(e){return new tC(e);},percent:function(e){return new tC(e,"%");},px:function(e){return new tC(e,"px");},em:function(e){return new tC(e,"em");},rem:function(e){return new tC(e,"rem");},deg:function(e){return new tC(e,"deg");},grad:function(e){return new tC(e,"grad");},rad:function(e){return new tC(e,"rad");},turn:function(e){return new tC(e,"turn");},s:function(e){return new tC(e,"s");},ms:function(e){return new tC(e,"ms");},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,a=e.syntax;ib.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:a});},registerLayout:function(e,t){ib.layoutRegistry.registerLayout(e,t);}},i0=function(e){var t,n;function r(){(0,R.default)(this,r),(e=(0,B.default)(this,r)).defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new ib.AnimationTimeline(e);}catch(e){}var e,t={};return nB.forEach(function(e){var n=e.n,r=e.inh,i=e.d;r&&i&&(t[n]=(0,j.isFunction)(i)?i(Q.GROUP):i);}),e.documentElement=new iB({id:"g-root",style:t}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e;}return(0,F.default)(r,e),(0,D.default)(r,[{key:"children",get:function(){return this.childNodes;}},{key:"childElementCount",get:function(){return this.childNodes.length;}},{key:"firstElementChild",get:function(){return this.firstChild;}},{key:"lastElementChild",get:function(){return this.lastChild;}},{key:"createElement",value:function(e,t){if("svg"===e)return this.documentElement;var n=this.defaultView.customElements.get(e);n||(console.warn("Unsupported tagName: ",e),n="tspan"===e?iZ:iB);var r=new n(t);return r.ownerDocument=this,r;}},{key:"createElementNS",value:function(e,t,n){return this.createElement(t,n);}},{key:"cloneNode",value:function(e){throw Error(eh);}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy();}catch(e){}}},{key:"elementsFromBBox",value:function(e,t,n,r){var i=[],a=function(o){if(!(!o.isInteractive()||o.isCulled())){var s=o.parsedStyle.pointerEvents;if(!["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===s?"auto":s)||o.isVisible()){var l=o.getTransformedGeometryBounds(!0);l&&!eo.isEmpty(l)&&l.max[0]>=e&&l.min[0]<=n&&l.max[1]>=t&&l.min[1]<=r&&i.push(o);}o.childNodes&&o.childNodes.forEach(function(e){e instanceof iO&&a(e);});}};return a(this.documentElement),i.sort(function(e,t){return t.sortable.renderOrder-e.sortable.renderOrder;}),i;}},{key:"elementFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return d&&d[0]||this.documentElement;}},{key:"elementFromPoint",value:(t=(0,X.default)((0,q.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=this.defaultView.canvas2Viewport({x:t,y:n})).x,a=r.y,s=(o=this.defaultView.getConfig()).width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=1;break;}return e.abrupt("return",null);case 1:return c=(u=this.defaultView.viewport2Client({x:i,y:a})).x,d=u.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:c,clientY:d},picked:[]});case 2:return h=e.sent.picked,e.abrupt("return",h&&h[0]||this.documentElement);case 3:case"end":return e.stop();}},e,this);})),function(e,n){return t.apply(this,arguments);})},{key:"elementsFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return d[d.length-1]!==this.documentElement&&d.push(this.documentElement),d;}},{key:"elementsFromPoint",value:(n=(0,X.default)((0,q.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=this.defaultView.canvas2Viewport({x:t,y:n})).x,a=r.y,s=(o=this.defaultView.getConfig()).width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=1;break;}return e.abrupt("return",[]);case 1:return c=(u=this.defaultView.viewport2Client({x:i,y:a})).x,d=u.y,e.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:c,clientY:d},picked:[]});case 2:return(h=e.sent.picked)[h.length-1]!==this.documentElement&&h.push(this.documentElement),e.abrupt("return",h);case 3:case"end":return e.stop();}},e,this);})),function(e,t){return n.apply(this,arguments);})},{key:"appendChild",value:function(e,t){throw Error(ef);}},{key:"insertBefore",value:function(e,t){throw Error(ef);}},{key:"removeChild",value:function(e,t){throw Error(ef);}},{key:"replaceChild",value:function(e,t,n){throw Error(ef);}},{key:"append",value:function(){throw Error(ef);}},{key:"prepend",value:function(){throw Error(ef);}},{key:"getElementById",value:function(e){return this.documentElement.getElementById(e);}},{key:"getElementsByName",value:function(e){return this.documentElement.getElementsByName(e);}},{key:"getElementsByTagName",value:function(e){return this.documentElement.getElementsByTagName(e);}},{key:"getElementsByClassName",value:function(e){return this.documentElement.getElementsByClassName(e);}},{key:"querySelector",value:function(e){return this.documentElement.querySelector(e);}},{key:"querySelectorAll",value:function(e){return this.documentElement.querySelectorAll(e);}},{key:"find",value:function(e){return this.documentElement.find(e);}},{key:"findAll",value:function(e){return this.documentElement.findAll(e);}}]);}(rq),i1=function(){function e(t){(0,R.default)(this,e),this.strategies=t;}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.config,r=t.camera,i=t.renderingService,a=t.renderingContext,o=this.strategies;i.hooks.cull.tap(e.tag,function(e){if(e){var t,i=e.cullable;if(0===o.length?i.visible=a.unculledEntities.indexOf(e.entity)>-1:i.visible=o.every(function(t){return t.isVisible(r,e);}),!e.isCulled()&&e.isVisible())return e;var s=(null===(t=n.future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;return e.dispatchEvent(new rW(r0.CULLED),s,s),null;}return e;}),i.hooks.afterRender.tap(e.tag,function(e){e.cullable.visibilityPlaneMask=-1;});}}]);}();i1.tag="Culling";var i2=function(){function e(){var t=this;(0,R.default)(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new rU(null),this.rootWheelEvent=new rH(null),this.onPointerMove=function(e){var n=null===(r=t.context.renderingContext.root)||void 0===r||null===(r=r.ownerDocument)||void 0===r?void 0:r.defaultView;if(!n.supportsTouchEvents||"touch"!==e.pointerType){var r,i,a=t.normalizeToPointerEvent(e,n),o=(0,$.default)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=t.bootstrapEvent(t.rootPointerEvent,s,n,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);}},this.onClick=function(e){var n,r,i=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=t.normalizeToPointerEvent(e,i),o=(0,$.default)(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=t.bootstrapEvent(t.rootPointerEvent,s,i,e);t.context.eventService.mapEvent(l);}}catch(e){o.e(e);}finally{o.f();}t.setCursor(t.context.eventService.cursor);};}return(0,D.default)(e,[{key:"apply",value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null;}),r.hooks.pointerWheel.tap(e.tag,function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t);}),r.hooks.pointerDown.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t=n.normalizeToPointerEvent(e,i);n.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();var r,a=(0,$.default)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerUp.tap(e.tag,function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,e)?"":"outside",o=n.normalizeToPointerEvent(e,i),s=(0,$.default)(o);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,e);u.type+=a,n.context.eventService.mapEvent(u);}}catch(e){s.e(e);}finally{s.f();}n.setCursor(n.context.eventService.cursor);}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(e){var t,r=n.normalizeToPointerEvent(e,i),a=(0,$.default)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s);}}catch(e){a.e(e);}finally{a.f();}n.setCursor(n.context.eventService.cursor);});}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),l=s.x,u=s.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n7[e.type]||e.type),e;}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t;}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=re.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null;}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default");}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];(0,j.isUndefined)(i.button)&&(i.button=0),(0,j.isUndefined)(i.buttons)&&(i.buttons=1),(0,j.isUndefined)(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,j.isUndefined)(i.width)&&(i.width=i.radiusX||1),(0,j.isUndefined)(i.height)&&(i.height=i.radiusY||1),(0,j.isUndefined)(i.tiltX)&&(i.tiltX=0),(0,j.isUndefined)(i.tiltY)&&(i.tiltY=0),(0,j.isUndefined)(i.pointerType)&&(i.pointerType="touch"),(0,j.isUndefined)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,j.isUndefined)(i.pressure)&&(i.pressure=i.force||.5),(0,j.isUndefined)(i.twist)&&(i.twist=0),(0,j.isUndefined)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i);}else t.isMouseEvent(e)&&((0,j.isUndefined)(e.isPrimary)&&(e.isPrimary=!0),(0,j.isUndefined)(e.width)&&(e.width=1),(0,j.isUndefined)(e.height)&&(e.height=1),(0,j.isUndefined)(e.tiltX)&&(e.tiltX=0),(0,j.isUndefined)(e.tiltY)&&(e.tiltY=0),(0,j.isUndefined)(e.pointerType)&&(e.pointerType="mouse"),(0,j.isUndefined)(e.pointerId)&&(e.pointerId=1),(0,j.isUndefined)(e.pressure)&&(e.pressure=.5),(0,j.isUndefined)(e.twist)&&(e.twist=0),(0,j.isUndefined)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),n.push(e);return n;}}]);}();i2.tag="Event";var i3=[Q.CIRCLE,Q.ELLIPSE,Q.IMAGE,Q.RECT,Q.LINE,Q.POLYLINE,Q.POLYGON,Q.TEXT,Q.PATH,Q.HTML],i4=(0,D.default)(function e(){(0,R.default)(this,e);},[{key:"isVisible",value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(eo.isEmpty(i))return!1;var a=e.getFrustum(),o=null===(n=t.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||el.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==el.OUTSIDE,r.visible;}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n,r){if(n===el.OUTSIDE||n===el.INSIDE)return n;for(var i=el.INSIDE,a=i3.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var l=1<<o;if((n&l)!=0&&(!a||4!==o&&5!==o)){var u=r[o],c=u.normal,d=u.distance;if(V.vec3.dot(c,t.getPositiveFarPoint(r[o]))+d<0)return el.OUTSIDE;V.vec3.dot(c,t.getNegativeFarPoint(r[o]))+d<0&&(i|=l);}}return i;}}]),i6=function(){function e(){(0,R.default)(this,e),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1;}return(0,D.default)(e,[{key:"apply",value:function(t){var n,r=this,i=t.renderingService,a=t.renderingContext.root.ownerDocument.defaultView,o=function(e){i.dirty();},s=function(e){var t,n=e.detail;(t=r.mutationRecords).push.apply(t,(0,I.default)(n)),i.dirty();},l=function(e){var t=e.target;ib.enableSizeAttenuation&&ib.styleValueRegistry.updateSizeAttenuation(t,a.getCamera().getZoom());},u=function(e){var t=e.target;ib.sceneGraphService.dirtyToRoot(t),i.dirty();};i.hooks.init.tap(e.tag,function(){a.addEventListener(r0.MOUNTED,l),a.addEventListener(r0.UNMOUNTED,u),a.addEventListener(r0.ATTR_MODIFIED,o),a.addEventListener(r0.BOUNDS_CHANGED,s);}),i.hooks.destroy.tap(e.tag,function(){a.removeEventListener(r0.MOUNTED,l),a.removeEventListener(r0.UNMOUNTED,u),a.removeEventListener(r0.ATTR_MODIFIED,o),a.removeEventListener(r0.BOUNDS_CHANGED,s),r.mutationRecords=[];});var c=null!==(n=ib.globalThis.requestIdleCallback)&&void 0!==n?n:rc.bind(ib.globalThis);i.hooks.endFrame.tap(e.tag,function(){r.isFirstTimeRendering&&(r.isFirstTimeRendering=!1,c(function(){r.isFirstTimeRenderingFinished=!0;})),r.mutationRecords=[];});}}]);}();i6.tag="Prepare";var i5=((N={}).READY="ready",N.BEFORE_RENDER="beforerender",N.RERENDER="rerender",N.AFTER_RENDER="afterrender",N.BEFORE_DESTROY="beforedestroy",N.AFTER_DESTROY="afterdestroy",N.RESIZE="resize",N.DIRTY_RECTANGLE="dirtyrectangle",N.RENDERER_CHANGED="rendererchanged",N),i8=new rW(r0.MOUNTED),i9=new rW(r0.UNMOUNTED),i7=new rW(i5.BEFORE_RENDER),ae=new rW(i5.RERENDER),at=new rW(i5.AFTER_RENDER),an=function(e){function t(e){(0,R.default)(this,t),(i=(0,B.default)(this,t)).Element=iO,i.inited=!1,i.context={};var n,r,i,a=e.container,o=e.canvas,s=e.renderer,l=e.width,u=e.height,c=e.background,d=e.cursor,h=e.supportsMutipleCanvasesInOneContainer,f=e.cleanUpOnDestroy,p=void 0===f||f,v=e.offscreenCanvas,g=e.devicePixelRatio,m=e.requestAnimationFrame,y=e.cancelAnimationFrame,b=e.createImage,E=e.supportsTouchEvents,x=e.supportsPointerEvents,k=e.isTouchEvent,S=e.isMouseEvent,T=e.dblClickSpeed,M=l,w=u,N=g||n5&&window.devicePixelRatio||1;return N=N>=1?Math.ceil(N):1,o&&(M=l||("auto"===(n=n9(o,"width"))?o.offsetWidth:parseFloat(n))||o.width/N,w=u||("auto"===(r=n9(o,"height"))?o.offsetHeight:parseFloat(r))||o.height/N),i.customElements=new iQ,i.devicePixelRatio=N,i.requestAnimationFrame=null!=m?m:rc.bind(ib.globalThis),i.cancelAnimationFrame=null!=y?y:rd.bind(ib.globalThis),i.createImage=null!=b?b:function(){return new window.Image;},i.supportsTouchEvents=null!=E?E:"ontouchstart"in ib.globalThis,i.supportsPointerEvents=null!=x?x:!!ib.globalThis.PointerEvent,i.isTouchEvent=null!=k?k:function(e){return i.supportsTouchEvents&&e instanceof ib.globalThis.TouchEvent;},i.isMouseEvent=null!=S?S:function(e){return!ib.globalThis.MouseEvent||e instanceof ib.globalThis.MouseEvent&&(!i.supportsPointerEvents||!(e instanceof ib.globalThis.PointerEvent));},v&&(ib.offscreenCanvas=v),i.document=new i0,i.document.defaultView=i,h||function(e,t,n){if(e){var r="string"==typeof e?document.getElementById(e):e;n6.has(r)&&n6.get(r).destroy(n),n6.set(r,t);}}(a,i,p),i.initRenderingContext((0,L.default)((0,L.default)({},e),{},{width:M,height:w,background:null!=c?c:"transparent",cursor:null!=d?d:"default",cleanUpOnDestroy:p,devicePixelRatio:N,requestAnimationFrame:i.requestAnimationFrame,cancelAnimationFrame:i.cancelAnimationFrame,createImage:i.createImage,supportsTouchEvents:i.supportsTouchEvents,supportsPointerEvents:i.supportsPointerEvents,isTouchEvent:i.isTouchEvent,isMouseEvent:i.isMouseEvent,dblClickSpeed:null!=T?T:200})),i.initDefaultCamera(M,w,s.clipSpaceNearZ),i.initRenderer(s,!0),i;}return(0,F.default)(t,e),(0,D.default)(t,[{key:"initRenderingContext",value:function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1};}},{key:"initDefaultCamera",value:function(e,t,n){var r=this,i=new ib.CameraContribution;i.clipSpaceNearZ=n,i.setType(eP.EXPLORING,eA.DEFAULT).setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0).setOrthographic(-(e/2),e/2,t/2,-(t/2),.1,1e3),i.canvas=this,i.eventEmitter.on(eL.UPDATED,function(){r.context.renderingContext.renderReasons.add(rK.CAMERA_CHANGED),ib.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation();}),this.context.camera=i;}},{key:"updateSizeAttenuation",value:function(){var e=this.getCamera().getZoom();this.document.documentElement.forEach(function(t){ib.styleValueRegistry.updateSizeAttenuation(t,e);});}},{key:"getConfig",value:function(){return this.context.config;}},{key:"getRoot",value:function(){return this.document.documentElement;}},{key:"getCamera",value:function(){return this.context.camera;}},{key:"getContextService",value:function(){return this.context.contextService;}},{key:"getEventService",value:function(){return this.context.eventService;}},{key:"getRenderingService",value:function(){return this.context.renderingService;}},{key:"getRenderingContext",value:function(){return this.context.renderingContext;}},{key:"getStats",value:function(){return this.getRenderingService().getStats();}},{key:"ready",get:function(){var e=this;return!this.readyPromise&&(this.readyPromise=new Promise(function(t){e.resolveReadyPromise=function(){t(e);};}),this.inited&&this.resolveReadyPromise()),this.readyPromise;}},{key:"destroy",value:function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=arguments.length>1?arguments[1]:void 0;tc.clearCache();var r=(null===(e=this.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation)===!0;n||this.dispatchEvent(new rW(i5.BEFORE_DESTROY),r,r),this.frameId&&this.cancelAnimationFrame(this.frameId);var i=this.getRoot();t&&(this.unmountChildren(i),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n||this.dispatchEvent(new rW(i5.AFTER_DESTROY),r,r);var a=function(e){e.currentTarget=null,e.manager=null,e.target=null,e.relatedNode=null;};a(i8),a(i9),a(i7),a(ae),a(at),a(i_),a(iS),a(iT),a(iM),ib.textService.clearCache();}},{key:"changeSize",value:function(e,t){this.resize(e,t);}},{key:"resize",value:function(e,t){var n,r=this.context.config;r.width=e,r.height=t,this.getContextService().resize(e,t);var i=this.context.camera,a=i.getProjectionMode();i.setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0),a===eO.ORTHOGRAPHIC?i.setOrthographic(-(e/2),e/2,t/2,-(t/2),i.getNear(),i.getFar()):i.setAspect(e/t);var o=(null===(n=r.future)||void 0===n?void 0:n.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new rW(i5.RESIZE,{width:e,height:t}),o,o);}},{key:"appendChild",value:function(e,t){return this.document.documentElement.appendChild(e,t);}},{key:"insertBefore",value:function(e,t){return this.document.documentElement.insertBefore(e,t);}},{key:"removeChild",value:function(e){return this.document.documentElement.removeChild(e);}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren();}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren();}},{key:"render",value:function(e){var t,n=this;e&&(i7.detail=e,at.detail=e);var r=(null===(t=this.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation)===!0;this.dispatchEvent(i7,r,r),this.getRenderingService().render(this,e,function(){n.dispatchEvent(ae,r,r);}),this.dispatchEvent(at,r,r);}},{key:"run",value:function(){var e=this,t=function(n,r){e.render(r),e.frameId=e.requestAnimationFrame(t);};t();}},{key:"initRenderer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)throw Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new i2,new i6,new i1([new i4])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService((0,L.default)((0,L.default)({},ib),this.context)),this.context.renderingService=new rZ(ib,this.context),this.context.eventService=new rX(ib,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,n,!0)):this.context.contextService.initAsync().then(function(){t.initRenderingService(e,n);}).catch(function(e){console.error(e);});}},{key:"initRenderingService",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init(function(){t.inited=!0;var i,a=(null===(i=t.getConfig().future)||void 0===i?void 0:i.experimentalCancelEventPropagation)===!0;n?r?t.requestAnimationFrame(function(){t.dispatchEvent(new rW(i5.READY),a,a);}):t.dispatchEvent(new rW(i5.READY),a,a):t.dispatchEvent(new rW(i5.RENDERER_CHANGED),a,a),t.readyPromise&&t.resolveReadyPromise(),n||t.getRoot().forEach(function(e){var t;null===(t=e.dirty)||void 0===t||t.call(e,!0,!0);}),t.mountChildren(t.getRoot()),e.getConfig().enableAutoRendering&&t.run();});}},{key:"loadRendererContainerModule",value:function(e){var t=this;e.getPlugins().forEach(function(e){e.context=t.context,e.init(ib);});}},{key:"setRenderer",value:function(e){var t=this.getConfig();if(t.renderer!==e){var n=t.renderer;t.renderer=e,this.destroy(!1,!0),(0,I.default)((null==n?void 0:n.getPlugins())||[]).reverse().forEach(function(e){e.destroy(ib);}),this.initRenderer(e);}}},{key:"setCursor",value:function(e){this.getConfig().cursor=e,this.getContextService().applyCursorStyle(e);}},{key:"unmountChildren",value:function(e){var t=this;if(e.childNodes.forEach(function(e){t.unmountChildren(e);}),this.inited){if(e.isMutationObserved)e.dispatchEvent(i9);else{var n,r=(null===(n=this.getConfig().future)||void 0===n?void 0:n.experimentalCancelEventPropagation)===!0;i9.target=e,this.dispatchEvent(i9,!0,r);}e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1;}e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback();}},{key:"mountChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt(e);if(this.inited){if(!e.isConnected&&(e.ownerDocument=this.document,e.isConnected=!0,!n)){if(e.isMutationObserved)e.dispatchEvent(i8);else{var r,i=(null===(r=this.getConfig().future)||void 0===r?void 0:r.experimentalCancelEventPropagation)===!0;i8.target=e,this.dispatchEvent(i8,!0,i);}}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",e.nodeName);e.childNodes.forEach(function(e){t.mountChildren(e,n);}),e.isCustomElement&&e.connectedCallback&&e.connectedCallback();}},{key:"mountFragment",value:function(e){this.mountChildren(e,!1);}},{key:"client2Viewport",value:function(e){return this.getEventService().client2Viewport(e);}},{key:"viewport2Client",value:function(e){return this.getEventService().viewport2Client(e);}},{key:"viewport2Canvas",value:function(e){return this.getEventService().viewport2Canvas(e);}},{key:"canvas2Viewport",value:function(e){return this.getEventService().canvas2Viewport(e);}},{key:"getPointByClient",value:function(e,t){return this.client2Viewport({x:e,y:t});}},{key:"getClientByPoint",value:function(e,t){return this.viewport2Client({x:e,y:t});}}]);}(rY),ar=new WeakMap,ai=function(){function e(t,n){(0,R.default)(this,e),this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[],this.type=t,this.target=n;}return(0,D.default)(e,null,[{key:"copy",value:function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n;}}]);}();function aa(e,t){for(var n=e;n;n=n.parentNode){var r=ar.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.options;if(n===e||o.subtree){var s=t(o);s&&a.enqueue(s);}}}}(0,D.default)(function e(t,n,r){(0,R.default)(this,e),this.transientObservedNodes=[],this.observer=t,this.target=n,this.options=r;},[{key:"enqueue",value:function(e){var t,n=this.observer.records,r=n.length;if(n.length>0){var i,a=(i=n[r-1],i===e?i:A&&(i===A||i===P)?A:null);if(a){n[r-1]=a;return;}}else t=this.observer,as.push(t),ao||(ao=!0,void 0!==ib.globalThis?ib.globalThis.setTimeout(al):al());n[r]=e;}},{key:"addListeners",value:function(){this.addListeners_(this.target);}},{key:"addListeners_",value:function(e){var t=this.options;t.attributes&&e.addEventListener(r0.ATTR_MODIFIED,this,!0),t.childList&&e.addEventListener(r0.INSERTED,this,!0),(t.childList||t.subtree)&&e.addEventListener(r0.REMOVED,this,!0);}},{key:"removeListeners",value:function(){this.removeListeners_(this.target);}},{key:"removeListeners_",value:function(e){var t=this.options;t.attributes&&e.removeEventListener(r0.ATTR_MODIFIED,this,!0),t.childList&&e.removeEventListener(r0.INSERTED,this,!0),(t.childList||t.subtree)&&e.removeEventListener(r0.REMOVED,this,!0);}},{key:"removeTransientObservers",value:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=ar.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break;}},this);}},{key:"handleEvent",value:function(e){switch(e.stopImmediatePropagation(),e.type){case r0.ATTR_MODIFIED:var t=e.attrName,n=e.relatedNode.namespaceURI;(i=P=new ai("attributes",a=e.target)).attributeName=t,i.attributeNamespace=n;var r=e.attrChange===r1.ADDITION?null:e.prevValue;aa(a,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?(A||((A=ai.copy(P)).oldValue=r),A):i;});break;case r0.REMOVED:case r0.INSERTED:a=e.relatedNode;var i,a,o,s,l=e.target;e.type===r0.INSERTED?(o=[l],s=[]):(o=[],s=[l]);var u=l.previousSibling,c=l.nextSibling;(i=P=new ai("childList",a)).addedNodes=o,i.removedNodes=s,i.previousSibling=u,i.nextSibling=c,aa(a,function(e){if(e.childList)return i;});}P=A=void 0;}}]);var ao=!1,as=[];function al(){ao=!1;var e=as;as=[],e.sort(function(e,t){return e.uid-t.uid;});var t=!1;e.forEach(function(e){var n=e.takeRecords();(function(e){e.nodes.forEach(function(t){var n=ar.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers();});});})(e),n.length&&(e.callback(n,e),t=!0);}),t&&al();}var au=(0,D.default)(function e(){(0,R.default)(this,e),this.cacheStore=new Map;},[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e);}},{key:"put",value:function(e,t,n){return!this.cacheStore.has(e)&&(this.cacheStore.set(e,{value:t,counter:new Set([n.entity])}),this.onRefAdded(n),!0);}},{key:"get",value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.has(t.entity)||(n.counter.add(t.entity),this.onRefAdded(t)),n.value):null;}},{key:"update",value:function(e,t,n){var r=this.cacheStore.get(e);return!!r&&(r.value=(0,L.default)((0,L.default)({},r.value),t),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0);}},{key:"release",value:function(e,t){var n=this.cacheStore.get(e);return!!n&&(n.counter.delete(t.entity),n.counter.size<=0&&this.cacheStore.delete(e),!0);}},{key:"releaseRef",value:function(e){var t=this;Array.from(this.cacheStore.keys()).forEach(function(n){t.release(n,e);});}},{key:"getSize",value:function(){return this.cacheStore.size;}},{key:"clear",value:function(){this.cacheStore.clear();}}]),ac=[],ad=[],ah=function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,null,[{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;e.rafId&&(t.cancelAnimationFrame(e.rafId),e.rafId=null);}},{key:"executeTask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;ac.length<=0&&ad.length<=0||(ad.forEach(function(e){return e();}),ad=ac.splice(0,e.TASK_NUM_PER_FRAME),e.rafId=t.requestAnimationFrame(function(){e.executeTask(t);}));}},{key:"sliceImage",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.api,s=t.naturalWidth||t.width,l=t.naturalHeight||t.height,u=n-a,c=r-a,d=Math.ceil(s/u),h=Math.ceil(l/c),f={tileSize:[n,r],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null);})},p=function(e){for(var a=function(a){ac.push(function(){var d=a*u,h=e*c,p=[Math.min(n,s-d),Math.min(r,l-h)],v=p[0],g=p[1],m=o.createCanvas();m.width=n,m.height=r,m.getContext("2d").drawImage(t,d,h,v,g,0,0,v,g),f.tiles[e][a]={x:d,y:h,tileX:a,tileY:e,data:m},i();});},h=0;h<d;h++)a(h);},v=0;v<h;v++)p(v);return e.stop(),e.executeTask(),f;}}]);}();ah.TASK_NUM_PER_FRAME=10;var af=new au;function ap(e){if(!e.complete)return[0,0];var t=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r=256;return[256,512].forEach(function(e){Math.ceil(n/e)*Math.ceil(t/e)<1e3&&(r=e);}),[r,r];}af.onRefAdded=function(e){var t=this;e.addEventListener(r0.DESTROY,function(){t.releaseRef(e);},{once:!0});},(0,D.default)(function e(t,n){(0,R.default)(this,e),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=n;},[{key:"getImageSync",value:function(e,t,n){var r=(0,j.isString)(e)?e:e.src;if(af.has(r)){var i=af.get(r,t);if(i.img.complete)return null==n||n(i),i;}return this.getOrCreateImage(e,t).then(function(e){null==n||n(e);}).catch(function(e){console.error(e);}),null;}},{key:"getOrCreateImage",value:function(e,t){var n=this,r=(0,j.isString)(e)?e:e.src;if(!(0,j.isString)(e)&&!af.has(r)){var i={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:ap(e)};af.put(r,i,t);}if(af.has(r)){var a=af.get(r,t);return a.img.complete?Promise.resolve(a):new Promise(function(e,t){a.img.addEventListener("load",function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=ap(a.img),e(a);}),a.img.addEventListener("error",function(e){t(e);});});}return new Promise(function(e,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:ap(a)};af.put(r,o,t),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=ap(o.img),e(o);},a.onerror=function(e){i(e);},a.crossOrigin="Anonymous",a.src=r;}});}},{key:"createDownSampledImage",value:(C=(0,X.default)((0,q.default)().mark(function e(t,n){var r,i,a,o,s,l,u,c,d,h,f,p,v,g;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,n);case 1:if(!(void 0!==(r=e.sent).downSamplingRate)){e.next=2;break;}return e.abrupt("return",r);case 2:if(s=void 0===(o=(a="boolean"==typeof(i=this.context.config.enableLargeImageOptimization)?{}:i).maxDownSampledImageSize)?2048:o,u=void 0===(l=a.downSamplingRateThreshold)?.5:l,c=this.runtime.globalThis.createImageBitmap,h=(d=(0,G.default)(r.size,2))[0],f=d[1],p=r.img,v=Math.min((s+s)/(h+f),Math.max(.01,Math.min(u,.5))),g=(0,L.default)((0,L.default)({},r),{},{downSamplingRate:v}),af.update(r.img.src,g,n),!c){e.next=7;break;}return e.prev=3,e.next=4,c(r.img,{resizeWidth:h*v,resizeHeight:f*v});case 4:p=e.sent,e.next=6;break;case 5:e.prev=5,e.catch(3),v=1;case 6:e.next=8;break;case 7:v=1;case 8:return g=(0,L.default)((0,L.default)({},this.getImageSync(t,n)),{},{downSampled:p,downSamplingRate:v}),af.update(r.img.src,g,n),e.abrupt("return",g);case 9:case"end":return e.stop();}},e,this,[[3,5]]);})),function(e,t){return C.apply(this,arguments);})},{key:"createImageTiles",value:(_=(0,X.default)((0,q.default)().mark(function e(t,n,r,i){var a,o,s,l,u;return(0,q.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getOrCreateImage(t,i);case 1:return a=e.sent,s=(o=i.ownerDocument.defaultView).requestAnimationFrame,l=o.cancelAnimationFrame,ah.api={requestAnimationFrame:s,cancelAnimationFrame:l,createCanvas:function(){return r$.createCanvas();}},u=(0,L.default)((0,L.default)({},a),ah.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),af.update(a.img.src,u,i),e.abrupt("return",u);case 2:case"end":return e.stop();}},e,this);})),function(e,t,n,r){return _.apply(this,arguments);})},{key:"releaseImage",value:function(e,t){af.release((0,j.isString)(e)?e:e.src,t);}},{key:"releaseImageRef",value:function(e){af.releaseRef(e);}},{key:"getOrCreatePatternSync",value:function(e,t,n,r,i,a,o){var s,l,u=this.generatePatternKey(t);if(u&&this.patternCache[u])return this.patternCache[u];var c=t.image,d=t.repetition,h=t.transform,f=!1;if((0,j.isString)(c)){var p=this.getImageSync(c,e,o);s=null==p?void 0:p.img;}else r?(s=r,f=!0):s=c;var v=s&&n.createPattern(s,d);return v&&(l=h?rC(nT(h),new iO({})):V.mat4.identity(V.mat4.create()),f&&V.mat4.scale(l,l,[1/i,1/i,1]),v.setTransform({a:l[0],b:l[1],c:l[4],d:l[5],e:l[12]+a[0],f:l[13]+a[1]})),u&&v&&(this.patternCache[u]=v),v;}},{key:"getOrCreateGradient",value:function(e,t){var n=this.generateGradientKey(e),r=e.type,i=e.steps,a=e.min,o=e.width,s=e.height,l=e.angle,u=e.cx,c=e.cy,d=e.size;if(this.gradientCache[n])return this.gradientCache[n];var h=null;if(r===tS.LinearGradient){var f,p,v,g,m=(f=l.value*em,p=0+o/2,v=0+s/2,g=Math.abs(o*Math.cos(f))+Math.abs(s*Math.sin(f)),{x1:a[0]+p-Math.cos(f)*g/2,y1:a[1]+v-Math.sin(f)*g/2,x2:a[0]+p+Math.cos(f)*g/2,y2:a[1]+v+Math.sin(f)*g/2}),y=m.x1,b=m.y1,E=m.x2,x=m.y2;h=t.createLinearGradient(y,b,E,x);}else if(r===tS.RadialGradient){var k,S,T,M=(k=u.value,S=c.value,u.unit===td.kPercentage&&(k=u.value/100*o),c.unit===td.kPercentage&&(S=c.value/100*s),T=Math.max((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S])),d&&(d instanceof tC?T=d.value:d instanceof tM&&("closest-side"===d.value?T=Math.min(k,o-k,S,s-S):"farthest-side"===d.value?T=Math.max(k,o-k,S,s-S):"closest-corner"===d.value&&(T=Math.min((0,j.distanceSquareRoot)([0,0],[k,S]),(0,j.distanceSquareRoot)([0,s],[k,S]),(0,j.distanceSquareRoot)([o,s],[k,S]),(0,j.distanceSquareRoot)([o,0],[k,S]))))),{x:k+a[0],y:S+a[1],r:T}),w=M.x,N=M.y,C=M.r;h=t.createRadialGradient(w,N,0,w,N,C);}return h&&(i.forEach(function(e){var t,n=e.offset,r=e.color;n.unit===td.kPercentage&&(null===(t=h)||void 0===t||t.addColorStop(n.value/100,r.toString()));}),this.gradientCache[n]=h),this.gradientCache[n];}},{key:"generateGradientKey",value:function(e){var t=e.type,n=e.min,r=e.width,i=e.height,a=e.steps,o=e.angle,s=e.cx,l=e.cy,u=e.size;return"gradient-".concat(t,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==l?void 0:l.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map(function(e){var t=e.offset,n=e.color;return"".concat(t).concat(n);}).join("-"));}},{key:"generatePatternKey",value:function(e){var t=e.image,n=e.repetition;return(0,j.isString)(t)?"pattern-".concat(t,"-").concat(n):"rect"===t.nodeName?"pattern-".concat(t.entity,"-").concat(n):void 0;}}]).isSupportTile=!!r$.createCanvas(),function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,o=function(e,t,n){var r=e.parsedStyle,i=r.width,a=r.height;i&&!a?e.setAttribute("height",n/t*i):!i&&a&&e.setAttribute("width",t/n*a);},s=function(e){var t=e.target,r=t.nodeName,a=t.attributes;if(r===Q.IMAGE){var s=a.src,l=a.keepAspectRatio;i.getImageSync(s,t,function(e){var r=e.img,i=r.width,a=r.height;l&&o(t,i,a),t.dirty(),n.dirty();});}},l=function(e){var t=e.target,r=e.attrName,a=e.prevValue,s=e.newValue;t.nodeName===Q.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,t),(0,j.isString)(s)&&i.getOrCreateImage(s,t).then(function(e){var r=e.img,i=r.width,a=r.height;t.attributes.keepAspectRatio&&o(t,i,a),t.dirty(),n.dirty();}).catch(function(){}));};n.hooks.init.tap(e.tag,function(){a.addEventListener(r0.MOUNTED,s),a.addEventListener(r0.ATTR_MODIFIED,l);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener(r0.MOUNTED,s),a.removeEventListener(r0.ATTR_MODIFIED,l);});}}]);}().tag="LoadImage",function(){function e(){(0,R.default)(this,e),this.displayObjectHTMLElementMap=new WeakMap;}return(0,D.default)(e,[{key:"joinTransformMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+t[0],e[13]+t[1]].join(","),")");}},{key:"apply",value:function(t,n){var r=this,i=t.camera,a=t.renderingContext,o=t.renderingService;this.context=t;var s=a.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,u=function(e,t){t.style.transform=r.joinTransformMatrix(e.getWorldTransform(),e.getOrigin());},c=function(e){var t=e.target;if(t.nodeName===Q.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(t);r.$camera.appendChild(n),Object.keys(t.attributes).forEach(function(e){r.updateAttribute(e,t);}),u(t,n),l.set(n,t);}},d=function(e){var t=e.target;if(t.nodeName===Q.HTML&&r.$camera){var n=r.getOrCreateEl(t);n&&(n.remove(),l.delete(n));}},h=function(e){var t=e.target;if(t.nodeName===Q.HTML){var n=e.attrName;r.updateAttribute(n,t);}},f=function(e){for(var t=e.detail,n=0;n<t.length;n++){var i=t[n].target;(i.nodeName===Q.FRAGMENT?i.childNodes:[i]).forEach(function(e){if(e.nodeName===Q.HTML){var t=r.getOrCreateEl(e);u(e,t);}});}},p=function(){if(r.$camera){var e=r.context.config,t=e.width,n=e.height;r.$camera.parentElement.style.width="".concat(t||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px");}};o.hooks.init.tap(e.tag,function(){s.addEventListener(i5.RESIZE,p),s.addEventListener(r0.MOUNTED,c),s.addEventListener(r0.UNMOUNTED,d),s.addEventListener(r0.ATTR_MODIFIED,h),s.addEventListener(r0.BOUNDS_CHANGED,f);}),o.hooks.endFrame.tap(e.tag,function(){r.$camera&&a.renderReasons.has(rK.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()));}),o.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(i5.RESIZE,p),s.removeEventListener(r0.MOUNTED,c),s.removeEventListener(r0.UNMOUNTED,d),s.removeEventListener(r0.ATTR_MODIFIED,h),s.removeEventListener(r0.BOUNDS_CHANGED,f);});}},{key:"createCamera",value:function(e){var t=this.context.config,n=t.document,r=t.width,i=t.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",l=o.querySelector("#".concat(s));if(!l){var u=(n||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(r||0,"px"),u.style.height="".concat(i||0,"px");var c=(n||document).createElement("div");l=c,c.id=s,c.style.position="absolute",c.style.left="".concat(a.offsetLeft||0,"px"),c.style.top="".concat(a.offsetTop||0,"px"),c.style.transformOrigin="left top",c.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),c.style.pointerEvents="none",c.style.width="100%",c.style.height="100%",u.appendChild(c),o.appendChild(u);}return l;}return null;}},{key:"getOrCreateEl",value:function(e){var t=this.context.config.document,n=this.displayObjectHTMLElementMap.get(e);return n||(n=(t||document).createElement("div"),e.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(e,n),e.id&&(n.id=e.id),e.name&&n.setAttribute("name",e.name),e.className&&(n.className=e.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),n;}},{key:"updateAttribute",value:function(e,t){var n=this.getOrCreateEl(t);switch(e){case"innerHTML":var r=t.parsedStyle.innerHTML;(0,j.isString)(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(t.parsedStyle.x,"px");break;case"y":n.style.top="".concat(t.parsedStyle.y,"px");break;case"transformOrigin":var i=t.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=t.parsedStyle.width;n.style.width=(0,j.isNumber)(a)?"".concat(a,"px"):a.toString();break;case"height":var o=t.parsedStyle.height;n.style.height=(0,j.isNumber)(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=t.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var l=t.parsedStyle.visibility;n.style.visibility=l;break;case"pointerEvents":var u=t.parsedStyle.pointerEvents;n.style.pointerEvents=void 0===u?"auto":u;break;case"opacity":var c=t.parsedStyle.opacity;n.style.opacity="".concat(c);break;case"fill":var d=t.parsedStyle.fill,h="";tX(d)?h=d.isNone?"transparent":t.getAttribute("fill"):Array.isArray(d)?h=t.getAttribute("fill"):tq(d),n.style.background=h;break;case"stroke":var f=t.parsedStyle.stroke,p="";tX(f)?p=f.isNone?"transparent":t.getAttribute("stroke"):Array.isArray(f)?p=t.getAttribute("stroke"):tq(f),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":var v=t.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var g=t.style.filter;n.style.filter=g;break;default:(0,j.isNil)(t.style[e])||""===t.style[e]||(n.style[e]=t.style[e]);}}}]);}().tag="HTMLRendering",function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,o=t.config;this.context=t;var s=a.root.ownerDocument.defaultView,l=function(e){i.hooks.pointerMove.call(e);},u=function(e){i.hooks.pointerUp.call(e);},c=function(e){i.hooks.pointerDown.call(e);},d=function(e){i.hooks.pointerOver.call(e);},h=function(e){i.hooks.pointerOut.call(e);},f=function(e){i.hooks.pointerCancel.call(e);},p=function(e){i.hooks.pointerWheel.call(e);},v=function(e){i.hooks.click.call(e);},g=function(e){n.globalThis.document.addEventListener("pointermove",l,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("pointerleave",h,!0),e.addEventListener("pointerover",d,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",f,!0);},m=function(e){e.addEventListener("touchstart",c,!0),e.addEventListener("touchend",u,!0),e.addEventListener("touchmove",l,!0),e.addEventListener("touchcancel",f,!0);},y=function(e){n.globalThis.document.addEventListener("mousemove",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("mouseout",h,!0),e.addEventListener("mouseover",d,!0),n.globalThis.addEventListener("mouseup",u,!0);},b=function(e){n.globalThis.document.removeEventListener("pointermove",l,!0),e.removeEventListener("pointerdown",c,!0),e.removeEventListener("pointerleave",h,!0),e.removeEventListener("pointerover",d,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",f,!0);},E=function(e){e.removeEventListener("touchstart",c,!0),e.removeEventListener("touchend",u,!0),e.removeEventListener("touchmove",l,!0),e.removeEventListener("touchcancel",f,!0);},x=function(e){n.globalThis.document.removeEventListener("mousemove",l,!0),e.removeEventListener("mousedown",c,!0),e.removeEventListener("mouseout",h,!0),e.removeEventListener("mouseover",d,!0),n.globalThis.removeEventListener("mouseup",u,!0);};i.hooks.init.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="none",e.style.msTouchAction="none"):s.supportsPointerEvents&&(e.style.touchAction="none"),s.supportsPointerEvents?g(e):y(e),s.supportsTouchEvents&&m(e),o.useNativeClickEvent&&e.addEventListener("click",v,!0),e.addEventListener("wheel",p,{passive:!0,capture:!0});}),i.hooks.destroy.tap(e.tag,function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="",e.style.msTouchAction=""):s.supportsPointerEvents&&(e.style.touchAction=""),s.supportsPointerEvents?b(e):x(e),s.supportsTouchEvents&&E(e),o.useNativeClickEvent&&e.removeEventListener("click",v,!0),e.removeEventListener("wheel",p,!0);});}}]);}().tag="DOMInteraction",function(){function e(){(0,R.default)(this,e);}return(0,D.default)(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.contextService,i=t.config,a=r.getDomElement(),o=function(e){n.hooks.pointerDown.call(e);},s=function(e){n.hooks.pointerUp.call(e);},l=function(e){n.hooks.pointerMove.call(e);},u=function(e){n.hooks.pointerOver.call(e);},c=function(e){n.hooks.pointerOut.call(e);},d=function(e){n.hooks.click.call(e);},h=function(e){n.hooks.pointerCancel.call(e);};n.hooks.init.tap(e.tag,function(){a.addEventListener("touchstart",o,!0),a.addEventListener("touchend",s,!0),a.addEventListener("touchmove",l,!0),a.addEventListener("touchcancel",h,!0),a.addEventListener("mouseout",c,!0),a.addEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.addEventListener("click",d,!0);}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener("touchstart",o,!0),a.removeEventListener("touchend",s,!0),a.removeEventListener("touchmove",l,!0),a.removeEventListener("touchcancel",h,!0),a.removeEventListener("mouseout",c,!0),a.removeEventListener("mouseover",u,!0),i.useNativeClickEvent&&a.removeEventListener("click",d,!0);});}}]);}().tag="MobileInteraction";},f19e0084:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"renderGrid",{enumerable:!0,get:function(){return f;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("01a29d03"),o=n("2d6394cf"),s=n("cd5371db"),l=n("9e868a30"),u=n("bcf4e626"),c=n("d5e231fc"),d=n("82f544b2");function h(e){var t=e.type,n=e.gridCenter;return"linear"===t?n:n||e.center;}function f(e,t,n,f){var p,v=n.classNamePrefix,g=(0,a.subStyleProps)(n,"grid"),m=g.type,y=g.areaFill,b=h(n),E=(0,u.filterExec)(t,n.gridFilter),x="segment"===m?(p=n.gridLength,E.map(function(e,t){var i=e.value,o=(0,r.__read)((0,l.getValuePos)(i,n),2),s=o[0],c=o[1],d=(0,r.__read)((0,a.scale)((0,u.getDirectionVector)(i,n.gridDirection,n),p),2);return{id:t,points:[[s,c],[s+d[0],c+d[1]]]};})):function(e,t){var n=t.gridControlAngles,i=h(t);if(!i)throw Error("grid center is not provide");if(e.length<2)throw Error("Invalid grid data");if(!n||0===n.length)throw Error("Invalid gridControlAngles");var o=(0,r.__read)(i,2),s=o[0],u=o[1];return e.map(function(e,i){var o=e.value,c=(0,r.__read)((0,l.getValuePos)(o,t),2),d=c[0],h=c[1],f=(0,r.__read)([d-s,h-u],2),p=f[0],v=f[1],g=[];return n.forEach(function(e){var t=(0,a.degToRad)(e),n=(0,r.__read)([Math.cos(t),Math.sin(t)],2),i=n[0],o=n[1];g.push([p*i-v*o+s,p*o+v*i+u]);}),{points:g,id:i};});}(E,n),k=(0,r.__assign)((0,r.__assign)({},g),{center:b,areaFill:(0,i.isFunction)(y)?E.map(function(e,t){return(0,a.getCallbackValue)(y,[e,t,E]);}):y,animate:f,data:x});return e.selectAll(s.CLASS_NAMES.grid.class).data([1]).join(function(e){var t=e.append(function(){return new o.Grid({style:k});}).attr("className",s.CLASS_NAMES.grid.name);return(0,c.applyClassName)(t,s.CLASS_NAMES.grid,d.CLASSNAME_SUFFIX_MAP.grid,v),t;},function(e){return e.transition(function(){return this.update(k);});},function(e){return e.remove();}).transitions();}},f20c9f5f:function(e,t,n){"use strict";function r(e){var t;return!!(null===(t=e.style)||void 0===t?void 0:t.collapsed);}n.d(t,"__esModule",{value:!0}),n.d(t,"isCollapsed",{enumerable:!0,get:function(){return r;}});},f2c9e894:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ChartLoading:function(){return i.ChartLoading;},ErrorBoundary:function(){return a.ErrorBoundary;},createNode:function(){return r.createNode;}});var r=n("12b7564a"),i=n("3ce512c8"),a=n("8ccf9dd6");},f3755373:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BatchController",{enumerable:!0,get:function(){return a;}});var r=n("6b0531cc"),i=n("0299759a");class a{constructor(e){this.batchCount=0,this.context=e;}emit(e){let{graph:t}=this.context;t.emit(e.type,e);}startBatch(e=!0){this.batchCount++,1===this.batchCount&&this.emit(new i.GraphLifeCycleEvent(r.GraphEvent.BATCH_START,{initiate:e}));}endBatch(){this.batchCount--,0===this.batchCount&&this.emit(new i.GraphLifeCycleEvent(r.GraphEvent.BATCH_END));}get isBatching(){return this.batchCount>0;}destroy(){this.context=null;}}},f457f3e3:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"fadeOut",{enumerable:!0,get:function(){return i.default;}});var r=n("d1751d7c"),i=n("777fffbe")._(n("bb3be533"));r._(n("f949f236"),t);},f5c9f631:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{dark:function(){return r.dark;},light:function(){return i.light;}});var r=n("3b3a06de"),i=n("1b1409b3");},f5cbb4c0:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"PluginController",{enumerable:!0,get:function(){return a;}});var r=n("c23b41b5"),i=n("ec6e52f6");class a extends r.ExtensionController{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[]);}setPlugins(e){this.setExtensions(e);}getPluginInstance(e){let t=this.extensionMap[e];if(t)return t;i.print.warn(`Cannot find the plugin ${e}, will try to find it by type.`);let n=this.extensions.find(t=>t.type===e);if(n)return this.extensionMap[n.key];}}},f6ef0e58:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"classNames",{enumerable:!0,get:function(){return i;}});var r=n("18f14020"),i=function(e,t){var n=function(e){return"".concat(t,"-").concat(e);},i=Object.fromEntries(Object.entries(e).map(function(e){var t=(0,r.__read)(e,2),i=t[0],a=n(t[1]);return[i,{name:a,class:".".concat(a),id:"#".concat(a),toString:function(){return a;}}];}));return Object.assign(i,{prefix:n}),i;};},f70113aa:function(e,t,n){"use strict";var r,i,a,o;n.d(t,"__esModule",{value:!0}),n.d(t,"compile",{enumerable:!0,get:function(){return S;}});let s={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class l extends Error{constructor(e,t,n){super(e),this.position=t,this.token=n,this.name="ExpressionError";}}(a=r||(r={}))[a.STRING=0]="STRING",a[a.NUMBER=1]="NUMBER",a[a.BOOLEAN=2]="BOOLEAN",a[a.NULL=3]="NULL",a[a.IDENTIFIER=4]="IDENTIFIER",a[a.OPERATOR=5]="OPERATOR",a[a.FUNCTION=6]="FUNCTION",a[a.DOT=7]="DOT",a[a.BRACKET_LEFT=8]="BRACKET_LEFT",a[a.BRACKET_RIGHT=9]="BRACKET_RIGHT",a[a.PAREN_LEFT=10]="PAREN_LEFT",a[a.PAREN_RIGHT=11]="PAREN_RIGHT",a[a.COMMA=12]="COMMA",a[a.QUESTION=13]="QUESTION",a[a.COLON=14]="COLON",a[a.DOLLAR=15]="DOLLAR";let u=new Set([32,9,10,13]),c=new Set([43,45,42,47,37,33,38,124,61,60,62]),d=new Map([["true",r.BOOLEAN],["false",r.BOOLEAN],["null",r.NULL]]),h=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),f=new Map([[46,r.DOT],[91,r.BRACKET_LEFT],[93,r.BRACKET_RIGHT],[40,r.PAREN_LEFT],[41,r.PAREN_RIGHT],[44,r.COMMA],[63,r.QUESTION],[58,r.COLON],[36,r.DOLLAR]]),p=new Map;for(let[e,t]of f.entries())p.set(e,{type:t,value:String.fromCharCode(e)});function v(e){return e>=48&&e<=57;}function g(e){return e>=97&&e<=122||e>=65&&e<=90||95===e;}(o=i||(i={}))[o.Program=0]="Program",o[o.Literal=1]="Literal",o[o.Identifier=2]="Identifier",o[o.MemberExpression=3]="MemberExpression",o[o.CallExpression=4]="CallExpression",o[o.BinaryExpression=5]="BinaryExpression",o[o.UnaryExpression=6]="UnaryExpression",o[o.ConditionalExpression=7]="ConditionalExpression";let m=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),y={type:i.Literal,value:null},b={type:i.Literal,value:!0},E={type:i.Literal,value:!1},x=e=>{let t=0,n=e.length,a=()=>t>=n?null:e[t],o=()=>e[t++],s=e=>{let t=a();return null!==t&&t.type===e;},u=e=>e.type===r.OPERATOR?m.get(e.value)||-1:e.type===r.DOT||e.type===r.BRACKET_LEFT?9:e.type===r.QUESTION?1:-1,c=e=>{let n,u;if(o().type===r.DOT){if(!s(r.IDENTIFIER)){let e=a();throw new l("Expected property name",t,e?e.value:"<end of input>");}let e=o();n={type:i.Identifier,name:e.value},u=!1;}else{if(n=h(0),!s(r.BRACKET_RIGHT)){let e=a();throw new l("Expected closing bracket",t,e?e.value:"<end of input>");}o(),u=!0;}return{type:i.MemberExpression,object:e,property:n,computed:u};},d=()=>{let e=a();if(!e)throw new l("Unexpected end of input",t,"<end of input>");if(e.type===r.OPERATOR&&("!"===e.value||"-"===e.value)){o();let t=d();return{type:i.UnaryExpression,operator:e.value,argument:t,prefix:!0};}switch(e.type){case r.NUMBER:return o(),{type:i.Literal,value:Number(e.value)};case r.STRING:return o(),{type:i.Literal,value:e.value};case r.BOOLEAN:return o(),"true"===e.value?b:E;case r.NULL:return o(),y;case r.IDENTIFIER:return o(),{type:i.Identifier,name:e.value};case r.FUNCTION:return(()=>{let e=o(),n=[];if(!s(r.PAREN_LEFT)){let e=a();throw new l("Expected opening parenthesis after function name",t,e?e.value:"<end of input>");}for(o();;){if(s(r.PAREN_RIGHT)){o();break;}if(!a()){let e=a();throw new l("Expected closing parenthesis",t,e?e.value:"<end of input>");}if(n.length>0){if(!s(r.COMMA)){let e=a();throw new l("Expected comma between function arguments",t,e?e.value:"<end of input>");}o();}let e=h(0);n.push(e);}return{type:i.CallExpression,callee:{type:i.Identifier,name:e.value},arguments:n};})();case r.PAREN_LEFT:{o();let e=h(0);if(!s(r.PAREN_RIGHT)){let e=a();throw new l("Expected closing parenthesis",t,e?e.value:"<end of input>");}return o(),e;}default:throw new l(`Unexpected token: ${e.type}`,t,e.value);}},h=(f=0)=>{let p=d();for(;t<n;){let n=e[t],d=u(n);if(d<=f)break;if(n.type!==r.QUESTION){if(n.type!==r.OPERATOR){if(n.type!==r.DOT&&n.type!==r.BRACKET_LEFT)break;p=c(p);}else{o();let e=h(d);p={type:i.BinaryExpression,operator:n.value,left:p,right:e};}}else{o();let e=h(0);if(!s(r.COLON)){let e=a();throw new l("Expected : in conditional expression",t,e?e.value:"<end of input>");}o();let n=h(0);p={type:i.ConditionalExpression,test:p,consequent:e,alternate:n};}}return p;},f=h();return{type:i.Program,body:f};},k=(e,t,n)=>{let r=t;n&&(r={...t,context:{...t.context,...n}});let a=e=>{switch(e.type){case i.Literal:return e.value;case i.Identifier:return(e=>{if(!(e.name in r.context))throw new l(`Undefined variable: ${e.name}`);return r.context[e.name];})(e);case i.MemberExpression:return(e=>{let t=a(e.object);if(null==t)throw new l("Cannot access property of null or undefined");return t[e.computed?a(e.property):e.property.name];})(e);case i.CallExpression:return(e=>{let t=r.functions[e.callee.name];if(!t)throw new l(`Undefined function: ${e.callee.name}`);return t(...e.arguments.map(e=>a(e)));})(e);case i.BinaryExpression:return(e=>{if("&&"===e.operator){let t=a(e.left);return t?a(e.right):t;}if("||"===e.operator)return a(e.left)||a(e.right);let t=a(e.left),n=a(e.right);switch(e.operator){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"===":return t===n;case"!==":return t!==n;case">":return t>n;case">=":return t>=n;case"<":return t<n;case"<=":return t<=n;default:throw new l(`Unknown operator: ${e.operator}`);}})(e);case i.UnaryExpression:return(e=>{let t=a(e.argument);if(e.prefix)switch(e.operator){case"!":return!t;case"-":if("number"!=typeof t)throw new l(`Cannot apply unary - to non-number: ${t}`);return-t;default:throw new l(`Unknown operator: ${e.operator}`);}throw new l(`Postfix operators are not supported: ${e.operator}`);})(e);case i.ConditionalExpression:return(e=>{let t=a(e.test);return a(t?e.consequent:e.alternate);})(e);default:throw new l(`Evaluation error: Unsupported node type: ${e.type}`);}};return a(e.body);};function S(e){let t=x((e=>{let t=e.length,n=Array(Math.ceil(t/3)),i=0,a=0;for(;a<t;){let o=e.charCodeAt(a);if(u.has(o)){a++;continue;}let s=p.get(o);if(s)n[i++]=s,a++;else if(34!==o&&39!==o){if(v(o)||45===o&&a+1<t&&v(e.charCodeAt(a+1)))n[i++]=function(){let n=a;for(45===e.charCodeAt(a)&&a++;a<t&&v(e.charCodeAt(a));)a++;if(a<t&&46===e.charCodeAt(a))for(a++;a<t&&v(e.charCodeAt(a));)a++;let i=e.slice(n,a);return{type:r.NUMBER,value:i};}();else if(64!==o){if(g(o))n[i++]=function(){var n;let i=a++;for(;a<t&&(g(n=e.charCodeAt(a))||v(n));)a++;let o=e.slice(i,a),s=d.get(o);return s?{type:s,value:o}:{type:r.IDENTIFIER,value:o};}();else{if(!c.has(o))throw new l(`Unexpected character: ${e[a]}`,a,e.substring(Math.max(0,a-10),a));n[i++]=function(){if(a+2<t){let t=e.substring(a,a+3);if(h.has(t))return a+=3,{type:r.OPERATOR,value:t};}if(a+1<t){let t=e.substring(a,a+2);if(h.has(t))return a+=2,{type:r.OPERATOR,value:t};}let n=e[a];if(h.has(n))return a++,{type:r.OPERATOR,value:n};throw new l(`Unknown operator at position ${a}: ${e.substring(a,a+1)}`,a,e.substring(Math.max(0,a-10),a));}();}}else n[i++]=function(){let n=++a;if(a<t&&g(e.charCodeAt(a))){var i;for(a++;a<t&&(g(i=e.charCodeAt(a))||v(i));)a++;}let o=e.slice(n,a);return{type:r.FUNCTION,value:o};}();}else n[i++]=function(n){let i=a+1;a++;let o="",s=!1;for(;a<t;){let t=e.charCodeAt(a);if(t===n)return s||(o=e.substring(i,a)),a++,{type:r.STRING,value:o};92===t?(s||(o=e.substring(i,a),s=!0),o+=e[++a]):s&&(o+=e[a]),a++;}throw new l(`Unterminated string starting with ${String.fromCharCode(n)}`,a,e.substring(Math.max(0,a-10),a));}(o);}return i===n.length?n:n.slice(0,i);})(e)),n=((e={},t={})=>({context:e,functions:t}))({},s);return (e={})=>k(t,n,e);}},f80ef388:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{maybeAppend:function(){return u;},select:function(){return l;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("9225b8d3"),o=n("5a28242b"),s=function(){var e,t,n;function s(t,n,r,i,a,o,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),e.add(this),this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s;}return s.prototype.selectAll=function(e){var n="string"==typeof e?this._parent.querySelectorAll(e):e;return new t(n,null,this._elements[0],this._document);},s.prototype.selectFacetAll=function(e){var n="string"==typeof e?this._parent.querySelectorAll(e):e;return new t(this._elements,null,this._parent,this._document,void 0,void 0,n);},s.prototype.select=function(e){var n="string"==typeof e?this._parent.querySelectorAll(e)[0]||null:e;return new t([n],null,n,this._document);},s.prototype.append=function(e){var n=this,i="function"==typeof e?e:function(){return n.createElement(e);},a=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var s=this._data[o],l=(0,r.__read)(Array.isArray(s)?s:[s,null],2),u=l[0],c=l[1],d=i(u,o);d.__data__=u,null!==c&&(d.__fromElements__=c),this._parent.appendChild(d),a.push(d);}return new t(a,null,this._parent,this._document);}for(var o=0;o<this._elements.length;o++){var h=this._elements[o],u=h.__data__,d=i(u,o);h.appendChild(d),a.push(d);}return new t(a,null,a[0],this._document);},s.prototype.maybeAppend=function(t,i){var a=(0,r.__classPrivateFieldGet)(this,e,"m",n).call(this,"#"===t[0]?t:"#".concat(t),i);return a.attr("id",t),a;},s.prototype.maybeAppendByClassName=function(t,i){var a=t.toString(),o=(0,r.__classPrivateFieldGet)(this,e,"m",n).call(this,"."===a[0]?a:".".concat(a),i);return o.attr("className",a),o;},s.prototype.maybeAppendByName=function(t,i){var a=(0,r.__classPrivateFieldGet)(this,e,"m",n).call(this,'[name="'.concat(t,'"]'),i);return a.attr("name",t),a;},s.prototype.data=function(e,n,i){void 0===n&&(n=function(e){return e;}),void 0===i&&(i=function(){return null;});for(var a,s,l=[],u=[],c=new Set(this._elements),d=[],h=new Set,f=new Map(this._elements.map(function(e,t){return[n(e.__data__,t),e];})),p=new Map(this._facetElements.map(function(e,t){return[n(e.__data__,t),e];})),v=(0,o.group)(this._elements,function(e){return i(e.__data__);}),g=0;g<e.length;g++){var m=e[g],y=n(m,g),b=i(m,g);if(f.has(y)){var E=f.get(y);E.__data__=m,E.__facet__=!1,u.push(E),c.delete(E),f.delete(y);}else if(p.has(y)){var E=p.get(y);E.__data__=m,E.__facet__=!0,u.push(E),p.delete(y);}else if(v.has(y)){var x=v.get(y);d.push([m,x]);try{for(var k=(a=void 0,(0,r.__values)(x)),S=k.next();!S.done;S=k.next()){var E=S.value;c.delete(E);}}catch(e){a={error:e};}finally{try{S&&!S.done&&(s=k.return)&&s.call(k);}finally{if(a)throw a.error;}}v.delete(y);}else if(f.has(b)){var E=f.get(b);E.__toData__?E.__toData__.push(m):E.__toData__=[m],h.add(E),c.delete(E);}else l.push(m);}var T=[new t([],l,this._parent,this._document),new t(u,null,this._parent,this._document),new t(c,null,this._parent,this._document),new t([],d,this._parent,this._document),new t(h,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,T);},s.prototype.merge=function(e){var n=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(this._elements),!1),(0,r.__read)(e._elements),!1),i=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(this._transitions),!1),(0,r.__read)(e._transitions),!1);return new t(n,null,this._parent,this._document,void 0,i);},s.prototype.createElement=function(e){if(this._document)return this._document.createElement(e,{});var n=t.registry[e];return n?new n:function(e){throw Error(e);}("Unknown node type: ".concat(e));},s.prototype.join=function(e,t,n,r,i){void 0===e&&(e=function(e){return e;}),void 0===t&&(t=function(e){return e;}),void 0===n&&(n=function(e){return e.remove();}),void 0===r&&(r=function(e){return e;}),void 0===i&&(i=function(e){return e.remove();});var a=e(this._enter),o=t(this._update),s=n(this._exit),l=r(this._merge),u=i(this._split);return o.merge(a).merge(s).merge(l).merge(u);},s.prototype.remove=function(){for(var e=this,n=0;n<this._elements.length;n++)!function(t){var n=e._elements[t],r=e._transitions[t];r?r.then(function(){return n.remove();}):n.remove();}(n);return new t([],null,this._parent,this._document,void 0,this._transitions);},s.prototype.each=function(e){for(var t=0;t<this._elements.length;t++){var n=this._elements[t],r=n.__data__;e.call(n,r,t);}return this;},s.prototype.attr=function(e,t){var n="function"!=typeof t?function(){return t;}:t;return this.each(function(r,i){void 0!==t&&(this[e]=n.call(this,r,i));});},s.prototype.style=function(e,t,n){void 0===n&&(n=!0);var r="function"==typeof t&&n?t:function(){return t;};return this.each(function(n,i){void 0!==t&&(this.style[e]=r.call(this,n,i));});},s.prototype.styles=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),this.each(function(n,i){var a=this;Object.entries(e).forEach(function(e){var o=(0,r.__read)(e,2),s=o[0],l=o[1],u="function"==typeof l&&t?l:function(){return l;};void 0!==l&&a.attr(s,u.call(a,n,i));});});},s.prototype.update=function(e,t){void 0===t&&(t=!0);var n="function"==typeof e&&t?e:function(){return e;};return this.each(function(t,r){e&&this.update&&this.update(n.call(this,t,r));});},s.prototype.maybeUpdate=function(e,t){void 0===t&&(t=!0);var n="function"==typeof e&&t?e:function(){return e;};return this.each(function(t,r){e&&this.update&&this.update(n.call(this,t,r));});},s.prototype.transition=function(e){this._transitions;var t=Array(this._elements.length);return this.each(function(n,r){t[r]=e.call(this,n,r);}),this._transitions=(0,i.flatten)(t),this;},s.prototype.on=function(e,t){return this.each(function(){this.addEventListener(e,t);}),this;},s.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.call.apply(e,(0,r.__spreadArray)([this._parent,this],(0,r.__read)(t),!1)),this;},s.prototype.node=function(){return this._elements[0];},s.prototype.nodes=function(){return this._elements;},s.prototype.transitions=function(){return this._transitions.filter(function(e){return!!e;});},s.prototype.parent=function(){return this._parent;},t=s,e=new WeakSet,n=function(e,n){var r=this._elements[0],i=r.querySelector(e);if(i)return new t([i],null,this._parent,this._document);var a="string"==typeof n?this.createElement(n):n();return r.appendChild(a),new t([a],null,this._parent,this._document);},s.registry={g:a.Group,rect:a.Rect,circle:a.Circle,path:a.Path,text:a.Text,ellipse:a.Ellipse,image:a.Image,line:a.Line,polygon:a.Polygon,polyline:a.Polyline,html:a.HTML},s;}();function l(e){return new s([e],null,e,e.ownerDocument);}function u(e,t,n){return e.querySelector(t)?l(e).select(t):l(e).append(n);}},f8157ecf:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Circle",{enumerable:!0,get:function(){return l;}});var r=n("a566da36"),i=n("95550d14"),a=n("8bdd800c"),o=n("cdd49f4a"),s=n("ec2f02a5");class l extends s.BaseNode{constructor(e){super((0,o.mergeOptions)({style:l.defaultStyleProps},e));}drawKeyShape(e,t){return this.upsert("key",r.Circle,this.getKeyStyle(e),t);}getKeyStyle(e){return Object.assign(Object.assign({},super.getKeyStyle(e)),{r:Math.min(...this.getSize(e))/2});}getIconStyle(e){let t=super.getIconStyle(e),{r:n}=this.getShape("key").attributes,r=2*n*i.ICON_SIZE_RATIO;return!!t&&Object.assign({width:r,height:r},t);}getIntersectPoint(e,t=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(e,n,t);}}l.defaultStyleProps={size:32};},f8c84dba:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"BUILT_IN_EXTENSIONS",{enumerable:!0,get:function(){return s;}});var r=n("97770451"),i=n("9cec50bb"),a=n("730f5624"),o=n("6bc9d096");let s={node:{react:r.ReactNode},edge:{indented:a.IndentedEdge},behavior:{"hover-activate-neighbors":i.HoverActivateNeighbors,"hover-activate-chain":i.HoverActivateChain},transform:{"translate-react-node-origin":o.TranslateReactNodeOrigin,"collapse-expand-react-node":o.CollapseExpandReactNode,"assign-color-by-branch":o.AssignColorByBranch,"map-edge-line-width":o.MapEdgeLineWidth,"arrange-edge-z-index":o.ArrangeEdgeZIndex}};},f949f236:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{animate:function(){return c;},onAnimateFinished:function(){return s;},onAnimatesFinished:function(){return l;},parseAnimationOption:function(){return o;},transition:function(){return h;},transitionShape:function(){return d;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("01a29d03");function o(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(e){var n=(0,r.__read)(e,1)[0];return!t.includes(n);}));return Object.fromEntries(t.map(function(t){return"boolean"!=typeof e&&"enter"in e&&"update"in e&&"exit"in e?!1===e[t]?[t,!1]:[t,(0,r.__assign)((0,r.__assign)({},e[t]),n)]:[t,n];}));}function s(e,t){e?e.finished.then(t):t();}function l(e,t){0===e.length?t():Promise.all(e.map(function(e){return null==e?void 0:e.finished;})).then(t);}function u(e,t){"update"in e?e.update(t):e.attr(t);}function c(e,t,n){return 0===t.length?null:n?e.animate(t,n):(u(e,{style:t.slice(-1)[0]}),null);}function d(e,t,n,i){if(void 0===i&&(i="destroy"),"text"===e.nodeName&&"text"===t.nodeName&&e.attributes.text===t.attributes.text)return e.remove(),[null];var o=function(){"destroy"===i?e.destroy():"hide"===i&&(0,a.hide)(e),t.isVisible()&&(0,a.show)(t);};if(!n)return o(),[null];var l=n.duration,u=void 0===l?0:l,c=n.delay,d=void 0===c?0:c,h=Math.ceil(+u/2),f=+u/4,p=(0,r.__read)(e.getGeometryBounds().center,2),v=p[0],g=p[1],m=(0,r.__read)(t.getGeometryBounds().center,2),y=m[0],b=m[1],E=(0,r.__read)([(v+y)/2-v,(g+b)/2-g],2),x=E[0],k=E[1],S=e.style.opacity,T=t.style.opacity,M=e.style.transform||"",w=t.style.transform||"",N=e.animate([{opacity:void 0===S?1:S,transform:"translate(0, 0) ".concat(M)},{opacity:0,transform:"translate(".concat(x,", ").concat(k,") ").concat(M)}],(0,r.__assign)((0,r.__assign)({fill:"both"},n),{duration:d+h+f})),C=t.animate([{opacity:0,transform:"translate(".concat(-x,", ").concat(-k,") ").concat(w),offset:.01},{opacity:void 0===T?1:T,transform:"translate(0, 0) ".concat(w)}],(0,r.__assign)((0,r.__assign)({fill:"both"},n),{duration:h+f,delay:d+h-f}));return s(C,o),[N,C];}function h(e,t,n){var a={},o={};return(Object.entries(t).forEach(function(t){var n=(0,r.__read)(t,2),s=n[0],l=n[1];if(!(0,i.isNil)(l)){var u=e.style[s]||e.parsedStyle[s]||0;u!==l&&(a[s]=u,o[s]=l);}}),n)?c(e,[a,o],(0,r.__assign)({fill:"both"},n)):(u(e,o),null);}},fa4c5941:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Snapline",{enumerable:!0,get:function(){return d;}});var r=n("a566da36"),i=n("abe9d8d6"),a=n("6b0531cc"),o=n("966f7de2"),s=n("71473486"),l=n("0d562788"),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};let c={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class d extends l.BasePlugin{constructor(e,t){super(e,Object.assign({},d.defaultOptions,t)),this.initSnapline=()=>{let e=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=e.appendChild(new r.Line({style:Object.assign(Object.assign({},c),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=e.appendChild(new r.Line({style:Object.assign(Object.assign({},c),this.options.verticalLineStyle)})));},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(e,t,n)=>u(this,void 0,void 0,function*(){let{verticalX:r,horizontalY:i}=n,{tolerance:a}=this.options,{min:[o,s],max:[l,u],center:[c,d]}=t,f=0,p=0;null!==r&&(h(l,r)<a&&(f=r-l),h(o,r)<a&&(f=r-o),h(c,r)<a&&(f=r-c),0!==f&&(this.isVerticalSticking=!0)),null!==i&&(h(u,i)<a&&(p=i-u),h(s,i)<a&&(p=i-s),h(d,i)<a&&(p=i-d),0!==p&&(this.isHorizontalSticking=!0)),(0!==f||0!==p)&&(yield this.context.graph.translateElementBy({[e]:[f,p]},!1));}),this.enableSnap=e=>{let{target:t}=e;if(this.isHorizontalSticking||this.isVerticalSticking){let[n,r]=this.getDelta(e);if(this.isHorizontalSticking&&this.isVerticalSticking&&.5>=Math.abs(n)&&.5>=Math.abs(r))return this.context.graph.translateElementBy({[t.id]:[-n,-r]},!1),!1;if(this.isHorizontalSticking&&.5>=Math.abs(r))return this.context.graph.translateElementBy({[t.id]:[0,-r]},!1),!1;if(this.isVerticalSticking&&.5>=Math.abs(n))return this.context.graph.translateElementBy({[t.id]:[-n,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0;},200);}return this.enableStick;},this.calcSnaplineMetadata=(e,t)=>{let{tolerance:n,shape:r}=this.options,{min:[a,o],max:[s,l],center:[u,c]}=t,d=null,p=null,v=null,g=null,m=null,y=null;return this.getNodes().some(t=>{if((0,i.isEqual)(e.id,t.id))return!1;let{min:[b,E],max:[x,k],center:[S,T]}=f(t,r).getRenderBounds();return null===d&&(h(S,u)<n?d=S:h(b,a)<n?d=b:h(b,s)<n?d=b:h(x,s)<n?d=x:h(x,a)<n&&(d=x),null!==d&&(p=Math.min(E,o),v=Math.max(k,l))),null===g&&(h(T,c)<n?g=T:h(E,o)<n?g=E:h(E,l)<n?g=E:h(k,l)<n?g=k:h(k,o)<n&&(g=k),null!==g&&(m=Math.min(b,a),y=Math.max(x,s))),null!==d&&null!==g;}),{verticalX:d,verticalMinY:p,verticalMaxY:v,horizontalY:g,horizontalMinX:m,horizontalMaxX:y};},this.onDragStart=()=>{this.initSnapline();},this.onDrag=e=>u(this,void 0,void 0,function*(){let{target:t}=e;if(this.options.autoSnap&&!this.enableSnap(e))return;let n=f(t,this.options.shape).getRenderBounds(),r=this.calcSnaplineMetadata(t,n);this.hideSnapline(),(null!==r.verticalX||null!==r.horizontalY)&&this.updateSnapline(r),this.options.autoSnap&&(yield this.autoSnapToLine(t.id,n,r));}),this.onDragEnd=()=>{this.hideSnapline();},this.bindEvents();}getNodes(){var e;let{filter:t}=this.options,n=((null===(e=this.context.element)||void 0===e?void 0:e.getNodes())||[]).filter(e=>{var t;return(0,o.isVisible)(e)&&(null===(t=this.context.viewport)||void 0===t?void 0:t.isInViewport(e.getRenderBounds()));});return t?n.filter(e=>t(e)):n;}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden";}getLineWidth(e){let{lineWidth:t}=this.options[`${e}LineStyle`];return+(t||c.lineWidth||1)/this.context.graph.getZoom();}updateSnapline(e){let{verticalX:t,verticalMinY:n,verticalMaxY:r,horizontalY:i,horizontalMinX:a,horizontalMaxX:o}=e,[s,l]=this.context.canvas.getSize(),{offset:u}=this.options;null!==i?Object.assign(this.horizontalLine.style,{x1:u===1/0?0:a-u,y1:i,x2:u===1/0?s:o+u,y2:i,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==t?Object.assign(this.verticalLine.style,{x1:t,y1:u===1/0?0:n-u,x2:t,y2:u===1/0?l:r+u,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden";}getDelta(e){let t=this.context.graph.getZoom();return(0,s.divide)([e.dx,e.dy],t);}bindEvents(){return u(this,void 0,void 0,function*(){let{graph:e}=this.context;e.on(a.NodeEvent.DRAG_START,this.onDragStart),e.on(a.NodeEvent.DRAG,this.onDrag),e.on(a.NodeEvent.DRAG_END,this.onDragEnd);});}unbindEvents(){let{graph:e}=this.context;e.off(a.NodeEvent.DRAG_START,this.onDragStart),e.off(a.NodeEvent.DRAG,this.onDrag),e.off(a.NodeEvent.DRAG_END,this.onDragEnd);}destroyElements(){var e,t;null===(e=this.horizontalLine)||void 0===e||e.destroy(),null===(t=this.verticalLine)||void 0===t||t.destroy();}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy();}}d.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};let h=(e,t)=>Math.abs(e-t),f=(e,t)=>"function"==typeof t?t(e):e.getShape(t);},fb09bcee:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"d3LinearNice",{enumerable:!0,get:function(){return i;}});var r=n("a4a27411");let i=(e,t,n=5)=>{let i;let a=[e,t],o=0,s=a.length-1,l=a[o],u=a[s];return u<l&&([l,u]=[u,l],[o,s]=[s,o]),(i=(0,r.tickIncrement)(l,u,n))>0?(l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i,i=(0,r.tickIncrement)(l,u,n)):i<0&&(l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i,i=(0,r.tickIncrement)(l,u,n)),i>0?(a[o]=Math.floor(l/i)*i,a[s]=Math.ceil(u/i)*i):i<0&&(a[o]=Math.ceil(l*i)/i,a[s]=Math.floor(u*i)/i),a;};},fb1d3f6a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),(0,n("a985d8b9").registerBuiltInExtensions)();},fb2b1989:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Component",{enumerable:!0,get:function(){return s;}});var r=n("18f14020"),i=n("9225b8d3"),a=n("01a29d03");function o(){(0,a.visibility)(this,"hidden"!==this.attributes.visibility);}var s=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this,(0,a.deepAssign)({},{style:n},t))||this;return r.initialized=!1,r._defaultOptions=n,r;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=(0,a.createOffscreenGroup)(this)),this._offscreen;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions;},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0;},t.prototype.disconnectedCallback=function(){var e;null===(e=this._offscreen)||void 0===e||e.destroy();},t.prototype.attributeChangedCallback=function(e){"visibility"===e&&o.call(this);},t.prototype.update=function(e,t){var n;return this.attr((0,a.deepAssign)({},this.attributes,e||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,t);},t.prototype.clear=function(){this.removeChildren();},t.prototype.bindEvents=function(e,t){},t.prototype.getSubShapeStyle=function(e){return e.x,e.y,e.transform,e.transformOrigin,e.class,e.className,e.zIndex,(0,r.__rest)(e,["x","y","transform","transformOrigin","class","className","zIndex"]);},t;}(i.CustomElement);},fba51a74:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{isStyleEqual:function(){return a;},reassignTo:function(){return i;}});var r=n("81401a10");function i(e,t,n,i,a){let o=(0,r.idOf)(i),s=`${n}s`,l=a?i:e.add[s].get(o)||e.update[s].get(o)||e.remove[s].get(o)||i;Object.entries(e).forEach(([e,n])=>{t===e?n[s].set(o,l):n[s].delete(o);});}function a(e,t){return Object.keys(e).every(n=>e[n]===t[n]);}},fc792d64:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Timebar",{enumerable:!0,get:function(){return f;}});var r=n("18f14020"),i=n("abe9d8d6"),a=n("c086f503"),o=n("9225b8d3"),s=n("01a29d03"),l=n("9b91cc25"),u=n("014bbf9e"),c=n("9e3736cb"),d=n("bc814306"),h=n("3cf5da85"),f=function(e){function t(n){var i=e.call(this,(0,s.deepAssign)({},t.defaultOptions,n))||this;i.axis=i.appendChild(new l.Axis({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),i.timeline=i.appendChild(new u.Slider({style:{onChange:function(e){i.handleSliderChange(e);}}})),i.controller=i.appendChild(new c.Controller({})),i.states={},i.handleSliderChange=function(e){var t,n=Array.isArray(t=i.states.values)?(0,r.__spreadArray)([],(0,r.__read)(t),!1):t;i.setBySliderValues(e),i.dispatchOnChange(n);};var a=i.attributes,o=a.selectionType,d=a.chartType,h=a.speed,f=a.state,p=a.playMode,v=a.values;return i.states={chartType:d,playMode:p,selectionType:o,speed:h,state:f},i.setByTimebarValues(v),i;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.data.sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:0;});},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"space",{get:function(){var e,t=this.attributes,n=t.x,r=t.y,a=t.width,o=t.height,l=t.type,u=t.controllerHeight,c=(0,i.clamp)(+o-u,0,+o),d=new s.BBox(n,r+ +o-u,+a,u),h=0;"chart"===l?(h=35,e=new s.BBox(n,r+c-h,+a,h)):e=new s.BBox;var f="time"===l?10:c;return{axisBBox:e,controllerBBox:d,timelineBBox:new s.BBox(n,r+("time"===l?c:c-f),+a,f-h)};},enumerable:!1,configurable:!0}),t.prototype.setBySliderValues=function(e){var t,n,i=this.data,a=(0,r.__read)(Array.isArray(e)?e:[0,e],2),o=a[0],s=a[1],l=i.length,u=i[Math.floor(o*l)],c=i[Math.ceil(s*l)-(Array.isArray(e)?0:1)];this.states.values=[null!==(t=null==u?void 0:u.time)&&void 0!==t?t:i[0].time,null!==(n=null==c?void 0:c.time)&&void 0!==n?n:1/0];},t.prototype.setByTimebarValues=function(e){var t,n,i,a=this.data,o=(0,r.__read)(Array.isArray(e)?e:[void 0,e],2),s=o[0],l=o[1],u=a.find(function(e){return e.time===s;}),c=a.find(function(e){return e.time===l;});this.states.values=[null!==(t=null==u?void 0:u.time)&&void 0!==t?t:null===(n=a[0])||void 0===n?void 0:n.time,null!==(i=null==c?void 0:c.time)&&void 0!==i?i:1/0];},t.prototype.setByIndex=function(e){var t,n,i,a,o=this.data,s=(0,r.__read)(e,2),l=s[0],u=s[1];this.states.values=[null!==(n=null===(t=o[l])||void 0===t?void 0:t.time)&&void 0!==n?n:o[0].time,null!==(a=null===(i=this.data[u])||void 0===i?void 0:i.time)&&void 0!==a?a:1/0];},Object.defineProperty(t.prototype,"sliderValues",{get:function(){var e,t=this.states,n=t.values,i=t.selectionType,a=(0,r.__read)(Array.isArray(n)?n:[void 0,n],2),o=a[0],s=a[1],l=this.data,u=l.length,c="value"===i;return[(e=l.findIndex(function(e){return e.time===o;}),c?0:e>-1?e/u:0),function(){if(s===1/0)return 1;var e=l.findIndex(function(e){return e.time===s;});return e>-1?e/u:c?.5:1;}()];},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var e=this.states,t=e.values,n=e.selectionType,i=(0,r.__read)(Array.isArray(t)?t:[this.data[0].time,t],2),a=i[0],o=i[1];return"value"===n?o:[a,o];},enumerable:!1,configurable:!0}),t.prototype.getDatumByRatio=function(e){var t=this.data,n=Math.floor(e*(t.length-1));return t[n];},Object.defineProperty(t.prototype,"chartHandleIconShape",{get:function(){var e=this.states.selectionType,t=this.space.timelineBBox.height;return"range"===e?function(e){return new d.ChartModeHandle({style:{type:e,height:t,iconSize:t/6}});}:function(){return new o.Line({style:{x1:0,y1:-t/2,x2:0,y2:t/2,lineWidth:2,stroke:"#c8c8c8"}});};},enumerable:!1,configurable:!0}),t.prototype.getChartStyle=function(e){var t=this,n=e.x,i=e.y,a=e.width,o=e.height,l=this.states,u=l.selectionType,c=l.chartType,f=this.data,p=this.attributes,v=p.type,g=p.labelFormatter,m=(0,s.subStyleProps)(this.attributes,"chart"),y=(m.type,(0,r.__rest)(m,["type"])),b="range"===u;if("time"===v)return(0,r.__assign)({handleIconShape:function(){return new d.TimeModeHandle({});},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:b?-15:0,autoFitLabel:b,handleSpacing:b?-15:0,trackFill:"#edeeef",trackLength:a,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:u,values:this.sliderValues,formatter:function(e){if(g)return g(e);var n=t.getDatumByRatio(e).time;return"number"==typeof n?(0,h.parseBySeries)(n):(0,s.formatTime)(n,"YYYY-MM-DD HH:mm:ss");},transform:"translate(".concat(n,", ").concat(i,")"),zIndex:1},y);var E="range"===u?5:0,x=f.map(function(e){return e.value;});return(0,r.__assign)({handleIconOffset:E,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:x,sparklineType:c,sparklineScale:.8,trackLength:a,trackSize:o,type:u,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(i,")"),zIndex:1},y);},t.prototype.renderChart=function(e){void 0===e&&(e=this.space.timelineBBox),this.timeline.update(this.getChartStyle(e));},t.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues);},t.prototype.getAxisStyle=function(e){var t=this.data,n=this.attributes,i=n.interval,a=n.labelFormatter,o=(0,s.subStyleProps)(this.attributes,"axis"),l=e.x,u=e.y,c=e.width,d=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t),!1),[{time:0}],!1).map(function(e,t,n){var r=e.time;return{label:"".concat(r),value:t/(n.length-1),time:r};});return(0,r.__assign)({startPos:[l,u],endPos:[l+c,u],data:d,labelFilter:function(e,t){return t<d.length-1;},labelFormatter:function(e){var t=e.time;return a?a(t):(0,h.labelFormatter)(t,i);}},o);},t.prototype.renderAxis=function(e){void 0===e&&(e=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(e));},t.prototype.renderController=function(e){void 0===e&&(e=this.space.controllerBBox);var t=this.attributes.type,n=this.states,i=n.state,a=n.speed,o=n.selectionType,l=n.chartType,u=(0,s.subStyleProps)(this.attributes,"controller"),c=this,d=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},e),{iconSize:20,speed:a,state:i,selectionType:o,chartType:l,onChange:function(e,t){var n=t.value;switch(e){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(n);break;case"backward":c.internalBackward();break;case"playPause":"play"===n?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(n);break;case"chartType":c.handleChartTypeChange(n);}}}),u);"time"===t&&(d.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(d);},t.prototype.dispatchOnChange=function(e){var t,n=this.data,i=this.attributes.onChange,a=this.states,o=a.values,s=a.selectionType,l=(0,r.__read)(o,2),u=l[0],c=l[1],d=c===1/0?n.at(-1).time:c;(!e||(t="range"===s?[u,d]:d,Array.isArray(e)?!Array.isArray(t)||e[0]!==t[0]||e[1]!==t[1]&&e[1]!==1/0&&t[1]!==1/0:Array.isArray(t)||e!==t))&&null!=i&&i("range"===s?[u,d]:d);},t.prototype.internalReset=function(e){var t,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===r?[0,1]:[0,0]),this.renderController(),this.updateSelection(),e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onReset)||void 0===n||n.call(t),this.dispatchOnChange());},t.prototype.reset=function(){this.internalReset();},t.prototype.moveSelection=function(e,t){var n,a,o,s,l,u,c=this.data,d=c.length,h=this.states,f=h.values,p=h.selectionType,v=h.playMode,g=(0,r.__read)(f,2),m=g[0],y=g[1],b=c.findIndex(function(e){return e.time===m;}),E=c.findIndex(function(e){return e.time===y;});-1===E&&(E=d);var x="backward"===e?-1:1;"range"===p?"acc"===v?(u=[b,E+x],-1===x&&b===E&&(u=[b,d])):u=[b+x,E+x]:u=[b,E+x];var k=(n=u,o=(a=(0,r.__read)(n.sort(function(e,t){return e-t;}),2))[0],s=a[1],l=function(e){return(0,i.clamp)(e,0,d);},s>d?"value"===p?[0,0]:"acc"===v?[l(o),l(o)]:[0,l(s-o)]:o<0?"acc"===v?[0,l(s)]:[l(o+d-s),d]:[l(o),l(s)]);return this.setByIndex(k),this.updateSelection(),k;},t.prototype.internalBackward=function(e){var t,n,r=this.moveSelection("backward",e);return e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onBackward)||void 0===n||n.call(t),this.dispatchOnChange()),r;},t.prototype.backward=function(){this.internalBackward();},t.prototype.internalPlay=function(e){var t,n,r=this,i=this.data,a=this.attributes.loop,o=this.states.speed;this.playInterval=window.setInterval(function(){r.internalForward()[1]!==i.length||a||(r.internalPause(),r.renderController());},1e3/(void 0===o?1:o)),this.states.state="play",e||null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onPlay)||void 0===n||n.call(t);},t.prototype.play=function(){this.internalPlay();},t.prototype.internalPause=function(e){var t,n;clearInterval(this.playInterval),this.states.state="pause",e||null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onPause)||void 0===n||n.call(t);},t.prototype.pause=function(){this.internalPause();},t.prototype.internalForward=function(e){var t,n,r=this.moveSelection("forward",e);return e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onForward)||void 0===n||n.call(t),this.dispatchOnChange()),r;},t.prototype.forward=function(){this.internalForward();},t.prototype.handleSpeedChange=function(e){var t,n;this.states.speed=e,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onSpeedChange)||void 0===n||n.call(t,e);},t.prototype.handleSelectionTypeChange=function(e){var t,n;this.states.selectionType=e,this.renderChart(),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onSelectionTypeChange)||void 0===n||n.call(t,e);},t.prototype.handleChartTypeChange=function(e){var t,n;this.states.chartType=e,this.renderChart(),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onChartTypeChange)||void 0===n||n.call(t,e);},t.prototype.render=function(){var e=this.space,t=e.axisBBox,n=e.controllerBBox,r=e.timelineBBox;this.renderController(n),this.renderAxis(t),this.renderChart(r),"play"===this.states.state&&this.internalPlay();},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.internalPause(!0);},t.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},t;}(a.Component);},fc95c318:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{groupByChangeType:function(){return o;},reduceDataChanges:function(){return a;}});var r=n("abe9d8d6"),i=n("81401a10");function a(e){let t={Added:new Map,Updated:new Map,Removed:new Map};return e.forEach(e=>{let{type:n,value:r}=e,a=(0,i.idOf)(r);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)t.Added.set(a,e);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n){if(t.Added.has(a))t.Added.set(a,{type:n.replace("Updated","Added"),value:r});else if(t.Updated.has(a)){let{original:e}=t.Updated.get(a);t.Updated.set(a,{type:n,value:r,original:e});}else t.Removed.has(a)||t.Updated.set(a,e);}else("NodeRemoved"===n||"EdgeRemoved"===n||"ComboRemoved"===n)&&(t.Added.has(a)?t.Added.delete(a):(t.Updated.has(a)&&t.Updated.delete(a),t.Removed.set(a,e)));}),[...Array.from(t.Added.values()),...Array.from(t.Updated.values()),...Array.from(t.Removed.values())];}function o(e){let{NodeAdded:t=[],NodeUpdated:n=[],NodeRemoved:i=[],EdgeAdded:a=[],EdgeUpdated:o=[],EdgeRemoved:s=[],ComboAdded:l=[],ComboUpdated:u=[],ComboRemoved:c=[]}=(0,r.groupBy)(e,e=>e.type);return{add:{nodes:t,edges:a,combos:l},update:{nodes:n,edges:o,combos:u},remove:{nodes:i,edges:s,combos:c}};}},fc97b607:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{BaseCombo:function(){return r.BaseCombo;},CircleCombo:function(){return i.CircleCombo;},RectCombo:function(){return a.RectCombo;}});var r=n("751c3a20"),i=n("dfa93ec1"),a=n("95ad441e");},fce32b31:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"scaleLinearExpansion",{enumerable:!0,get:function(){return a;}});var r=n("8eaa2cc4"),i=n("4264133e");function a(e,t){let n=e.length;if(1===n){let n=(0,r.twoProduct)(e[0],t);return n[0]?n:[n[1]];}let a=Array(2*n),o=[.1,.1],s=[.1,.1],l=0;(0,r.twoProduct)(e[0],t,o),o[0]&&(a[l++]=o[0]);for(let u=1;u<n;++u){(0,r.twoProduct)(e[u],t,s);let n=o[1];(0,i.fastTwoSum)(n,s[0],o),o[0]&&(a[l++]=o[0]);let c=s[1],d=o[1],h=c+d,f=d-(h-c);o[1]=h,f&&(a[l++]=f);}return o[1]&&(a[l++]=o[1]),0===l&&(a[l++]=0),a.length=l,a;}},fd6f263b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Quadratic",{enumerable:!0,get:function(){return o;}});var r=n("a2c47206"),i=n("cdd49f4a"),a=n("177711d9");class o extends a.BaseEdge{constructor(e){super((0,i.mergeOptions)({style:o.defaultStyleProps},e));}getKeyPath(e){let{curvePosition:t,curveOffset:n}=e,[i,a]=this.getEndpoints(e),o=e.controlPoint||(0,r.getCurveControlPoint)(i,a,t,n);return(0,r.getQuadraticPath)(i,a,o);}}o.defaultStyleProps={curvePosition:.5,curveOffset:30};},fdbbfe44:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Continuous",{enumerable:!0,get:function(){return E;}});var r=n("18f14020"),i=n("f7bb74fc"),a=n("a4504c9b"),o=n("abe9d8d6"),s=n("c086f503"),l=n("01a29d03"),u=n("9b91cc25"),c=n("cd5371db"),d=n("c69adf7a"),h=n("2e4c3b5a"),f=n("2023ec2c"),p=n("51bc7eb7"),v=n("b81750fa"),g=n("c28581c9"),m=n("54522439"),y=n("7000340e"),b=n("dbd5a5c2"),E=function(e){function t(t){var n=e.call(this,t,p.CONTINUOUS_DEFAULT_OPTIONS)||this;return n.eventToOffsetScale=new a.Linear({}),n.innerRibbonScale=new a.Linear({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(e){var t=n.attributes,r=t.data,i=t.block;e.stopPropagation();var a=n.getValueByCanvasPoint(e);if(i){var o=(0,y.getNextTickValue)(r.map(function(e){return e.value;}),a).range,s=n.getRealSelection(o);n.showIndicator((o[0]+o[1])/2,"".concat(s[0],"-").concat(s[1])),n.dispatchIndicated(a,o);}else{var l=n.getTickValue(a);n.showIndicator(l,"".concat(n.getRealValue(l))),n.dispatchIndicated(l);}},n.onDragStart=function(e){return function(t){t.stopPropagation(),n.attributes.slidable&&(n.target=e,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(t)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd));};},n.onDragging=function(e){var t=n.target;n.updateMouse();var i=(0,r.__read)(n.selection,2),a=i[0],o=i[1],s=n.getTickValue(n.getValueByCanvasPoint(e)),l=s-n.prevValue;"start"===t?a!==s&&n.updateSelection(s,o):"end"===t?o!==s&&n.updateSelection(a,s):"ribbon"===t&&0!==l&&(n.prevValue=s,n.updateSelection(l,l,!0));},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd);},n;}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5);},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var e=this.attributes,t=e.width,n=e.height;return new l.BBox(0,0,t,n);},t.prototype.render=function(e,t){var n=this,r=e.classNamePrefix,i=t.className||"legend-continuous";r?t.attr("className","".concat(i," ").concat(r,"legend")):t.className||t.attr("className","legend-continuous");var a=e.showLabel;this.renderTitle((0,l.select)(t));var o=this.availableSpace,s=o.x,u=o.y,c=(0,l.select)(t).maybeAppendByClassName(p.CLASS_NAMES.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(u,")")}),d=c.maybeAppendByClassName(p.CLASS_NAMES.labelGroup,"g").styles({zIndex:1});(0,l.ifShow)(!!a,d,function(e){n.renderLabel(e);});var h=c.maybeAppendByClassName(p.CLASS_NAMES.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(p.CLASS_NAMES.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(h),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles();},Object.defineProperty(t.prototype,"range",{get:function(){var e=this.attributes,t=e.data,n=e.domain;return n?{min:n[0],max:n[1]}:{min:Math.min.apply(Math,(0,r.__spreadArray)([],(0,r.__read)(t.map(function(e){return e.value;})),!1)),max:Math.max.apply(Math,(0,r.__spreadArray)([],(0,r.__read)(t.map(function(e){return e.value;})),!1))};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var e=this.range,t=e.min,n=e.max;return this.innerRibbonScale.update({domain:[t,n],range:[0,1]}),this.innerRibbonScale;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var e=(0,r.__read)(this.selection,2),t=e[0],n=e[1],i=this.ribbonScale;return[i.map(t),i.map(n)];},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var e=this.range,t=e.min,n=e.max,i=this.attributes.defaultValue,a=(0,r.__read)(void 0===i?[t,n]:i,2);return[a[0],a[1]];},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(e,t){return(0,b.ifHorizontal)(this.attributes.orientation,"function"==typeof e?e():e,"function"==typeof t?t():t);},t.prototype.renderTitle=function(e){var t=this.attributes,n=t.showTitle,i=t.titleText,a=t.width,o=t.height,s=t.classNamePrefix,u=(0,l.subStyleProps)(this.attributes,"title"),c=(0,r.__assign)((0,r.__assign)({},u),{width:a,height:o,text:i,classNamePrefix:s}),d=this;e.selectAll(p.CLASS_NAMES.title.class).data(n?[i]:[]).join(function(e){return e.append(function(){return new f.Title({style:c});}).attr("className",p.CLASS_NAMES.title.name).each(function(){d.title=this;});},function(e){return e.update(c);},function(e){return e.each(function(){d.title=void 0;}).remove();});},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var e=this.attributes,t=e.width,n=e.height;return new l.BBox(0,0,t,n);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var e=this.attributes;return({vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}})[e.orientation][e.labelDirection];},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){if(!this.attributes.showLabel)return new l.BBox(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var e,t=(null===(e=this.label.querySelector(c.CLASS_NAMES.labelGroup.class))||void 0===e?void 0:e.children.slice(-1)[0]).getBBox(),n=t.width,r=t.height;return this.cacheLabelBBox=new l.BBox(0,0,n,r),this.cacheLabelBBox;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var e=this.attributes,t=e.showLabel,n=e.labelSpacing;if(!t)return{width:0,height:0,size:0,length:0};var r=this.labelBBox,i=r.width,a=r.height,o=this.ifHorizontal(a,i)+(void 0===n?0:n)+this.labelFixedSpacing,s=this.ifHorizontal(i,a);return{width:i,height:a,size:o,length:s};},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var e=this.attributes,t=e.showHandle,n=e.ribbonSize,i=this.availableSpace,a=i.width,o=i.height,s=this.labelShape,u=s.size,c=s.length,d=(0,r.__read)(this.ifHorizontal([o,a],[a,o]),2),h=d[0],f=d[1],p=t?this.handleShape:{size:0,length:0},v=p.size,g=p.length,m=this.handleOffsetRatio,y=0,b=this.labelPosition;y=n||(["bottom","right"].includes(b)?Math.min(h-u,(h-v)/m):h*(1-m)>v?Math.max(h-u,0):Math.max((h-u-v)/m,0));var E=Math.max(g,c),x=f-E,k=(0,r.__read)(this.ifHorizontal([x,y],[y,x]),2),S=k[0],T=k[1],M=["top","left"].includes(b)?u:0,w=(0,r.__read)(this.ifHorizontal([E/2,M],[M,E/2]),2),N=w[0],C=w[1];return new l.BBox(N,C,S,T);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var e=this.ribbonBBox,t=e.width,n=e.height;return this.ifHorizontal({size:n,length:t},{size:t,length:n});},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(e){var t=this.attributes,n=t.data,r=t.type,i=t.orientation,a=t.color,o=t.block,s=t.classNamePrefix,u=(0,l.subStyleProps)(this.attributes,"ribbon"),c=this.range,d=c.min,h=c.max,f=this.ribbonBBox,g=f.x,y=f.y,b=this.ribbonShape,E=b.length,x=b.size,k=(0,l.deepAssign)({transform:"translate(".concat(g,", ").concat(y,")"),length:E,size:x,type:r,orientation:i,color:a,block:o,partition:n.map(function(e){return(e.value-d)/(h-d);}),range:this.ribbonRange,classNamePrefix:s},u),S=(0,v.getLegendClassName)(p.CLASS_NAMES.ribbon.name,p.CLASSNAME_SUFFIX_MAP.ribbon,s);this.ribbon=e.maybeAppendByClassName(p.CLASS_NAMES.ribbon,function(){return new m.Ribbon({style:k,className:S});}).update(k);},t.prototype.getHandleClassName=function(e){return"".concat(p.CLASS_NAMES.prefix("".concat(e,"-handle")));},t.prototype.renderHandles=function(){var e=this.attributes,t=e.showHandle,n=e.orientation,i=e.classNamePrefix,a=(0,l.subStyleProps)(this.attributes,"handle"),o=(0,r.__read)(this.selection,2),s=o[0],u=o[1],c=(0,r.__assign)((0,r.__assign)({},a),{orientation:n,classNamePrefix:i}),d=a.shape,f="basic"===(void 0===d?"slider":d)?g.Handle:h.Handle,m=this,y=(0,v.getLegendClassName)(p.CLASS_NAMES.handle.name,p.CLASSNAME_SUFFIX_MAP.handle,i);this.handlesGroup.selectAll(p.CLASS_NAMES.handle.class).data(t?[{value:s,type:"start"},{value:u,type:"end"}]:[],function(e){return e.type;}).join(function(e){return e.append(function(){return new f({style:c,className:y});}).attr("className",function(e){var t=e.type;return"".concat(y," ").concat(m.getHandleClassName(t));}).each(function(e){var t=e.type,n=e.value;this.update({labelText:n}),m["".concat(t,"Handle")]=this,this.addEventListener("pointerdown",m.onDragStart(t));});},function(e){return e.update(c).each(function(e){var t=e.value;this.update({labelText:t});});},function(e){return e.each(function(e){var t=e.type;m["".concat(t,"Handle")]=void 0;}).remove();});},t.prototype.adjustHandles=function(){var e=(0,r.__read)(this.selection,2),t=e[0],n=e[1];this.setHandlePosition("start",t),this.setHandlePosition("end",n);var i=this.attributes,a=i.classNamePrefix,o=i.showHandle,s=(0,l.subStyleProps)(this.attributes,"handle").shape;o&&"slider"===(void 0===s?"slider":s)&&a&&(this.startHandle&&this.updateSliderHandleClassNames(this.startHandle,a),this.endHandle&&this.updateSliderHandleClassNames(this.endHandle,a));},t.prototype.updateSliderHandleClassNames=function(e,t){var n=e.container||e,r=n.querySelector(".handle-icon-rect");if(r){var i=(0,v.getLegendClassName)("handle-icon-rect",p.CLASSNAME_SUFFIX_MAP.handleMarker,t);r.setAttribute("class",i),r.querySelectorAll("line").forEach(function(e){var n=(e.getAttribute("class")||"").split(" ")[0],r=(0,v.getLegendClassName)(n,p.CLASSNAME_SUFFIX_MAP.handleMarker,t);e.setAttribute("class",r);});}var a=n.querySelector(".handle-label");if(a){var o=(0,v.getLegendClassName)("handle-label",p.CLASSNAME_SUFFIX_MAP.handleLabel,t);a.setAttribute("class",o);}},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new l.BBox(0,0,0,0);var e=this.startHandle.getBBox(),t=e.width,n=e.height,i=this.endHandle.getBBox(),a=i.width,o=i.height,s=(0,r.__read)([Math.max(t,a),Math.max(n,o)],2),u=s[0],c=s[1];return this.cacheHandleBBox=new l.BBox(0,0,u,c),this.cacheHandleBBox;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var e=this.handleBBox,t=e.width,n=e.height,i=(0,r.__read)(this.ifHorizontal([n,t],[t,n]),2);return{width:t,height:n,size:i[0],length:i[1]};},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(e,t){var n=this.attributes.handleFormatter,i=this.ribbonBBox,a=i.x,o=i.y,s=this.ribbonShape.size,l=this.getOffset(t),u=(0,r.__read)(this.ifHorizontal([a+l,o+s*this.handleOffsetRatio],[a+s*this.handleOffsetRatio,o+l]),2),c=u[0],d=u[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(e))).node();null==h||h.update({transform:"translate(".concat(c,", ").concat(d,")"),formatter:n});},t.prototype.renderIndicator=function(e){var t=this.attributes.classNamePrefix,n=(0,l.subStyleProps)(this.attributes,"indicator"),r=(0,v.getLegendClassName)(p.CLASS_NAMES.indicator.name,p.CLASSNAME_SUFFIX_MAP.indicator,t);this.indicator=e.maybeAppendByClassName(p.CLASS_NAMES.indicator,function(){return new d.Indicator({style:n,className:r});}).update(n);},Object.defineProperty(t.prototype,"labelData",{get:function(){var e=this;return this.attributes.data.reduce(function(t,n,i,a){var o,s,l=null!==(o=null==n?void 0:n.id)&&void 0!==o?o:i.toString();if(t.push((0,r.__assign)((0,r.__assign)({},n),{id:l,index:i,type:"value",label:null!==(s=null==n?void 0:n.label)&&void 0!==s?s:n.value.toString(),value:e.ribbonScale.map(n.value)})),i<a.length-1){var u=a[i+1],c=(0,r.__read)([n.value,u.value],2),d=c[0],h=c[1],f=(d+h)/2;t.push((0,r.__assign)((0,r.__assign)({},n),{id:l,index:i,type:"range",range:[d,h],label:[d,h].join("~"),value:e.ribbonScale.map(f)}));}return t;},[]);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var e=(0,r.__read)(["center","middle"],2),t=e[0],n=e[1],i=this.labelPosition;return"top"===i?n="bottom":"bottom"===i?n="top":"left"===i?t="end":"right"===i&&(t="start"),{labelTextAlign:t,labelTextBaseline:n};},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(e){var t=this.attributes,n=t.showTick,i=t.labelFilter,a=t.labelFormatter,o=(0,l.subStyleProps)(this.attributes,"tick"),s=(0,l.subStyleProps)(this.attributes,"label"),c=s.align,d=(0,l.deepAssign)((0,r.__assign)({showLine:!1,showGrid:!1,showTick:void 0!==n&&n,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),(0,l.superStyleProps)(o,"tick"),(0,l.superStyleProps)(s,"label"),{data:this.labelData}),h=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},d),{tickFilter:function(e,t,n){return(null==e?void 0:e.type)==="value"&&(!i||i(e,e.index,n.filter(function(e){return"value"!==e.type;})));},labelFilter:function(e,t,n){return(null==e?void 0:e.type)===c&&(!i||i(e,e.index,n.filter(function(e){return e.type===c;})));},labelFormatter:a}),{labelOverlap:[{type:"hide"}]});this.label=e.maybeAppendByClassName(p.CLASS_NAMES.label,function(){return new u.Axis({style:h});}).node(),this.label.update(h,!1);},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var e=this.attributes,t=e.showTick,n=e.labelDirection,i=e.labelSpacing,a=e.tickLength,o=this.ribbonShape.size,s=this.labelPosition,l=this.labelFixedSpacing,u=(0,r.__read)([0,0,0],3),c=u[0],d=u[1],h=u[2],f=null!=a?a:o;return t?(h=f,d=l,"positive"===n?"right"===s?(c=f,h=f):"bottom"===s&&(c=h):"negative"===n&&("top"===s?c=o:"left"===s&&(c=o))):"positive"===n?"right"===s?d=f:"bottom"===s&&(c=o+l,d=i):"negative"===n&&("left"===s?d=i:"top"===s&&(d=i)),{offset:c,spacing:d,tickLength:h};},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){if(this.attributes.showLabel){var e=this.ribbonBBox,t=e.x,n=e.y,i=e.width,a=e.height,o=this.labelAxisStyle,s=o.offset,l=o.spacing,u=o.tickLength,c=(0,r.__read)(this.ifHorizontal([[t,n+s],[t+i,n+s]],[[t+s,n+a],[t+s,n]]),2),d=c[0],h=c[1];this.label.update({startPos:d,endPos:h,tickLength:u,labelSpacing:l},!1);}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator);},t.prototype.showIndicator=function(e,t){if(void 0===t&&(t="".concat(e)),!this.attributes.showIndicator||"number"!=typeof e){this.hideIndicator();return;}var n=this.range,r=n.min,i=n.max,a=this.ribbonBBox,s=a.x,u=a.y,c=(0,o.clamp)(e,r,i),d=this.getOffset(c),h=this.ifHorizontal([d+s,u],[s,d+u]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:t}),(0,l.show)(this.indicator.node());},t.prototype.hideIndicator=function(){(0,l.hide)(this.indicator.node());},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing");},t.prototype.setSelection=function(e,t){this.updateSelection(e,t);},t.prototype.updateSelection=function(e,t,n){void 0===n&&(n=!1);var i,a=(0,r.__read)(this.selection,2),o=a[0],s=a[1],l=(0,r.__read)([e,t],2),u=l[0],c=l[1];n&&(u+=o,c+=s);var d=this.range,h=d.min,f=d.max;u=(i=(0,r.__read)((0,b.getSafetySelections)([h,f],[u,c],this.selection),2))[0],c=i[1],this.update({defaultValue:[u,c]}),this.dispatchSelection();},Object.defineProperty(t.prototype,"step",{get:function(){var e=this.attributes.step,t=void 0===e?1:e,n=this.range,r=n.min,i=n.max;return(0,o.isUndefined)(t)?(0,l.toPrecision)((i-r)*p.STEP_RATIO,0):t;},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(e){var t=this.attributes,n=t.data,r=t.block,i=this.range.min;return r?(0,y.getNextTickValue)(n.map(function(e){return e.value;}),e).tick:(0,b.getStepValueByValue)(e,this.step,i);},t.prototype.getValueByCanvasPoint=function(e){var t=this.range,n=t.min,i=t.max,a=(0,r.__read)(this.ribbon.node().getPosition(),2),s=a[0],u=a[1],c=this.ifHorizontal(s,u),d=this.ifHorizontal.apply(this,(0,r.__spreadArray)([],(0,r.__read)((0,l.getEventPos)(e)),!1));return(0,o.clamp)(this.getOffset(d-c,!0),n,i);},t.prototype.getOffset=function(e,t){void 0===t&&(t=!1);var n=this.range,r=n.min,i=n.max,a=this.ribbonShape.length,o=this.eventToOffsetScale;return(o.update({domain:[r,i],range:[0,a]}),t)?o.invert(e):o.map(e);},t.prototype.getRealSelection=function(e){var t=this.range.max,n=(0,r.__read)(e,2),i=n[0],a=n[1];return this.ifHorizontal([i,a],[t-a,t-i]);},t.prototype.getRealValue=function(e){var t=this.range.max;return this.ifHorizontal(e,t-e);},t.prototype.dispatchSelection=function(){var e=this.getRealSelection(this.selection),t=new i.CustomEvent("valuechange",{detail:{value:e}});this.dispatchEvent(t);},t.prototype.dispatchIndicated=function(e,t){var n=this,r=this.range.max,a=this.ifHorizontal(function(){return{value:e,range:t};},function(){return{value:r-e,range:t?n.getRealSelection(t):void 0};}),o=new i.CustomEvent("indicate",{detail:a});this.dispatchEvent(o);},t;}(s.Component);},fe00eb83:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{SortedArray:function(){return y;},aStarSearch:function(){return m;},estimateCost:function(){return f;},getNearestPoint:function(){return p;}});var r=n("abe9d8d6"),i=n("8a0aecd6"),a=n("bf1fd347"),o=n("71473486");let s={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:o.manhattanDistance},l=e=>`${Math.round(e[0])}|||${Math.round(e[1])}`;function u(e,t){let n=e=>Math.round(e/t);return(0,r.isNumber)(e)?n(e):e.map(n);}function c(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n||r?Math.atan2(r,n):0;}function d(e,t,n,r){let i=c(e,t);return function(e,t){let n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n;}(c(n[l(e)]||r,e),i);}let h=(e,t)=>{let{offset:n,gridSize:r}=t,a={};return e.forEach(e=>{if(!e||e.destroyed||!e.isVisible())return;let t=(0,i.getExpandedBBox)(e.getRenderBounds(),n);for(let e=u(t.min[0],r);e<=u(t.max[0],r);e+=1)for(let n=u(t.min[1],r);n<=u(t.max[1],r);n+=1)a[`${e}|||${n}`]=!0;}),a;};function f(e,t,n){return Math.min(...t.map(t=>n(e,t)));}function p(e,t,n){let r=e[0],i=n(e[0],t);for(let a=0;a<e.length;a++){let o=e[a],s=n(o,t);s<i&&(r=o,i=s);}return r;}let v=(e,t,n,r)=>{if(!t)return[e];let{directionMap:o,offset:s}=r,l=(0,i.getExpandedBBox)(t.getRenderBounds(),s),c=Object.keys(o).reduce((t,r)=>{if(n.includes(r)){let n=o[r],[s,u]=(0,i.getBBoxSize)(l),c=[e[0]+n.stepX*s,e[1]+n.stepY*u],d=(0,i.getBBoxSegments)(l);for(let n=0;n<d.length;n++){let r=(0,a.getLinesIntersection)([e,c],d[n]);r&&(0,i.isPointOnBBoxBoundary)(r,l)&&t.push(r);}}return t;},[]);return(0,i.isPointInBBox)(e,l)||c.push(e),c.map(e=>u(e,r.gridSize));},g=(e,t,n,r,i,a,s)=>{let u=[],c=[a[0]===r[0]?r[0]:e[0]*s,a[1]===r[1]?r[1]:e[1]*s];u.unshift(c);let h=e,f=t[l(h)];for(;f;){let e=f,r=h;d(e,r,t,n)&&(c=[e[0]===r[0]?c[0]:e[0]*s,e[1]===r[1]?c[1]:e[1]*s],u.unshift(c)),f=t[l(e)],h=e;}let v=p(i.map(e=>[e[0]*s,e[1]*s]),c,o.manhattanDistance);return u.unshift(v),u;};function m(e,t,n,r){let i;let a=(0,o.toVector2)(e.getCenter()),c=(0,o.toVector2)(t.getCenter()),p=Object.assign(s,r),{gridSize:m}=p,b=h(p.enableObstacleAvoidance?n:[e,t],p),E=u(a,m),x=u(c,m),k=v(a,e,p.startDirections,p),S=v(c,t,p.endDirections,p);k.forEach(e=>delete b[l(e)]),S.forEach(e=>delete b[l(e)]);let T={},M={},w={},N={},C={},_=new y;for(let e=0;e<k.length;e++){let t=k[e],n=l(t);T[n]=t,N[n]=0,C[n]=f(t,S,p.distFunc),_.add({id:n,value:C[n]});}let P=S.map(e=>l(e)),A=p.maximumLoops,O=1/0;for(let[e,t]of Object.entries(T))C[e]<=O&&(O=C[e],i=t);for(;Object.keys(T).length>0&&A>0;){let e=_.minId(!1);if(e)i=T[e];else break;let t=l(i);if(P.includes(t))return g(i,w,E,c,k,x,m);for(let e of(delete T[t],_.remove(t),M[t]=!0,Object.values(p.directionMap))){let n=(0,o.add)(i,[e.stepX,e.stepY]),r=l(n);if(M[r])continue;let a=d(i,n,w,E);if(a>p.maxAllowedDirectionChange||b[r])continue;T[r]||(T[r]=n);let s=p.penalties[a],u=p.distFunc(i,n)+(isNaN(s)?m:s),c=N[t]+u,h=N[r];h&&c>=h||(w[r]=i,N[r]=c,C[r]=c+f(n,S,p.distFunc),_.add({id:r,value:C[r]}));}A-=1;}return[];}class y{constructor(){this.arr=[],this.map={},this.arr=[],this.map={};}_innerAdd(e,t){let n=0,r=t-1;for(;r-n>1;){let t=Math.floor((n+r)/2);if(this.arr[t].value>e.value)r=t;else if(this.arr[t].value<e.value)n=t;else{this.arr.splice(t,0,e),this.map[e.id]=!0;return;}}this.arr.splice(r,0,e),this.map[e.id]=!0;}add(e){delete this.map[e.id];let t=this.arr.length;if(!t||this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return;}this._innerAdd(e,t);}remove(e){this.map[e]&&delete this.map[e];}_clearAndGetMinId(){let e;for(let t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e;}_findFirstId(){for(;this.arr.length;){let e=this.arr.shift();if(this.map[e.id])return e.id;}}minId(e){return e?this._clearAndGetMinId():this._findFirstId();}}},feabec46:function(e,t,n){"use strict";function r(e,t){let n=t<e?t:e,r=e>t?e:t;return e=>Math.min(Math.max(n,e),r);}n.d(t,"__esModule",{value:!0}),n.d(t,"createClamp",{enumerable:!0,get:function(){return r;}});},feb9c353:function(e,t,n){"use strict";function r({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):n;}function i(e){return"object"==typeof e?e.valueOf():e;}n.d(t,"__esModule",{value:!0}),n.d(t,"InternMap",{enumerable:!0,get:function(){return a;}});class a extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=i,null!==e)for(let[t,n]of e)this.set(t,n);}get(e){return super.get(r({map:this.map,initKey:this.initKey},e));}has(e){return super.has(r({map:this.map,initKey:this.initKey},e));}set(e,t){return super.set(function({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n);}({map:this.map,initKey:this.initKey},e),t);}delete(e){return super.delete(function({map:e,initKey:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n;}({map:this.map,initKey:this.initKey},e));}}},ffeef936:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"SnakeLayout",{enumerable:!0,get:function(){return s;}});var r=n("28792030"),i=n("db863a29"),a=n("7ed4a1e7"),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e));}catch(e){a(e);}}function s(e){try{l(r.throw(e));}catch(e){a(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(o,s);}l((r=r.apply(e,t||[])).next());});};class s extends a.BaseLayout{constructor(){super(...arguments),this.id="snake";}formatSize(e,t){let n="function"==typeof t?t:()=>t;return e.reduce((e,t)=>{let[r,a]=(0,i.parseSize)(n(t))||[0,0];return[Math.max(e[0],r),Math.max(e[1],a)];},[0,0]);}validate(e){let{nodes:t=[],edges:n=[]}=e,r={},i={},a={};t.forEach(e=>{r[e.id]=0,i[e.id]=0,a[e.id]=[];}),n.forEach(e=>{r[e.target]++,i[e.source]++,a[e.source].push(e.target);});let o=new Set,s=e=>{o.has(e)||(o.add(e),a[e].forEach(s));};if(s(t[0].id),o.size!==t.length)return!1;let l=t.filter(e=>0===r[e.id]),u=t.filter(e=>0===i[e.id]);return 1===l.length&&1===u.length&&t.filter(e=>1===r[e.id]&&1===i[e.id]).length===t.length-2;}execute(e,t){return o(this,void 0,void 0,function*(){var n;if(!this.validate(e))return e;let{nodeSize:i,padding:a,sortBy:o,cols:l,colGap:u,rowGap:c,clockwise:d,width:h,height:f}=Object.assign({},s.defaultOptions,this.options,t),[p,v,g,m]=(0,r.parsePadding)(a),y=this.formatSize(e.nodes||[],i),b=Math.ceil((e.nodes||[]).length/l),E=u||(h-m-v-l*y[0])/(l-1),x=c||(f-p-g-b*y[1])/(b-1);return(x===1/0||x<0)&&(x=0),(E===1/0||E<0)&&(E=0),{nodes:((o?null===(n=e.nodes)||void 0===n?void 0:n.sort(o):function(e){let{nodes:t=[],edges:n=[]}=e,r={},i={};t.forEach(e=>{r[e.id]=0,i[e.id]=[];}),n.forEach(e=>{r[e.target]++,i[e.source].push(e.target);});let a=[],o=[];for(t.forEach(e=>{0===r[e.id]&&a.push(e.id);});a.length>0;){let e=a.shift(),n=t.find(t=>t.id===e);o.push(n),i[e].forEach(e=>{r[e]--,0===r[e]&&a.push(e);});}return o;}(e))||[]).map((e,t)=>{let n=Math.floor(t/l),r=t%l,i=m+(d?n%2==0?r:l-1-r:n%2==0?l-1-r:r)*(y[0]+E)+y[0]/2,a=p+n*(y[1]+x)+y[1]/2;return{id:e.id,style:{x:i,y:a}};})};});}}s.defaultOptions={padding:0,cols:5,clockwise:!0};}}]);
//# sourceMappingURL=vendors_2-async.7c255a9c.js.map